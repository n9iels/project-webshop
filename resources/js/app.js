function PlatformLogo(e){switch(e=e.toUpperCase()){case"PS1":return"<img src='/resources/images/icons/ps1.png' />";case"PS4":return"<img src='/resources/images/icons/ps4.png' />";case"PC":return"<img src='/resources/images/icons/windows.png' />";case"XBOX":return"<img src='/resources/images/icons/xbox.png' />";case"NES":return"<img src='/resources/images/icons/nes.png' />";case"N64":return"<img src='/resources/images/icons/n64.png' />";case"NINTENDO SWITCH":return"<img src='/resources/images/icons/switch.png' />";default:return e;case"NINTENDO":return"<img src='/resources/images/publishers/nintendo.png' />";case"UBISOFT":return"<img src='/resources/images/publishers/ubisoft.png' />";case"ELECTRONIC ARTS":return"<img src='/resources/images/publishers/ea.png' />"}}function BeschikbaarheidKleur(e){return e<=0?"<img src='/resources/images/availability/buttonred.png' />":e>=1?"<img src='/resources/images/availability/buttongreen.png' />":e}function getOffset(e){return e=e.getBoundingClientRect(),{left:e.left+window.scrollX,top:e.top+window.scrollY}}function CookieHelper(){this.getCookie=function(e){for(var t=document.cookie.split(";"),n=0;n<t.length;n++){var i=t[n].split("=");if(i[0].trim()==e)return i[1]}},this.createCookie=function(e,t){var n=new Date;n.setTime(n.getTime()+864e5);var i="expires="+n.toUTCString();document.cookie=e+"="+t+";"+i+";path=/"},this.deleteCookie=function(e){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;"}}function showLoadScreen(){$("#component").html('<div class="spinner"><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div> </div>')}function onLoadPage(){$(".mmenu").empty(),$(".nav").clone().appendTo(".mmenu"),UserHelper.isAdmin()?($(".visible-admin").css("display","block"),$(".visible-customer").css("display","block"),$(".inloggen_text").hide()):UserHelper.isCustomer()?($(".visible-customer").css("display","block"),$(".inloggen_text").hide()):($(".visible-admin").hide(),$(".visible-customer").hide(),$("#inloggen_text").css("display","block"))}function UserHelper(){this.isLogedIn=function(){var e=CookieHelper.getCookie("access_token");return void 0!=e&&""!=e},this.isCustomer=function(){if(UserHelper.isLogedIn()){var e=this.decodeToken().usertype;if("customer"==e||"admin"==e)return!0}return!1},this.isAdmin=function(){if(UserHelper.isLogedIn()){var e=this.decodeToken().usertype;if("admin"==e)return!0}return!1},this.decodeToken=function(){var e=CookieHelper.getCookie("access_token");if(void 0!=e&&""!=e){var t=e.split(".")[1];return JSON.parse(atob(t))}},this.getUserInfo=function(e){$.ajax({url:"https://api.az-games.nl/user",type:"get",dataType:"json",headers:{Authorization:"Bearer "+CookieHelper.getCookie("access_token")},success:function(t){e(t)},error:function(e,t,n){Router.route("/login")}})}}function WishlistHelper(){this.addItem=function(e){$.ajax({url:"https://api.az-games.nl/wishlist/"+CookieHelper.getCookie("user_id")+"/"+e,type:"post",dataType:"json",data:JSON.stringify({}),headers:{Authorization:"Bearer "+CookieHelper.getCookie("access_token")},success:function(e){$(this).toggleClass("like--active"),alert("Product succesvol toegevoegd aan Wishlist.")},error:function(e,t,n){alert("Product is al in Wishlist.")}})}}$(document).on("click","span.like",function(e){$(this).toggleClass("like--active")}),$(document).on("click","span.single_like",function(e){$(this).toggleClass("single_like--active")}),$(document).on("click","a.order__navigate",function(e){if(e.preventDefault(),0==$(this).hasClass("disabled")){var t=$(this).data("step");$("ul.order-steps li").removeClass("active"),$("ul.order-steps li."+t).addClass("active"),$(".order__step").removeClass("order__step--active"),$("#"+t).addClass("order__step--active")}}),$(document).on("change","select#shipping_method",function(e){var t=$(this).val();""!=t?$(this).parents(".order__step").find(".btn--next").removeClass("disabled"):$(this).parents(".order__step").find(".btn--next").addClass("disabled"),$(".shipping__fields").hide(),$("."+t+"_fields").show()}),$(document).on("change","select#payment_method",function(e){var t=$(this).val();""!=t?($(this).parents(".order__step").find(".btn--next").removeClass("disabled"),$(this).parents(".order__step").find(".btn--next").attr("disabled",!1)):($(this).parents(".order__step").find(".btn--next").addClass("disabled"),$(this).parents(".order__step").find(".btn--next").attr("disabled",!0))});var Router=function(){function e(e,r){if(0!=t(e)&&""!=e){var o=n(e);switch(o[0]){case"":case"index.html":case"products":new ProductsController(new ProductsViewHelper,new ProductsModel).main();break;case"product":new ProductController(new ProductViewHelper,new ProductModel(o[1])).main();break;case"register":new RegisterController(new RegisterViewHelper,new RegisterModel).main();break;case"login":new LoginController(new LoginViewHelper,new LoginModel).main();break;case"logout":new LogoutController(new LogoutViewHelper,new LogoutModel).main();break;case"register":new RegisterController(new RegisterViewHelper,new RegisterModel).main();break;case"resetpassword":new ResetPasswordController(new ResetPasswordViewHelper,new ResetPasswordModel).main();break;case"wishlist":new WishlistController(new WishlistViewHelper,new WishlistModel).main();break;case"admin":new AdminController(new AdminViewHelper,new AdminModel).main();break;case"admin_user":new AdminUserController(new AdminUserViewHelper,new AdminUserModel(o[1])).main();break;case"order":new OrderController(new OrderViewHelper,new OrderModel).main();break;default:new ErrorController(new ErrorViewHelper).main()}0!=r&&""!=e&&"string"==typeof e&&(i({},"A-Z Games",e),$(".sidebar").removeClass("sidebar--open"),$(".overlay").removeClass("overlay--visible"),$("body").removeClass("sidebar--open"),showLoadScreen(),window.scrollTo(0,0))}}function t(e){return e.indexOf("http")==-1&&e.indexOf("www")==-1&&e.indexOf("mailto")==-1||(window.location=e,!1)}function n(e){return 0==e.indexOf("/")&&(e=e.substring(1)),null!=this.baseUrl&&e.indexOf(this.baseUrl)!=-1&&(e=e.substring(e.indexOf(this.baseUrl)+this.baseUrl.length)),e.split(/\/(.+)?/)}function i(e,t,n){window.history.pushState(e,t,n)}return baseUrl="project-webshop/",{route:e}};$(document).ready(function(){function e(e,t){t?$(e).removeClass("sidebar--open"):$(e).toggleClass("sidebar--open"),$(".overlay").toggleClass("overlay--visible"),$("body").toggleClass("sidebar--open")}$(".sidebar-toggle").click(function(t){t.preventDefault();var n=$(this).data("sidebar");e($("#"+n))}),$(".sidebar__close").click(function(t){e($(this).parent().parent())}),$(".overlay").click(function(t){e($(".sidebar"),!0)})}),$(document).on("mouseenter",".hasTooltip",function(e){var t=$(this).data("tooltip"),n=getOffset(this),i=$("<div class='tooltip'>"+t+"</div>");$("body").append(i),n.top=n.top+$(this).outerHeight(),n.left=n.left+$(this).outerWidth()/2-$(".tooltip").outerWidth()/2,i.css("left",n.left),i.css("top",n.top)}),$(document).on("mouseleave",".hasTooltip",function(e){$("body").find(".tooltip").remove()});var Router=new Router,CookieHelper=new CookieHelper,UserHelper=new UserHelper,WishlistHelper=new WishlistHelper;$.fn.serializeObject=function(){var e={},t=this.serializeArray();return $.each(t,function(){void 0!==e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),""!=this.value&&e[this.name].push(this.value)):""!=this.value&&(e[this.name]=this.value||"")}),e};var AdminModel=function(){function e(e){$.ajax({url:"https://api.az-games.nl/admin/users",type:"GET",dataType:"json",headers:{Authorization:"Bearer "+CookieHelper.getCookie("access_token")},success:function(t){e(t)},error:function(e,t,n){$("#component").load("/views/error/error.html")}})}return{getPage:e}},AdminUserModel=function(e){function t(t){$.ajax({url:"https://api.az-games.nl/admin/users/"+e,type:"GET",dataType:"json",headers:{Authorization:"Bearer "+CookieHelper.getCookie("access_token")},success:function(e){t(e[0])},error:function(e,t,n){$("#component").load("/views/error/error.html")}})}function n(e,t){e.date_of_birth=new Date(Date.UTC(e.jaar,e.maand,e.dag)),delete e.jaar,delete e.maand,delete e.dag,$.ajax({url:"https://api.az-games.nl/admin/users/"+e.user_id,type:"PATCH",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify(e),headers:{Authorization:"Bearer "+CookieHelper.getCookie("access_token")},success:function(e){t(e)},error:function(e,t,n){$("#component").load("/views/error/error.html")}})}function i(e,t){$.ajax({url:"https://api.az-games.nl/admin/users/"+e,type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+CookieHelper.getCookie("access_token")},success:function(e){t()},error:function(e,t,n){$("#component").load("/views/error/error.html")}})}return{getPage:t,saveUserInfo:n,deleteUser:i}},CartModel=function(){function e(e){var t=CookieHelper.getCookie("cart");void 0!=t&&e(JSON.parse(t))}function t(e,t){$.ajax({url:"https://api.az-games.nl/products/"+e,type:"get",contentType:"json",success:function(e){cart={ean_number:e[0].ean_number,title:e[0].title,price:e[0].price,image:e[0].image},t(cart);var n=CookieHelper.getCookie("cart");void 0==n?CookieHelper.createCookie("cart",JSON.stringify([cart])):(n=JSON.parse(n),n.push(cart),CookieHelper.createCookie("cart",JSON.stringify(n)))},error:function(e,t,n){$("#component").load("/views/error/error.html")}})}function n(e){for(cart=JSON.parse(CookieHelper.getCookie("cart")),i=0;i<cart.length;i++)if(cart[i].ean_number==e){cart.splice(i,1);break}CookieHelper.createCookie("cart",JSON.stringify(cart))}return{getCart:e,addProduct:t,removeProduct:n}},LoginModel=function(){function e(e,t,n){$.ajax({url:"https://api.az-games.nl/user/login",type:"GET",dataType:"json",headers:{Authorization:"Basic "+btoa(e+":"+t)},success:function(e){CookieHelper.createCookie("access_token",e.access_token),CookieHelper.createCookie("user_id",e.user_id),onLoadPage(),n(e)},error:function(e,t,n){$("#error_message").show()}})}return{login:e}},LogoutModel=function(){function e(e){function t(e){for(var t=document.cookie.split(";"),n=0;n<t.length;n++){var i=t[n].split("=");if(i[0].trim()==e)return i[1]}}$.ajax({url:"https://api.az-games.nl/user/logout",type:"post",dataType:"json",data:JSON.stringify({user_id:t("user_id")}),success:function(t){CookieHelper.deleteCookie("access_token"),CookieHelper.deleteCookie("user_id"),onLoadPage(),e(t)},error:function(e,t,n){$("#error_message").show()}})}return{logout:e}},OrderModel=function(){function e(e){var t=CookieHelper.getCookie("cart");e(void 0!=t&&""!=t?JSON.parse(t):[])}function t(e,t){e.status="paid",e.btw_percentage=21,e.order_date=new Date,e.delivery_costs=3.95,e.cart=JSON.parse(CookieHelper.getCookie("cart")),$.ajax({url:"https://api.az-games.nl/orders",type:"post",dataType:"json",data:JSON.stringify(e),headers:{Authorization:"Bearer "+CookieHelper.getCookie("access_token")},success:function(e){CookieHelper.deleteCookie("cart"),t()},error:function(e,t,n){console.log("someting went wrong")}})}return{getOrderInformation:e,saveOrder:t}},ProductsModel=function(){function e(e,t){$.ajax({url:"https://api.az-games.nl/products?"+e,type:"get",dataType:"json",success:function(e){t(e)},error:function(e,t,n){$("#component").load("/views/error/error.html")}})}return{getPage:e}},RegisterModel=function(){function e(e,t){e.date_of_birth=new Date(Date.UTC(e.jaar,e.maand,e.dag)),delete e.jaar,delete e.maand,delete e.dag,$.ajax({url:"https://api.az-games.nl/user/register",type:"post",dataType:"json",data:JSON.stringify({e_mail:e.e_mailadres,password:e.wachtwoord,first_name:e.voornaam,insertion:e.tussenvoegsel,surname:e.achternaam,gender:e.gender,date_of_birth:e.birth_date,phone_number:e.mobiel_nummer,secret_question:e.security_question,secret_question_answer:e.security_answer,postal_code:e.postcode,number:e.huisnummer,street_name:e.straatnaam,city:e.plaats}),success:function(e){t(e)},error:function(e,t,n){$("#regi_api_error_message").show()}})}return{register:e}},ResetPasswordModel=function(){function e(e,t){console.log(e),$.ajax({url:"https://api.az-games.nl/user/resetpassword",type:"post",dataType:"json",data:JSON.stringify({email:e.e_mailadres,secret_question_answer:e.security_answer,secret_question:e.security_question,new_password:e.wachtwoord,repeat_password:e.wachtwoord2}),success:function(e){t(e)},error:function(e,t,n){$("#reset_password_api_error_message").show()}})}return{resetpassword:e}},ProductModel=function(e){function t(t){$.ajax({url:"https://api.az-games.nl/products/"+e,type:"get",dataType:"json",success:function(e){t(e[0])},error:function(e,t,n){$("#component").load("/views/error/error.html")}})}return{GetProductInfo:t}},UserModel=function(e){function t(t){$.ajax({url:"https://api.az-games.nl/users/"+e,type:"get",dataType:"json",success:function(e){t(e[0])},error:function(e,t,n){$("#component").load("/error.html")}})}return{GetUserInfo:t}},WishlistModel=function(){function e(e){$.ajax({url:"https://api.az-games.nl/wishlist",type:"get",dataType:"json",headers:{Authorization:"Bearer "+CookieHelper.getCookie("access_token")},success:function(t){e(t)},error:function(e,t,n){$("#component").load("/views/error/error.html")}})}function t(e,t){$.ajax({url:"https://api.az-games.nl/wishlist/"+CookieHelper.getCookie("user_id"),type:"post",dataType:"json",data:JSON.stringify({wishlist_id:e.wishlist_id}),headers:{Authorization:"Bearer "+CookieHelper.getCookie("access_token")},success:function(e){t(e)},error:function(e,t,n){$("#component").load("/views/error/error.html")}})}function n(e,t){$.ajax({url:"https://api.az-games.nl/wishlist/"+CookieHelper.getCookie("user_id")+"/"+String(e),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+CookieHelper.getCookie("access_token")},success:function(e){t(e)},error:function(e,t,n){$("#component").load("/views/error/error.html")}})}return{getWishlist:e,addToWishlist:t,deleteFromWishlist:n}},AdminController=function(e,t){function n(){s.setActionListener(i)}function i(){o.getPage(r)}function r(e){s.setView(e)}var o=t,s=e;return{main:n}},AdminUserController=function(e,t){function n(){c.setActionListener(i),e.setSaveListener(o),e.setDeleteListener(s)}function i(){a.getPage(r)}function r(e){c.setView(e)}function o(e){e.preventDefault(),e.stopImmediatePropagation();var t=$(this).serializeObject();a.saveUserInfo(t,function(e){alert("Gebruiker succesvol geüpdate.")})}function s(e){a.deleteUser(e,function(){alert("Gebruiker succesvol gedelete."),Router.route("/admin")})}var a=t,c=e;return{main:n}},CartController=function(e,t){function n(){s.getCart(function(e){a.setView(e)})}function i(e){s.addProduct(e,function(e){a.addItem(e)})}function r(e){s.removeProduct(e,function(e){})}function o(){a.setActionListener(n),a.setAddProductListener(i),a.setRemoveListener(r)}var s=t,a=e;return{main:o}},DeleteController=function(e,t){},ErrorController=function(e){function t(){n.setView()}var n=e;return{main:t}},LoginController=function(e,t){function n(e){e.preventDefault(),e.stopImmediatePropagation();var t={};$.each($(this).serializeArray(),function(e,n){t[n.name]=n.value}),r.login(t.email,t.password,function(e){$(".inloggen_text").hide(),$(".uitloggen_text").show(),Router.route("products")})}function i(){o.setView(),o.setActionListener(n)}var r=t,o=e;return{main:i}},LogoutController=function(e,t){function n(e){r.logout(function(e){$(".inloggen_text").show(),$(".uitloggen_text").hide(),o.setView()})}function i(){o.setActionListener(n)}var r=t,o=e;return{main:i}},OrderController=function(e,t){function n(e){o.getOrderInformation(function(e){s.setView(e)})}function i(e){e.preventDefault(),e.stopImmediatePropagation();var t=$(this).serializeObject();o.saveOrder(t,function(){s.finishOrder(),s.clearCart()})}function r(){0==UserHelper.isLogedIn()?Router.route("/login"):(s.setActionListener(n),s.setOrderListener(i))}var o=t,s=e;return{main:r}},ProductsController=function(e,t){function n(){o.getPage("",function(e){s.setView(e)})}function i(e){e.preventDefault();var t=$(this).serialize();o.getPage(t,function(e){s.loadProducts(e)})}function r(){s.setActionListener(n),s.setFilterListener(i)}var o=t,s=e;return{main:r}},RegisterController=function(e,t){function n(){event.preventDefault(),$("#regi_api_error_message").hide(),$("#ww2_error_message").hide();var e={};$.each($(this).serializeArray(),function(t,n){e[n.name]=n.value}),e.birth_date=e.jaar+"-"+e.maand+"-"+e.dag;var t=!1,n=["voornaam","achternaam","postcode","huisnummer","e_mailadres","wachtwoord","wachtwoord2","security_answer"];$.each(n,function(e,t){$("#"+t).removeClass("invalid")}),$.each(n,function(n,i){""==e[i]&&($("#"+i).addClass("invalid"),t=!0)}),t&&(window.scrollTo(0,0),$("#register_error_message").show());var i=!1;return e.wachtwoord!=e.wachtwoord2&&(i=!0,$("#ww2_error_message").show(),$("#wachtwoord").addClass("invalid"),$("#wachtwoord2").addClass("invalid")),!t&&!i&&void r.register(e,function(e){o.setView("/views/register/after_register.html")})}function i(){o.setView("/views/register/register.html"),o.setActionListener(n)}var r=t,o=e;return{main:i}},ResetPasswordController=function(e,t){function n(){console.log("in actionPerformed"),event.preventDefault(),$("#reset_password_api_error_message").hide(),$("#ww2_error_message").hide();var e={};$.each($(this).serializeArray(),function(t,n){e[n.name]=n.value});var t=!1,n=["wachtwoord","wachtwoord2","e_mailadres","security_answer"];$.each(n,function(e,t){$("#"+t).removeClass("invalid")}),$.each(n,function(n,i){""==e[i]&&($("#"+i).addClass("invalid"),t=!0)}),t&&(window.scrollTo(0,0),$("#reset_error_message").show());var i=!1;return e.wachtwoord!=e.wachtwoord2&&(i=!0,$("#ww2_error_message").show(),$("#wachtwoord").addClass("invalid"),$("#wachtwoord2").addClass("invalid")),!t&&!i&&(console.log("continued"),void r.resetpassword(e,function(e){o.setView("views/resetpassword/after_reset.html")}))}function i(){o.setView("views/resetpassword/resetpassword.html"),o.setActionListener(n)}var r=t,o=e;return{main:i}},ProductController=function(e,t){function n(t){e.setView(t)}function i(){t.GetProductInfo(n)}return{main:i,showView:n}},WishlistController=function(e,t){function n(){s.getWishlist(i)}function i(e){a.setView(e)}function r(){a.setActionListener(n),a.setDeleteListener(o)}function o(e,t){s.deleteFromWishlist(e,function(){a.hideItem(t)})}var s=t,a=e;return{main:r}},AdminViewHelper=function(){function e(e){$(document).ready(e)}function t(e){document.title="Admin - AZ Games",$("#component").load("/views/admin/admin.html",function(){$.each(e,function(e,t){var n=$("#single_user").clone();$(n).find(".user__firstname").html(t.first_name),$(n).find(".user__firstname").attr("href","/admin_user/"+t.user_id),$(n).find(".user__insertion").html(t.insertion),$(n).find(".user__lastname").html(t.surname),$(n).find(".user__email").html(t.email),$(n).find(".user__phonenumber").html(t.phone_number),$("#users_body").append(n)}),$("#single_user").first().remove()})}return{setActionListener:e,setView:t}},AdminUserViewHelper=function(){function e(e){$(document).ready(e)}function t(e){$("#component").load("/views/adminuser/adminuser.html",function(){$("#delete_btn").attr("data-id",e.user_id),$("#first_name").val(e.first_name),$("#insertion").val(e.insertion),$("#surname").val(e.surname),$("#user_type").val(e.user_type),$("#email").val(e.email),$("#password").attr("placeholder","Vul hier iets in om het wachtwoord te veranderen"),$("#gender").val(e.gender),$("#date_of_birth").val(e.date_of_birth),$("#phone_number").val(e.phone_number),$("#is_active").val(e.is_active),$("#user_id").val(e.user_id);var t=new Date,n=new Date(e.date_of_birth);for(i=1;i<32;i++)i==n.getDate()?$("#dag").append("<option value='"+i+"' selected='selected'>"+i+"</option>"):$("#dag").append("<option value='"+i+"'>"+i+"</option>");for(i=1900;i<t.getFullYear()+1;i++)i==n.getFullYear()?$("#jaar").append("<option value='"+i+"' selected='selected'>"+i+"</option>"):$("#jaar").append("<option value='"+i+"'>"+i+"</option>");$("#maand").val(n.getMonth())})}function n(e){$(document).on("submit","#userform",e)}function r(e){$("#component").off().on("click","#delete_btn",function(t){t.preventDefault(),e($(this).data("id"))})}return{setActionListener:e,setView:t,setSaveListener:n,setDeleteListener:r}},CartViewHelper=function(){function e(e){""!=e&&e.forEach(function(e,t){n(e)})}function t(e){e=parseFloat(e)+parseFloat($(".cart__total .price").html().substr(1)),$(".cart__total .price").html("€"+parseFloat(e).toFixed(2))}function n(e){var n=$("<div>").html($(".sidebar__content__tmp").html());n.find(".cart__item__title").html(e.title),n.find(".cart__item__price").html("€"+e.price.toFixed(2)),n.find(".cart__item__image img").attr("src",e.image),n.find(".cart__item").attr("data-id",e.ean_number),$(".cart").append(n);var i=$(".cart_button .count").html();$(".cart_button .count").html(parseInt(i)+1),t(e.price)}function i(e){$(document).ready(e)}function r(e){$("body").on("click",".addtocart",function(t){t.preventDefault();var n=$(this).data("id");e(n),$(this).closest("#to_shop_cart").find("#shop_cart").fadeTo(0,100).delay(1e3).fadeTo(600,0)})}function o(e){$("body").on("click",".cart__item__remove",function(n){var i=$(this).parent(),r=$(this).parent().data("id");$(i).addClass("cart__item--removed"),$(i).on("animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",function(){$(this).remove()});var o=$(".cart_button .count").html();$(".cart_button .count").html(parseInt(o)-1),e(r),t(-$(i).find(".cart__item__price").html().substr(1))})}return{setView:e,addItem:n,updateTotalPrice:t,setActionListener:i,setAddProductListener:r,setRemoveListener:o}},ErrorViewHelper=function(){function e(){document.title="Oeps - AZ Games",$("#component").load("/views/error/error.html")}function t(e){$(document).ready(e)}return{setView:e,setActionListener:t}},LogoutViewHelper=function(){function e(){document.title="Uitloggen - AZ Games",$("#component").load("/views/logout/logout.html")}function t(e){$(document).ready(e)}return{setView:e,setActionListener:t}},LoginViewHelper=function(){function e(){document.title="Inloggen - AZ Games",$("#component").load("/views/login/login.html")}function t(e){$("#component").on("submit","#loginform",e)}return{setView:e,setActionListener:t}},OrderViewHelper=function(){function e(e){document.title="Bestellen - AZ Games",$("#component").load("/views/order/order.html",function(){void 0!=e&&""!=e?($.each(e,function(e,t){var n=$("#product").clone();$(n).find(".product__title").html(t.title),$(n).find(".product__image img").attr("src",t.image),$(n).find(".product__price").append("€ "+t.price.toFixed(2)),$("#product__list").append(n),$("#product__list").append("<hr />")}),$("#order_info .order__navigate").first().removeClass("disabled")):$("#product__list").html("<div class='message message--info'>Je winkelwagen is nog leeg, stop er producten in om deze te kunnen bestellen.</div>"),$("#product").first().remove(),$("#total").appendTo("#product__list"),$(".total__price").html($(".cart__total .price").html());var t=new Date;t.setDate(t.getDate()+1),$(".delivery_date").html(t.getDate()+" "+t.toLocaleString("nl-NL",{month:"long"})),$(".delivery__calendar__month").html(t.toLocaleString("nl-NL",{month:"short"}).toUpperCase()),$(".delivery__calendar__day").html(t.getDate()),UserHelper.getUserInfo(function(e){$(".adres__name").html(e.first_name+" "+e.insertion+" "+e.surname),$(".adres__street").html(e.address.street+" "+e.address.house_number),$(".adres__postalcode").html(e.address.postal_code+" "+e.address.city.toUpperCase())})})}function t(){$("ul.order-steps li").removeClass("active"),$("ul.order-steps li a").addClass("disabled"),$("ul.order-steps li.confirmation").addClass("active"),$(".order__step").removeClass("order__step--active"),$("#confirmation").addClass("order__step--active")}function n(){$(".cart").empty(),$(".cart_button .count").html("0"),$(".cart__total .price").html("€00.00")}function i(e){$(document).ready(e)}function r(e){$(document).on("submit","#orderform",e)}return{setView:e,setActionListener:i,setOrderListener:r,finishOrder:t,clearCart:n}},ProductsViewHelper=function(){function e(e){document.title="Producten - AZ Games",$("#component").html('<div class="col-12"><div class="col-3" id="filters"></div><div class="col-9" id="products"></div></div>'),$("#filters").load("/views/products/filters.html"),t(e)}function t(e){$("#products").load("/views/products/products.html",function(){$.each(e,function(e,t){var i=$("<div>").append($("#product__list__item").clone());$(i).find(".product__title").html(t.title),$(i).find(".product__subtitle").append(t.genre+" | PEGI "+t.pegi_age+" | "+PlatformLogo(t.platform)),$(i).find(".product__description").html(n(t.description)),$(i).find(".product__price").append("€ "+t.price.toFixed(2)),$(i).find("#buttons__info, .product__image a, .product__title").attr("href","product/"+t.ean_number),$(i).find(".product__image img").attr("src",t.image),$(i).find(".addtocart").attr("data-id",t.ean_number),$("#product__list").append(i)}),$("#product__list__item").first().remove()})}function n(e){var t=50,n=e.split(" ");if(n.length>t){var r="";for(i=0;i<t;i++)r+=n[i]+" ";return r+"..."}return e}function r(e){$(document).ready(e)}function o(e){$("#component").off().on("change","input[type=checkbox]",function(e){$("#product_filter").submit()}),$("#component").on("change keyup","input[name=price-max], input[name=price-min]",function(e){null==$("#pricemin").val()?$("#pricemin").val(0):$("#product_filter").submit()}),$("#component").on("submit","#product_filter",e)}return{setView:e,loadProducts:t,setActionListener:r,setFilterListener:o}},RegisterViewHelper=function(){function e(e){document.title="Registreren - AZ Games",$("#component").load(e,function(){var e=new Date;for(i=1;i<32;i++)$("#dag").append("<option value='"+i+"'>"+i+"</option>");for(i=1900;i<e.getFullYear()+1;i++)2e3!=i?$("#jaar").append("<option value='"+i+"'>"+i+"</option>"):$("#jaar").append("<option value='"+i+"' selected='selected'>"+i+"</option>")})}function t(e){$("#component").on("submit","#registerform",e)}return{setView:e,setActionListener:t}},ResetPasswordViewHelper=function(){function e(e){document.title="Inloggen - AZ Games",$("#component").load(e)}function t(e){$("#component").on("submit","#resetform",e)}return{setView:e,setActionListener:t}},ProductViewHelper=function(){function e(e){document.title=e.title+" - AZ Games",$("#component").load("/views/single_product/single_product.html",function(){$(".singleproduct__image img").attr("src",e.image),$(".singleproduct__title").html(e.title),$(".singleproduct__price").html("€ "+e.price.toFixed(2)),$(".singleproduct__ean").append(e.ean_number),$(".singleproduct__platform").append(PlatformLogo(e.platform)),$(".singleproduct__publisher").append(PlatformLogo(e.publisher)),$(".singleproduct__pegi").append(e.pegi_age),$(".singleproduct__genre").append(e.genre),$(".singleproduct__descr").html(e.description),$(".addtocart").attr("data-id",e.ean_number),UserHelper.isLogedIn()?$(".addToWishlistButton").attr("onclick","WishlistHelper.addItem("+e.ean_number+");"):$(".addToWishlistButton").hide();var t=new Date(e.release_date),n=["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"];$(".singleproduct__releasedate").append(t.getDay()+" "+n[t.getMonth()]+" "+t.getFullYear())})}function t(e){$(document).ready(e)}return{setView:e,setActionListener:t}},WishlistViewHelper=function(){function e(e){document.title="Wishlist - AZ Games",$("#component").html('<div class="col-12"><div class="col-12" id="wishlist"></div></div>'),t(e)}function t(e){$("#wishlist").load("/views/wishlist/wishlist.html",function(){var t=0,n=0;$.each(e,function(e,i){var r=$("<div>").append($("#wish__list__item").clone());t+=1,$(r).find(".wish__list__id").append(t),$(r).find(".wish__list__image img").attr("src",i.image),$(r).find(".wish__list__title").html(i.title),$(r).find(".wish__list__price").append("€ "+i.price),$(r).find(".wish__list__platform").append(PlatformLogo(i.platform)),$(r).find(".wish__list__availability").append(BeschikbaarheidKleur(i.stock)),$(r).find(".wish__list__likebutton").append(),$(r).find("#delete_btn").attr("data-id",i.ean_number),$(r).find("#cart_btn").attr("data-id",i.ean_number),$("#wish__list").append(r),n++}),0==n&&$("#wishlist_error_message").show(),$("#wish__list__item").first().remove()})}function n(e){$(document).ready(e)}function i(e){$("#component").off().on("click","#delete_btn",function(t){t.preventDefault();var n=$(this).data("id"),i=$(this).closest(".row");e(n,i)})}function r(e){e.fadeTo(200,0).slideUp(200)}return{setView:e,loadWishlist:t,setActionListener:n,setDeleteListener:i,hideItem:r}};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1pbm9ydG9vbHMuanMiLCJ0b29sdGlwLmpzIiwiaGVscGVycy9jb29raWUuanMiLCJoZWxwZXJzL2dsb2JhbC5qcyIsImhlbHBlcnMvdXNlci5qcyIsImhlbHBlcnMvd2lzaGxpc3QuanMiLCJvcmRlci5qcyIsInJvdXRlci5qcyIsInNpZGViYXIuanMiLCJoZWxwZXJzL3NlcmlhbGl6ZW9iamVjdC5qcyIsImFkbWluX21vZGVsLmpzIiwiYWRtaW51c2VyX21vZGVsLmpzIiwiY2FydF9tb2RlbC5qcyIsImxvZ2luX21vZGVsLmpzIiwibG9nb3V0X21vZGVsLmpzIiwib3JkZXJfbW9kZWwuanMiLCJwcm9kdWN0c19tb2RlbC5qcyIsInJlZ2lzdGVyX21vZGVsLmpzIiwicmVzZXRwYXNzd29yZF9tb2RlbC5qcyIsInNpbmdsZV9wcm9kdWN0X21vZGVsLmpzIiwidXNlcl9tb2RlbC5qcyIsIndpc2hsaXN0X21vZGVsLmpzIiwiYWRtaW5fY29udHJvbGxlci5qcyIsImFkbWludXNlcl9jb250cm9sbGVyLmpzIiwiY2FydF9jb250cm9sbGVyLmpzIiwiZGVsZXRlX2NvbnRyb2xsZXIuanMiLCJlcnJvcl9jb250cm9sbGVyLmpzIiwibG9naW5fY29udHJvbGxlci5qcyIsImxvZ291dF9jb250cm9sbGVyLmpzIiwib3JkZXJfY29udHJvbGxlci5qcyIsInByb2R1Y3RzX2NvbnRyb2xsZXIuanMiLCJyZWdpc3Rlcl9jb250cm9sbGVyLmpzIiwicmVzZXRwYXNzd29yZF9jb250cm9sbGVyLmpzIiwic2luZ2xlX3Byb2R1Y3RfY29udHJvbGxlci5qcyIsIndpc2hsaXN0X2NvbnRyb2xsZXIuanMiLCJhZG1pbi9hZG1pbl92aWV3LmpzIiwiYWRtaW51c2VyL2FkbWludXNlcl92aWV3LmpzIiwiY2FydC9jYXJ0X3ZpZXcuanMiLCJlcnJvci9lcnJvcl92aWV3LmpzIiwibG9nb3V0L2xvZ291dF92aWV3LmpzIiwibG9naW4vbG9naW5fdmlldy5qcyIsIm9yZGVyL29yZGVyX3ZpZXcuanMiLCJwcm9kdWN0cy9wcm9kdWN0c192aWV3LmpzIiwicmVnaXN0ZXIvcmVnaXN0ZXJfdmlldy5qcyIsInJlc2V0cGFzc3dvcmQvcmVzZXRwYXNzd29yZF92aWV3LmpzIiwic2luZ2xlX3Byb2R1Y3Qvc2luZ2xlX3Byb2R1Y3Rfdmlldy5qcyIsIndpc2hsaXN0L3dpc2hsaXN0X3ZpZXcuanMiXSwibmFtZXMiOlsiUGxhdGZvcm1Mb2dvIiwicGxhdGZvcm1uYWFtIiwidG9VcHBlckNhc2UiLCJCZXNjaGlrYmFhcmhlaWRLbGV1ciIsInN0b2NrdmFsdWUiLCJnZXRPZmZzZXQiLCJlbCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImxlZnQiLCJ3aW5kb3ciLCJzY3JvbGxYIiwidG9wIiwic2Nyb2xsWSIsIkNvb2tpZUhlbHBlciIsInRoaXMiLCJnZXRDb29raWUiLCJuYW1lIiwiY29va2llcyIsImRvY3VtZW50IiwiY29va2llIiwic3BsaXQiLCJpIiwibGVuZ3RoIiwidHJpbSIsImNyZWF0ZUNvb2tpZSIsInZhbHVlIiwiZCIsIkRhdGUiLCJzZXRUaW1lIiwiZ2V0VGltZSIsImV4cGlyZXMiLCJ0b1VUQ1N0cmluZyIsImRlbGV0ZUNvb2tpZSIsInNob3dMb2FkU2NyZWVuIiwiJCIsImh0bWwiLCJvbkxvYWRQYWdlIiwiZW1wdHkiLCJjbG9uZSIsImFwcGVuZFRvIiwiVXNlckhlbHBlciIsImlzQWRtaW4iLCJjc3MiLCJoaWRlIiwiaXNDdXN0b21lciIsImlzTG9nZWRJbiIsImFjY2Vzc1Rva2VuIiwidW5kZWZpbmVkIiwidXNlcnR5cGUiLCJkZWNvZGVUb2tlbiIsInBheWxvYWQiLCJKU09OIiwicGFyc2UiLCJhdG9iIiwiZ2V0VXNlckluZm8iLCJjYWxsYmFjayIsImFqYXgiLCJ1cmwiLCJ0eXBlIiwiZGF0YVR5cGUiLCJoZWFkZXJzIiwiQXV0aG9yaXphdGlvbiIsInN1Y2Nlc3MiLCJkYXRhIiwiZXJyb3IiLCJ4aHIiLCJzdGF0dXMiLCJSb3V0ZXIiLCJyb3V0ZSIsIldpc2hsaXN0SGVscGVyIiwiYWRkSXRlbSIsImVhbl9udW1iZXIiLCJzdHJpbmdpZnkiLCJ0b2dnbGVDbGFzcyIsImFsZXJ0Iiwib24iLCJldmVudCIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImhhc0NsYXNzIiwic3RlcCIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJ2YWwiLCJwYXJlbnRzIiwiZmluZCIsInNob3ciLCJhdHRyIiwiaGlzdG9yeSIsImlzSW50ZXJuYWwiLCJwYXJ0aWNsZXMiLCJnZXRQYXJ0aWNsZXMiLCJQcm9kdWN0c0NvbnRyb2xsZXIiLCJQcm9kdWN0c1ZpZXdIZWxwZXIiLCJQcm9kdWN0c01vZGVsIiwibWFpbiIsIlByb2R1Y3RDb250cm9sbGVyIiwiUHJvZHVjdFZpZXdIZWxwZXIiLCJQcm9kdWN0TW9kZWwiLCJSZWdpc3RlckNvbnRyb2xsZXIiLCJSZWdpc3RlclZpZXdIZWxwZXIiLCJSZWdpc3Rlck1vZGVsIiwiTG9naW5Db250cm9sbGVyIiwiTG9naW5WaWV3SGVscGVyIiwiTG9naW5Nb2RlbCIsIkxvZ291dENvbnRyb2xsZXIiLCJMb2dvdXRWaWV3SGVscGVyIiwiTG9nb3V0TW9kZWwiLCJSZXNldFBhc3N3b3JkQ29udHJvbGxlciIsIlJlc2V0UGFzc3dvcmRWaWV3SGVscGVyIiwiUmVzZXRQYXNzd29yZE1vZGVsIiwiV2lzaGxpc3RDb250cm9sbGVyIiwiV2lzaGxpc3RWaWV3SGVscGVyIiwiV2lzaGxpc3RNb2RlbCIsIkFkbWluQ29udHJvbGxlciIsIkFkbWluVmlld0hlbHBlciIsIkFkbWluTW9kZWwiLCJBZG1pblVzZXJDb250cm9sbGVyIiwiQWRtaW5Vc2VyVmlld0hlbHBlciIsIkFkbWluVXNlck1vZGVsIiwiT3JkZXJDb250cm9sbGVyIiwiT3JkZXJWaWV3SGVscGVyIiwiT3JkZXJNb2RlbCIsIkVycm9yQ29udHJvbGxlciIsIkVycm9yVmlld0hlbHBlciIsIndyaXRlSGlzdG9yeSIsInNjcm9sbFRvIiwiaW5kZXhPZiIsImxvY2F0aW9uIiwic3Vic3RyaW5nIiwiYmFzZVVybCIsIm9iamVjdCIsInRpdGxlIiwicHVzaFN0YXRlIiwicmVhZHkiLCJ0b2dnbGVTaWRlYmFyIiwic2lkZWJhciIsImZvcmNlQ2xvc2UiLCJjbGljayIsInBhcmVudCIsImNvbnRlbnQiLCJwb3NpdGlvbiIsInRvb2x0aXAiLCJhcHBlbmQiLCJvdXRlckhlaWdodCIsIm91dGVyV2lkdGgiLCJyZW1vdmUiLCJmbiIsInNlcmlhbGl6ZU9iamVjdCIsIm8iLCJhIiwic2VyaWFsaXplQXJyYXkiLCJlYWNoIiwicHVzaCIsImdldFBhZ2UiLCJsb2FkIiwiaWQiLCJzYXZlVXNlckluZm8iLCJkYXRlX29mX2JpcnRoIiwiVVRDIiwiamFhciIsIm1hYW5kIiwiZGFnIiwidXNlcl9pZCIsImNvbnRlbnRUeXBlIiwiZGVsZXRlVXNlciIsIkNhcnRNb2RlbCIsImdldENhcnQiLCJjYXJ0IiwiYWRkUHJvZHVjdCIsInByaWNlIiwiaW1hZ2UiLCJjdXJyZW50Q2FydCIsInJlbW92ZVByb2R1Y3QiLCJzcGxpY2UiLCJsb2dpbiIsImVtYWlsIiwicGFzc3dvcmQiLCJidG9hIiwiYWNjZXNzX3Rva2VuIiwibG9nb3V0IiwiZ2V0T3JkZXJJbmZvcm1hdGlvbiIsInNhdmVPcmRlciIsIm9yZGVyRGF0YSIsImJ0d19wZXJjZW50YWdlIiwib3JkZXJfZGF0ZSIsImRlbGl2ZXJ5X2Nvc3RzIiwiY29uc29sZSIsImxvZyIsImZpbHRlciIsInJlZ2lzdGVyIiwiZm9ybURhdGEiLCJlX21haWwiLCJlX21haWxhZHJlcyIsIndhY2h0d29vcmQiLCJmaXJzdF9uYW1lIiwidm9vcm5hYW0iLCJpbnNlcnRpb24iLCJ0dXNzZW52b2Vnc2VsIiwic3VybmFtZSIsImFjaHRlcm5hYW0iLCJnZW5kZXIiLCJiaXJ0aF9kYXRlIiwicGhvbmVfbnVtYmVyIiwibW9iaWVsX251bW1lciIsInNlY3JldF9xdWVzdGlvbiIsInNlY3VyaXR5X3F1ZXN0aW9uIiwic2VjcmV0X3F1ZXN0aW9uX2Fuc3dlciIsInNlY3VyaXR5X2Fuc3dlciIsInBvc3RhbF9jb2RlIiwicG9zdGNvZGUiLCJudW1iZXIiLCJodWlzbnVtbWVyIiwic3RyZWV0X25hbWUiLCJzdHJhYXRuYWFtIiwiY2l0eSIsInBsYWF0cyIsInJlc2V0cGFzc3dvcmQiLCJuZXdfcGFzc3dvcmQiLCJyZXBlYXRfcGFzc3dvcmQiLCJ3YWNodHdvb3JkMiIsImVhbiIsIkdldFByb2R1Y3RJbmZvIiwiVXNlck1vZGVsIiwidXNlcmlkIiwiR2V0VXNlckluZm8iLCJnZXRXaXNobGlzdCIsImFkZFRvV2lzaGxpc3QiLCJ2aWV3RGF0YSIsIndpc2hsaXN0X2lkIiwiZGVsZXRlRnJvbVdpc2hsaXN0IiwiU3RyaW5nIiwidmlld0hlbHBlciIsIm1vZGVsIiwiVmlld0hlbHBlciIsInNldEFjdGlvbkxpc3RlbmVyIiwiTW9kZWwiLCJzZXRWaWV3Iiwic2V0U2F2ZUxpc3RlbmVyIiwic2V0RGVsZXRlTGlzdGVuZXIiLCJzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24iLCJDYXJ0Q29udHJvbGxlciIsInNldEFkZFByb2R1Y3RMaXN0ZW5lciIsInNldFJlbW92ZUxpc3RlbmVyIiwiRGVsZXRlQ29udHJvbGxlciIsImFjdGlvblBlcmZvcm1lZCIsImZpZWxkIiwib3JkZXIiLCJmaW5pc2hPcmRlciIsImNsZWFyQ2FydCIsInNldE9yZGVyTGlzdGVuZXIiLCJmaWx0ZXJQcm9kdWN0cyIsImZpbHRlcnMiLCJzZXJpYWxpemUiLCJsb2FkUHJvZHVjdHMiLCJzZXRGaWx0ZXJMaXN0ZW5lciIsIm1hbmRhdG9yeUZpZWxkTWlzc2VzIiwibWFuZGF0b3J5RmllbGRzIiwibWFuRmllbGQiLCJwYXNzd29yZHNOb3RJZGVudGljYWwiLCJzaG93VmlldyIsImRpdl90b19oaWRlIiwiaGlkZUl0ZW0iLCJhY3Rpb24iLCJrZXkiLCJ1c2VyIiwiZmlyc3QiLCJ1c2VyX3R5cGUiLCJpc19hY3RpdmUiLCJ0b2RheSIsImRhdGVPZkJpcnRoIiwiZ2V0RGF0ZSIsImdldEZ1bGxZZWFyIiwiZ2V0TW9udGgiLCJvZmYiLCJDYXJ0Vmlld0hlbHBlciIsImZvckVhY2giLCJpdGVtIiwiaW5kZXgiLCJ1cGRhdGVUb3RhbFByaWNlIiwibmV3UHJpY2UiLCJwYXJzZUZsb2F0Iiwic3Vic3RyIiwidG9GaXhlZCIsImNhcnRJdGVtIiwiYW1vdW50IiwicGFyc2VJbnQiLCJhZGRUb0NhcnQiLCJwcm9kdWN0X2lkIiwiY2xvc2VzdCIsImZhZGVUbyIsImRlbGF5IiwiY2FydGl0ZW0iLCJldmVudEhhbmRsZXIiLCJwcm9kdWN0Iiwic2V0RGF0ZSIsInRvTG9jYWxlU3RyaW5nIiwibW9udGgiLCJhZGRyZXNzIiwic3RyZWV0IiwiaG91c2VfbnVtYmVyIiwiZ2VucmUiLCJwZWdpX2FnZSIsInBsYXRmb3JtIiwiQ3V0U3RyaW5nIiwiZGVzY3JpcHRpb24iLCJ0ZXh0IiwiU2hvd0Ftb3VudCIsIldvcmRzQXJyYXkiLCJTaG9ydFN0cmluZyIsInN1Ym1pdCIsInZpZXdUb1Nob3ciLCJkYXRlIiwicHVibGlzaGVyIiwicmVsZWFzZV9kYXRlIiwibW9udGhzIiwiZ2V0RGF5IiwibG9hZFdpc2hsaXN0IiwiY3VycmVudCIsImNvdW50Iiwid2lzaF9fbGlzdF9faXRlbSIsInN0b2NrIiwic2xpZGVVcCJdLCJtYXBwaW5ncyI6IkFBQ0EsUUFBQUEsY0FBQUMsR0FHQSxPQURBQSxFQUFBQSxFQUFBQyxlQUlBLElBQUEsTUFDQSxNQUFBLCtDQUNBLEtBQUEsTUFDQSxNQUFBLCtDQUNBLEtBQUEsS0FDQSxNQUFBLG1EQUNBLEtBQUEsT0FDQSxNQUFBLGdEQUNBLEtBQUEsTUFDQSxNQUFBLCtDQUNBLEtBQUEsTUFDQSxNQUFBLCtDQUNBLEtBQUEsa0JBQ0EsTUFBQSxrREFDQSxTQUNBLE1BQUFELEVBR0EsS0FBQSxXQUNBLE1BQUEseURBQ0EsS0FBQSxVQUNBLE1BQUEsd0RBQ0EsS0FBQSxrQkFDQSxNQUFBLHFEQUlBLFFBQUFFLHNCQUFBQyxHQUVBLE1BQUFBLElBQUEsRUFDQSw2REFDQUEsR0FBQSxFQUNBLCtEQUVBQSxFQ2xCQSxRQUFBQyxXQUFBQyxHQUlBLE1BRkFBLEdBQUFB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LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy9QbGF0Zm9ybSBMb2dvJ3NcbmZ1bmN0aW9uIFBsYXRmb3JtTG9nbyhwbGF0Zm9ybW5hYW0pXG57XG4gICAgcGxhdGZvcm1uYWFtID0gcGxhdGZvcm1uYWFtLnRvVXBwZXJDYXNlKCk7XG4gICAgc3dpdGNoIChwbGF0Zm9ybW5hYW0pXG4gICAge1xuICAgICAgICAvL3BsYXRmb3Jtc1xuICAgICAgICBjYXNlIFwiUFMxXCI6XG4gICAgICAgICAgICByZXR1cm4gXCI8aW1nIHNyYz0nL3Jlc291cmNlcy9pbWFnZXMvaWNvbnMvcHMxLnBuZycgLz5cIjtcbiAgICAgICAgY2FzZSBcIlBTNFwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiPGltZyBzcmM9Jy9yZXNvdXJjZXMvaW1hZ2VzL2ljb25zL3BzNC5wbmcnIC8+XCI7XG4gICAgICAgIGNhc2UgXCJQQ1wiOlxuICAgICAgICAgICAgcmV0dXJuIFwiPGltZyBzcmM9Jy9yZXNvdXJjZXMvaW1hZ2VzL2ljb25zL3dpbmRvd3MucG5nJyAvPlwiO1xuICAgICAgICBjYXNlIFwiWEJPWFwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiPGltZyBzcmM9Jy9yZXNvdXJjZXMvaW1hZ2VzL2ljb25zL3hib3gucG5nJyAvPlwiO1xuICAgICAgICBjYXNlIFwiTkVTXCI6XG4gICAgICAgICAgICByZXR1cm4gXCI8aW1nIHNyYz0nL3Jlc291cmNlcy9pbWFnZXMvaWNvbnMvbmVzLnBuZycgLz5cIjtcbiAgICAgICAgY2FzZSBcIk42NFwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiPGltZyBzcmM9Jy9yZXNvdXJjZXMvaW1hZ2VzL2ljb25zL242NC5wbmcnIC8+XCI7XG4gICAgICAgIGNhc2UgXCJOSU5URU5ETyBTV0lUQ0hcIjpcbiAgICAgICAgICAgIHJldHVybiBcIjxpbWcgc3JjPScvcmVzb3VyY2VzL2ltYWdlcy9pY29ucy9zd2l0Y2gucG5nJyAvPlwiO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIHBsYXRmb3JtbmFhbTtcblxuICAgICAgICAvL3B1Ymxpc2hlcnNcbiAgICAgICAgY2FzZSBcIk5JTlRFTkRPXCI6XG4gICAgICAgICAgICByZXR1cm4gXCI8aW1nIHNyYz0nL3Jlc291cmNlcy9pbWFnZXMvcHVibGlzaGVycy9uaW50ZW5kby5wbmcnIC8+XCI7XG4gICAgICAgIGNhc2UgXCJVQklTT0ZUXCI6XG4gICAgICAgICAgICByZXR1cm4gXCI8aW1nIHNyYz0nL3Jlc291cmNlcy9pbWFnZXMvcHVibGlzaGVycy91Ymlzb2Z0LnBuZycgLz5cIjtcbiAgICAgICAgY2FzZSBcIkVMRUNUUk9OSUMgQVJUU1wiOlxuICAgICAgICAgICAgcmV0dXJuIFwiPGltZyBzcmM9Jy9yZXNvdXJjZXMvaW1hZ2VzL3B1Ymxpc2hlcnMvZWEucG5nJyAvPlwiO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gQmVzY2hpa2JhYXJoZWlkS2xldXIoc3RvY2t2YWx1ZSl7XG4gICAgXG4gICAgICAgIGlmIChzdG9ja3ZhbHVlPD0wKSB7XG4gICAgICAgICAgICByZXR1cm4gXCI8aW1nIHNyYz0nL3Jlc291cmNlcy9pbWFnZXMvYXZhaWxhYmlsaXR5L2J1dHRvbnJlZC5wbmcnIC8+XCI7XG4gICAgICAgIH0gZWxzZSBpZiAoc3RvY2t2YWx1ZT49MSkge1xuICAgICAgICAgICAgcmV0dXJuIFwiPGltZyBzcmM9Jy9yZXNvdXJjZXMvaW1hZ2VzL2F2YWlsYWJpbGl0eS9idXR0b25ncmVlbi5wbmcnIC8+XCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gc3RvY2t2YWx1ZVxuICAgICAgICB9XG59XG5cbi8vIFZhbiBXaXNobGlzdCBwYWdpbmFcbiQoZG9jdW1lbnQpLm9uKFwiY2xpY2tcIiwgXCJzcGFuLmxpa2VcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgJCh0aGlzKS50b2dnbGVDbGFzcyhcImxpa2UtLWFjdGl2ZVwiKTtcbn0pO1xuXG4vLyBWYW4gU2luZ2xlIFByb2R1Y3QgcGFnaW5hXG4kKGRvY3VtZW50KS5vbihcImNsaWNrXCIsIFwic3Bhbi5zaW5nbGVfbGlrZVwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKFwic2luZ2xlX2xpa2UtLWFjdGl2ZVwiKTtcbn0pOyIsIiQoZG9jdW1lbnQpLm9uKFwibW91c2VlbnRlclwiLCBcIi5oYXNUb29sdGlwXCIsIGZ1bmN0aW9uKGV2ZW50KVxue1xuICAgIC8vIEdldCBjb250ZW50IGFuZCBwb3NpdGlvblxuICAgIHZhciBjb250ZW50ICA9ICQodGhpcykuZGF0YShcInRvb2x0aXBcIik7XG4gICAgdmFyIHBvc2l0aW9uID0gZ2V0T2Zmc2V0KHRoaXMpO1xuXG4gICAgLy8gQ3JlYXRlIHRvb2x0aXBcbiAgICB2YXIgdG9vbHRpcCA9ICQoXCI8ZGl2IGNsYXNzPSd0b29sdGlwJz5cIiArIGNvbnRlbnQgKyBcIjwvZGl2PlwiKTtcbiAgICAkKFwiYm9keVwiKS5hcHBlbmQodG9vbHRpcCk7XG5cbiAgICAvLyBDYWxjdWxhdGUgbmV3IHBvc2l0aW9uc1xuICAgIHBvc2l0aW9uLnRvcCAgPSBwb3NpdGlvbi50b3AgKyAkKHRoaXMpLm91dGVySGVpZ2h0KCk7XG4gICAgcG9zaXRpb24ubGVmdCA9IHBvc2l0aW9uLmxlZnQgKyAoJCh0aGlzKS5vdXRlcldpZHRoKCkgLyAyKSAtICgkKFwiLnRvb2x0aXBcIikub3V0ZXJXaWR0aCgpIC8gMik7XG5cbiAgICAvLyBDaGFuZ2UgcG9zaXRpb24gb2YgdG9vbHRpcFxuICAgIHRvb2x0aXAuY3NzKFwibGVmdFwiLCBwb3NpdGlvbi5sZWZ0KTtcbiAgICB0b29sdGlwLmNzcyhcInRvcFwiLCBwb3NpdGlvbi50b3ApO1xufSk7XG5cbiQoZG9jdW1lbnQpLm9uKFwibW91c2VsZWF2ZVwiLCBcIi5oYXNUb29sdGlwXCIsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgJChcImJvZHlcIikuZmluZChcIi50b29sdGlwXCIpLnJlbW92ZSgpO1xufSk7XG5cbmZ1bmN0aW9uIGdldE9mZnNldChlbClcbntcbiAgICBlbCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICAgIGxlZnQ6IGVsLmxlZnQgKyB3aW5kb3cuc2Nyb2xsWCxcbiAgICAgICAgdG9wOiBlbC50b3AgKyB3aW5kb3cuc2Nyb2xsWVxuICB9XG59IiwiLyoqXG4gKiBIZWxwZXIgZm9yIGZpbmRpbmcsIGNyZWF0aW5nIGFuZCBkZWxldGluZyBjb29raWVzXG4gKi9cbmZ1bmN0aW9uIENvb2tpZUhlbHBlcigpXG57XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB2YWx1ZSBvZiBhIGNvb2tpZVxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lICBOYW1lIG9mIHRoZSBjb29raWVcbiAgICAgKiBcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICovXG4gICAgdGhpcy5nZXRDb29raWUgPSBmdW5jdGlvbihuYW1lKVxuICAgIHtcbiAgICAgICAgdmFyIGNvb2tpZXMgPSBkb2N1bWVudC5jb29raWUuc3BsaXQoJzsnKTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvb2tpZXMubGVuZ3RoOyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciBjb29raWUgPSBjb29raWVzW2ldLnNwbGl0KFwiPVwiKTtcblxuICAgICAgICAgICAgaWYgKGNvb2tpZVswXS50cmltKCkgPT0gbmFtZSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29va2llWzFdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgY29va2llXG4gICAgICogXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgICBOYW1lIG9mIHRoZSBjb29raWVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgIFZhbHVlIG9mIHRoZSBjb29raWVcbiAgICAgKiBcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIHRoaXMuY3JlYXRlQ29va2llID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpXG4gICAge1xuICAgICAgICB2YXIgZCA9IG5ldyBEYXRlKCk7IFxuICAgICAgICBkLnNldFRpbWUoZC5nZXRUaW1lKCkgKyAoMSoyNCo2MCo2MCoxMDAwKSk7IFxuICAgICAgICB2YXIgZXhwaXJlcyA9IFwiZXhwaXJlcz1cIisgZC50b1VUQ1N0cmluZygpOyBcblxuICAgICAgICBkb2N1bWVudC5jb29raWUgPSBuYW1lICsgJz0nICsgdmFsdWUgKyAnOycgKyBleHBpcmVzICsgJztwYXRoPS8nOyBcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZWxldGUgYSBjb29raWUgYW5kIGl0J3MgdmFsdWVcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSAgTmFtZSBvZiB0aGUgY29va2llXG4gICAgICogXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKi9cbiAgICB0aGlzLmRlbGV0ZUNvb2tpZSA9IGZ1bmN0aW9uKG5hbWUpXG4gICAge1xuICAgICAgICBkb2N1bWVudC5jb29raWUgPSBuYW1lICsgJz07IGV4cGlyZXM9VGh1LCAwMSBKYW4gMTk3MCAwMDowMDowMSBHTVQ7JztcbiAgICB9XG59XG4iLCJ2YXIgUm91dGVyICAgICAgID0gbmV3IFJvdXRlcigpO1xudmFyIENvb2tpZUhlbHBlciA9IG5ldyBDb29raWVIZWxwZXIoKTtcbnZhciBVc2VySGVscGVyICAgICA9IG5ldyBVc2VySGVscGVyKCk7XG52YXIgV2lzaGxpc3RIZWxwZXIgPSBuZXcgV2lzaGxpc3RIZWxwZXIoKTtcblxuZnVuY3Rpb24gc2hvd0xvYWRTY3JlZW4oKVxue1xuICAgICQoXCIjY29tcG9uZW50XCIpLmh0bWwoJzxkaXYgY2xhc3M9XCJzcGlubmVyXCI+PGRpdiBjbGFzcz1cImJvdW5jZTFcIj48L2Rpdj48ZGl2IGNsYXNzPVwiYm91bmNlMlwiPjwvZGl2PjxkaXYgY2xhc3M9XCJib3VuY2UzXCI+PC9kaXY+IDwvZGl2PicpO1xufVxuXG5cbmZ1bmN0aW9uIG9uTG9hZFBhZ2UoKVxue1xuICAgICQoXCIubW1lbnVcIikuZW1wdHkoKTtcbiAgICAkKFwiLm5hdlwiKS5jbG9uZSgpLmFwcGVuZFRvKFwiLm1tZW51XCIpO1xuXG4gICAgaWYgKFVzZXJIZWxwZXIuaXNBZG1pbigpKVxuICAgIHtcbiAgICAgICAgJChcIi52aXNpYmxlLWFkbWluXCIpLmNzcyhcImRpc3BsYXlcIiwgXCJibG9ja1wiKTtcbiAgICAgICAgJChcIi52aXNpYmxlLWN1c3RvbWVyXCIpLmNzcyhcImRpc3BsYXlcIiwgXCJibG9ja1wiKTtcbiAgICAgICAgJChcIi5pbmxvZ2dlbl90ZXh0XCIpLmhpZGUoKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoVXNlckhlbHBlci5pc0N1c3RvbWVyKCkpXG4gICAge1xuICAgICAgICAkKFwiLnZpc2libGUtY3VzdG9tZXJcIikuY3NzKFwiZGlzcGxheVwiLCBcImJsb2NrXCIpO1xuICAgICAgICAkKFwiLmlubG9nZ2VuX3RleHRcIikuaGlkZSgpO1xuICAgIH1cbiAgICBlbHNlXG4gICAge1xuICAgICAgICAkKFwiLnZpc2libGUtYWRtaW5cIikuaGlkZSgpO1xuICAgICAgICAkKFwiLnZpc2libGUtY3VzdG9tZXJcIikuaGlkZSgpO1xuICAgICAgICAkKFwiI2lubG9nZ2VuX3RleHRcIikuY3NzKFwiZGlzcGxheVwiLCBcImJsb2NrXCIpO1xuICAgIH1cbn0iLCIvKipcbiAqIEhlbHBlciBmb3IgdXNlciByZWxhdGVkIHN0dWZmXG4gKi9cbmZ1bmN0aW9uIFVzZXJIZWxwZXIoKVxue1xuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIHRoZSB1c2VyIGlzIGEgZ3Vlc3QgKG5vdCBsb2dnZWQgaW4pXG4gICAgICovXG4gICAgdGhpcy5pc0xvZ2VkSW4gPSBmdW5jdGlvbigpXG4gICAge1xuICAgICAgICB2YXIgYWNjZXNzVG9rZW4gPSBDb29raWVIZWxwZXIuZ2V0Q29va2llKFwiYWNjZXNzX3Rva2VuXCIpO1xuICAgICAgICBcbiAgICAgICAgaWYgKGFjY2Vzc1Rva2VuICE9IHVuZGVmaW5lZCAmJiBhY2Nlc3NUb2tlbiAhPSBcIlwiKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiB0aGUgY3VycmVudCB1c2VyIGlzIGEgY3VzdG9tZXJcbiAgICAgKi9cbiAgICB0aGlzLmlzQ3VzdG9tZXIgPSBmdW5jdGlvbigpXG4gICAge1xuICAgICAgICBpZiAoVXNlckhlbHBlci5pc0xvZ2VkSW4oKSlcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIHVzZXJ0eXBlID0gdGhpcy5kZWNvZGVUb2tlbigpLnVzZXJ0eXBlO1xuXG4gICAgICAgICAgICBpZiAodXNlcnR5cGUgPT0gXCJjdXN0b21lclwiIHx8IHVzZXJ0eXBlID09IFwiYWRtaW5cIilcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiB0aGUgY3VycmVudCB1c2VyIGlzIGFkbWluXG4gICAgICovXG4gICAgdGhpcy5pc0FkbWluID0gZnVuY3Rpb24oKVxuICAgIHtcbiAgICAgICAgaWYgKFVzZXJIZWxwZXIuaXNMb2dlZEluKCkpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciB1c2VydHlwZSA9IHRoaXMuZGVjb2RlVG9rZW4oKS51c2VydHlwZTtcblxuICAgICAgICAgICAgaWYgKHVzZXJ0eXBlID09IFwiYWRtaW5cIilcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZWNvZGUgdGhlIEpXVCB0b2tlblxuICAgICAqL1xuICAgIHRoaXMuZGVjb2RlVG9rZW4gPSBmdW5jdGlvbigpXG4gICAge1xuICAgICAgICB2YXIgYWNjZXNzVG9rZW4gPSBDb29raWVIZWxwZXIuZ2V0Q29va2llKFwiYWNjZXNzX3Rva2VuXCIpO1xuXG4gICAgICAgIGlmIChhY2Nlc3NUb2tlbiAhPSB1bmRlZmluZWQgJiYgYWNjZXNzVG9rZW4gICE9IFwiXCIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciBwYXlsb2FkID0gYWNjZXNzVG9rZW4uc3BsaXQoXCIuXCIpWzFdO1xuXG4gICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShhdG9iKHBheWxvYWQpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgaW5mb3JtYXRpb24gb2YgdGhlIGN1cnJlbnQgdXNlclxuICAgICAqL1xuICAgIHRoaXMuZ2V0VXNlckluZm8gPSBmdW5jdGlvbihjYWxsYmFjaylcbiAgICB7XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6IFwiaHR0cHM6Ly9hcGkuYXotZ2FtZXMubmwvdXNlclwiLFxuICAgICAgICAgICAgdHlwZTogXCJnZXRcIixcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgXCJBdXRob3JpemF0aW9uXCI6IFwiQmVhcmVyIFwiICsgQ29va2llSGVscGVyLmdldENvb2tpZShcImFjY2Vzc190b2tlblwiKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZGF0YSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICh4aHIsIHN0YXR1cywgZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBSb3V0ZXIucm91dGUoXCIvbG9naW5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgfVxufSIsIi8qKlxuICogSGVscGVyIGZvciBjYXJ0IGFjdGlvbnNcbiAqL1xuZnVuY3Rpb24gV2lzaGxpc3RIZWxwZXIoKVxue1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdmFsdWUgb2YgYSBjb29raWVcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgIFByb2RjdXQgSUQgdG8gcmVtb3ZlIGZvbSB0aGUgY2FyXG4gICAgICogXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqL1xuICAgIHRoaXMuYWRkSXRlbSA9IGZ1bmN0aW9uKGVhbl9udW1iZXIpXG4gICAge1xuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgdXJsOiBcImh0dHBzOi8vYXBpLmF6LWdhbWVzLm5sL3dpc2hsaXN0L1wiICsgQ29va2llSGVscGVyLmdldENvb2tpZShcInVzZXJfaWRcIikgKyBcIi9cIiArIGVhbl9udW1iZXIsXG4gICAgICAgICAgICB0eXBlOiBcInBvc3RcIixcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSh7fSksXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgXCJBdXRob3JpemF0aW9uXCI6IFwiQmVhcmVyIFwiICsgQ29va2llSGVscGVyLmdldENvb2tpZShcImFjY2Vzc190b2tlblwiKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcyhcImxpa2UtLWFjdGl2ZVwiKTtcbiAgICAgICAgICAgICAgICBhbGVydChcIlByb2R1Y3Qgc3VjY2Vzdm9sIHRvZWdldm9lZ2QgYWFuIFdpc2hsaXN0LlwiKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oeGhyLCBzdGF0dXMsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgYWxlcnQoXCJQcm9kdWN0IGlzIGFsIGluIFdpc2hsaXN0LlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufSIsIiQoZG9jdW1lbnQpLm9uKFwiY2xpY2tcIiwgXCJhLm9yZGVyX19uYXZpZ2F0ZVwiLCBmdW5jdGlvbiAoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKFwiZGlzYWJsZWRcIikgPT0gZmFsc2UpXG4gICAge1xuICAgICAgICAvLyBHZXQgdGhlIG9yZGVyIHN0ZXBcbiAgICAgICAgdmFyIHN0ZXAgPSAgJCh0aGlzKS5kYXRhKFwic3RlcFwiKTtcblxuICAgICAgICAvLyBTZXQgdGhlIG5ldyBvcmRlciBzdGVwIGFzIGFjdGl2ZVxuICAgICAgICAkKFwidWwub3JkZXItc3RlcHMgbGlcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICQoXCJ1bC5vcmRlci1zdGVwcyBsaS5cIiArIHN0ZXApLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xuXG4gICAgICAgICQoXCIub3JkZXJfX3N0ZXBcIikucmVtb3ZlQ2xhc3MoXCJvcmRlcl9fc3RlcC0tYWN0aXZlXCIpO1xuICAgICAgICAkKFwiI1wiICsgc3RlcCkuYWRkQ2xhc3MoXCJvcmRlcl9fc3RlcC0tYWN0aXZlXCIpO1xuICAgIH1cbn0pXG5cbiQoZG9jdW1lbnQpLm9uKFwiY2hhbmdlXCIsIFwic2VsZWN0I3NoaXBwaW5nX21ldGhvZFwiLCBmdW5jdGlvbiAoZSlcbntcbiAgICB2YXIgdmFsID0gJCh0aGlzKS52YWwoKTtcblxuICAgIGlmICh2YWwgIT0gXCJcIilcbiAgICB7XG4gICAgICAgICQodGhpcykucGFyZW50cyhcIi5vcmRlcl9fc3RlcFwiKS5maW5kKFwiLmJ0bi0tbmV4dFwiKS5yZW1vdmVDbGFzcyhcImRpc2FibGVkXCIpO1xuICAgIH1cbiAgICBlbHNlXG4gICAge1xuICAgICAgICAkKHRoaXMpLnBhcmVudHMoXCIub3JkZXJfX3N0ZXBcIikuZmluZChcIi5idG4tLW5leHRcIikuYWRkQ2xhc3MoXCJkaXNhYmxlZFwiKTtcbiAgICB9XG5cbiAgICAkKFwiLnNoaXBwaW5nX19maWVsZHNcIikuaGlkZSgpO1xuICAgICQoXCIuXCIgKyB2YWwgKyBcIl9maWVsZHNcIikuc2hvdygpO1xufSlcblxuJChkb2N1bWVudCkub24oXCJjaGFuZ2VcIiwgXCJzZWxlY3QjcGF5bWVudF9tZXRob2RcIiwgZnVuY3Rpb24gKGUpXG57XG4gICAgdmFyIHZhbCA9ICQodGhpcykudmFsKCk7XG5cbiAgICBpZiAodmFsICE9IFwiXCIpXG4gICAge1xuICAgICAgICAkKHRoaXMpLnBhcmVudHMoXCIub3JkZXJfX3N0ZXBcIikuZmluZChcIi5idG4tLW5leHRcIikucmVtb3ZlQ2xhc3MoXCJkaXNhYmxlZFwiKTtcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKFwiLm9yZGVyX19zdGVwXCIpLmZpbmQoXCIuYnRuLS1uZXh0XCIpLmF0dHIoXCJkaXNhYmxlZFwiLCBmYWxzZSk7XG4gICAgfVxuICAgIGVsc2VcbiAgICB7XG4gICAgICAgICQodGhpcykucGFyZW50cyhcIi5vcmRlcl9fc3RlcFwiKS5maW5kKFwiLmJ0bi0tbmV4dFwiKS5hZGRDbGFzcyhcImRpc2FibGVkXCIpO1xuICAgICAgICAkKHRoaXMpLnBhcmVudHMoXCIub3JkZXJfX3N0ZXBcIikuZmluZChcIi5idG4tLW5leHRcIikuYXR0cihcImRpc2FibGVkXCIsIHRydWUpO1xuICAgICAgICBcbiAgICB9XG59KTsiLCJ2YXIgUm91dGVyID0gZnVuY3Rpb24gKClcbntcbiAgICBiYXNlVXJsID0gXCJwcm9qZWN0LXdlYnNob3AvXCI7XG5cbiAgICBmdW5jdGlvbiByb3V0ZSh1cmwsIGhpc3RvcnkpXG4gICAge1xuICAgICAgICBpZiAoaXNJbnRlcm5hbCh1cmwpID09IGZhbHNlIHx8IHVybCA9PSBcIlwiKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcGFydGljbGVzID0gZ2V0UGFydGljbGVzKHVybCk7XG5cbiAgICAgICAgc3dpdGNoKHBhcnRpY2xlc1swXSlcbiAgICAgICAge1xuICAgICAgICAgICAgY2FzZSBcIlwiOlxuICAgICAgICAgICAgY2FzZSBcImluZGV4Lmh0bWxcIjpcbiAgICAgICAgICAgIGNhc2UgXCJwcm9kdWN0c1wiOlxuICAgICAgICAgICAgICAgIG5ldyBQcm9kdWN0c0NvbnRyb2xsZXIobmV3IFByb2R1Y3RzVmlld0hlbHBlcigpLCBuZXcgUHJvZHVjdHNNb2RlbCgpKS5tYWluKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwicHJvZHVjdFwiOlxuICAgICAgICAgICAgICAgIG5ldyBQcm9kdWN0Q29udHJvbGxlcihuZXcgUHJvZHVjdFZpZXdIZWxwZXIoKSwgbmV3IFByb2R1Y3RNb2RlbChwYXJ0aWNsZXNbMV0pKS5tYWluKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwicmVnaXN0ZXJcIjpcbiAgICAgICAgICAgICAgICBuZXcgUmVnaXN0ZXJDb250cm9sbGVyKG5ldyBSZWdpc3RlclZpZXdIZWxwZXIoKSwgbmV3IFJlZ2lzdGVyTW9kZWwoKSkubWFpbigpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImxvZ2luXCI6XG4gICAgICAgICAgICAgICAgbmV3IExvZ2luQ29udHJvbGxlcihuZXcgTG9naW5WaWV3SGVscGVyKCksIG5ldyBMb2dpbk1vZGVsKCkpLm1haW4oKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJsb2dvdXRcIjpcbiAgICAgICAgICAgICAgICBuZXcgTG9nb3V0Q29udHJvbGxlcihuZXcgTG9nb3V0Vmlld0hlbHBlcigpLCBuZXcgTG9nb3V0TW9kZWwoKSkubWFpbigpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInJlZ2lzdGVyXCI6XG4gICAgICAgICAgICAgICAgbmV3IFJlZ2lzdGVyQ29udHJvbGxlcihuZXcgUmVnaXN0ZXJWaWV3SGVscGVyKCksIG5ldyBSZWdpc3Rlck1vZGVsKCkpLm1haW4oKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJyZXNldHBhc3N3b3JkXCI6XG4gICAgICAgICAgICAgICAgbmV3IFJlc2V0UGFzc3dvcmRDb250cm9sbGVyKG5ldyBSZXNldFBhc3N3b3JkVmlld0hlbHBlcigpLCBuZXcgUmVzZXRQYXNzd29yZE1vZGVsKCkpLm1haW4oKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJ3aXNobGlzdFwiOlxuICAgICAgICAgICAgICAgIG5ldyBXaXNobGlzdENvbnRyb2xsZXIobmV3IFdpc2hsaXN0Vmlld0hlbHBlcigpLCBuZXcgV2lzaGxpc3RNb2RlbCgpKS5tYWluKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiYWRtaW5cIjpcbiAgICAgICAgICAgICAgICBuZXcgQWRtaW5Db250cm9sbGVyKG5ldyBBZG1pblZpZXdIZWxwZXIoKSwgbmV3IEFkbWluTW9kZWwoKSkubWFpbigpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImFkbWluX3VzZXJcIjpcbiAgICAgICAgICAgICAgICBuZXcgQWRtaW5Vc2VyQ29udHJvbGxlcihuZXcgQWRtaW5Vc2VyVmlld0hlbHBlcigpLCBuZXcgQWRtaW5Vc2VyTW9kZWwocGFydGljbGVzWzFdKSkubWFpbigpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIm9yZGVyXCI6XG4gICAgICAgICAgICAgICAgbmV3IE9yZGVyQ29udHJvbGxlcihuZXcgT3JkZXJWaWV3SGVscGVyKCksIG5ldyBPcmRlck1vZGVsKCkpLm1haW4oKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgbmV3IEVycm9yQ29udHJvbGxlcihuZXcgRXJyb3JWaWV3SGVscGVyKCkpLm1haW4oKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChoaXN0b3J5ICE9IGZhbHNlKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAodXJsICE9IFwiXCIgJiYgdHlwZW9mIHVybCA9PT0gJ3N0cmluZycpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgd3JpdGVIaXN0b3J5KHt9LCBcIkEtWiBHYW1lc1wiLCB1cmwpO1xuXG4gICAgICAgICAgICAgICAgLy8gTG9hZCBzY3JlZW4gYW5kIGNsb3NlIGNhcnRcbiAgICAgICAgICAgICAgICAkKFwiLnNpZGViYXJcIikucmVtb3ZlQ2xhc3MoXCJzaWRlYmFyLS1vcGVuXCIpO1xuICAgICAgICAgICAgICAgICQoXCIub3ZlcmxheVwiKS5yZW1vdmVDbGFzcyhcIm92ZXJsYXktLXZpc2libGVcIik7XG4gICAgICAgICAgICAgICAgJChcImJvZHlcIikucmVtb3ZlQ2xhc3MoXCJzaWRlYmFyLS1vcGVuXCIpO1xuICAgICAgICAgICAgICAgIHNob3dMb2FkU2NyZWVuKCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gU2Nyb2xsIHRvIHRvcCBvZiBwYWdlXG4gICAgICAgICAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNJbnRlcm5hbCh1cmwpXG4gICAge1xuICAgICAgICBpZiAodXJsLmluZGV4T2YoXCJodHRwXCIpICE9IC0xIHx8IHVybC5pbmRleE9mKFwid3d3XCIpICE9IC0xIHx8IHVybC5pbmRleE9mKFwibWFpbHRvXCIpICE9IC0xKVxuICAgICAgICB7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24gPSB1cmw7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFBhcnRpY2xlcyh1cmwpXG4gICAge1xuICAgICAgICAvLyBSZW1vdmUgdGhlIGZpcnN0IC9cbiAgICAgICAgaWYgKHVybC5pbmRleE9mKFwiL1wiKSA9PSAwKVxuICAgICAgICB7XG4gICAgICAgICAgICB1cmwgPSB1cmwuc3Vic3RyaW5nKDEpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSWYgdGhlcmUgaXMgYSBiYXNlIHVybCBzZXQsIHJlbW92ZSB0aGUgYmFzZSB1cmxcbiAgICAgICAgaWYgKHRoaXMuYmFzZVVybCAhPSBudWxsICYmIHVybC5pbmRleE9mKHRoaXMuYmFzZVVybCkgIT0gLTEpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHVybCA9IHVybC5zdWJzdHJpbmcodXJsLmluZGV4T2YodGhpcy5iYXNlVXJsKSArIHRoaXMuYmFzZVVybC5sZW5ndGgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHVybC5zcGxpdCgvXFwvKC4rKT8vKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHdyaXRlSGlzdG9yeShvYmplY3QsIHRpdGxlLCB1cmwpXG4gICAge1xuICAgICAgICB3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUob2JqZWN0LCB0aXRsZSwgdXJsKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICByb3V0ZTogcm91dGVcbiAgICB9XG59IiwiJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKVxue1xuICAgICQoXCIuc2lkZWJhci10b2dnbGVcIikuY2xpY2soZnVuY3Rpb24gKGUpXG4gICAge1xuICAgICAgICAvLyBQcmV2ZW50IGRlZmF1bHQgY2xpY2sgYWN0aW9uXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAvLyBJZCBvZiB0aGUgc2lkZWJhciB0byB0b2dnbGVcbiAgICAgICAgdmFyIHNpZGViYXIgPSAkKHRoaXMpLmRhdGEoXCJzaWRlYmFyXCIpO1xuXG4gICAgICAgIHRvZ2dsZVNpZGViYXIoJChcIiNcIiArIHNpZGViYXIpKTtcbiAgICB9KTtcblxuICAgICQoXCIuc2lkZWJhcl9fY2xvc2VcIikuY2xpY2soZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdG9nZ2xlU2lkZWJhcigkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpKTtcbiAgICB9KVxuXG4gICAgJChcIi5vdmVybGF5XCIpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHRvZ2dsZVNpZGViYXIoJChcIi5zaWRlYmFyXCIpLCB0cnVlKTtcbiAgICB9KTtcblxuICAgIGZ1bmN0aW9uIHRvZ2dsZVNpZGViYXIoc2lkZWJhciwgZm9yY2VDbG9zZSlcbiAgICB7XG4gICAgICAgIGlmIChmb3JjZUNsb3NlKVxuICAgICAgICB7XG4gICAgICAgICAgICAkKHNpZGViYXIpLnJlbW92ZUNsYXNzKFwic2lkZWJhci0tb3BlblwiKTsgICBcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgIHtcbiAgICAgICAgICAgICQoc2lkZWJhcikudG9nZ2xlQ2xhc3MoXCJzaWRlYmFyLS1vcGVuXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgJChcIi5vdmVybGF5XCIpLnRvZ2dsZUNsYXNzKFwib3ZlcmxheS0tdmlzaWJsZVwiKTtcbiAgICAgICAgJChcImJvZHlcIikudG9nZ2xlQ2xhc3MoXCJzaWRlYmFyLS1vcGVuXCIpO1xuICAgIH1cbn0pOyIsIiQuZm4uc2VyaWFsaXplT2JqZWN0ID0gZnVuY3Rpb24oKVxue1xuICAgIHZhciBvID0ge307XG4gICAgdmFyIGEgPSB0aGlzLnNlcmlhbGl6ZUFycmF5KCk7XG4gICAgJC5lYWNoKGEsIGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAob1t0aGlzLm5hbWVdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGlmICghb1t0aGlzLm5hbWVdLnB1c2gpIHtcbiAgICAgICAgICAgICAgICBvW3RoaXMubmFtZV0gPSBbb1t0aGlzLm5hbWVdXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlICE9IFwiXCIpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgb1t0aGlzLm5hbWVdLnB1c2godGhpcy52YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAodGhpcy52YWx1ZSAhPSBcIlwiKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG9bdGhpcy5uYW1lXSA9IHRoaXMudmFsdWUgfHwgJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gbztcbn07IiwidmFyIEFkbWluTW9kZWwgPSBmdW5jdGlvbigpXG57XG4gICAgZnVuY3Rpb24gZ2V0UGFnZShjYWxsYmFjaylcbiAgICB7XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6IFwiaHR0cHM6Ly9hcGkuYXotZ2FtZXMubmwvYWRtaW4vdXNlcnNcIiwgLy9cImh0dHBzOi8vYXBpLmF6LWdhbWVzLm5sL1xuICAgICAgICAgICAgdHlwZTogXCJHRVRcIixcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgXCJBdXRob3JpemF0aW9uXCI6IFwiQmVhcmVyIFwiICsgQ29va2llSGVscGVyLmdldENvb2tpZShcImFjY2Vzc190b2tlblwiKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZGF0YSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICh4aHIsIHN0YXR1cywgZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAkKFwiI2NvbXBvbmVudFwiKS5sb2FkKFwiL3ZpZXdzL2Vycm9yL2Vycm9yLmh0bWxcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ2V0UGFnZTogZ2V0UGFnZVxuICAgIH1cblxufTsiLCJ2YXIgQWRtaW5Vc2VyTW9kZWwgPSBmdW5jdGlvbihpZClcbntcbiAgICBmdW5jdGlvbiBnZXRQYWdlKGNhbGxiYWNrKVxuICAgIHtcbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHVybDogXCJodHRwczovL2FwaS5hei1nYW1lcy5ubC9hZG1pbi91c2Vycy9cIiArIGlkLCAvL1wiaHR0cHM6Ly9hcGkuYXotZ2FtZXMubmwvXG4gICAgICAgICAgICB0eXBlOiBcIkdFVFwiLFxuICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcIkF1dGhvcml6YXRpb25cIjogXCJCZWFyZXIgXCIgKyBDb29raWVIZWxwZXIuZ2V0Q29va2llKFwiYWNjZXNzX3Rva2VuXCIpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhkYXRhWzBdKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHhociwgc3RhdHVzLCBlcnJvcikge1xuICAgICAgICAgICAgICAgICQoXCIjY29tcG9uZW50XCIpLmxvYWQoXCIvdmlld3MvZXJyb3IvZXJyb3IuaHRtbFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2F2ZVVzZXJJbmZvKGRhdGEsIGNhbGxiYWNrKVxuICAgIHtcbiAgICAgICAgLy8gTW9kaWZ5IGRhdGEgYmVmb3JlIHNlbmRpbmcgKGFsc28gY29udmVydCB0byBVVEMpXG4gICAgICAgIGRhdGEuZGF0ZV9vZl9iaXJ0aCA9IG5ldyBEYXRlKERhdGUuVVRDKGRhdGEuamFhciwgZGF0YS5tYWFuZCwgZGF0YS5kYWcpKTtcblxuICAgICAgICAvLyBSZW1vdmUgeWVhciwgbW9udGggYW5kIGRheVxuICAgICAgICBkZWxldGUgZGF0YS5qYWFyO1xuICAgICAgICBkZWxldGUgZGF0YS5tYWFuZDtcbiAgICAgICAgZGVsZXRlIGRhdGEuZGFnO1xuXG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6IFwiaHR0cHM6Ly9hcGkuYXotZ2FtZXMubmwvYWRtaW4vdXNlcnMvXCIgKyBkYXRhLnVzZXJfaWQsIC8vXCJodHRwczovL2FwaS5hei1nYW1lcy5ubC9cbiAgICAgICAgICAgIHR5cGU6IFwiUEFUQ0hcIixcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICBjb250ZW50VHlwZTogXCJhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04XCIsXG4gICAgICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeShkYXRhKSxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcIkF1dGhvcml6YXRpb25cIjogXCJCZWFyZXIgXCIgKyBDb29raWVIZWxwZXIuZ2V0Q29va2llKFwiYWNjZXNzX3Rva2VuXCIpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhkYXRhKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHhociwgc3RhdHVzLCBlcnJvcikge1xuICAgICAgICAgICAgICAgICQoXCIjY29tcG9uZW50XCIpLmxvYWQoXCIvdmlld3MvZXJyb3IvZXJyb3IuaHRtbFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGVsZXRlVXNlcih1c2VyX2lkLCBjYWxsYmFjaylcbiAgICB7XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6IFwiaHR0cHM6Ly9hcGkuYXotZ2FtZXMubmwvYWRtaW4vdXNlcnMvXCIgKyB1c2VyX2lkLCAvL1wiaHR0cHM6Ly9hcGkuYXotZ2FtZXMubmwvXG4gICAgICAgICAgICB0eXBlOiBcIkRFTEVURVwiLFxuICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcIkF1dGhvcml6YXRpb25cIjogXCJCZWFyZXIgXCIgKyBDb29raWVIZWxwZXIuZ2V0Q29va2llKFwiYWNjZXNzX3Rva2VuXCIpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoeGhyLCBzdGF0dXMsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgJChcIiNjb21wb25lbnRcIikubG9hZChcIi92aWV3cy9lcnJvci9lcnJvci5odG1sXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBieSBvdGhlciBwcm9ncmFtcyAodGhlIGNvbnRyb2xsZXIgaW4gdGhpcyBjYXNlKVxuICAgIHJldHVybiB7XG4gICAgICAgIGdldFBhZ2U6IGdldFBhZ2UsXG4gICAgICAgIHNhdmVVc2VySW5mbzogc2F2ZVVzZXJJbmZvLFxuICAgICAgICBkZWxldGVVc2VyOiBkZWxldGVVc2VyXG4gICAgfVxufSIsInZhciBDYXJ0TW9kZWwgPSBmdW5jdGlvbigpXG57XG4gICAgLyoqXG4gICAgICogR2V0IGFsbCBjYXJ0IGl0ZW1zXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0Q2FydChjYWxsYmFjaylcbiAgICB7XG4gICAgICAgIHZhciBjYXJ0ID0gQ29va2llSGVscGVyLmdldENvb2tpZShcImNhcnRcIik7XG5cbiAgICAgICAgaWYgKGNhcnQgIT0gdW5kZWZpbmVkKVxuICAgICAgICB7XG4gICAgICAgICAgICBjYWxsYmFjayhKU09OLnBhcnNlKGNhcnQpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZCBhIHByb2R1Y3QgdG8gdGhlIGNhcnQgY29va2llIGFuZCBkYXRhYmFzZSBpZiB0aGUgdXNlciBpcyByZWdpc3RlcmVkXG4gICAgICovXG4gICAgZnVuY3Rpb24gYWRkUHJvZHVjdChpZCwgY2FsbGJhY2spXG4gICAge1xuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgdXJsOiBcImh0dHBzOi8vYXBpLmF6LWdhbWVzLm5sL3Byb2R1Y3RzL1wiICsgaWQsXG4gICAgICAgICAgICB0eXBlOiBcImdldFwiLFxuICAgICAgICAgICAgY29udGVudFR5cGU6IFwianNvblwiLFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBjYXJ0ID0ge2Vhbl9udW1iZXI6ZGF0YVswXS5lYW5fbnVtYmVyLCB0aXRsZTpkYXRhWzBdLnRpdGxlLCBwcmljZTpkYXRhWzBdLnByaWNlLCBpbWFnZTpkYXRhWzBdLmltYWdlfTtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhjYXJ0KTtcblxuICAgICAgICAgICAgICAgIC8vIFNhdmUgY2FydCBpbiBjb29raWVzXG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRDYXJ0ID0gQ29va2llSGVscGVyLmdldENvb2tpZShcImNhcnRcIik7XG5cbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudENhcnQgPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgQ29va2llSGVscGVyLmNyZWF0ZUNvb2tpZShcImNhcnRcIiwgSlNPTi5zdHJpbmdpZnkoW2NhcnRdKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRDYXJ0ID0gSlNPTi5wYXJzZShjdXJyZW50Q2FydCk7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRDYXJ0LnB1c2goY2FydCk7XG5cbiAgICAgICAgICAgICAgICAgICAgQ29va2llSGVscGVyLmNyZWF0ZUNvb2tpZShcImNhcnRcIiwgSlNPTi5zdHJpbmdpZnkoY3VycmVudENhcnQpKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHhociwgc3RhdHVzLCBlcnJvcikge1xuICAgICAgICAgICAgICAgICQoXCIjY29tcG9uZW50XCIpLmxvYWQoXCIvdmlld3MvZXJyb3IvZXJyb3IuaHRtbFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGEgaXRlbSBmcm9tIHRoZSBjYXJ0XG4gICAgICogXG4gICAgICogQHBhcmFtIHtpbnR9IGlkIFByb2R1Y3QgaWRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZW1vdmVQcm9kdWN0KGlkKVxuICAgIHtcbiAgICAgICAgY2FydCA9IEpTT04ucGFyc2UoQ29va2llSGVscGVyLmdldENvb2tpZShcImNhcnRcIikpO1xuXG4gICAgICAgIGZvcihpID0gMDsgaSA8IGNhcnQubGVuZ3RoOyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmIChjYXJ0W2ldLmVhbl9udW1iZXIgPT0gaWQpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2FydC5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIENvb2tpZUhlbHBlci5jcmVhdGVDb29raWUoXCJjYXJ0XCIsIEpTT04uc3RyaW5naWZ5KGNhcnQpKTtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBieSBvdGhlciBwcm9ncmFtcyAodGhlIGNvbnRyb2xsZXIgaW4gdGhpcyBjYXNlKVxuICAgIHJldHVybiB7XG4gICAgICAgIGdldENhcnQ6IGdldENhcnQsXG4gICAgICAgIGFkZFByb2R1Y3Q6IGFkZFByb2R1Y3QsXG4gICAgICAgIHJlbW92ZVByb2R1Y3Q6IHJlbW92ZVByb2R1Y3RcbiAgICB9XG59OyIsInZhciBMb2dpbk1vZGVsID0gZnVuY3Rpb24oKVxue1xuICAgIGZ1bmN0aW9uIGxvZ2luKGVtYWlsLCBwYXNzd29yZCwgY2FsbGJhY2spXG4gICAge1xuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgdXJsOiBcImh0dHBzOi8vYXBpLmF6LWdhbWVzLm5sL3VzZXIvbG9naW5cIixcbiAgICAgICAgICAgIHR5cGU6IFwiR0VUXCIsXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiQXV0aG9yaXphdGlvblwiOiBcIkJhc2ljIFwiICsgYnRvYShlbWFpbCArIFwiOlwiICsgcGFzc3dvcmQpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAvLyBwdXQgdG9rZW4gaW4gY29va2llXG4gICAgICAgICAgICAgICAgQ29va2llSGVscGVyLmNyZWF0ZUNvb2tpZShcImFjY2Vzc190b2tlblwiLCBkYXRhLmFjY2Vzc190b2tlbik7XG4gICAgICAgICAgICAgICAgQ29va2llSGVscGVyLmNyZWF0ZUNvb2tpZShcInVzZXJfaWRcIiwgZGF0YS51c2VyX2lkKTtcblxuICAgICAgICAgICAgICAgIC8vICdyZWxvYWQnIHBhZ2VcbiAgICAgICAgICAgICAgICBvbkxvYWRQYWdlKCk7XG5cbiAgICAgICAgICAgICAgICAvLyBsZXQgY29udHJvbGxlciByZXN1bWUgd2l0aCBzdHVmZlxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGRhdGEpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoeGhyLCBzdGF0dXMsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgLy8gc2hvdyAnbm90IGdvb2QgZW1haWwgb3IgcGFzc3dvcmQgdG8gdXNlcidcbiAgICAgICAgICAgICAgICAkKFwiI2Vycm9yX21lc3NhZ2VcIikuc2hvdygpO1xuXG4gICAgICAgICAgICAgICAgLy8kKFwiI2NvbXBvbmVudFwiKS5odG1sKFwiZXJyb3IgZnVuY3Rpb25cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXG4gICAgcmV0dXJuIHtcbiAgICAgICAgbG9naW46IGxvZ2luXG4gICAgfVxufTsiLCJ2YXIgTG9nb3V0TW9kZWwgPSBmdW5jdGlvbigpXG57XG4gICAgZnVuY3Rpb24gbG9nb3V0KGNhbGxiYWNrKVxuICAgIHtcbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHVybDogXCJodHRwczovL2FwaS5hei1nYW1lcy5ubC91c2VyL2xvZ291dFwiLCAvLz8gaHR0cDovLzg0Ljg0LjI0NS4yOToyNDMgPSBBUEktbG9jYXRpZT9cbiAgICAgICAgICAgIHR5cGU6IFwicG9zdFwiLFxuICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICB1c2VyX2lkOiBnZXRDb29raWUoXCJ1c2VyX2lkXCIpXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgLy8gbGV0IGNvbnRyb2xsZXIgcmVzdW1lIHdpdGggc3R1ZmZcbiAgICAgICAgICAgICAgICBDb29raWVIZWxwZXIuZGVsZXRlQ29va2llKFwiYWNjZXNzX3Rva2VuXCIpO1xuICAgICAgICAgICAgICAgIENvb2tpZUhlbHBlci5kZWxldGVDb29raWUoXCJ1c2VyX2lkXCIpO1xuXG4gICAgICAgICAgICAgICAgLy8gJ3JlbG9hZCcgcGFnZVxuICAgICAgICAgICAgICAgIG9uTG9hZFBhZ2UoKTtcblxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGRhdGEpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoeGhyLCBzdGF0dXMsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgLy8gc2hvdyAnbm90IGdvb2QgZW1haWwgb3IgcGFzc3dvcmQgdG8gdXNlcidcbiAgICAgICAgICAgICAgICAkKFwiI2Vycm9yX21lc3NhZ2VcIikuc2hvdygpO1xuXG4gICAgICAgICAgICAgICAgLy8kKFwiI2NvbXBvbmVudFwiKS5odG1sKFwiZXJyb3IgZnVuY3Rpb25cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGZ1bmN0aW9uIGdldENvb2tpZShuYW1lKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgY29va2llcyA9IGRvY3VtZW50LmNvb2tpZS5zcGxpdCgnOycpO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvb2tpZXMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdmFyIGNvb2tpZSA9IGNvb2tpZXNbaV0uc3BsaXQoXCI9XCIpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGNvb2tpZVswXS50cmltKCkgPT0gbmFtZSlcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb29raWVbMV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHRoZSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgcHJvZ3JhbXMgKHRoZSBjb250cm9sbGVyIGluIHRoaXMgY2FzZSlcbiAgICByZXR1cm4ge1xuICAgICAgICBsb2dvdXQ6IGxvZ291dFxuICAgIH1cbn07IiwidmFyIE9yZGVyTW9kZWwgPSBmdW5jdGlvbigpXG57XG4gICAgZnVuY3Rpb24gZ2V0T3JkZXJJbmZvcm1hdGlvbihjYWxsYmFjaylcbiAgICB7XG4gICAgICAgIHZhciBjYXJ0ID0gQ29va2llSGVscGVyLmdldENvb2tpZSgnY2FydCcpO1xuXG4gICAgICAgIGlmIChjYXJ0ICE9IHVuZGVmaW5lZCAmJiBjYXJ0ICE9IFwiXCIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKEpTT04ucGFyc2UoY2FydCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICAgICAgY2FsbGJhY2soW10pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2F2ZU9yZGVyKG9yZGVyRGF0YSwgY2FsbGJhY2spXG4gICAge1xuICAgICAgICAvLyBBcHBlbmQgZGF0YSBmb3JtIG90aGVyIHNvdXJjZXNcbiAgICAgICAgb3JkZXJEYXRhLnN0YXR1cyAgICAgICAgID0gXCJwYWlkXCI7XG4gICAgICAgIG9yZGVyRGF0YS5idHdfcGVyY2VudGFnZSA9IDIxO1xuICAgICAgICBvcmRlckRhdGEub3JkZXJfZGF0ZSAgICAgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBvcmRlckRhdGEuZGVsaXZlcnlfY29zdHMgPSAzLjk1O1xuICAgICAgICBvcmRlckRhdGEuY2FydCAgICAgICAgICAgPSBKU09OLnBhcnNlKENvb2tpZUhlbHBlci5nZXRDb29raWUoXCJjYXJ0XCIpKTtcblxuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgdXJsOiBcImh0dHBzOi8vYXBpLmF6LWdhbWVzLm5sL29yZGVyc1wiLFxuICAgICAgICAgICAgdHlwZTogXCJwb3N0XCIsXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkob3JkZXJEYXRhKSxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcIkF1dGhvcml6YXRpb25cIjogXCJCZWFyZXIgXCIgKyBDb29raWVIZWxwZXIuZ2V0Q29va2llKFwiYWNjZXNzX3Rva2VuXCIpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgQ29va2llSGVscGVyLmRlbGV0ZUNvb2tpZShcImNhcnRcIik7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHhociwgc3RhdHVzLCBlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwic29tZXRpbmcgd2VudCB3cm9uZ1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBieSBvdGhlciBwcm9ncmFtcyAodGhlIGNvbnRyb2xsZXIgaW4gdGhpcyBjYXNlKVxuICAgIHJldHVybiB7XG4gICAgICAgIGdldE9yZGVySW5mb3JtYXRpb246IGdldE9yZGVySW5mb3JtYXRpb24sXG4gICAgICAgIHNhdmVPcmRlcjogc2F2ZU9yZGVyXG4gICAgfVxufTsiLCJ2YXIgUHJvZHVjdHNNb2RlbCA9IGZ1bmN0aW9uKClcbntcbiAgICBmdW5jdGlvbiBnZXRQYWdlKGZpbHRlciwgY2FsbGJhY2spXG4gICAge1xuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgdXJsOiBcImh0dHBzOi8vYXBpLmF6LWdhbWVzLm5sL3Byb2R1Y3RzP1wiICsgZmlsdGVyLCAvLz8gaHR0cDovLzg0Ljg0LjI0NS4yOToyNDMgPSBBUEktbG9jYXRpZT9cbiAgICAgICAgICAgIHR5cGU6IFwiZ2V0XCIsXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhkYXRhKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHhociwgc3RhdHVzLCBlcnJvcikge1xuICAgICAgICAgICAgICAgICQoXCIjY29tcG9uZW50XCIpLmxvYWQoXCIvdmlld3MvZXJyb3IvZXJyb3IuaHRtbFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHRoZSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgcHJvZ3JhbXMgKHRoZSBjb250cm9sbGVyIGluIHRoaXMgY2FzZSlcbiAgICByZXR1cm4ge1xuICAgICAgICBnZXRQYWdlOiBnZXRQYWdlXG4gICAgfVxufTsiLCJ2YXIgUmVnaXN0ZXJNb2RlbCA9IGZ1bmN0aW9uKClcbntcbiAgICBmdW5jdGlvbiByZWdpc3Rlcihmb3JtRGF0YSwgY2FsbGJhY2spXG4gICAge1xuICAgICAgICAvLyBNb2RpZnkgZGF0YSBiZWZvcmUgc2VuZGluZyAoYWxzbyBjb252ZXJ0IHRvIFVUQylcbiAgICAgICAgZm9ybURhdGEuZGF0ZV9vZl9iaXJ0aCA9IG5ldyBEYXRlKERhdGUuVVRDKGZvcm1EYXRhLmphYXIsIGZvcm1EYXRhLm1hYW5kLCBmb3JtRGF0YS5kYWcpKTtcblxuICAgICAgICAvLyBSZW1vdmUgeWVhciwgbW9udGggYW5kIGRheVxuICAgICAgICBkZWxldGUgZm9ybURhdGEuamFhcjtcbiAgICAgICAgZGVsZXRlIGZvcm1EYXRhLm1hYW5kO1xuICAgICAgICBkZWxldGUgZm9ybURhdGEuZGFnO1xuXG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6IFwiaHR0cHM6Ly9hcGkuYXotZ2FtZXMubmwvdXNlci9yZWdpc3RlclwiLFxuICAgICAgICAgICAgdHlwZTogXCJwb3N0XCIsXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIGVfbWFpbCA6IGZvcm1EYXRhLmVfbWFpbGFkcmVzLFxuICAgICAgICAgICAgICAgIHBhc3N3b3JkIDogZm9ybURhdGEud2FjaHR3b29yZCxcbiAgICAgICAgICAgICAgICBmaXJzdF9uYW1lIDogZm9ybURhdGEudm9vcm5hYW0sXG4gICAgICAgICAgICAgICAgaW5zZXJ0aW9uIDogZm9ybURhdGEudHVzc2Vudm9lZ3NlbCxcbiAgICAgICAgICAgICAgICBzdXJuYW1lIDogZm9ybURhdGEuYWNodGVybmFhbSxcbiAgICAgICAgICAgICAgICBnZW5kZXIgOiBmb3JtRGF0YS5nZW5kZXIsXG4gICAgICAgICAgICAgICAgZGF0ZV9vZl9iaXJ0aCA6IGZvcm1EYXRhLmJpcnRoX2RhdGUsXG4gICAgICAgICAgICAgICAgcGhvbmVfbnVtYmVyIDogZm9ybURhdGEubW9iaWVsX251bW1lcixcbiAgICAgICAgICAgICAgICBzZWNyZXRfcXVlc3Rpb24gOiBmb3JtRGF0YS5zZWN1cml0eV9xdWVzdGlvbixcbiAgICAgICAgICAgICAgICBzZWNyZXRfcXVlc3Rpb25fYW5zd2VyIDogZm9ybURhdGEuc2VjdXJpdHlfYW5zd2VyLFxuICAgICAgICAgICAgICAgIHBvc3RhbF9jb2RlIDogZm9ybURhdGEucG9zdGNvZGUsXG4gICAgICAgICAgICAgICAgbnVtYmVyIDogZm9ybURhdGEuaHVpc251bW1lcixcbiAgICAgICAgICAgICAgICBzdHJlZXRfbmFtZSA6IGZvcm1EYXRhLnN0cmFhdG5hYW0sXG4gICAgICAgICAgICAgICAgY2l0eSA6IGZvcm1EYXRhLnBsYWF0c1xuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGRhdGEpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoeGhyLCBzdGF0dXMsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgJChcIiNyZWdpX2FwaV9lcnJvcl9tZXNzYWdlXCIpLnNob3coKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHRoZSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgcHJvZ3JhbXMgKHRoZSBjb250cm9sbGVyIGluIHRoaXMgY2FzZSlcbiAgICByZXR1cm4ge1xuICAgICAgICByZWdpc3RlcjogcmVnaXN0ZXJcbiAgICB9XG59OyIsInZhciBSZXNldFBhc3N3b3JkTW9kZWwgPSBmdW5jdGlvbigpXG57XG4gICAgZnVuY3Rpb24gcmVzZXRwYXNzd29yZChmb3JtRGF0YSwgY2FsbGJhY2spXG4gICAge1xuICAgICAgICBjb25zb2xlLmxvZyhmb3JtRGF0YSk7XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6IFwiaHR0cHM6Ly9hcGkuYXotZ2FtZXMubmwvdXNlci9yZXNldHBhc3N3b3JkXCIsXG4gICAgICAgICAgICB0eXBlOiBcInBvc3RcIixcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgZW1haWwgOiBmb3JtRGF0YS5lX21haWxhZHJlcyxcbiAgICAgICAgICAgICAgICBzZWNyZXRfcXVlc3Rpb25fYW5zd2VyIDogZm9ybURhdGEuc2VjdXJpdHlfYW5zd2VyLFxuICAgICAgICAgICAgICAgIHNlY3JldF9xdWVzdGlvbiA6IGZvcm1EYXRhLnNlY3VyaXR5X3F1ZXN0aW9uLFxuICAgICAgICAgICAgICAgIG5ld19wYXNzd29yZCA6IGZvcm1EYXRhLndhY2h0d29vcmQsXG4gICAgICAgICAgICAgICAgcmVwZWF0X3Bhc3N3b3JkIDogZm9ybURhdGEud2FjaHR3b29yZDJcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhkYXRhKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHhociwgc3RhdHVzLCBlcnJvcikge1xuICAgICAgICAgICAgICAgIC8vJChcIiNjb21wb25lbnRcIikubG9hZChcInZpZXdzL2Vycm9yL2Vycm9yLmh0bWxcIik7XG4gICAgICAgICAgICAgICAgJChcIiNyZXNldF9wYXNzd29yZF9hcGlfZXJyb3JfbWVzc2FnZVwiKS5zaG93KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzZXRwYXNzd29yZDogcmVzZXRwYXNzd29yZFxuICAgIH1cbn07IiwidmFyIFByb2R1Y3RNb2RlbCA9IGZ1bmN0aW9uKGVhbilcbntcbiAgICBmdW5jdGlvbiBHZXRQcm9kdWN0SW5mbyhjYWxsYmFjaylcbiAgICB7XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6IFwiaHR0cHM6Ly9hcGkuYXotZ2FtZXMubmwvcHJvZHVjdHMvXCIgKyBlYW4sXG4gICAgICAgICAgICB0eXBlOiBcImdldFwiLFxuICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgLy8gbGV0IGNvbnRyb2xsZXIgcmVzdW1lIHdpdGggc3R1ZmZcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhkYXRhWzBdKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHhociwgc3RhdHVzLCBlcnJvcikge1xuICAgICAgICAgICAgICAgICQoXCIjY29tcG9uZW50XCIpLmxvYWQoXCIvdmlld3MvZXJyb3IvZXJyb3IuaHRtbFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHRoZSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgcHJvZ3JhbXMgKHRoZSBjb250cm9sbGVyIGluIHRoaXMgY2FzZSlcbiAgICByZXR1cm4ge1xuICAgICAgICBHZXRQcm9kdWN0SW5mbzogR2V0UHJvZHVjdEluZm9cbiAgICB9XG59OyIsInZhciBVc2VyTW9kZWwgPSBmdW5jdGlvbih1c2VyaWQpXG57XG4gICAgZnVuY3Rpb24gR2V0VXNlckluZm8oY2FsbGJhY2spXG4gICAge1xuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgdXJsOiBcImh0dHBzOi8vYXBpLmF6LWdhbWVzLm5sL3VzZXJzL1wiICsgdXNlcmlkLFxuICAgICAgICAgICAgdHlwZTogXCJnZXRcIixcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIC8vIGxldCBjb250cm9sbGVyIHJlc3VtZSB3aXRoIHN0dWZmXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZGF0YVswXSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICh4aHIsIHN0YXR1cywgZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAkKFwiI2NvbXBvbmVudFwiKS5sb2FkKFwiL2Vycm9yLmh0bWxcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXG4gICAgcmV0dXJuIHtcbiAgICAgICAgR2V0VXNlckluZm86IEdldFVzZXJJbmZvXG4gICAgfVxufTsiLCJ2YXIgV2lzaGxpc3RNb2RlbCA9IGZ1bmN0aW9uKClcbntcbiAgICBmdW5jdGlvbiBnZXRXaXNobGlzdChjYWxsYmFjaylcbiAgICB7XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6IFwiaHR0cHM6Ly9hcGkuYXotZ2FtZXMubmwvd2lzaGxpc3RcIixcbiAgICAgICAgICAgIHR5cGU6IFwiZ2V0XCIsXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiQXV0aG9yaXphdGlvblwiOiBcIkJlYXJlciBcIiArIENvb2tpZUhlbHBlci5nZXRDb29raWUoXCJhY2Nlc3NfdG9rZW5cIilcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGRhdGEpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoeGhyLCBzdGF0dXMsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgJChcIiNjb21wb25lbnRcIikubG9hZChcIi92aWV3cy9lcnJvci9lcnJvci5odG1sXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhZGRUb1dpc2hsaXN0KHZpZXdEYXRhLCBjYWxsYmFjaylcbiAgICB7XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6IFwiaHR0cHM6Ly9hcGkuYXotZ2FtZXMubmwvd2lzaGxpc3QvXCIgKyBDb29raWVIZWxwZXIuZ2V0Q29va2llKFwidXNlcl9pZFwiKSAvKisgXCIvXCIgKyB2aWV3RGF0YS5lYW5fbnVtYmVyKi8sXG4gICAgICAgICAgICB0eXBlOiBcInBvc3RcIixcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgd2lzaGxpc3RfaWQgOiB2aWV3RGF0YS53aXNobGlzdF9pZCxcbiAgICAgICAgICAgICAgICAvL2Vhbl9udW1iZXIgOiB2aWV3RGF0YS5lYW5fbnVtYmVyXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcIkF1dGhvcml6YXRpb25cIjogXCJCZWFyZXIgXCIgKyBDb29raWVIZWxwZXIuZ2V0Q29va2llKFwiYWNjZXNzX3Rva2VuXCIpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhkYXRhKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oeGhyLCBzdGF0dXMsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgJChcIiNjb21wb25lbnRcIikubG9hZChcIi92aWV3cy9lcnJvci9lcnJvci5odG1sXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkZWxldGVGcm9tV2lzaGxpc3QoZWFuLCBjYWxsYmFjaylcbiAgICB7XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6IFwiaHR0cHM6Ly9hcGkuYXotZ2FtZXMubmwvd2lzaGxpc3QvXCIgKyBDb29raWVIZWxwZXIuZ2V0Q29va2llKFwidXNlcl9pZFwiKSArIFwiL1wiICsgU3RyaW5nKGVhbiksIC8vXCJodHRwczovL2FwaS5hei1nYW1lcy5ubC9cbiAgICAgICAgICAgIHR5cGU6IFwiREVMRVRFXCIsXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgLy8gY29udGVudFR5cGU6IFwiYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOFwiLFxuICAgICAgICAgICAgLy8gZGF0YTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgXCJBdXRob3JpemF0aW9uXCI6IFwiQmVhcmVyIFwiICsgQ29va2llSGVscGVyLmdldENvb2tpZShcImFjY2Vzc190b2tlblwiKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZGF0YSk7IC8vbW9ldCBkYXRhIHBlciBzZSBtZWVnZXZlbiBhYW4gY2FsbGJhY2s/XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICh4aHIsIHN0YXR1cywgZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAkKFwiI2NvbXBvbmVudFwiKS5sb2FkKFwiL3ZpZXdzL2Vycm9yL2Vycm9yLmh0bWxcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ2V0V2lzaGxpc3Q6IGdldFdpc2hsaXN0LFxuICAgICAgICBhZGRUb1dpc2hsaXN0OiBhZGRUb1dpc2hsaXN0LFxuICAgICAgICBkZWxldGVGcm9tV2lzaGxpc3Q6IGRlbGV0ZUZyb21XaXNobGlzdFxuICAgIH1cbn07IiwidmFyIEFkbWluQ29udHJvbGxlciA9IGZ1bmN0aW9uKHZpZXdIZWxwZXIsIG1vZGVsKVxue1xuICAgIHZhciBNb2RlbCAgICAgID0gbW9kZWw7XG4gICAgdmFyIFZpZXdIZWxwZXIgPSB2aWV3SGVscGVyO1xuICAgIFxuICAgIC8vIE1haW4gZnVuY3Rpb24sIGFsc28gdGhlIHN0YXJ0IHN0YXJ0cG9pbnQgZm9yIGEgcGFnZVxuICAgIGZ1bmN0aW9uIG1haW4oKVxuICAgIHtcbiAgICAgICAgVmlld0hlbHBlci5zZXRBY3Rpb25MaXN0ZW5lcihnZXRQYWdlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRQYWdlKClcbiAgICB7XG4gICAgICAgIE1vZGVsLmdldFBhZ2Uoc2V0Vmlldyk7IC8vXCJcIiwgZnVuY3Rpb24gKGRhdGEpIHsgVmlld0hlbHBlci5zZXRWaWV3KGRhdGEpOyB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gc2V0VmlldyhkYXRhKSBcbiAgICB7XG4gICAgICAgIFZpZXdIZWxwZXIuc2V0VmlldyhkYXRhKTtcbiAgICB9XG5cblxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXG4gICAgcmV0dXJuIHtcbiAgICAgICAgbWFpbjogbWFpblxuICAgIH1cbn07IiwidmFyIEFkbWluVXNlckNvbnRyb2xsZXIgPSBmdW5jdGlvbih2aWV3SGVscGVyLCBtb2RlbClcbntcbiAgICB2YXIgTW9kZWwgICAgICA9IG1vZGVsO1xuICAgIHZhciBWaWV3SGVscGVyID0gdmlld0hlbHBlcjtcbiAgICBcbiAgICAvLyBNYWluIGZ1bmN0aW9uLCBhbHNvIHRoZSBzdGFydCBzdGFydHBvaW50IGZvciBhIHBhZ2VcbiAgICBmdW5jdGlvbiBtYWluKClcbiAgICB7XG4gICAgICAgIFZpZXdIZWxwZXIuc2V0QWN0aW9uTGlzdGVuZXIoZ2V0UGFnZSk7XG4gICAgICAgIHZpZXdIZWxwZXIuc2V0U2F2ZUxpc3RlbmVyKHNhdmVVc2VySW5mbyk7XG4gICAgICAgIHZpZXdIZWxwZXIuc2V0RGVsZXRlTGlzdGVuZXIoZGVsZXRlVXNlcik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0UGFnZSgpXG4gICAge1xuICAgICAgICBNb2RlbC5nZXRQYWdlKHNldFZpZXcpO1xuICAgIH1cbiAgICBcbiAgICBmdW5jdGlvbiBzZXRWaWV3KGRhdGEpIFxuICAgIHtcbiAgICAgICAgVmlld0hlbHBlci5zZXRWaWV3KGRhdGEpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNhdmVVc2VySW5mbyhldmVudClcbiAgICB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgIHZhciBmb3JtRGF0YSA9ICQodGhpcykuc2VyaWFsaXplT2JqZWN0KCk7XG5cbiAgICAgICAgTW9kZWwuc2F2ZVVzZXJJbmZvKGZvcm1EYXRhLCBmdW5jdGlvbihmb3JtRGF0YSlcbiAgICAgICAge1xuICAgICAgICAgICAgYWxlcnQoXCJHZWJydWlrZXIgc3VjY2Vzdm9sIGdlw7xwZGF0ZS5cIik7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRlbGV0ZVVzZXIodXNlcl9pZClcbiAgICB7XG4gICAgICAgIE1vZGVsLmRlbGV0ZVVzZXIodXNlcl9pZCwgZnVuY3Rpb24oKVxuICAgICAgICB7XG4gICAgICAgICAgICBhbGVydChcIkdlYnJ1aWtlciBzdWNjZXN2b2wgZ2VkZWxldGUuXCIpO1xuICAgICAgICAgICAgUm91dGVyLnJvdXRlKFwiL2FkbWluXCIpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBieSBvdGhlciBwcm9ncmFtcyAodGhlIGNvbnRyb2xsZXIgaW4gdGhpcyBjYXNlKVxuICAgIHJldHVybiB7XG4gICAgICAgIG1haW46IG1haW5cbiAgICB9XG59OyIsInZhciBDYXJ0Q29udHJvbGxlciA9IGZ1bmN0aW9uKHZpZXdIZWxwZXIsIG1vZGVsKVxue1xuICAgIHZhciBNb2RlbCAgICAgID0gbW9kZWw7XG4gICAgdmFyIFZpZXdIZWxwZXIgPSB2aWV3SGVscGVyO1xuICAgIFxuICAgIC8qKlxuICAgICAqIEdldCBhbGwgY2FydCBpdGVtcyBhbmQgcGFzcyB0aGUgaXRlbXMgdG8gdGhlIFZpZXdIZWxwZXJcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRDYXJ0KClcbiAgICB7XG4gICAgICAgIE1vZGVsLmdldENhcnQoZnVuY3Rpb24gKGRhdGEpIHsgVmlld0hlbHBlci5zZXRWaWV3KGRhdGEpOyB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGQgYSBpdGVtIHRvIHRoZSBjYXJ0IGFuZCBwYXNzIGl0IHRvIHRoZSB2aWV3SGVscGVyXG4gICAgICogXG4gICAgICogQHBhcmFtIHtpbnR9IGlkICBJdGVtIGlkXG4gICAgICovXG4gICAgZnVuY3Rpb24gYWRkUHJvZHVjdChpZClcbiAgICB7XG4gICAgICAgIE1vZGVsLmFkZFByb2R1Y3QoaWQsIGZ1bmN0aW9uIChkYXRhKSB7IFZpZXdIZWxwZXIuYWRkSXRlbShkYXRhKTsgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGEgcHJvZHVjdCBhbmQgY2FsbCB0aGUgdmlld0hlbHBlclxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJlbW92ZVByb2R1Y3QoaWQpXG4gICAge1xuICAgICAgICBNb2RlbC5yZW1vdmVQcm9kdWN0KGlkLCBmdW5jdGlvbiAoZGF0YSkgeyB9KTtcbiAgICB9XG5cbiAgICAvLyBNYWluIGZ1bmN0aW9uLCBhbHNvIHRoZSBzdGFydCBzdGFydHBvaW50IGZvciBhIHBhZ2VcbiAgICBmdW5jdGlvbiBtYWluKClcbiAgICB7ICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgIFZpZXdIZWxwZXIuc2V0QWN0aW9uTGlzdGVuZXIoZ2V0Q2FydCk7XG4gICAgICAgIFZpZXdIZWxwZXIuc2V0QWRkUHJvZHVjdExpc3RlbmVyKGFkZFByb2R1Y3QpO1xuICAgICAgICBWaWV3SGVscGVyLnNldFJlbW92ZUxpc3RlbmVyKHJlbW92ZVByb2R1Y3QpO1xuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXG4gICAgcmV0dXJuIHtcbiAgICAgICAgbWFpbjogbWFpblxuICAgIH1cbn07IiwidmFyIERlbGV0ZUNvbnRyb2xsZXIgPSBmdW5jdGlvbih2aWV3SGVscGVyLCBtb2RlbClcbntcbiAgICB2YXIgTW9kZWwgICAgICA9IG1vZGVsO1xuICAgIHZhciBWaWV3SGVscGVyID0gdmlld0hlbHBlcjtcblxuICAgIGZ1bmN0aW9uIG1haW4oKVxuICAgIHtcbiAgICAgICAgXG4gICAgfVxufSIsInZhciBFcnJvckNvbnRyb2xsZXIgPSBmdW5jdGlvbih2aWV3SGVscGVyKVxue1xuICAgIHZhciBWaWV3SGVscGVyID0gdmlld0hlbHBlcjtcblxuICAgIC8vIE1haW4gZnVuY3Rpb24sIGFsc28gdGhlIHN0YXJ0IHN0YXJ0cG9pbnQgZm9yIGEgcGFnZVxuICAgIGZ1bmN0aW9uIG1haW4oKVxuICAgIHtcbiAgICAgICAgLy8gc2V0IHZpZXcgdG8gbG9naW4gZm9ybVxuICAgICAgICBWaWV3SGVscGVyLnNldFZpZXcoKTtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBieSBvdGhlciBwcm9ncmFtcyAodGhlIGNvbnRyb2xsZXIgaW4gdGhpcyBjYXNlKVxuICAgIHJldHVybiB7XG4gICAgICAgIG1haW46IG1haW5cbiAgICB9XG59OyIsInZhciBMb2dpbkNvbnRyb2xsZXIgPSBmdW5jdGlvbih2aWV3SGVscGVyLCBtb2RlbClcbntcbiAgICB2YXIgTW9kZWwgICAgICA9IG1vZGVsO1xuICAgIHZhciBWaWV3SGVscGVyID0gdmlld0hlbHBlcjtcbiAgICBcbiAgICAvLyBGdW5jdGlvbiB0aGF0IGlzIGV4ZWN1dGVkIG9uIGEgYWN0aW9uIGxpc3RlbmVyXG4gICAgZnVuY3Rpb24gYWN0aW9uUGVyZm9ybWVkKGV2ZW50KVxuICAgIHtcbiAgICAgICAgLy8gUHJldmVudCBzZW5kaW5nIHRoZSBmb3JtXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgIC8vIExvb3AgdHJvdWdoIHRoZSBmb3JtIGRhdGEgYW5kIGdldCBhbGwgZmllbGRzXG4gICAgICAgIHZhciBmb3JtRGF0YSA9IHt9O1xuICAgICAgICAkLmVhY2goJCh0aGlzKS5zZXJpYWxpemVBcnJheSgpLCBmdW5jdGlvbiAoaSwgZmllbGQpIHtcbiAgICAgICAgICAgIGZvcm1EYXRhW2ZpZWxkLm5hbWVdID0gZmllbGQudmFsdWU7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGxldCBtb2RlbCBzZW5kIGVtYWlsIGFuZCBwYXNzd29yZCB0byBBUElcbiAgICAgICAgTW9kZWwubG9naW4oZm9ybURhdGEuZW1haWwsIGZvcm1EYXRhLnBhc3N3b3JkLCBmdW5jdGlvbiBvblN1Y2Nlc3MoZGF0YSkge1xuICAgICAgICAgICAgLy8gc2hvdyB1aXRsb2dnZW4gYnV0dG9uXG4gICAgICAgICAgICAkKFwiLmlubG9nZ2VuX3RleHRcIikuaGlkZSgpO1xuICAgICAgICAgICAgJChcIi51aXRsb2dnZW5fdGV4dFwiKS5zaG93KCk7XG5cbiAgICAgICAgICAgIFJvdXRlci5yb3V0ZShcInByb2R1Y3RzXCIpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBNYWluIGZ1bmN0aW9uLCBhbHNvIHRoZSBzdGFydCBzdGFydHBvaW50IGZvciBhIHBhZ2VcbiAgICBmdW5jdGlvbiBtYWluKClcbiAgICB7XG4gICAgICAgIC8vIHNldCB2aWV3IHRvIGxvZ2luIGZvcm1cbiAgICAgICAgVmlld0hlbHBlci5zZXRWaWV3KCk7XG5cbiAgICAgICAgLy8gdXNlciBmaWxscyBpbiBlbWFpbCBhbmQgcGFzc3dvcmQ7IGNsaWNrcyAnbG9naW4nOiBWSUVXIG5vdGljZXMgdGhpcyBhbmQgcmVhY3RzXG4gICAgICAgIFZpZXdIZWxwZXIuc2V0QWN0aW9uTGlzdGVuZXIoYWN0aW9uUGVyZm9ybWVkKTtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBieSBvdGhlciBwcm9ncmFtcyAodGhlIGNvbnRyb2xsZXIgaW4gdGhpcyBjYXNlKVxuICAgIHJldHVybiB7XG4gICAgICAgIG1haW46IG1haW5cbiAgICB9XG59OyIsInZhciBMb2dvdXRDb250cm9sbGVyID0gZnVuY3Rpb24odmlld0hlbHBlciwgbW9kZWwpXG57XG4gICAgdmFyIE1vZGVsICAgICAgPSBtb2RlbDtcbiAgICB2YXIgVmlld0hlbHBlciA9IHZpZXdIZWxwZXI7XG4gICAgXG4gICAgLy8gRnVuY3Rpb24gdGhhdCBpcyBleGVjdXRlZCBvbiBhIGFjdGlvbiBsaXN0ZW5lclxuICAgIGZ1bmN0aW9uIGFjdGlvblBlcmZvcm1lZChldmVudClcbiAgICB7XG4gICAgICAgIE1vZGVsLmxvZ291dChmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgLy8gc2hvdyB1aXRsb2dnZW4gYnV0dG9uXG4gICAgICAgICAgICAkKFwiLmlubG9nZ2VuX3RleHRcIikuc2hvdygpO1xuICAgICAgICAgICAgJChcIi51aXRsb2dnZW5fdGV4dFwiKS5oaWRlKCk7XG5cbiAgICAgICAgICAgIC8vIHNldCB2aWV3IHRvIGxvZ2luIGZvcm1cbiAgICAgICAgICAgIFZpZXdIZWxwZXIuc2V0VmlldygpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBNYWluIGZ1bmN0aW9uLCBhbHNvIHRoZSBzdGFydCBzdGFydHBvaW50IGZvciBhIHBhZ2VcbiAgICBmdW5jdGlvbiBtYWluKClcbiAgICB7XG4gICAgICAgIC8vIHVzZXIgZmlsbHMgaW4gZW1haWwgYW5kIHBhc3N3b3JkOyBjbGlja3MgJ2xvZ2luJzogVklFVyBub3RpY2VzIHRoaXMgYW5kIHJlYWN0c1xuICAgICAgICBWaWV3SGVscGVyLnNldEFjdGlvbkxpc3RlbmVyKGFjdGlvblBlcmZvcm1lZCk7XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHRoZSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgcHJvZ3JhbXMgKHRoZSBjb250cm9sbGVyIGluIHRoaXMgY2FzZSlcbiAgICByZXR1cm4ge1xuICAgICAgICBtYWluOiBtYWluXG4gICAgfVxufTsiLCJ2YXIgT3JkZXJDb250cm9sbGVyID0gZnVuY3Rpb24odmlld0hlbHBlciwgbW9kZWwpXG57XG4gICAgdmFyIE1vZGVsICAgICAgPSBtb2RlbDtcbiAgICB2YXIgVmlld0hlbHBlciA9IHZpZXdIZWxwZXI7XG4gICAgXG4gICAgLy8gRnVuY3Rpb24gdGhhdCBpcyBleGVjdXRlZCBvbiBhIGFjdGlvbiBsaXN0ZW5lclxuICAgIGZ1bmN0aW9uIGFjdGlvblBlcmZvcm1lZChldmVudClcbiAgICB7XG4gICAgICAgIE1vZGVsLmdldE9yZGVySW5mb3JtYXRpb24oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIFZpZXdIZWxwZXIuc2V0VmlldyhkYXRhKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb3JkZXIoZXZlbnQpXG4gICAge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcblxuICAgICAgICB2YXIgZm9ybURhdGEgPSAkKHRoaXMpLnNlcmlhbGl6ZU9iamVjdCgpO1xuXG4gICAgICAgIE1vZGVsLnNhdmVPcmRlcihmb3JtRGF0YSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBWaWV3SGVscGVyLmZpbmlzaE9yZGVyKCk7XG4gICAgICAgICAgICBWaWV3SGVscGVyLmNsZWFyQ2FydCgpO1xuICAgICAgICB9KVxuICAgIH1cblxuICAgIC8vIE1haW4gZnVuY3Rpb24sIGFsc28gdGhlIHN0YXJ0IHN0YXJ0cG9pbnQgZm9yIGEgcGFnZVxuICAgIGZ1bmN0aW9uIG1haW4oKVxuICAgIHtcbiAgICAgICAgaWYgKFVzZXJIZWxwZXIuaXNMb2dlZEluKCkgPT0gZmFsc2UpXG4gICAgICAgIHtcbiAgICAgICAgICAgIFJvdXRlci5yb3V0ZShcIi9sb2dpblwiKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgIHtcbiAgICAgICAgICAgIFZpZXdIZWxwZXIuc2V0QWN0aW9uTGlzdGVuZXIoYWN0aW9uUGVyZm9ybWVkKTtcbiAgICAgICAgICAgIFZpZXdIZWxwZXIuc2V0T3JkZXJMaXN0ZW5lcihvcmRlcilcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXG4gICAgcmV0dXJuIHtcbiAgICAgICAgbWFpbjogbWFpblxuICAgIH1cbn07IiwidmFyIFByb2R1Y3RzQ29udHJvbGxlciA9IGZ1bmN0aW9uKHZpZXdIZWxwZXIsIG1vZGVsKVxue1xuICAgIHZhciBNb2RlbCAgICAgID0gbW9kZWw7XG4gICAgdmFyIFZpZXdIZWxwZXIgPSB2aWV3SGVscGVyO1xuICAgIFxuICAgIC8vIEZ1bmN0aW9uIHRoYXQgaXMgZXhlY3V0ZWQgb24gYSBhY3Rpb24gbGlzdGVuZXJcbiAgICBmdW5jdGlvbiBnZXRQYWdlKClcbiAgICB7XG4gICAgICAgIE1vZGVsLmdldFBhZ2UoXCJcIiwgZnVuY3Rpb24gKGRhdGEpIHsgVmlld0hlbHBlci5zZXRWaWV3KGRhdGEpOyB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBmaWx0ZXJQcm9kdWN0cyhldmVudClcbiAgICB7XG4gICAgICAgIC8vIFByZXZlbnQgc2VuZGluZyB0aGUgZm9ybSAocGFnZSByZWxvYWQpXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgdmFyIGZpbHRlcnMgPSAkKHRoaXMpLnNlcmlhbGl6ZSgpO1xuICAgICAgICBNb2RlbC5nZXRQYWdlKGZpbHRlcnMsIGZ1bmN0aW9uIChkYXRhKSB7IFZpZXdIZWxwZXIubG9hZFByb2R1Y3RzKGRhdGEpOyB9KTtcbiAgICB9XG5cbiAgICAvLyBNYWluIGZ1bmN0aW9uLCBhbHNvIHRoZSBzdGFydCBzdGFydHBvaW50IGZvciBhIHBhZ2VcbiAgICBmdW5jdGlvbiBtYWluKClcbiAgICB7XG4gICAgICAgIFZpZXdIZWxwZXIuc2V0QWN0aW9uTGlzdGVuZXIoZ2V0UGFnZSk7XG4gICAgICAgIFZpZXdIZWxwZXIuc2V0RmlsdGVyTGlzdGVuZXIoZmlsdGVyUHJvZHVjdHMpO1xuICAgICAgICAvLyBuZXcgYWN0aW9uIHdhbm5lciBlciBvcCBmaWx0ZXIgd29yZHQgZ2VkcnVrdFxuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXG4gICAgcmV0dXJuIHtcbiAgICAgICAgbWFpbjogbWFpblxuICAgIH1cbn07IiwidmFyIFJlZ2lzdGVyQ29udHJvbGxlciA9IGZ1bmN0aW9uKHZpZXdIZWxwZXIsIG1vZGVsKVxue1xuICAgIHZhciBNb2RlbCAgICAgID0gbW9kZWw7XG4gICAgdmFyIFZpZXdIZWxwZXIgPSB2aWV3SGVscGVyO1xuICAgIFxuICAgIC8vIEZ1bmN0aW9uIHRoYXQgaXMgZXhlY3V0ZWQgb24gYSBhY3Rpb24gbGlzdGVuZXJcbiAgICBmdW5jdGlvbiBhY3Rpb25QZXJmb3JtZWQoKVxuICAgIHtcbiAgICAgICAgLy8gUHJldmVudCBzZW5kaW5nIHRoZSBmb3JtXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgLy8gcmVzZXQgZXJyb3IgbWVzc2FnZXNcbiAgICAgICAgJChcIiNyZWdpX2FwaV9lcnJvcl9tZXNzYWdlXCIpLmhpZGUoKTtcbiAgICAgICAgJChcIiN3dzJfZXJyb3JfbWVzc2FnZVwiKS5oaWRlKCk7XG5cbiAgICAgICAgLy8gcHV0IGZvcm0gZmllbGRzIGluIGphdmFzY3JpcHQgT2JqZWN0XG4gICAgICAgIHZhciBmb3JtRGF0YSA9IHt9O1xuXG4gICAgICAgICQuZWFjaCgkKHRoaXMpLnNlcmlhbGl6ZUFycmF5KCksIGZ1bmN0aW9uIChpLCBmaWVsZCkge1xuICAgICAgICAgICAgZm9ybURhdGFbZmllbGQubmFtZV0gPSBmaWVsZC52YWx1ZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gZml4IGRhdGUgb2YgYmlydGggKEFQSSBleHBlY3RzIGNlcnRhaW4gZm9ybWF0KVxuICAgICAgICBmb3JtRGF0YVtcImJpcnRoX2RhdGVcIl0gPSBmb3JtRGF0YS5qYWFyICsgXCItXCIgKyBmb3JtRGF0YS5tYWFuZCArIFwiLVwiICsgZm9ybURhdGEuZGFnO1xuXG4gICAgICAgIC8vIGNoZWNrIHdoZXRoZXIgYW55IG1hbmRhdG9yeSBmaWVsZCBpcyBsZWZ0IGVtcHR5IGJ5IHVzZXIgYW5kXG4gICAgICAgIC8vIGlmIHNvLCBhYm9ydCBmdW5jdGlvblxuICAgICAgICB2YXIgbWFuZGF0b3J5RmllbGRNaXNzZXMgPSBmYWxzZTtcbiAgICAgICAgdmFyIG1hbmRhdG9yeUZpZWxkcyA9IFtcInZvb3JuYWFtXCIsIFwiYWNodGVybmFhbVwiLCBcInBvc3Rjb2RlXCIsIFwiaHVpc251bW1lclwiLCBcImVfbWFpbGFkcmVzXCIsIFwid2FjaHR3b29yZFwiLCBcIndhY2h0d29vcmQyXCIsIFwic2VjdXJpdHlfYW5zd2VyXCJdOyAvL2Ryb3Bkb3ducyAobGlrZSBnZW5kZXIpIGFyZSBhbHdheXMgZmlsbGVkIGluLCBzbyBkb24ndCBwdXQgaW4gdGhpcyBsaXN0XG5cbiAgICAgICAgLy8gKHJlc2V0IGFsbCBmaWVsZHMgdG8gJ3ZhbGlkJyBiZWNhdXNlIHVzZXIgbWF5IGhhdmUgZmlsbGVkIGluIGZpZWxkcyBzaW5jZVxuICAgICAgICAvLyB0aGUgcHJldmlvdXMgdGltZSB0aGlzIGZ1bmN0aW9uIHdhcyBjYWxsZWQpXG4gICAgICAgICQuZWFjaChtYW5kYXRvcnlGaWVsZHMsIGZ1bmN0aW9uIChpLCBtYW5GaWVsZCkge1xuICAgICAgICAgICAgJChcIiNcIiArIG1hbkZpZWxkKS5yZW1vdmVDbGFzcyhcImludmFsaWRcIik7XG4gICAgICAgIH0pXG5cbiAgICAgICAgJC5lYWNoKG1hbmRhdG9yeUZpZWxkcywgZnVuY3Rpb24gKGksIG1hbkZpZWxkKSB7XG4gICAgICAgICAgICBpZiAoZm9ybURhdGFbbWFuRmllbGRdID09IFwiXCIpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgJChcIiNcIiArIG1hbkZpZWxkKS5hZGRDbGFzcyhcImludmFsaWRcIik7XG5cbiAgICAgICAgICAgICAgICBtYW5kYXRvcnlGaWVsZE1pc3NlcyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgXG4gICAgICAgIC8vIGlmIGEgbWFuZGF0b3J5IGZpZWxkIGlzIGVtcHR5LCBzaG93IGVycm9yIG1lc3NhZ2UgdG8gdXNlciBhbmQgYWJvcnQgZnVuY3Rpb25cbiAgICAgICAgaWYgKG1hbmRhdG9yeUZpZWxkTWlzc2VzKVxuICAgICAgICB7IFxuICAgICAgICAgICAgLy8gc2Nyb2xsIHRvIHRvcCBvZiBwYWdlIHNvIHRoYXQgdXNlcnMgc2VlIG1lc3NhZ2UgXCJzb21ldGhpbmcgaXMgbm90IGZpbGxlZCBpblwiXG4gICAgICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7XG4gICAgICAgICAgICAvLyBzaG93IG1lc3NhZ2UgXCJzb21ldGhpbmcgaXMgbm90IGZpbGxlZCBpblwiXG4gICAgICAgICAgICAkKFwiI3JlZ2lzdGVyX2Vycm9yX21lc3NhZ2VcIikuc2hvdygpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBwYXNzd29yZHNOb3RJZGVudGljYWwgPSBmYWxzZTtcblxuICAgICAgICBpZiAoZm9ybURhdGEud2FjaHR3b29yZCAhPSBmb3JtRGF0YS53YWNodHdvb3JkMikgXG4gICAgICAgIHtcbiAgICAgICAgICAgIHBhc3N3b3Jkc05vdElkZW50aWNhbCA9IHRydWU7XG4gICAgICAgICAgICAkKFwiI3d3Ml9lcnJvcl9tZXNzYWdlXCIpLnNob3coKTtcbiAgICAgICAgICAgICQoXCIjd2FjaHR3b29yZFwiKS5hZGRDbGFzcyhcImludmFsaWRcIik7XG4gICAgICAgICAgICAkKFwiI3dhY2h0d29vcmQyXCIpLmFkZENsYXNzKFwiaW52YWxpZFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGFib3J0IGZ1bmN0aW9uIGlmIG1hbmRhdG9yeSBmaWVsZCBtaXNzZXMgb3IgcGFzc3dvcmRzIG5vdCBpZGVudGljYWxcbiAgICAgICAgaWYgKG1hbmRhdG9yeUZpZWxkTWlzc2VzIHx8IHBhc3N3b3Jkc05vdElkZW50aWNhbClcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gbGV0IG1vZGVsIHNlbmQgdXNlciBpbmZvIHRvIEFQSVxuICAgICAgICBNb2RlbC5yZWdpc3Rlcihmb3JtRGF0YSwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIFZpZXdIZWxwZXIuc2V0VmlldygnL3ZpZXdzL3JlZ2lzdGVyL2FmdGVyX3JlZ2lzdGVyLmh0bWwnKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gTWFpbiBmdW5jdGlvbiwgYWxzbyB0aGUgc3RhcnQgc3RhcnRwb2ludCBmb3IgYSBwYWdlXG4gICAgZnVuY3Rpb24gbWFpbigpXG4gICAge1xuICAgICAgICAvLyBzZXQgdmlldyB0byByZWdpc3RlciBmb3JtXG4gICAgICAgIFZpZXdIZWxwZXIuc2V0VmlldygnL3ZpZXdzL3JlZ2lzdGVyL3JlZ2lzdGVyLmh0bWwnKTtcblxuICAgICAgICAvLyB1c2VyIGZpbGxzIGluIHJlZ2lzdGVyIGluZm87IGNsaWNrcyAncmVnaXN0ZXInOiB2aWV3IG5vdGljZXMgdGhpcyBhbmQgcmVhY3RzXG4gICAgICAgIFZpZXdIZWxwZXIuc2V0QWN0aW9uTGlzdGVuZXIoYWN0aW9uUGVyZm9ybWVkKTtcblxuICAgICAgICAvLyBlbWFpbCBhbmQgcGFzc3dvcmQgYXJlIHNlbmQgdG8gQVBJOyBBUEkgY2hlY2tzIGlmIGVtYWlsIGFscmVhZHkgZXhpc3RzIChhbmQgd2hldGhlciBwYXNzd29yZCBpcyBjb3JyZWN0PykgXG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHRoZSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgcHJvZ3JhbXMgKHRoZSBjb250cm9sbGVyIGluIHRoaXMgY2FzZSlcbiAgICByZXR1cm4ge1xuICAgICAgICBtYWluOiBtYWluXG4gICAgfVxufTsiLCJ2YXIgUmVzZXRQYXNzd29yZENvbnRyb2xsZXIgPSBmdW5jdGlvbih2aWV3SGVscGVyLCBtb2RlbClcbntcbiAgICB2YXIgTW9kZWwgICAgICA9IG1vZGVsO1xuICAgIHZhciBWaWV3SGVscGVyID0gdmlld0hlbHBlcjtcbiAgICBcbiAgICAgLy8gRnVuY3Rpb24gdGhhdCBpcyBleGVjdXRlZCBvbiBhIGFjdGlvbiBsaXN0ZW5lclxuICAgIGZ1bmN0aW9uIGFjdGlvblBlcmZvcm1lZCgpXG4gICAge1xuICAgICAgICBjb25zb2xlLmxvZyhcImluIGFjdGlvblBlcmZvcm1lZFwiKTsgLy90ZXN0XG5cbiAgICAgICAgLy8gUHJldmVudCBzZW5kaW5nIHRoZSBmb3JtXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgLy8gcmVzZXQgZXJyb3IgbWVzc2FnZXNcbiAgICAgICAgJChcIiNyZXNldF9wYXNzd29yZF9hcGlfZXJyb3JfbWVzc2FnZVwiKS5oaWRlKCk7XG4gICAgICAgICQoXCIjd3cyX2Vycm9yX21lc3NhZ2VcIikuaGlkZSgpO1xuXG4gICAgICAgIC8vIHB1dCBmb3JtIGZpZWxkcyBpbiBqYXZhc2NyaXB0IE9iamVjdFxuICAgICAgICB2YXIgZm9ybURhdGEgPSB7fTtcblxuICAgICAgICAkLmVhY2goJCh0aGlzKS5zZXJpYWxpemVBcnJheSgpLCBmdW5jdGlvbiAoaSwgZmllbGQpIHtcbiAgICAgICAgICAgIGZvcm1EYXRhW2ZpZWxkLm5hbWVdID0gZmllbGQudmFsdWU7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGNoZWNrIHdoZXRoZXIgYW55IG1hbmRhdG9yeSBmaWVsZCBpcyBsZWZ0IGVtcHR5IGJ5IHVzZXIgYW5kXG4gICAgICAgIC8vIGlmIHNvLCBhYm9ydCBmdW5jdGlvblxuICAgICAgICB2YXIgbWFuZGF0b3J5RmllbGRNaXNzZXMgPSBmYWxzZTtcbiAgICAgICAgdmFyIG1hbmRhdG9yeUZpZWxkcyA9IFtcIndhY2h0d29vcmRcIiwgXCJ3YWNodHdvb3JkMlwiLCBcImVfbWFpbGFkcmVzXCIsXCJzZWN1cml0eV9hbnN3ZXJcIl07IC8vZHJvcGRvd25zIChsaWtlIHNlY3VyaXR5X3F1ZXN0aW9uX2Fuc3dlcikgYXJlIGFsd2F5cyBmaWxsZWQgaW4sIHNvIGRvbid0IHB1dCBpbiB0aGlzIGxpc3RcblxuICAgICAgICAvLyAocmVzZXQgYWxsIGZpZWxkcyB0byAndmFsaWQnIGJlY2F1c2UgdXNlciBtYXkgaGF2ZSBmaWxsZWQgaW4gZmllbGRzIHNpbmNlXG4gICAgICAgIC8vIHRoZSBwcmV2aW91cyB0aW1lIHRoaXMgZnVuY3Rpb24gd2FzIGNhbGxlZClcbiAgICAgICAgJC5lYWNoKG1hbmRhdG9yeUZpZWxkcywgZnVuY3Rpb24gKGksIG1hbkZpZWxkKSB7XG4gICAgICAgICAgICAkKFwiI1wiICsgbWFuRmllbGQpLnJlbW92ZUNsYXNzKFwiaW52YWxpZFwiKTtcbiAgICAgICAgfSlcblxuICAgICAgICAkLmVhY2gobWFuZGF0b3J5RmllbGRzLCBmdW5jdGlvbiAoaSwgbWFuRmllbGQpIHtcbiAgICAgICAgICAgIGlmIChmb3JtRGF0YVttYW5GaWVsZF0gPT0gXCJcIilcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAkKFwiI1wiICsgbWFuRmllbGQpLmFkZENsYXNzKFwiaW52YWxpZFwiKTtcblxuICAgICAgICAgICAgICAgIG1hbmRhdG9yeUZpZWxkTWlzc2VzID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgICAgICBcbiAgICAgICAgLy8gaWYgYSBtYW5kYXRvcnkgZmllbGQgaXMgZW1wdHksIHNob3cgZXJyb3IgbWVzc2FnZSB0byB1c2VyIGFuZCBhYm9ydCBmdW5jdGlvblxuICAgICAgICBpZiAobWFuZGF0b3J5RmllbGRNaXNzZXMpXG4gICAgICAgIHsgXG4gICAgICAgICAgICAvLyBzY3JvbGwgdG8gdG9wIG9mIHBhZ2Ugc28gdGhhdCB1c2VycyBzZWUgbWVzc2FnZSBcInNvbWV0aGluZyBpcyBub3QgZmlsbGVkIGluXCJcbiAgICAgICAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCAwKTtcbiAgICAgICAgICAgIC8vIHNob3cgbWVzc2FnZSBcInNvbWV0aGluZyBpcyBub3QgZmlsbGVkIGluXCJcbiAgICAgICAgICAgICQoXCIjcmVzZXRfZXJyb3JfbWVzc2FnZVwiKS5zaG93KCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIHBhc3N3b3Jkc05vdElkZW50aWNhbCA9IGZhbHNlO1xuXG4gICAgICAgIGlmIChmb3JtRGF0YS53YWNodHdvb3JkICE9IGZvcm1EYXRhLndhY2h0d29vcmQyKSBcbiAgICAgICAge1xuICAgICAgICAgICAgcGFzc3dvcmRzTm90SWRlbnRpY2FsID0gdHJ1ZTtcbiAgICAgICAgICAgICQoXCIjd3cyX2Vycm9yX21lc3NhZ2VcIikuc2hvdygpO1xuICAgICAgICAgICAgJChcIiN3YWNodHdvb3JkXCIpLmFkZENsYXNzKFwiaW52YWxpZFwiKTtcbiAgICAgICAgICAgICQoXCIjd2FjaHR3b29yZDJcIikuYWRkQ2xhc3MoXCJpbnZhbGlkXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gYWJvcnQgZnVuY3Rpb24gaWYgbWFuZGF0b3J5IGZpZWxkIG1pc3NlcyBvciBwYXNzd29yZHMgbm90IGlkZW50aWNhbFxuICAgICAgICBpZiAobWFuZGF0b3J5RmllbGRNaXNzZXMgfHwgcGFzc3dvcmRzTm90SWRlbnRpY2FsKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS5sb2coXCJjb250aW51ZWRcIilcbiAgICAgICAgLy8gbGV0IG1vZGVsIHNlbmQgdXNlciBpbmZvIHRvIEFQSVxuICAgICAgICBNb2RlbC5yZXNldHBhc3N3b3JkKGZvcm1EYXRhLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgVmlld0hlbHBlci5zZXRWaWV3KCd2aWV3cy9yZXNldHBhc3N3b3JkL2FmdGVyX3Jlc2V0Lmh0bWwnKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gTWFpbiBmdW5jdGlvbiwgYWxzbyB0aGUgc3RhcnQgc3RhcnRwb2ludCBmb3IgYSBwYWdlXG4gICAgZnVuY3Rpb24gbWFpbigpXG4gICAgeyAgICAgIFxuICAgICAgICAvLyBzZXQgdmlldyB0byByZXNldCBwYXNzd29yZCBmb3JtXG4gICAgICAgIFZpZXdIZWxwZXIuc2V0Vmlldygndmlld3MvcmVzZXRwYXNzd29yZC9yZXNldHBhc3N3b3JkLmh0bWwnKTtcblxuICAgICAgICBWaWV3SGVscGVyLnNldEFjdGlvbkxpc3RlbmVyKGFjdGlvblBlcmZvcm1lZCk7XG4gICAgICAgIC8vIG5ldyBhY3Rpb24gd2FubmVyIGVyIG9wIGZpbHRlciB3b3JkdCBnZWRydWt0XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHRoZSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgcHJvZ3JhbXMgKHRoZSBjb250cm9sbGVyIGluIHRoaXMgY2FzZSlcbiAgICByZXR1cm4ge1xuICAgICAgICBtYWluOiBtYWluXG4gICAgfVxufTtcblxuXG5cblxuIiwidmFyIFByb2R1Y3RDb250cm9sbGVyID0gZnVuY3Rpb24odmlld0hlbHBlciwgbW9kZWwpXG57XG4gICAgdmFyIE1vZGVsICAgICAgPSBtb2RlbDtcbiAgICB2YXIgVmlld0hlbHBlciA9IHZpZXdIZWxwZXI7XG4gICAgXG4gICAgLy8gRnVuY3Rpb24gdGhhdCBpcyBleGVjdXRlZCBvbiBhIGFjdGlvbiBsaXN0ZW5lclxuICAgIGZ1bmN0aW9uIGFjdGlvblBlcmZvcm1lZChldmVudClcbiAgICB7XG4gICAgICAgIC8vIFByZXZlbnQgc2VuZGluZyB0aGUgZm9ybVxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG5cblxuXG5cblxuICAgICAgICAvLyBMb29wIHRyb3VnaCB0aGUgZm9ybSBkYXRhIGFuZCBnZXQgYWxsIGZpZWxkc1xuICAgICAgICB2YXIgZm9ybURhdGEgPSB7fTtcbiAgICAgICAgJC5lYWNoKCQodGhpcykuc2VyaWFsaXplQXJyYXkoKSwgZnVuY3Rpb24gKGksIGZpZWxkKSB7XG4gICAgICAgICAgICBmb3JtRGF0YVtmaWVsZC5uYW1lXSA9IGZpZWxkLnZhbHVlO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBsZXQgbW9kZWwgc2VuZCBlbWFpbCBhbmQgcGFzc3dvcmQgdG8gQVBJXG4gICAgICAgIE1vZGVsLmxvZ2luKGZvcm1EYXRhLmVtYWlsLCBmb3JtRGF0YS5wYXNzd29yZCwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIC8vIHNob3cgdWl0bG9nZ2VuIGJ1dHRvblxuICAgICAgICAgICAgJChcIi5pbmxvZ2dlbl90ZXh0XCIpLmhpZGUoKTtcbiAgICAgICAgICAgICQoXCIudWl0bG9nZ2VuX3RleHRcIikuc2hvdygpO1xuXG4gICAgICAgICAgICAvLyBXZWVyZ2VlZiBlZW4gYW5kZXJlIHBhZ2luYSBnZWJhc3NlZXJkIG9wICdhZG1pbicgb2YgJ3JlZ2lzdGVyZWQgdXNlcidcbiAgICAgICAgICAgIG5ldyBQYWdlQ29udHJvbGxlcihuZXcgUGFnZVZpZXdIZWxwZXIoKSwgbmV3IFBhZ2VNb2RlbCgpKS5tYWluKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIGxldCB2aWV3IHNob3cgdmlldyB3aXRoIGRhdGEgZnJvbSBkYXRhYmFzZVxuICAgIGZ1bmN0aW9uIHNob3dWaWV3KGRhdGEpXG4gICAge1xuICAgICAgICB2aWV3SGVscGVyLnNldFZpZXcoZGF0YSk7XG4gICAgfVxuXG4gICAgLy8gTWFpbiBmdW5jdGlvbiwgYWxzbyB0aGUgc3RhcnQgc3RhcnRwb2ludCBmb3IgYSBwYWdlXG4gICAgZnVuY3Rpb24gbWFpbigpXG4gICAge1xuICAgICAgICAvLyB3aGF0IGhhcHBlbnM6XG4gICAgICAgIC8vIDEpIHVzZXIgY2xpY2tzIG9uIGEgcHJvZHVjdCBcbiAgICAgICAgLy8gMikgbW9kZWwgZ2V0cyBpbmZvIG9mIHRoZSBwcm9kdWN0XG4gICAgICAgIC8vIDMpIHN5c3RlbSBwdXRzIGluZm8gaW4gaHRtbFxuICAgICAgICAvLyA0KSB2aWV3IHNob3dzIGluZm9cblxuICAgICAgICAvLyAyKSBtb2RlbCBnZXRzIGluZm8gb2YgdGhlIHByb2R1Y3RcbiAgICAgICAgLy8gMykgc3lzdGVtIHB1dHMgaW5mbyBpbiBodG1sXG4gICAgICAgIG1vZGVsLkdldFByb2R1Y3RJbmZvKHNob3dWaWV3KTtcblxuXG5cbiAgICAgICAgLy8gc2V0IHZpZXcgdG8gbG9naW4gZm9ybVxuICAgICAgICAvL1ZpZXdIZWxwZXIuc2V0VmlldygpO1xuXG4gICAgICAgIC8vIHVzZXIgZmlsbHMgaW4gZW1haWwgYW5kIHBhc3N3b3JkOyBjbGlja3MgJ2xvZ2luJzogVklFVyBub3RpY2VzIHRoaXMgYW5kIHJlYWN0c1xuICAgICAgICAvL1ZpZXdIZWxwZXIuc2V0QWN0aW9uTGlzdGVuZXIoYWN0aW9uUGVyZm9ybWVkKTtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBieSBvdGhlciBwcm9ncmFtcyAodGhlIGNvbnRyb2xsZXIgaW4gdGhpcyBjYXNlKVxuICAgIHJldHVybiB7XG4gICAgICAgIG1haW46IG1haW4sXG4gICAgICAgIHNob3dWaWV3IDogc2hvd1ZpZXdcbiAgICB9XG59OyIsInZhciBXaXNobGlzdENvbnRyb2xsZXIgPSBmdW5jdGlvbih2aWV3SGVscGVyLCBtb2RlbClcbntcbiAgICB2YXIgTW9kZWwgPSBtb2RlbDtcbiAgICB2YXIgVmlld0hlbHBlciA9IHZpZXdIZWxwZXI7XG4gICAgdmFyIHZpZXdEYXRhID0ge307XG5cbiAgICBmdW5jdGlvbiBnZXRXaXNobGlzdCgpXG4gICAge1xuICAgICAgICBNb2RlbC5nZXRXaXNobGlzdChzZXRWaWV3KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXRWaWV3KGRhdGEpXG4gICAge1xuICAgICAgICBWaWV3SGVscGVyLnNldFZpZXcoZGF0YSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbWFpbigpXG4gICAge1xuICAgICAgICBWaWV3SGVscGVyLnNldEFjdGlvbkxpc3RlbmVyKGdldFdpc2hsaXN0KTtcbiAgICAgICAgVmlld0hlbHBlci5zZXREZWxldGVMaXN0ZW5lcihkZWxldGVGcm9tV2lzaGxpc3QpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRlbGV0ZUZyb21XaXNobGlzdChlYW4sIGRpdl90b19oaWRlKVxuICAgIHtcbiAgICAgICAgTW9kZWwuZGVsZXRlRnJvbVdpc2hsaXN0KGVhbiwgZnVuY3Rpb24oKVxuICAgICAgICB7XG4gICAgICAgICAgICBWaWV3SGVscGVyLmhpZGVJdGVtKGRpdl90b19oaWRlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgbWFpbjogbWFpblxuICAgIH1cbn07IiwidmFyIEFkbWluVmlld0hlbHBlciA9IGZ1bmN0aW9uICgpXG57XG4gICAgZnVuY3Rpb24gc2V0QWN0aW9uTGlzdGVuZXIoYWN0aW9uKVxuICAgIHtcbiAgICAgICAgJChkb2N1bWVudCkucmVhZHkoYWN0aW9uKTsgLy8gaWYgJ2RvY3VtZW50IHJlYWR5JyBwZXJmb3JtIFwiYWN0aW9uXCJcbiAgICB9XG5cbiAgICAvLyBDaGFuZ2UgdGhlIHZpZXcgb2YgdGhlIHBhZ2VcbiAgICAgZnVuY3Rpb24gc2V0VmlldyhkYXRhKVxuICAgIHtcbiAgICAgICAgZG9jdW1lbnQudGl0bGUgPVwiQWRtaW4gLSBBWiBHYW1lc1wiO1xuXG4gICAgICAgICQoXCIjY29tcG9uZW50XCIpLmxvYWQoJy92aWV3cy9hZG1pbi9hZG1pbi5odG1sJywgZnVuY3Rpb24gKCkgeyAvLyB3YWFyIGlkID0gJ2NvbXBvbmVudCcgZG9lIC5sb2FkLi4uLi4uXG4gICAgICAgICAgICAkLmVhY2goZGF0YSwgZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIC8vIENsb25lIHByb2R1Y3RcbiAgICAgICAgICAgICAgICB2YXIgdXNlciA9ICQoJyNzaW5nbGVfdXNlcicpLmNsb25lKCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gQWRkIHByb2R1Y3QgaW5mb1xuICAgICAgICAgICAgICAgICQodXNlcikuZmluZChcIi51c2VyX19maXJzdG5hbWVcIikuaHRtbCh2YWx1ZS5maXJzdF9uYW1lKTtcbiAgICAgICAgICAgICAgICAkKHVzZXIpLmZpbmQoXCIudXNlcl9fZmlyc3RuYW1lXCIpLmF0dHIoJ2hyZWYnLCAnL2FkbWluX3VzZXIvJyArIHZhbHVlLnVzZXJfaWQpO1xuICAgICAgICAgICAgICAgICQodXNlcikuZmluZChcIi51c2VyX19pbnNlcnRpb25cIikuaHRtbCh2YWx1ZS5pbnNlcnRpb24pO1xuICAgICAgICAgICAgICAgICQodXNlcikuZmluZChcIi51c2VyX19sYXN0bmFtZVwiKS5odG1sKHZhbHVlLnN1cm5hbWUpO1xuICAgICAgICAgICAgICAgICQodXNlcikuZmluZChcIi51c2VyX19lbWFpbFwiKS5odG1sKHZhbHVlLmVtYWlsKTtcbiAgICAgICAgICAgICAgICAkKHVzZXIpLmZpbmQoXCIudXNlcl9fcGhvbmVudW1iZXJcIikuaHRtbCh2YWx1ZS5waG9uZV9udW1iZXIpO1xuXG4gICAgICAgICAgICAgICAgJChcIiN1c2Vyc19ib2R5XCIpLmFwcGVuZCh1c2VyKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBSZW1vdmUgdGhlIGZpcnN0IGxpc3QgaXRlbSwgYmVjYXVzZSB0aGlzIGl0ZW0gaXMgYWx3YXlzIGVtcHR5XG4gICAgICAgICAgICAkKFwiI3NpbmdsZV91c2VyXCIpLmZpcnN0KCkucmVtb3ZlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIHNldEFjdGlvbkxpc3RlbmVyOiBzZXRBY3Rpb25MaXN0ZW5lcixcbiAgICAgICAgc2V0Vmlldzogc2V0VmlldyxcbiAgICB9XG59XG5cbiAgICAvL2RhdCBoaWVyb25kZXIgemF0IGFhcmRpZyB3YXQgd2VyayBpbi4uLiBEb25hbGQgd2lsIG5vZyBmZiBob3VkZW5cblxuICAgIC8vIGZ1bmN0aW9uIHNob3dVc2VycyhkYXRhKVxuICAgIC8vIHtcbiAgICAvLyAgICAgZG9jdW1lbnQudGl0bGUgPVwiQWRtaW4gLSBBWiBHYW1lc1wiO1xuXG4gICAgLy8gICAgICQoXCIjY29tcG9uZW50XCIpLmxvYWQoJy92aWV3cy9hZG1pbi9hZG1pbi5odG1sJywgZnVuY3Rpb24gKCkge1xuICAgIC8vICAgICAgICAgdmFyIHRhYmxlID0gJChcIjx0YWJsZSBpZD0ndXNlcnNfdGFibGUnPjwvdGFibGU+XCIpO1xuXG4gICAgLy8gICAgICAgICAvLyB0YWJsZSBoZWFkZXJcbiAgICAvLyAgICAgICAgIHZhciByb3cgPSAkKCc8dHI+PC90cj4nKTtcbiAgICAvLyAgICAgICAgIHJvdy5hcHBlbmQoJzx0ZD5Wb29ybmFhbTwvdGQ+PHRkPlR1c3NlbnY8L3RkPjx0ZD5BY2h0ZXJuYWFtPC90ZD48dGQ+R2VicnVpa2Vyc25hYW08L3RkPjx0ZD5lbWFpbDwvdGQ+PHRkPnR5cGU8L3RkPicpO1xuXG4gICAgLy8gICAgICAgICAkLmVhY2goZGF0YSwgZnVuY3Rpb24obnVtYmVyciwgdXNlcikgXG4gICAgLy8gICAgICAgICB7XG4gICAgLy8gICAgICAgICAgICAgdmFyIHJvdyA9ICQoJzx0cj48L3RyPicpO1xuICAgIC8vICAgICAgICAgICAgICQuZWFjaCh1c2VyLCBmdW5jdGlvbihrZXksIHZhbHVlKVxuICAgIC8vICAgICAgICAgICAgIHtcbiAgICAvLyAgICAgICAgICAgICAgICAgaWYgKHZhbHVlICE9IHVuZGVmaW5lZClcbiAgICAvLyAgICAgICAgICAgICAgICAge1xuICAgIC8vICAgICAgICAgICAgICAgICAgICAgcm93LmFwcGVuZCggJChcIjx0ZCBjbGFzcz0ndGRfdXNlcic+PC90ZD5cIikuaHRtbChTdHJpbmcodmFsdWUpKSApO1xuICAgIC8vICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgIC8vICAgICAgICAgICAgICAgICAgICAgcm93LmFwcGVuZCggJChcIjx0ZCBjbGFzcz0ndGRfdXNlcic+PC90ZD5cIikgKTtcbiAgICAvLyAgICAgICAgICAgICAgICAgfVxuICAgIC8vICAgICAgICAgICAgIH0pXG4gICAgLy8gICAgICAgICAgICAgdGFibGUuYXBwZW5kKHJvdyk7XG4gICAgLy8gICAgICAgICAgICAgLy8gLy9mb3IgYWRkaXRpb25hbCB1c2VyIGluZm8gaWYgY2xpY2tlZFxuICAgIC8vICAgICAgICAgICAgIC8vIHJvdyA9ICQoJzxkaXYgY2xhc3M9XCJ0b2JldGFibGVcIj48L2Rpdj4nKTtcbiAgICAvLyAgICAgICAgICAgICAvLyB0YWJsZS5hcHBlbmQocm93KTtcbiAgICAvLyAgICAgICAgIH0pO1xuICAgIC8vICAgICAgICAgJCgnI3VzZXJzJykuYXBwZW5kKHRhYmxlKTtcbiAgICAvLyAgICAgfSk7XG4gICAgLy8gfVxuXG4gICAgLy8gZnVuY3Rpb24gcHV0SW5mb0luSHRtbChjbGlja2VkLCBkYXRhKVxuICAgIC8vIHtcbiAgICAvLyAgICAgY29uc29sZS5sb2coJ2luIHB1dEluZm9Jbkh0bWwoKScpO1xuICAgIC8vICAgICAvLyBzaG93IGluZm8gb2YgdGhlIHJpZ2h0IHVzZXIgKGlmIG5vdCBhbHJlYWR5IHNob3dpbmcgaXQpXG4gICAgLy8gICAgIC8vIGluc2VydCByb3cgYXMgdGFibGUgaGVhZGVyXG4gICAgLy8gICAgIHZhciBoZWFkZXJyb3cgPSAkKCc8dHI+PC90cj4nKS5hcHBlbmQoJzx0ZD53dzwvdGQ+PHRkPmdlYmxva2tlZXJkPC90ZD48dGQ+aWQ8L3RkPjx0ZD5nZW5kZXI8L3RkPjx0ZD5nZWJvb3J0ZWRhdHVtPC90ZD48dGQ+dnJhYWc8L3RkPjx0ZD5hbnR3b29yZDwvdGQ+Jyk7XG5cbiAgICAvLyAgICAgLy8gaW5zZXJ0IHJvdyB3aXRoIHRlIHVzZXJpbmZvXG4gICAgLy8gICAgIHZhciBpbmZvcm93ID0gJCgnPHRyPjwvdHI+Jyk7XG5cbiAgICAvLyAgICAgdmFyIGNvdW50ID0gMDtcbiAgICAvLyAgICAgJC5lYWNoKGRhdGFbMF0sIGZ1bmN0aW9uKGtleSwgdmFsdWUpXG4gICAgLy8gICAgIHtcbiAgICAvLyAgICAgICAgIGlmIChjb3VudCA9PSAxKSB7IC8vIGdlYmxva2tlZXJkXG4gICAgLy8gICAgICAgICAgICAgaWYgKHZhbHVlID09IDEpIHtcbiAgICAvLyAgICAgICAgICAgICAgICAgdmFsdWUgPSAnbmVlJztcbiAgICAvLyAgICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlID09IDApIHtcbiAgICAvLyAgICAgICAgICAgICAgICAgdmFsdWUgPSAnamEnXG4gICAgLy8gICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAvLyAgICAgICAgICAgICAgICAgdmFsdWUgPSAnZGIgZm91dD8nXG4gICAgLy8gICAgICAgICAgICAgfVxuICAgIC8vICAgICAgICAgfVxuXG4gICAgLy8gICAgICAgICBjb25zb2xlLmxvZyhjb3VudCk7XG4gICAgLy8gICAgICAgICB2YXIgdGQgPSAkKCc8dGQ+PC90ZD4nKS5hcHBlbmQodmFsdWUpO1xuXG4gICAgLy8gICAgICAgICBjb25zb2xlLmxvZygna2V5LCB2YWx1ZTogJyArIGtleSwgdmFsdWUpO1xuXG4gICAgLy8gICAgICAgICBpbmZvcm93LmFwcGVuZCh0ZCk7XG5cbiAgICAvLyAgICAgICAgIGNvdW50ICs9IDE7XG4gICAgLy8gICAgIH0pXG5cbiAgICAvLyAgICAgaW5mb3Jvdy5pbnNlcnRBZnRlciggJChjbGlja2VkKS5jbG9zZXN0KCd0cicpICk7XG4gICAgLy8gICAgIGhlYWRlcnJvdy5pbnNlcnRBZnRlcigkKGNsaWNrZWQpLmNsb3Nlc3QoJ3RyJykpO1xuICAgIC8vIH1cblxuIiwidmFyIEFkbWluVXNlclZpZXdIZWxwZXIgPSBmdW5jdGlvbiAoKVxue1xuICAgIGZ1bmN0aW9uIHNldEFjdGlvbkxpc3RlbmVyKGFjdGlvbilcbiAgICB7XG4gICAgICAgICQoZG9jdW1lbnQpLnJlYWR5KGFjdGlvbik7IC8vIGlmICdkb2N1bWVudCByZWFkeScgcGVyZm9ybSBcImFjdGlvblwiXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0Vmlldyh2YWx1ZSlcbiAgICB7XG4gICAgICAgIC8vcHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgJChcIiNjb21wb25lbnRcIikubG9hZCgnL3ZpZXdzL2FkbWludXNlci9hZG1pbnVzZXIuaHRtbCcsIGZ1bmN0aW9uICgpXG4gICAgICAgIHtcbiAgICAgICAgICAgICQoXCIjZGVsZXRlX2J0blwiKS5hdHRyKFwiZGF0YS1pZFwiLCB2YWx1ZS51c2VyX2lkKSAgIFxuICAgICAgICAgICAgJChcIiNmaXJzdF9uYW1lXCIpLnZhbCh2YWx1ZS5maXJzdF9uYW1lKTtcbiAgICAgICAgICAgICQoXCIjaW5zZXJ0aW9uXCIpLnZhbCh2YWx1ZS5pbnNlcnRpb24pO1xuICAgICAgICAgICAgJChcIiNzdXJuYW1lXCIpLnZhbCh2YWx1ZS5zdXJuYW1lKTtcbiAgICAgICAgICAgICQoXCIjdXNlcl90eXBlXCIpLnZhbCh2YWx1ZS51c2VyX3R5cGUpO1xuICAgICAgICAgICAgJChcIiNlbWFpbFwiKS52YWwodmFsdWUuZW1haWwpO1xuICAgICAgICAgICAgJChcIiNwYXNzd29yZFwiKS5hdHRyKCdwbGFjZWhvbGRlcicsICdWdWwgaGllciBpZXRzIGluIG9tIGhldCB3YWNodHdvb3JkIHRlIHZlcmFuZGVyZW4nKTtcbiAgICAgICAgICAgICQoXCIjZ2VuZGVyXCIpLnZhbCh2YWx1ZS5nZW5kZXIpO1xuICAgICAgICAgICAgJChcIiNkYXRlX29mX2JpcnRoXCIpLnZhbCh2YWx1ZS5kYXRlX29mX2JpcnRoKTtcbiAgICAgICAgICAgICQoXCIjcGhvbmVfbnVtYmVyXCIpLnZhbCh2YWx1ZS5waG9uZV9udW1iZXIpO1xuICAgICAgICAgICAgJChcIiNpc19hY3RpdmVcIikudmFsKHZhbHVlLmlzX2FjdGl2ZSk7XG4gICAgICAgICAgICAkKFwiI3VzZXJfaWRcIikudmFsKHZhbHVlLnVzZXJfaWQpO1xuXG4gICAgICAgICAgICB2YXIgdG9kYXkgICAgICAgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgdmFyIGRhdGVPZkJpcnRoID0gbmV3IERhdGUodmFsdWUuZGF0ZV9vZl9iaXJ0aCk7XG5cbiAgICAgICAgICAgIGZvcihpID0gMTsgaSA8IDMyOyBpKyspXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWYgKGkgPT0gZGF0ZU9mQmlydGguZ2V0RGF0ZSgpKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgJChcIiNkYWdcIikuYXBwZW5kKFwiPG9wdGlvbiB2YWx1ZT0nXCIgKyBpICsgXCInIHNlbGVjdGVkPSdzZWxlY3RlZCc+XCIgKyBpICsgXCI8L29wdGlvbj5cIik7XG4gICAgICAgICAgICAgICAgfSBlbHNlXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAkKFwiI2RhZ1wiKS5hcHBlbmQoXCI8b3B0aW9uIHZhbHVlPSdcIiArIGkgKyBcIic+XCIgKyBpICsgXCI8L29wdGlvbj5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IgKGkgPSAxOTAwOyBpIDwgdG9kYXkuZ2V0RnVsbFllYXIoKSArIDE7IGkrKylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpZiAoaSA9PSBkYXRlT2ZCaXJ0aC5nZXRGdWxsWWVhcigpKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgJChcIiNqYWFyXCIpLmFwcGVuZChcIjxvcHRpb24gdmFsdWU9J1wiICsgaSArIFwiJyBzZWxlY3RlZD0nc2VsZWN0ZWQnPlwiICsgaSArIFwiPC9vcHRpb24+XCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAkKFwiI2phYXJcIikuYXBwZW5kKFwiPG9wdGlvbiB2YWx1ZT0nXCIgKyBpICsgXCInPlwiICsgaSArIFwiPC9vcHRpb24+XCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgJChcIiNtYWFuZFwiKS52YWwoZGF0ZU9mQmlydGguZ2V0TW9udGgoKSk7XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0U2F2ZUxpc3RlbmVyKGFjdGlvbilcbiAgICB7XG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdzdWJtaXQnLCAnI3VzZXJmb3JtJywgYWN0aW9uKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXREZWxldGVMaXN0ZW5lcihhY3Rpb24pXG4gICAge1xuICAgICAgICAkKFwiI2NvbXBvbmVudFwiKS5vZmYoKS5vbihcImNsaWNrXCIsICcjZGVsZXRlX2J0bicsIGZ1bmN0aW9uIChlKVxuICAgICAgICB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBhY3Rpb24oJCh0aGlzKS5kYXRhKFwiaWRcIikpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBzZXRBY3Rpb25MaXN0ZW5lcjogc2V0QWN0aW9uTGlzdGVuZXIsXG4gICAgICAgIHNldFZpZXc6IHNldFZpZXcsXG4gICAgICAgIHNldFNhdmVMaXN0ZW5lcjogc2V0U2F2ZUxpc3RlbmVyLFxuICAgICAgICBzZXREZWxldGVMaXN0ZW5lcjogc2V0RGVsZXRlTGlzdGVuZXJcbiAgICB9XG59IiwidmFyIENhcnRWaWV3SGVscGVyID0gZnVuY3Rpb24oKVxue1xuICAgIC8vIENoYW5nZSB0aGUgdmlldyBvZiB0aGUgcGFnZVxuICAgIGZ1bmN0aW9uIHNldFZpZXcodmlld0RhdGEpXG4gICAge1xuICAgICAgICBpZiAodmlld0RhdGEgIT0gXCJcIilcbiAgICAgICAge1xuICAgICAgICAgICAgdmlld0RhdGEuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICBhZGRJdGVtKGl0ZW0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIHRvdGFsIHByaWNlICBvZiB0aGUgY2FydFxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7aW50fSB0b3RhbFByaWNlICBUb3RhbCBwcmljZSBvZiB0aGUgY2FydFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHVwZGF0ZVRvdGFsUHJpY2UobmV3UHJpY2UpXG4gICAge1xuICAgICAgICBuZXdQcmljZSA9IHBhcnNlRmxvYXQobmV3UHJpY2UpICsgcGFyc2VGbG9hdCgkKFwiLmNhcnRfX3RvdGFsIC5wcmljZVwiKS5odG1sKCkuc3Vic3RyKDEpKTtcbiAgICAgICAgJChcIi5jYXJ0X190b3RhbCAucHJpY2VcIikuaHRtbChcIuKCrFwiICsgcGFyc2VGbG9hdChuZXdQcmljZSkudG9GaXhlZCgyKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTWFrZSBuZXcgY2FydCBpdGVtIHZpc2lhYmxlIGluIHRoZSBET01cbiAgICAgKiBcbiAgICAgKiBAcGFyYW0gIHthcnJheX0gIGl0ZW0gIFByb2R1Y3RcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhZGRJdGVtKGl0ZW0pXG4gICAge1xuICAgICAgICB2YXIgY2FydEl0ZW0gPSAkKCc8ZGl2PicpLmh0bWwoJCgnLnNpZGViYXJfX2NvbnRlbnRfX3RtcCcpLmh0bWwoKSk7XG5cbiAgICAgICAgY2FydEl0ZW0uZmluZChcIi5jYXJ0X19pdGVtX190aXRsZVwiKS5odG1sKGl0ZW0udGl0bGUpO1xuICAgICAgICBjYXJ0SXRlbS5maW5kKFwiLmNhcnRfX2l0ZW1fX3ByaWNlXCIpLmh0bWwoXCLigqxcIiArIGl0ZW0ucHJpY2UudG9GaXhlZCgyKSk7XG4gICAgICAgIGNhcnRJdGVtLmZpbmQoXCIuY2FydF9faXRlbV9faW1hZ2UgaW1nXCIpLmF0dHIoXCJzcmNcIiwgaXRlbS5pbWFnZSk7XG4gICAgICAgIGNhcnRJdGVtLmZpbmQoXCIuY2FydF9faXRlbVwiKS5hdHRyKFwiZGF0YS1pZFwiLCBpdGVtLmVhbl9udW1iZXIpXG5cbiAgICAgICAgJChcIi5jYXJ0XCIpLmFwcGVuZChjYXJ0SXRlbSk7XG5cbiAgICAgICAgLy8gQ2hhbmdlIGFtb3VudCBvZiBpdGVtc1xuICAgICAgICB2YXIgYW1vdW50ID0gJChcIi5jYXJ0X2J1dHRvbiAuY291bnRcIikuaHRtbCgpO1xuICAgICAgICAkKFwiLmNhcnRfYnV0dG9uIC5jb3VudFwiKS5odG1sKHBhcnNlSW50KGFtb3VudCkgKyAxKTtcblxuICAgICAgICAvLyBVcGRhdGUgdGhlIHRvdGFsIHByaWNlXG4gICAgICAgIHVwZGF0ZVRvdGFsUHJpY2UoaXRlbS5wcmljZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTG9hZCB0aGUgY2FydCB3aGVuIHRoZSBwYWdlIGlzICByZWFzZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHNldEFjdGlvbkxpc3RlbmVyKGFjdGlvbilcbiAgICB7XG4gICAgICAgICQoZG9jdW1lbnQpLnJlYWR5KGFjdGlvbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTGlzdGVuZXIgZm9yIHRoZSBBZGQgdG8gY2FydCBidXR0b25cbiAgICAgKiBcbiAgICAgKiBAcGFyYW0gIHtmdW5jdGlvbn0gYWRkdG9DYXJ0ICBNb2RlbCBjYWxsYmFja1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIHNldEFkZFByb2R1Y3RMaXN0ZW5lcihhZGRUb0NhcnQpXG4gICAge1xuICAgICAgICAkKFwiYm9keVwiKS5vbihcImNsaWNrXCIsIFwiLmFkZHRvY2FydFwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIHZhciBwcm9kdWN0X2lkID0gJCh0aGlzKS5kYXRhKFwiaWRcIik7XG4gICAgICAgICAgICBhZGRUb0NhcnQocHJvZHVjdF9pZCk7XG4gICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoXCIjdG9fc2hvcF9jYXJ0XCIpLmZpbmQoXCIjc2hvcF9jYXJ0XCIpLmZhZGVUbygwLCAxMDApLmRlbGF5KDEwMDApLmZhZGVUbyg2MDAsIDApO1xuICAgICAgICB9KVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExpc3RlbmVyIGZvciByZW1vdmUgYSBwcm9kdWN0IGZyb20gdGhlIERPTSBjYXJ0XG4gICAgICogXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gcmVtb3ZlUHJvZHVjdCBDYWxsYmFjayBmdW5jdGlvbiB0byByZW1vdmUgdGhlIHByb2RjdXQgZnJvbSB0aGUgbWVtb3J5XG4gICAgICovXG4gICAgZnVuY3Rpb24gc2V0UmVtb3ZlTGlzdGVuZXIocmVtb3ZlUHJvZHVjdCkge1xuICAgICAgICAkKFwiYm9keVwiKS5vbihcImNsaWNrXCIsIFwiLmNhcnRfX2l0ZW1fX3JlbW92ZVwiLCBmdW5jdGlvbiAoZXZlbnQpe1xuICAgICAgICAgICAgdmFyIGNhcnRpdGVtICAgPSAkKHRoaXMpLnBhcmVudCgpO1xuICAgICAgICAgICAgdmFyIHByb2R1Y3RfaWQgPSAkKHRoaXMpLnBhcmVudCgpLmRhdGEoXCJpZFwiKTtcblxuICAgICAgICAgICAgLy8gUmVtb3ZlIHByb2R1Y3QgZnJvbSBET00gY2FydFxuICAgICAgICAgICAgJChjYXJ0aXRlbSkuYWRkQ2xhc3MoXCJjYXJ0X19pdGVtLS1yZW1vdmVkXCIpO1xuICAgICAgICAgICAgJChjYXJ0aXRlbSkub24oXCJhbmltYXRpb25lbmQgd2Via2l0QW5pbWF0aW9uRW5kIG9BbmltYXRpb25FbmQgTVNBbmltYXRpb25FbmRcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmUoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBEZWNyZXNlIGNvdW50XG4gICAgICAgICAgICB2YXIgYW1vdW50ID0gJChcIi5jYXJ0X2J1dHRvbiAuY291bnRcIikuaHRtbCgpO1xuICAgICAgICAgICAgJChcIi5jYXJ0X2J1dHRvbiAuY291bnRcIikuaHRtbChwYXJzZUludChhbW91bnQpIC0gMSk7XG5cbiAgICAgICAgICAgIHJlbW92ZVByb2R1Y3QocHJvZHVjdF9pZClcbiAgICAgICAgICAgIHVwZGF0ZVRvdGFsUHJpY2UoLSQoY2FydGl0ZW0pLmZpbmQoXCIuY2FydF9faXRlbV9fcHJpY2VcIikuaHRtbCgpLnN1YnN0cigxKSlcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXG4gICAgcmV0dXJuIHtcbiAgICAgICAgc2V0Vmlldzogc2V0VmlldyxcbiAgICAgICAgYWRkSXRlbTogYWRkSXRlbSxcbiAgICAgICAgdXBkYXRlVG90YWxQcmljZTogdXBkYXRlVG90YWxQcmljZSxcbiAgICAgICAgc2V0QWN0aW9uTGlzdGVuZXI6IHNldEFjdGlvbkxpc3RlbmVyLFxuICAgICAgICBzZXRBZGRQcm9kdWN0TGlzdGVuZXI6IHNldEFkZFByb2R1Y3RMaXN0ZW5lcixcbiAgICAgICAgc2V0UmVtb3ZlTGlzdGVuZXI6IHNldFJlbW92ZUxpc3RlbmVyLFxuICAgIH1cbn07IiwidmFyIEVycm9yVmlld0hlbHBlciA9IGZ1bmN0aW9uKClcbntcbiAgICAvLyBDaGFuZ2UgdGhlIHZpZXcgb2YgdGhlIHBhZ2VcbiAgICBmdW5jdGlvbiBzZXRWaWV3KClcbiAgICB7XG4gICAgICAgIGRvY3VtZW50LnRpdGxlID0gXCJPZXBzIC0gQVogR2FtZXNcIjtcblxuICAgICAgICAkKFwiI2NvbXBvbmVudFwiKS5sb2FkKCcvdmlld3MvZXJyb3IvZXJyb3IuaHRtbCcpO1xuICAgIH1cblxuICAgIC8vIEFjdGlvbkxpc3RlbmVyIHRoYXQgZXhlY3V0ZXMgYWN0aW9ucyBvbiBzcGVjaWZpYyBldmVudHNcbiAgICBmdW5jdGlvbiBzZXRBY3Rpb25MaXN0ZW5lcihldmVudEhhbmRsZXIpXG4gICAge1xuICAgICAgICAkKGRvY3VtZW50KS5yZWFkeShldmVudEhhbmRsZXIpO1xuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXG4gICAgcmV0dXJuIHtcbiAgICAgICAgc2V0Vmlldzogc2V0VmlldyxcbiAgICAgICAgc2V0QWN0aW9uTGlzdGVuZXI6IHNldEFjdGlvbkxpc3RlbmVyXG4gICAgfVxufTsiLCJ2YXIgTG9nb3V0Vmlld0hlbHBlciA9IGZ1bmN0aW9uKClcbntcbiAgICAvLyBDaGFuZ2UgdGhlIHZpZXcgb2YgdGhlIHBhZ2VcbiAgICBmdW5jdGlvbiBzZXRWaWV3KClcbiAgICB7XG4gICAgICAgIGRvY3VtZW50LnRpdGxlID0gXCJVaXRsb2dnZW4gLSBBWiBHYW1lc1wiO1xuXG4gICAgICAgICQoXCIjY29tcG9uZW50XCIpLmxvYWQoJy92aWV3cy9sb2dvdXQvbG9nb3V0Lmh0bWwnKTtcbiAgICB9XG5cbiAgICAvLyBFeGVjdXRlIHRoZSBldmVudCB3aGVuICdzb21ldGhpbmcnIGhhcHBlbnMgKHdoZW4gYSBidXR0b24gaXMgY2xpY2tlZCBmb3IgZXhhbXBsZSlcbiAgICBmdW5jdGlvbiBzZXRBY3Rpb25MaXN0ZW5lcihhY3Rpb24pXG4gICAge1xuICAgICAgICAkKGRvY3VtZW50KS5yZWFkeShhY3Rpb24pO1xuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXG4gICAgcmV0dXJuIHtcbiAgICAgICAgc2V0Vmlldzogc2V0VmlldyxcbiAgICAgICAgc2V0QWN0aW9uTGlzdGVuZXI6IHNldEFjdGlvbkxpc3RlbmVyXG4gICAgfVxufTsiLCJ2YXIgTG9naW5WaWV3SGVscGVyID0gZnVuY3Rpb24oKVxue1xuICAgIC8vIENoYW5nZSB0aGUgdmlldyBvZiB0aGUgcGFnZVxuICAgIGZ1bmN0aW9uIHNldFZpZXcoKVxuICAgIHtcbiAgICAgICAgZG9jdW1lbnQudGl0bGUgPVwiSW5sb2dnZW4gLSBBWiBHYW1lc1wiO1xuXG4gICAgICAgICQoXCIjY29tcG9uZW50XCIpLmxvYWQoJy92aWV3cy9sb2dpbi9sb2dpbi5odG1sJyk7XG4gICAgfVxuXG4gICAgLy8gRXhlY3V0ZSB0aGUgZXZlbnQgd2hlbiAnc29tZXRoaW5nJyBoYXBwZW5zICh3aGVuIGEgYnV0dG9uIGlzIGNsaWNrZWQgZm9yIGV4YW1wbGUpXG4gICAgZnVuY3Rpb24gc2V0QWN0aW9uTGlzdGVuZXIoYWN0aW9uKVxuICAgIHtcbiAgICAgICAgLy8gdXNlciBmaWxscyBpbiBsb2dpbiBmb3JtXG4gICAgICAgIC8vIHVzZXIgcHJlc3NlcyAnbG9naW4nXG5cbiAgICAgICAgLy8gaWYgdXNlciBwcmVzc2VzICdsb2dpbicsIHBlcmZvcm0gYWN0aW9uIChtYWtlIGNvbnRyb2xsZXIgc2VuZCBlbWFpbCBhbmQgcGFzc3dvcmQgdG8gQVBJKVxuICAgICAgICAkKFwiI2NvbXBvbmVudFwiKS5vbihcInN1Ym1pdFwiLCBcIiNsb2dpbmZvcm1cIiwgYWN0aW9uKTtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBieSBvdGhlciBwcm9ncmFtcyAodGhlIGNvbnRyb2xsZXIgaW4gdGhpcyBjYXNlKVxuICAgIHJldHVybiB7XG4gICAgICAgIHNldFZpZXc6IHNldFZpZXcsXG4gICAgICAgIHNldEFjdGlvbkxpc3RlbmVyOiBzZXRBY3Rpb25MaXN0ZW5lclxuICAgIH1cbn07IiwidmFyIE9yZGVyVmlld0hlbHBlciA9IGZ1bmN0aW9uKClcbntcbiAgICAvLyBDaGFuZ2UgdGhlIHZpZXcgb2YgdGhlIHBhZ2VcbiAgICBmdW5jdGlvbiBzZXRWaWV3KGNhcnQpXG4gICAge1xuICAgICAgICBkb2N1bWVudC50aXRsZSA9IFwiQmVzdGVsbGVuIC0gQVogR2FtZXNcIjtcblxuICAgICAgICAkKFwiI2NvbXBvbmVudFwiKS5sb2FkKCcvdmlld3Mvb3JkZXIvb3JkZXIuaHRtbCcsIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICBpZiAoY2FydCAhPSB1bmRlZmluZWQgJiYgY2FydCAhPSBcIlwiKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC8vIEFkZCBjYXJ0IGNvbnRlbnRcbiAgICAgICAgICAgICAgICAkLmVhY2goY2FydCwgZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcHJvZHVjdCA9ICQoXCIjcHJvZHVjdFwiKS5jbG9uZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICQocHJvZHVjdCkuZmluZChcIi5wcm9kdWN0X190aXRsZVwiKS5odG1sKHZhbHVlLnRpdGxlKTtcbiAgICAgICAgICAgICAgICAgICAgJChwcm9kdWN0KS5maW5kKFwiLnByb2R1Y3RfX2ltYWdlIGltZ1wiKS5hdHRyKFwic3JjXCIsIHZhbHVlLmltYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgJChwcm9kdWN0KS5maW5kKFwiLnByb2R1Y3RfX3ByaWNlXCIpLmFwcGVuZCgoXCLigqwgXCIpICsgdmFsdWUucHJpY2UudG9GaXhlZCgyKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgJChcIiNwcm9kdWN0X19saXN0XCIpLmFwcGVuZChwcm9kdWN0KTtcbiAgICAgICAgICAgICAgICAgICAgJChcIiNwcm9kdWN0X19saXN0XCIpLmFwcGVuZChcIjxociAvPlwiKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICQoXCIjb3JkZXJfaW5mbyAub3JkZXJfX25hdmlnYXRlXCIpLmZpcnN0KCkucmVtb3ZlQ2xhc3MoXCJkaXNhYmxlZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAkKFwiI3Byb2R1Y3RfX2xpc3RcIikuaHRtbChcIjxkaXYgY2xhc3M9J21lc3NhZ2UgbWVzc2FnZS0taW5mbyc+SmUgd2lua2Vsd2FnZW4gaXMgbm9nIGxlZWcsIHN0b3AgZXIgcHJvZHVjdGVuIGluIG9tIGRlemUgdGUga3VubmVuIGJlc3RlbGxlbi48L2Rpdj5cIilcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gUmVtb3ZlIHRoZSBmaXJzdCBsaXN0IGl0ZW0sIGJlY2F1c2UgdGhpcyBpdGVtIGlzIGFsd2F5cyBlbXB0eVxuICAgICAgICAgICAgJChcIiNwcm9kdWN0XCIpLmZpcnN0KCkucmVtb3ZlKCk7XG5cbiAgICAgICAgICAgIC8vIFNldCBhbmQgbW92ZSB0b3RhbCBwcmljZSB0byBlbmQgb2YgbGlzdFxuICAgICAgICAgICAgJChcIiN0b3RhbFwiKS5hcHBlbmRUbyhcIiNwcm9kdWN0X19saXN0XCIpO1xuICAgICAgICAgICAgJChcIi50b3RhbF9fcHJpY2VcIikuaHRtbCgkKFwiLmNhcnRfX3RvdGFsIC5wcmljZVwiKS5odG1sKCkpO1xuXG4gICAgICAgICAgICAvLyBTZXQgZGVsaXZlcnkgZGF0ZSAod2UgYWx3YXlzIGRlbGl2ZXIgaW4gb25lIGRheSlcbiAgICAgICAgICAgIHZhciB0b2RheSA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICB0b2RheS5zZXREYXRlKHRvZGF5LmdldERhdGUoKSArIDEpO1xuXG4gICAgICAgICAgICAkKFwiLmRlbGl2ZXJ5X2RhdGVcIikuaHRtbCh0b2RheS5nZXREYXRlKCkgKyBcIiBcIiArIHRvZGF5LnRvTG9jYWxlU3RyaW5nKFwibmwtTkxcIiwge21vbnRoOiBcImxvbmdcIn0pKTtcbiAgICAgICAgICAgICQoXCIuZGVsaXZlcnlfX2NhbGVuZGFyX19tb250aFwiKS5odG1sKHRvZGF5LnRvTG9jYWxlU3RyaW5nKFwibmwtTkxcIiwge21vbnRoOiBcInNob3J0XCJ9KS50b1VwcGVyQ2FzZSgpKTtcbiAgICAgICAgICAgICQoXCIuZGVsaXZlcnlfX2NhbGVuZGFyX19kYXlcIikuaHRtbCh0b2RheS5nZXREYXRlKCkpO1xuXG4gICAgICAgICAgICAvLyBTZXQgdXNlciBhZGRyZXNzXG4gICAgICAgICAgICBVc2VySGVscGVyLmdldFVzZXJJbmZvKGZ1bmN0aW9uKHVzZXIpIHtcbiAgICAgICAgICAgICAgICAkKFwiLmFkcmVzX19uYW1lXCIpLmh0bWwodXNlci5maXJzdF9uYW1lICsgXCIgXCIgKyB1c2VyLmluc2VydGlvbiArIFwiIFwiICsgdXNlci5zdXJuYW1lKTtcbiAgICAgICAgICAgICAgICAkKFwiLmFkcmVzX19zdHJlZXRcIikuaHRtbCh1c2VyLmFkZHJlc3Muc3RyZWV0ICsgXCIgXCIgKyB1c2VyLmFkZHJlc3MuaG91c2VfbnVtYmVyKTtcbiAgICAgICAgICAgICAgICAkKFwiLmFkcmVzX19wb3N0YWxjb2RlXCIpLmh0bWwodXNlci5hZGRyZXNzLnBvc3RhbF9jb2RlICsgXCIgXCIgKyB1c2VyLmFkZHJlc3MuY2l0eS50b1VwcGVyQ2FzZSgpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBHbyB0byB0aGUgbGFzdCBzdGVwIG9mIHRoZSBvcmRlciBwcm9jZXNzXG4gICAgZnVuY3Rpb24gZmluaXNoT3JkZXIoKVxuICAgIHtcbiAgICAgICAgJChcInVsLm9yZGVyLXN0ZXBzIGxpXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAkKFwidWwub3JkZXItc3RlcHMgbGkgYVwiKS5hZGRDbGFzcyhcImRpc2FibGVkXCIpO1xuICAgICAgICAkKFwidWwub3JkZXItc3RlcHMgbGkuY29uZmlybWF0aW9uXCIpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xuXG4gICAgICAgICQoXCIub3JkZXJfX3N0ZXBcIikucmVtb3ZlQ2xhc3MoXCJvcmRlcl9fc3RlcC0tYWN0aXZlXCIpO1xuICAgICAgICAkKFwiI2NvbmZpcm1hdGlvblwiKS5hZGRDbGFzcyhcIm9yZGVyX19zdGVwLS1hY3RpdmVcIik7XG4gICAgfVxuXG4gICAgLy8gQ2xlYXIgdGhlIHZpc2libGUgY2FydFxuICAgIGZ1bmN0aW9uIGNsZWFyQ2FydCgpXG4gICAge1xuICAgICAgICAkKFwiLmNhcnRcIikuZW1wdHkoKTtcbiAgICAgICAgJChcIi5jYXJ0X2J1dHRvbiAuY291bnRcIikuaHRtbChcIjBcIik7XG4gICAgICAgICQoXCIuY2FydF9fdG90YWwgLnByaWNlXCIpLmh0bWwoXCLigqwwMC4wMFwiKVxuICAgIH1cblxuICAgIC8vIEV4ZWN1dGUgdGhlIGV2ZW50IHdoZW4gJ3NvbWV0aGluZycgaGFwcGVucyAod2hlbiBhIGJ1dHRvbiBpcyBjbGlja2VkIGZvciBleGFtcGxlKVxuICAgIGZ1bmN0aW9uIHNldEFjdGlvbkxpc3RlbmVyKGFjdGlvbilcbiAgICB7XG4gICAgICAgICQoZG9jdW1lbnQpLnJlYWR5KGFjdGlvbik7XG4gICAgfVxuXG4gICAgLy8gQ29uZmlybSB0aGUgb3JkZXIgd2hlbiBzYm1pdHRpbmcgdGhlIGZvcm1cbiAgICBmdW5jdGlvbiBzZXRPcmRlckxpc3RlbmVyKGFjdGlvbilcbiAgICB7XG4gICAgICAgICQoZG9jdW1lbnQpLm9uKFwic3VibWl0XCIsIFwiI29yZGVyZm9ybVwiLCBhY3Rpb24pO1xuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXG4gICAgcmV0dXJuIHtcbiAgICAgICAgc2V0Vmlldzogc2V0VmlldyxcbiAgICAgICAgc2V0QWN0aW9uTGlzdGVuZXI6IHNldEFjdGlvbkxpc3RlbmVyLFxuICAgICAgICBzZXRPcmRlckxpc3RlbmVyOiBzZXRPcmRlckxpc3RlbmVyLFxuICAgICAgICBmaW5pc2hPcmRlcjogZmluaXNoT3JkZXIsXG4gICAgICAgIGNsZWFyQ2FydDogY2xlYXJDYXJ0XG4gICAgfVxufTsiLCJ2YXIgUHJvZHVjdHNWaWV3SGVscGVyID0gZnVuY3Rpb24oKVxue1xuICAgIC8vIENoYW5nZSB0aGUgdmlldyBvZiB0aGUgcGFnZVxuICAgIGZ1bmN0aW9uIHNldFZpZXcodmlld0RhdGEpXG4gICAge1xuICAgICAgICBkb2N1bWVudC50aXRsZSA9IFwiUHJvZHVjdGVuIC0gQVogR2FtZXNcIjtcblxuICAgICAgICAkKFwiI2NvbXBvbmVudFwiKS5odG1sKCc8ZGl2IGNsYXNzPVwiY29sLTEyXCI+PGRpdiBjbGFzcz1cImNvbC0zXCIgaWQ9XCJmaWx0ZXJzXCI+PC9kaXY+PGRpdiBjbGFzcz1cImNvbC05XCIgaWQ9XCJwcm9kdWN0c1wiPjwvZGl2PjwvZGl2PicpO1xuICAgICAgICAvLyBsb2FkIGZpbHRlcnNcbiAgICAgICAgJChcIiNmaWx0ZXJzXCIpLmxvYWQoJy92aWV3cy9wcm9kdWN0cy9maWx0ZXJzLmh0bWwnKTtcblxuICAgICAgICAvLyBsb2FkIHByb2R1Y3RzXG4gICAgICAgIGxvYWRQcm9kdWN0cyh2aWV3RGF0YSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbG9hZFByb2R1Y3RzKHZpZXdEYXRhKVxuICAgIHtcbiAgICAgICAgJChcIiNwcm9kdWN0c1wiKS5sb2FkKCcvdmlld3MvcHJvZHVjdHMvcHJvZHVjdHMuaHRtbCcsIGZ1bmN0aW9uICgpIHsgLy8gd2FhciBpZCA9ICdjb21wb25lbnQnIGRvZSAubG9hZC4uLi4uLlxuICAgICAgICAgICAgJC5lYWNoKHZpZXdEYXRhLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgLy8gQ2xvbmUgcHJvZHVjdFxuICAgICAgICAgICAgICAgIHZhciBwcm9kdWN0ID0gJCgnPGRpdj4nKS5hcHBlbmQoJCgnI3Byb2R1Y3RfX2xpc3RfX2l0ZW0nKS5jbG9uZSgpKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBBZGQgcHJvZHVjdCBpbmZvXG4gICAgICAgICAgICAgICAgJChwcm9kdWN0KS5maW5kKFwiLnByb2R1Y3RfX3RpdGxlXCIpLmh0bWwodmFsdWUudGl0bGUpO1xuICAgICAgICAgICAgICAgICQocHJvZHVjdCkuZmluZChcIi5wcm9kdWN0X19zdWJ0aXRsZVwiKS5hcHBlbmQodmFsdWUuZ2VucmUgKyhcIiB8IFBFR0kgXCIpICsgdmFsdWUucGVnaV9hZ2UgKyhcIiB8IFwiKSsgUGxhdGZvcm1Mb2dvKHZhbHVlLnBsYXRmb3JtKSk7XG4gICAgICAgICAgICAgICAgJChwcm9kdWN0KS5maW5kKFwiLnByb2R1Y3RfX2Rlc2NyaXB0aW9uXCIpLmh0bWwoQ3V0U3RyaW5nKHZhbHVlLmRlc2NyaXB0aW9uKSk7XG4gICAgICAgICAgICAgICAgJChwcm9kdWN0KS5maW5kKFwiLnByb2R1Y3RfX3ByaWNlXCIpLmFwcGVuZCgoXCLigqwgXCIpK3ZhbHVlLnByaWNlLnRvRml4ZWQoMikpO1xuICAgICAgICAgICAgICAgICQocHJvZHVjdCkuZmluZChcIiNidXR0b25zX19pbmZvLCAucHJvZHVjdF9faW1hZ2UgYSwgLnByb2R1Y3RfX3RpdGxlXCIpLmF0dHIoXCJocmVmXCIsIFwicHJvZHVjdC9cIiArIHZhbHVlLmVhbl9udW1iZXIpO1xuICAgICAgICAgICAgICAgICQocHJvZHVjdCkuZmluZChcIi5wcm9kdWN0X19pbWFnZSBpbWdcIikuYXR0cihcInNyY1wiLCB2YWx1ZS5pbWFnZSk7XG4gICAgICAgICAgICAgICAgJChwcm9kdWN0KS5maW5kKFwiLmFkZHRvY2FydFwiKS5hdHRyKFwiZGF0YS1pZFwiLCB2YWx1ZS5lYW5fbnVtYmVyKTtcblxuICAgICAgICAgICAgICAgICQoXCIjcHJvZHVjdF9fbGlzdFwiKS5hcHBlbmQocHJvZHVjdCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gUmVtb3ZlIHRoZSBmaXJzdCBsaXN0IGl0ZW0sIGJlY2F1c2UgdGhpcyBpdGVtIGlzIGFsd2F5cyBlbXB0eVxuICAgICAgICAgICAgJChcIiNwcm9kdWN0X19saXN0X19pdGVtXCIpLmZpcnN0KCkucmVtb3ZlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vU2hvdyBtb3JlL2xlc3NcbiAgICBmdW5jdGlvbiBDdXRTdHJpbmcodGV4dCl7XG4gICAgICAgIHZhciBTaG93QW1vdW50ID0gNTA7XG4gICAgICAgIHZhciBXb3Jkc0FycmF5ID0gdGV4dC5zcGxpdChcIiBcIik7XG4gICAgICAgIGlmKFdvcmRzQXJyYXkubGVuZ3RoPlNob3dBbW91bnQpe1xuICAgICAgICAgICAgdmFyIFNob3J0U3RyaW5nID0gXCJcIjtcbiAgICAgICAgICAgIGZvcihpPTA7IGk8U2hvd0Ftb3VudDsgaSsrKXtcbiAgICAgICAgICAgICAgICBTaG9ydFN0cmluZyArPSBXb3Jkc0FycmF5W2ldICsgXCIgXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gU2hvcnRTdHJpbmcrXCIuLi5cIjtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICByZXR1cm4gdGV4dDtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBFeGVjdXRlIHRoZSBldmVudCB3aGVuICdzb21ldGhpbmcnIGhhcHBlbnMgKHdoZW4gYSBidXR0b24gaXMgY2xpY2tlZCBmb3IgZXhhbXBsZSlcbiAgICBmdW5jdGlvbiBzZXRBY3Rpb25MaXN0ZW5lcihhY3Rpb24pXG4gICAge1xuICAgICAgICAkKGRvY3VtZW50KS5yZWFkeShhY3Rpb24pOyAvLyBpZiAnZG9jdW1lbnQgcmVhZHknIHBlcmZvcm0gXCJhY3Rpb25cIlxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldEZpbHRlckxpc3RlbmVyKGFjdGlvbilcbiAgICB7XG4gICAgICAgICAvLyBIaWVyIGhldCBmb3JtdWxpZXIgdmVyc3R1cmVuIGFscyB3ZSBvcCBlZW4gY2hlY2tib3ggZHJ1a2tlblxuICAgICAgICAkKFwiI2NvbXBvbmVudFwiKS5vZmYoKS5vbihcImNoYW5nZVwiLCBcImlucHV0W3R5cGU9Y2hlY2tib3hdXCIsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAkKFwiI3Byb2R1Y3RfZmlsdGVyXCIpLnN1Ym1pdCgpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBVcGRhdGUgZGUgcHJvZHVjdGVubGlqc3QgYWxzIGVlbiB3YWFyZGUgaW4gZGUgc2xpZGVyIHZlcmFuZGVyZChhbGxlIG1hbmllcmVuKVxuICAgICAgICAkKFwiI2NvbXBvbmVudFwiKS5vbihcImNoYW5nZSBrZXl1cFwiLCBcImlucHV0W25hbWU9cHJpY2UtbWF4XSwgaW5wdXRbbmFtZT1wcmljZS1taW5dXCIsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICBpZigkKFwiI3ByaWNlbWluXCIpLnZhbCgpID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAkKFwiI3ByaWNlbWluXCIpLnZhbCgwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAkKFwiI3Byb2R1Y3RfZmlsdGVyXCIpLnN1Ym1pdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAkKFwiI2NvbXBvbmVudFwiKS5vbihcInN1Ym1pdFwiLCBcIiNwcm9kdWN0X2ZpbHRlclwiLCBhY3Rpb24pO1xuICAgIH1cbiAgICAvLyBSZXR1cm4gdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBieSBvdGhlciBwcm9ncmFtcyAodGhlIGNvbnRyb2xsZXIgaW4gdGhpcyBjYXNlKVxuICAgIHJldHVybiB7XG4gICAgICAgIHNldFZpZXc6IHNldFZpZXcsXG4gICAgICAgIGxvYWRQcm9kdWN0czogbG9hZFByb2R1Y3RzLFxuICAgICAgICBzZXRBY3Rpb25MaXN0ZW5lcjogc2V0QWN0aW9uTGlzdGVuZXIsXG4gICAgICAgIHNldEZpbHRlckxpc3RlbmVyOiBzZXRGaWx0ZXJMaXN0ZW5lclxuICAgIH1cbn07IiwidmFyIFJlZ2lzdGVyVmlld0hlbHBlciA9IGZ1bmN0aW9uKClcbntcbiAgICAvLyBDaGFuZ2UgdGhlIHZpZXcgb2YgdGhlIHBhZ2VcbiAgICBmdW5jdGlvbiBzZXRWaWV3KHZpZXdUb1Nob3cpXG4gICAge1xuICAgICAgICBkb2N1bWVudC50aXRsZSA9IFwiUmVnaXN0cmVyZW4gLSBBWiBHYW1lc1wiO1xuICAgICAgICBcbiAgICAgICAgJChcIiNjb21wb25lbnRcIikubG9hZCh2aWV3VG9TaG93LCBmdW5jdGlvbigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTtcblxuICAgICAgICAgICAgZm9yKGkgPSAxOyBpIDwgMzI7IGkrKylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAkKFwiI2RhZ1wiKS5hcHBlbmQoXCI8b3B0aW9uIHZhbHVlPSdcIiArIGkgKyBcIic+XCIgKyBpICsgXCI8L29wdGlvbj5cIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAoaSA9IDE5MDA7IGkgPCBkYXRlLmdldEZ1bGxZZWFyKCkgKyAxOyBpKyspXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWYgKGkgPT0gMjAwMClcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICQoXCIjamFhclwiKS5hcHBlbmQoXCI8b3B0aW9uIHZhbHVlPSdcIiArIGkgKyBcIicgc2VsZWN0ZWQ9J3NlbGVjdGVkJz5cIiArIGkgKyBcIjwvb3B0aW9uPlwiKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgJChcIiNqYWFyXCIpLmFwcGVuZChcIjxvcHRpb24gdmFsdWU9J1wiICsgaSArIFwiJz5cIiArIGkgKyBcIjwvb3B0aW9uPlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gRXhlY3V0ZSB0aGUgZXZlbnQgd2hlbiAnc29tZXRoaW5nJyBoYXBwZW5zICh3aGVuIGEgYnV0dG9uIGlzIGNsaWNrZWQgZm9yIGV4YW1wbGUpXG4gICAgZnVuY3Rpb24gc2V0QWN0aW9uTGlzdGVuZXIoYWN0aW9uKVxuICAgIHtcbiAgICAgICAgLy8gdXNlciBmaWxscyBpbiByZWdpc3RlciBmb3JtXG4gICAgICAgIC8vIHVzZXIgcHJlc3NlcyAncmVnaXN0ZXInXG5cbiAgICAgICAgLy8gaWYgdXNlciBwcmVzc2VzICdyZWdpc3RlcicsIHBlcmZvcm0gYWN0aW9uXG4gICAgICAgICQoXCIjY29tcG9uZW50XCIpLm9uKFwic3VibWl0XCIsIFwiI3JlZ2lzdGVyZm9ybVwiLCBhY3Rpb24pO1xuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXG4gICAgcmV0dXJuIHtcbiAgICAgICAgc2V0Vmlldzogc2V0VmlldyxcbiAgICAgICAgc2V0QWN0aW9uTGlzdGVuZXI6IHNldEFjdGlvbkxpc3RlbmVyXG4gICAgfVxufTsiLCJ2YXIgUmVzZXRQYXNzd29yZFZpZXdIZWxwZXIgPSBmdW5jdGlvbigpXG57XG4gICAgLy8gQ2hhbmdlIHRoZSB2aWV3IG9mIHRoZSBwYWdlXG4gICAgZnVuY3Rpb24gc2V0Vmlldyh2aWV3VG9TaG93KVxuICAgIHtcbiAgICAgICAgZG9jdW1lbnQudGl0bGUgPSBcIklubG9nZ2VuIC0gQVogR2FtZXNcIjtcblxuICAgICAgICAkKFwiI2NvbXBvbmVudFwiKS5sb2FkKHZpZXdUb1Nob3cpO1xuICAgIH1cblxuICAgIC8vIEFjdGlvbkxpc3RlbmVyIHRoYXQgZXhlY3V0ZXMgYWN0aW9ucyBvbiBzcGVjaWZpYyBldmVudHNcbiAgICBmdW5jdGlvbiBzZXRBY3Rpb25MaXN0ZW5lcihldmVudEhhbmRsZXIpXG4gICAge1xuICAgICAgICAvLyQoZG9jdW1lbnQpLnJlYWR5KGV2ZW50SGFuZGxlcik7XG4gICAgICAgICQoXCIjY29tcG9uZW50XCIpLm9uKFwic3VibWl0XCIsIFwiI3Jlc2V0Zm9ybVwiLCBldmVudEhhbmRsZXIpO1xuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXG4gICAgcmV0dXJuIHtcbiAgICAgICAgc2V0Vmlldzogc2V0VmlldyxcbiAgICAgICAgc2V0QWN0aW9uTGlzdGVuZXI6IHNldEFjdGlvbkxpc3RlbmVyXG4gICAgfVxufTtcblxuLypcbnZhciBSZXNldFBhc3N3b3JkVmlld0hlbHBlciA9IGZ1bmN0aW9uKClcbntcbiAgICAvLyBDaGFuZ2UgdGhlIHZpZXcgb2YgdGhlIHBhZ2VcbiAgICBmdW5jdGlvbiBzZXRWaWV3KHZpZXdEYXRhKVxuICAgIHtcbiAgICAgICAgJChcIiNjb21wb25lbnRcIikubG9hZCgndmlld3MvcmVzZXRwYXNzd29yZC9yZXNldHBhc3N3b3JkLmh0bWwnKTtcbiAgICB9XG5cbiAgICAvLyBBY3Rpb25MaXN0ZW5lciB0aGF0IGV4ZWN1dGVzIGFjdGlvbnMgb24gc3BlY2lmaWMgZXZlbnRzXG4gICAgZnVuY3Rpb24gc2V0QWN0aW9uTGlzdGVuZXIoZXZlbnRIYW5kbGVyKVxuICAgIHtcbiAgICAgICAgLy8kKGRvY3VtZW50KS5yZWFkeShldmVudEhhbmRsZXIpO1xuICAgICAgICAkKFwiI2NvbXBvbmVudFwiKS5vbihcInN1Ym1pdFwiLCBcIiNyZXNldGZvcm1cIiwgZXZlbnRIYW5kbGVyKTtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBieSBvdGhlciBwcm9ncmFtcyAodGhlIGNvbnRyb2xsZXIgaW4gdGhpcyBjYXNlKVxuICAgIHJldHVybiB7XG4gICAgICAgIHNldFZpZXc6IHNldFZpZXcsXG4gICAgICAgIHNldEFjdGlvbkxpc3RlbmVyOiBzZXRBY3Rpb25MaXN0ZW5lclxuICAgIH1cbn07XG4qLyIsInZhciBQcm9kdWN0Vmlld0hlbHBlciA9IGZ1bmN0aW9uKClcbntcbiAgICAvLyBDaGFuZ2UgdGhlIHZpZXcgb2YgdGhlIHBhZ2VcbiAgICBmdW5jdGlvbiBzZXRWaWV3KHByb2R1Y3QpXG4gICAge1xuICAgICAgICBkb2N1bWVudC50aXRsZSA9IHByb2R1Y3QudGl0bGUgKyBcIiAtIEFaIEdhbWVzXCI7XG5cbiAgICAgICAgICQoXCIjY29tcG9uZW50XCIpLmxvYWQoJy92aWV3cy9zaW5nbGVfcHJvZHVjdC9zaW5nbGVfcHJvZHVjdC5odG1sJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICQoXCIuc2luZ2xlcHJvZHVjdF9faW1hZ2UgaW1nXCIpLmF0dHIoXCJzcmNcIiwgcHJvZHVjdC5pbWFnZSk7XG4gICAgICAgICAgICAgICAgJChcIi5zaW5nbGVwcm9kdWN0X190aXRsZVwiKS5odG1sKHByb2R1Y3QudGl0bGUpO1xuICAgICAgICAgICAgICAgICQoXCIuc2luZ2xlcHJvZHVjdF9fcHJpY2VcIikuaHRtbChcIuKCrCBcIiArIHByb2R1Y3QucHJpY2UudG9GaXhlZCgyKSk7XG5cbiAgICAgICAgICAgICAgICAkKFwiLnNpbmdsZXByb2R1Y3RfX2VhblwiKS5hcHBlbmQocHJvZHVjdC5lYW5fbnVtYmVyKTtcbiAgICAgICAgICAgICAgICAkKFwiLnNpbmdsZXByb2R1Y3RfX3BsYXRmb3JtXCIpLmFwcGVuZChQbGF0Zm9ybUxvZ28ocHJvZHVjdC5wbGF0Zm9ybSkpOyAvLyBmdW5jdGllIHZvb3IgbG9nb1xuICAgICAgICAgICAgICAgICQoXCIuc2luZ2xlcHJvZHVjdF9fcHVibGlzaGVyXCIpLmFwcGVuZChQbGF0Zm9ybUxvZ28ocHJvZHVjdC5wdWJsaXNoZXIpKTsgLy8gZnVuY3RpZSB2b29yIGxvZ29cbiAgICAgICAgICAgICAgICAkKFwiLnNpbmdsZXByb2R1Y3RfX3BlZ2lcIikuYXBwZW5kKHByb2R1Y3QucGVnaV9hZ2UpO1xuICAgICAgICAgICAgICAgICQoXCIuc2luZ2xlcHJvZHVjdF9fZ2VucmVcIikuYXBwZW5kKHByb2R1Y3QuZ2VucmUpO1xuICAgICAgICAgICAgICAgICQoXCIuc2luZ2xlcHJvZHVjdF9fZGVzY3JcIikuaHRtbChwcm9kdWN0LmRlc2NyaXB0aW9uKVxuICAgICAgICAgICAgICAgICQoXCIuYWRkdG9jYXJ0XCIpLmF0dHIoXCJkYXRhLWlkXCIsIHByb2R1Y3QuZWFuX251bWJlcik7XG5cbiAgICAgICAgICAgICAgICBpZiAoVXNlckhlbHBlci5pc0xvZ2VkSW4oKSlcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICQoXCIuYWRkVG9XaXNobGlzdEJ1dHRvblwiKS5hdHRyKFwib25jbGlja1wiLCBcIldpc2hsaXN0SGVscGVyLmFkZEl0ZW0oXCIgKyBwcm9kdWN0LmVhbl9udW1iZXIgKyBcIik7XCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAkKFwiLmFkZFRvV2lzaGxpc3RCdXR0b25cIikuaGlkZSgpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBkID0gbmV3IERhdGUocHJvZHVjdC5yZWxlYXNlX2RhdGUpO1xuXG4gICAgICAgICAgICAgICAgdmFyIG1vbnRocyA9IFtcImphbnVhcmlcIiwgXCJmZWJydWFyaVwiLCBcIm1hYXJ0XCIsIFwiYXByaWxcIiwgXCJtZWlcIiwgXCJqdW5pXCIsIFwianVsaVwiLCBcImF1Z3VzdHVzXCIsIFwic2VwdGVtYmVyXCIsIFwib2t0b2JlclwiLCBcIm5vdmVtYmVyXCIsIFwiZGVjZW1iZXJcIl07XG5cbiAgICAgICAgICAgICAgICAkKFwiLnNpbmdsZXByb2R1Y3RfX3JlbGVhc2VkYXRlXCIpLmFwcGVuZChkLmdldERheSgpICsgXCIgXCIgKyBtb250aHNbZC5nZXRNb250aCgpXSArIFwiIFwiICsgZC5nZXRGdWxsWWVhcigpKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0QWN0aW9uTGlzdGVuZXIoYWN0aW9uKVxuICAgIHtcbiAgICAgICAgLy8gdXNlciBmaWxscyBpbiByZWdpc3RlciBmb3JtXG4gICAgICAgIC8vIHVzZXIgcHJlc3NlcyAncmVnaXN0ZXInXG5cbiAgICAgICAgLy8gaWYgdXNlciBwcmVzc2VzICdyZWdpc3RlcicsIHBlcmZvcm0gYWN0aW9uXG4gICAgICAgICQoZG9jdW1lbnQpLnJlYWR5KGFjdGlvbik7XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHRoZSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgcHJvZ3JhbXMgKHRoZSBjb250cm9sbGVyIGluIHRoaXMgY2FzZSlcbiAgICByZXR1cm4ge1xuICAgICAgICBzZXRWaWV3OiBzZXRWaWV3LFxuICAgICAgICBzZXRBY3Rpb25MaXN0ZW5lcjogc2V0QWN0aW9uTGlzdGVuZXJcbiAgICB9XG59OyIsInZhciBXaXNobGlzdFZpZXdIZWxwZXIgPSBmdW5jdGlvbigpXG57XG4gICAgLy9jaGFuZ2UgdmlldyBvZiBwYWdlXG4gICAgZnVuY3Rpb24gc2V0Vmlldyh2aWV3RGF0YSlcbiAgICB7XG4gICAgICAgIC8vY29uc29sZS5sb2coXCJXTCBWSUVXOiBJbnNpZGUgc2V0Vmlld1wiKTtcbiAgICAgICAgZG9jdW1lbnQudGl0bGUgPSBcIldpc2hsaXN0IC0gQVogR2FtZXNcIjtcbiAgICAgICAgJChcIiNjb21wb25lbnRcIikuaHRtbCgnPGRpdiBjbGFzcz1cImNvbC0xMlwiPjxkaXYgY2xhc3M9XCJjb2wtMTJcIiBpZD1cIndpc2hsaXN0XCI+PC9kaXY+PC9kaXY+Jyk7XG5cbiAgICAgICAgbG9hZFdpc2hsaXN0KHZpZXdEYXRhKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsb2FkV2lzaGxpc3Qodmlld0RhdGEpXG4gICAge1xuICAgICAgICAvL2NvbnNvbGUubG9nKFwiV0wgVklFVzogSW5zaWRlIGxvYWRXaXNoTGlzdFwiKTtcbiAgICAgICAgJChcIiN3aXNobGlzdFwiKS5sb2FkKCcvdmlld3Mvd2lzaGxpc3Qvd2lzaGxpc3QuaHRtbCcsIGZ1bmN0aW9uICgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8vIGFkZCBhbGwgd2lzaGxpc3QgaXRlbXMgdG8gaHRtbFxuICAgICAgICAgICAgdmFyIGN1cnJlbnQgPSAwO1xuICAgICAgICAgICAgdmFyIGNvdW50ID0gMDtcbiAgICAgICAgICAgICQuZWFjaCh2aWV3RGF0YSwgZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIC8vIENsb25lIHByb2R1Y3RcbiAgICAgICAgICAgICAgICB2YXIgd2lzaF9fbGlzdF9faXRlbSA9ICQoJzxkaXY+JykuYXBwZW5kKCQoJyN3aXNoX19saXN0X19pdGVtJykuY2xvbmUoKSk7XG5cbiAgICAgICAgICAgICAgICAvLyBBZGQgcHJvZHVjdCBpbmZvXG4gICAgICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQgKzFcbiAgICAgICAgICAgICAgICAkKHdpc2hfX2xpc3RfX2l0ZW0pLmZpbmQoXCIud2lzaF9fbGlzdF9faWRcIikuYXBwZW5kKGN1cnJlbnQpO1xuICAgICAgICAgICAgICAgICQod2lzaF9fbGlzdF9faXRlbSkuZmluZChcIi53aXNoX19saXN0X19pbWFnZSBpbWdcIikuYXR0cihcInNyY1wiLCB2YWx1ZS5pbWFnZSk7XG4gICAgICAgICAgICAgICAgJCh3aXNoX19saXN0X19pdGVtKS5maW5kKFwiLndpc2hfX2xpc3RfX3RpdGxlXCIpLmh0bWwodmFsdWUudGl0bGUpO1xuICAgICAgICAgICAgICAgICQod2lzaF9fbGlzdF9faXRlbSkuZmluZChcIi53aXNoX19saXN0X19wcmljZVwiKS5hcHBlbmQoKFwi4oKsIFwiKSt2YWx1ZS5wcmljZSk7XG4gICAgICAgICAgICAgICAgJCh3aXNoX19saXN0X19pdGVtKS5maW5kKFwiLndpc2hfX2xpc3RfX3BsYXRmb3JtXCIpLmFwcGVuZChQbGF0Zm9ybUxvZ28odmFsdWUucGxhdGZvcm0pKTtcbiAgICAgICAgICAgICAgICAkKHdpc2hfX2xpc3RfX2l0ZW0pLmZpbmQoXCIud2lzaF9fbGlzdF9fYXZhaWxhYmlsaXR5XCIpLmFwcGVuZChCZXNjaGlrYmFhcmhlaWRLbGV1cih2YWx1ZS5zdG9jaykpO1xuICAgICAgICAgICAgICAgICQod2lzaF9fbGlzdF9faXRlbSkuZmluZChcIi53aXNoX19saXN0X19saWtlYnV0dG9uXCIpLmFwcGVuZCgpO1xuICAgICAgICAgICAgICAgICQod2lzaF9fbGlzdF9faXRlbSkuZmluZChcIiNkZWxldGVfYnRuXCIpLmF0dHIoXCJkYXRhLWlkXCIsIHZhbHVlLmVhbl9udW1iZXIpO1xuICAgICAgICAgICAgICAgICQod2lzaF9fbGlzdF9faXRlbSkuZmluZChcIiNjYXJ0X2J0blwiKS5hdHRyKFwiZGF0YS1pZFwiLCB2YWx1ZS5lYW5fbnVtYmVyKTtcblxuICAgICAgICAgICAgICAgICQoXCIjd2lzaF9fbGlzdFwiKS5hcHBlbmQod2lzaF9fbGlzdF9faXRlbSk7XG4gICAgICAgICAgICAgICAgY291bnQrKztcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAoY291bnQgPT0gMCkge1xuICAgICAgICAgICAgICAgICQoXCIjd2lzaGxpc3RfZXJyb3JfbWVzc2FnZVwiKS5zaG93KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgZmlyc3QgbGlzdCBpdGVtLCBiZWNhdXNlIHRoaXMgaXRlbSBpcyBhbHdheXMgZW1wdHlcbiAgICAgICAgICAgICQoXCIjd2lzaF9fbGlzdF9faXRlbVwiKS5maXJzdCgpLnJlbW92ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gc2V0QWN0aW9uTGlzdGVuZXIoYWN0aW9uKVxuICAgIHtcbiAgICAgICAgJChkb2N1bWVudCkucmVhZHkoYWN0aW9uKTsgLy8gaWYgJ2RvY3VtZW50IHJlYWR5JyBwZXJmb3JtIFwiYWN0aW9uXCIgICAgICAgXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0RGVsZXRlTGlzdGVuZXIoYWN0aW9uKVxuICAgIHtcbiAgICAgICAgJChcIiNjb21wb25lbnRcIikub2ZmKCkub24oXCJjbGlja1wiLCBcIiNkZWxldGVfYnRuXCIsIGZ1bmN0aW9uKGUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHZhciBlYW4gPSAkKHRoaXMpLmRhdGEoXCJpZFwiKTtcbiAgICAgICAgICAgIHZhciBkaXZfdG9faGlkZSA9ICQodGhpcykuY2xvc2VzdChcIi5yb3dcIik7XG4gICAgICAgICAgICBhY3Rpb24oZWFuLCBkaXZfdG9faGlkZSk7XG4gICAgICAgIH0gKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaGlkZUl0ZW0oZGl2X3RvX2hpZGUpXG4gICAge1xuICAgICAgICBkaXZfdG9faGlkZS5mYWRlVG8oMjAwLCAwKS5zbGlkZVVwKDIwMCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgc2V0Vmlldzogc2V0VmlldyxcbiAgICAgICAgbG9hZFdpc2hsaXN0OiBsb2FkV2lzaGxpc3QsXG4gICAgICAgIHNldEFjdGlvbkxpc3RlbmVyOiBzZXRBY3Rpb25MaXN0ZW5lcixcbiAgICAgICAgc2V0RGVsZXRlTGlzdGVuZXI6IHNldERlbGV0ZUxpc3RlbmVyLFxuICAgICAgICBoaWRlSXRlbTogaGlkZUl0ZW1cbiAgICB9XG59Il19

function PlatformLogo(e){switch(e=e.toUpperCase()){case"PS1":return"<img src='/resources/images/icons/ps1.png' />";case"PS4":return"<img src='/resources/images/icons/ps4.png' />";case"PC":return"<img src='/resources/images/icons/windows.png' />";case"XBOX":return"<img src='/resources/images/icons/xbox.png' />";case"NES":return"<img src='/resources/images/icons/nes.png' />";case"N64":return"<img src='/resources/images/icons/n64.png' />";case"NINTENDO SWITCH":return"<img src='/resources/images/icons/switch.png' />";default:return e;case"NINTENDO":return"<img src='/resources/images/publishers/nintendo.png' />";case"UBISOFT":return"<img src='/resources/images/publishers/ubisoft.png' />";case"ELECTRONIC ARTS":return"<img src='/resources/images/publishers/ea.png' />"}}function BeschikbaarheidKleur(e){return e<=0?"<img src='/resources/images/availability/buttonred.png' />":e>=1?"<img src='/resources/images/availability/buttongreen.png' />":e}function CartHelper(){this.removeProduct=function(e){},this.addProduct=function(e){}}function CookieHelper(){this.getCookie=function(e){for(var t=document.cookie.split(";"),n=0;n<t.length;n++){var i=t[n].split("=");if(i[0].trim()==e)return i[1]}},this.createCookie=function(e,t){document.cookie=e+"="+t+";"},this.deleteCookie=function(e){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;"}}function showLoadScreen(){$("#component").html('<div class="spinner"><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div> </div>')}function WishlistHelper(){this.addItem=function(e){$.ajax({url:"http://localhost:8081/wishlist/"+CookieHelper.getCookie("user_id")+"/"+e,type:"post",dataType:"json",data:JSON.stringify({}),headers:{Authorization:"Bearer "+CookieHelper.getCookie("access_token")},success:function(e){$(this).toggleClass("like--active"),alert("Product succesvol toegevoegd aan Wishlist.")},error:function(e,t,n){alert("Product is al in Wishlist.")}})}}$(document).on("click","span.like",function(e){$(this).toggleClass("like--active")}),$(document).on("click","span.single_like",function(e){$(this).toggleClass("single_like--active")});var Router=function(){function e(e,o){if(0!=t(e)){var r=n(e);switch(r[0]){case"":case"index.html":case"products":new ProductsController(new ProductsViewHelper,new ProductsModel).main();break;case"product":new ProductController(new ProductViewHelper,new ProductModel(r[1])).main();break;case"register":new RegisterController(new RegisterViewHelper,new RegisterModel).main();break;case"login":new LoginController(new LoginViewHelper,new LoginModel).main();break;case"logout":new LogoutController(new LogoutViewHelper,new LogoutModel).main();break;case"register":new RegisterController(new RegisterViewHelper,new RegisterModel).main();break;case"resetpassword":new ResetPasswordController(new ResetPasswordViewHelper,new ResetPasswordModel).main();break;case"wishlist":new WishlistController(new WishlistViewHelper,new WishlistModel).main();break;default:new ErrorController(new ErrorViewHelper).main()}0!=o&&""!=e&&"string"==typeof e&&(i({},"A-Z Games",e),showLoadScreen(),window.scrollTo(0,0))}}function t(e){return e.indexOf("http")==-1&&e.indexOf("https")==-1&&e.indexOf("www")==-1||(window.location=e,!1)}function n(e){return 0==e.indexOf("/")&&(e=e.substring(1)),null!=this.baseUrl&&e.indexOf(this.baseUrl)!=-1&&(e=e.substring(e.indexOf(this.baseUrl)+this.baseUrl.length)),e.split(/\/(.+)?/)}function i(e,t,n){window.history.pushState(e,t,n)}return baseUrl="project-webshop/",{route:e}};$(document).ready(function(){function e(e){$(e).toggleClass("sidebar--open"),$(".overlay").toggleClass("overlay--visible"),$("body").toggleClass("sidebar--open")}$(".sidebar-toggle").click(function(t){t.preventDefault();var n=$(this).data("sidebar");e($("#"+n))}),$(".sidebar__close").click(function(t){e($(this).parent().parent())}),$(".overlay").click(function(t){e($(".sidebar"))})});var CookieHelper=new CookieHelper,WishlistHelper=new WishlistHelper,CartModel=function(){function e(e){var t=CookieHelper.getCookie("cart");void 0!=t&&e(JSON.parse(t))}function t(e,t){$.ajax({url:"https://api.az-games.nl/products/"+e,type:"get",contentType:"json",success:function(e){cart={ean_number:e[0].ean_number,title:e[0].title,price:e[0].price,image:e[0].image},t(cart);var n=CookieHelper.getCookie("cart");void 0==n?CookieHelper.createCookie("cart",JSON.stringify([cart])):(n=JSON.parse(n),n.push(cart),CookieHelper.createCookie("cart",JSON.stringify(n)))},error:function(e,t,n){$("#component").load("/views/error/error.html")}})}function n(e){for(cart=JSON.parse(CookieHelper.getCookie("cart")),i=0;i<cart.length;i++)if(cart[i].ean_number==e){cart.splice(i,1);break}CookieHelper.createCookie("cart",JSON.stringify(cart))}return{getCart:e,addProduct:t,removeProduct:n}},LoginModel=function(){function e(e,t,n){$.ajax({url:"https://api.az-games.nl/user/login",type:"GET",dataType:"json",headers:{Authorization:"Basic "+btoa(e+":"+t)},success:function(e){CookieHelper.createCookie("access_token",e.access_token),CookieHelper.createCookie("user_id",e.user_id),n(e)},error:function(e,t,n){$("#error_message").show()}})}return{login:e}},LogoutModel=function(){function e(e){function t(e){for(var t=document.cookie.split(";"),n=0;n<t.length;n++){var i=t[n].split("=");if(i[0].trim()==e)return i[1]}}$.ajax({url:"https://api.az-games.nl/user/logout",type:"post",dataType:"json",data:JSON.stringify({user_id:t("user_id")}),success:function(t){document.cookie="access_token=",document.cookie="user_id=",e(t)},error:function(e,t,n){$("#error_message").show()}})}return{logout:e}},PageModel=function(){function e(e){$.ajax({url:"https://api.az-games.nl/user",type:"get",dataType:"json",headers:{Authorization:"Bearer "+CookieHelper.getCookie("access_token")},success:function(t){e(t)},error:function(e,t,n){$("#component").load("/views/error/error.html")}})}return{getPage:e}},ProductsModel=function(){function e(e,t){$.ajax({url:"https://api.az-games.nl/products?"+e,type:"get",dataType:"json",success:function(e){t(e)},error:function(e,t,n){$("#component").load("views/error/error.html")}})}return{getPage:e}},RegisterModel=function(){function e(e,t){$.ajax({url:"https://api.az-games.nl/user/register",type:"post",dataType:"json",data:JSON.stringify({e_mail:e.e_mailadres,password:e.wachtwoord,first_name:e.voornaam,insertion:e.tussenvoegsel,surname:e.achternaam,gender:e.gender,date_of_birth:e.birth_date,phone_number:e.mobiel_nummer,secret_question:e.security_question,secret_question_answer:e.security_answer,postal_code:e.postcode,number:e.huisnummer,street_name:e.straatnaam,city:e.plaats}),success:function(e){t(e)},error:function(e,t,n){$("#regi_api_error_message").show()}})}return{register:e}},ResetPasswordModel=function(){function e(e,t){console.log(e),$.ajax({url:"https://api.az-games.nl/user/resetpassword",type:"post",dataType:"json",data:JSON.stringify({email:e.e_mailadres,secret_question_answer:e.security_answer,secret_question:e.security_question,new_password:e.wachtwoord,repeat_password:e.wachtwoord2}),success:function(e){t(e)},error:function(e,t,n){$("#reset_password_api_error_message").show()}})}return{resetpassword:e}},ProductModel=function(e){function t(t){$.ajax({url:"https://api.az-games.nl/products/"+e,type:"get",dataType:"json",success:function(e){t(e[0])},error:function(e,t,n){$("#component").load("/error.html")}})}return{GetProductInfo:t}},WishlistModel=function(){function e(e){$.ajax({url:"http://localhost:8081/wishlist",type:"get",dataType:"json",headers:{Authorization:"Bearer "+CookieHelper.getCookie("access_token")},success:function(t){e(t)},error:function(e,t,n){$("#component").load("/views/error/error.html")}})}function t(e,t){$.ajax({url:"http://localhost:8081/wishlist/"+CookieHelper.getCookie("user_id")+"/"+e.ean_number,type:"post",dataType:"json",data:JSON.stringify({wishlist_id:e.wishlist_id,ean_number:e.ean_number}),headers:{Authorization:"Bearer "+CookieHelper.getCookie("access_token")},success:function(e){t(e)},error:function(e,t,n){$("#component").load("/views/error/error.html")}})}return{getWishlist:e,addToWishlist:t}},AdminController=function(e,t){function n(){t.getUserIds(e.showUserIds)}return{main:n}},CartController=function(e,t){function n(){s.getCart(function(e){a.setView(e)})}function i(e){s.addProduct(e,function(e){a.addItem(e)})}function o(e){s.removeProduct(e,function(e){})}function r(){a.setActionListener(n),a.setAddProductListener(i),a.setRemoveListener(o)}var s=t,a=e;return{main:r}},ErrorController=function(e){function t(){n.setView()}var n=e;return{main:t}},LoginController=function(e,t){function n(e){e.preventDefault(),e.stopImmediatePropagation();var t={};$.each($(this).serializeArray(),function(e,n){t[n.name]=n.value}),o.login(t.email,t.password,function(e){$("#inloggen_text").hide(),$("#uitloggen_text").show(),new PageController(new PageViewHelper,new PageModel).main()})}function i(){r.setView(),r.setActionListener(n)}var o=t,r=e;return{main:i}},LogoutController=function(e,t){function n(e){o.logout(function(e){$("#inloggen_text").show(),$("#uitloggen_text").hide(),r.setView()})}function i(){r.setActionListener(n)}var o=t,r=e;return{main:i}},PageController=function(e,t){function n(e){o.getPage(function(e){r.setView(e)})}function i(){r.setActionListener(n)}var o=t,r=e;return{main:i}},ProductsController=function(e,t){function n(){r.getPage("",function(e){s.setView(e)})}function i(e){e.preventDefault();var t=$(this).serialize();r.getPage(t,function(e){s.loadProducts(e)})}function o(){s.setActionListener(n),s.setFilterListener(i)}var r=t,s=e;return{main:o}},RegisterController=function(e,t){function n(){console.log("in actionPerformed"),event.preventDefault(),$("#regi_api_error_message").hide(),$("#ww2_error_message").hide();var e={};$.each($(this).serializeArray(),function(t,n){e[n.name]=n.value}),e.birth_date=e.jaar+"-"+e.maand+"-"+e.dag,console.log(e);var t=!1,n=["voornaam","achternaam","postcode","huisnummer","e_mailadres","wachtwoord","wachtwoord2","security_answer"];$.each(n,function(e,t){$("#"+t).removeClass("invalid")}),$.each(n,function(n,i){""==e[i]&&($("#"+i).addClass("invalid"),t=!0)}),t&&(window.scrollTo(0,0),$("#register_error_message").show());var i=!1;return e.wachtwoord!=e.wachtwoord2&&(i=!0,$("#ww2_error_message").show(),$("#wachtwoord").addClass("invalid"),$("#wachtwoord2").addClass("invalid")),!t&&!i&&(console.log("continued"),void o.register(e,function(e){r.setView("/views/register/after_register.html")}))}function i(){r.setView("/views/register/register.html"),r.setActionListener(n)}var o=t,r=e;return{main:i}},ResetPasswordController=function(e,t){function n(){console.log("in actionPerformed"),event.preventDefault(),$("#reset_password_api_error_message").hide(),$("#ww2_error_message").hide();var e={};$.each($(this).serializeArray(),function(t,n){e[n.name]=n.value});var t=!1,n=["wachtwoord","wachtwoord2","e_mailadres","security_answer"];$.each(n,function(e,t){$("#"+t).removeClass("invalid")}),$.each(n,function(n,i){""==e[i]&&($("#"+i).addClass("invalid"),t=!0)}),t&&(window.scrollTo(0,0),$("#reset_error_message").show());var i=!1;return e.wachtwoord!=e.wachtwoord2&&(i=!0,$("#ww2_error_message").show(),$("#wachtwoord").addClass("invalid"),$("#wachtwoord2").addClass("invalid")),!t&&!i&&(console.log("continued"),void o.resetpassword(e,function(e){r.setView("views/resetpassword/after_reset.html")}))}function i(){r.setView("views/resetpassword/resetpassword.html"),r.setActionListener(n)}var o=t,r=e;return{main:i}},ProductController=function(e,t){function n(t){e.setView(t)}function i(){t.GetProductInfo(n)}return{main:i,showView:n}},WishlistController=function(e,t){function n(){o.getWishlist(function(e){r.setView(e)})}function i(){r.setActionListener(n)}var o=t,r=e;return{main:i}},CartViewHelper=function(){function e(e){""!=e&&e.forEach(function(e,t){n(e)})}function t(e){e=parseFloat(e)+parseFloat($(".cart__total .price").html().substr(1)),$(".cart__total .price").html("€"+parseFloat(e).toFixed(2))}function n(e){var n=$("<div>").html($(".sidebar__content__tmp").html());n.find(".cart__item__title").html(e.title),n.find(".cart__item__price").html("€"+e.price),n.find(".cart__item__image img").attr("src",e.image),n.find(".cart__item").attr("data-id",e.ean_number),$(".cart").append(n);var i=$(".cart_button .count").html();$(".cart_button .count").html(parseInt(i)+1),t(e.price)}function i(e){$(document).ready(e)}function o(e){$("body").on("click",".addtocart",function(t){t.preventDefault();var n=$(this).data("id");e(n)})}function r(e){$("body").on("click",".cart__item__remove",function(n){var i=$(this).parent(),o=$(this).parent().data("id");$(i).addClass("cart__item--removed"),$(i).on("animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",function(){$(this).remove()});var r=$(".cart_button .count").html();$(".cart_button .count").html(parseInt(r)-1),e(o),t(-$(i).find(".cart__item__price").html().substr(1))})}return{setView:e,addItem:n,updateTotalPrice:t,setActionListener:i,setAddProductListener:o,setRemoveListener:r}},ErrorViewHelper=function(){function e(){document.title="Oeps - AZ Games",$("#component").load("/views/error/error.html")}function t(e){$(document).ready(e)}return{setView:e,setActionListener:t}},LoginViewHelper=function(){function e(){document.title="Inloggen - AZ Games",$("#component").load("/views/login/login.html")}function t(e){$("#component").on("submit","#loginform",e)}return{setView:e,setActionListener:t}},LogoutViewHelper=function(){function e(){document.title="Uitloggen - AZ Games",$("#component").load("/views/logout/logout.html")}function t(e){$(document).ready(e)}return{setView:e,setActionListener:t}},PageViewHelper=function(){function e(e){document.title="Welkom - AZ Games",$("#component").load("/views/page/page.html",function(){"customer"==e[0].user_type&&$("#user-block").append("<h1>Je lees dit alleen als je een customer bent"),"admin"==e[0].user_type&&$("#user-block").append("<h1>Je lees dit alleen als je een administrator bent")})}function t(e){$(document).ready(e)}return{setView:e,setActionListener:t}},ProductsViewHelper=function(){function e(e){document.title="Producten - AZ Games",$("#component").html('<div class="col-12"><div class="col-3" id="filters"></div><div class="col-9" id="products"></div></div>'),$("#filters").load("/views/products/filters.html"),t(e)}function t(e){$("#products").load("/views/products/products.html",function(){$.each(e,function(e,t){var i=$("<div>").append($("#product__list__item").clone());$(i).find(".product__title").html(t.title),$(i).find(".product__subtitle").append(t.genre+" | PEGI "+t.pegi_age+" | "+PlatformLogo(t.platform)),$(i).find(".product__description").html(n(t.description)),$(i).find(".product__price").append("€ "+t.price),$(i).find("#buttons__info").attr("href","product/"+t.ean_number),$(i).find(".product__image img").attr("src",t.image),$(i).find(".addtocart").attr("data-id",t.ean_number),$("#product__list").append(i)}),$("#product__list__item").first().remove()})}function n(e){var t=50,n=e.split(" ");if(n.length>t){var o="";for(i=0;i<t;i++)o+=n[i]+" ";return o+"..."}return e}function o(e){$(document).ready(e)}function r(e){$("#component").off().on("change","input[type=checkbox]",function(e){$("#product_filter").submit()}),$("#component").on("change keyup","input[name=price-max], input[name=price-min]",function(e){null==$("#pricemin").val()?$("#pricemin").val(0):$("#product_filter").submit()}),$("#component").on("submit","#product_filter",e)}return{setView:e,loadProducts:t,setActionListener:o,setFilterListener:r}},RegisterViewHelper=function(){function e(e){document.title="Registreren - AZ Games",$("#component").load(e)}function t(e){$("#component").on("submit","#registerform",e)}return{setView:e,setActionListener:t}},ResetPasswordViewHelper=function(){function e(e){document.title="Inloggen - AZ Games",$("#component").load(e)}function t(e){$("#component").on("submit","#resetform",e)}return{setView:e,setActionListener:t}},ProductViewHelper=function(){function e(e){document.title=e.title+" - AZ Games",$("#component").load("/views/single_product/single_product.html",function(){$(".singleproduct__image img").attr("src",e.image),$(".singleproduct__title").html(e.title),$(".singleproduct__price").html("€ "+e.price),$(".singleproduct__ean").append(e.ean_number),$(".singleproduct__platform").append(PlatformLogo(e.platform)),$(".singleproduct__publisher").append(PlatformLogo(e.publisher)),$(".singleproduct__pegi").append(e.pegi_age),$(".singleproduct__genre").append(e.genre),$(".singleproduct__descr").html(e.description),$(".addtocart").attr("data-id",e.ean_number),$(".addToWishlistButton").attr("onclick","WishlistHelper.addItem("+e.ean_number+");");var t=new Date(e.release_date),n=["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"];$(".singleproduct__releasedate").append(t.getDay()+" "+n[t.getMonth()]+" "+t.getFullYear())})}function t(e){$(document).ready(e)}return{setView:e,setActionListener:t}},WishlistViewHelper=function(){function e(e){document.title="Wishlist - AZ Games",$("#component").html('<div class="col-12"><div class="col-12" id="wishlist"></div></div>'),t(e)}function t(e){$("#wishlist").load("/views/wishlist/wishlist.html",function(){var t=0;$.each(e,function(e,n){var i=$("<div>").append($("#wish__list__item").clone());t+=1,$(i).find(".wish__list__id").append(t),$(i).find(".wish__list__image img").attr("src",n.image),$(i).find(".wish__list__title").html(n.title),$(i).find(".wish__list__price").append("€ "+n.price),$(i).find(".wish__list__platform").append(PlatformLogo(n.platform)),$(i).find(".wish__list__availability").append(BeschikbaarheidKleur(n.stock)),$(i).find(".wish__list__likebutton").append(),$("#wish__list").append(i)}),$("#wish__list__item").first().remove()})}function n(e){$(document).ready(e)}return{setView:e,loadWishlist:t,setActionListener:n}};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1pbm9ydG9vbHMuanMiLCJoZWxwZXJzL2NhcnQuanMiLCJoZWxwZXJzL2Nvb2tpZS5qcyIsImhlbHBlcnMvZ2xvYmFsLmpzIiwiaGVscGVycy93aXNobGlzdC5qcyIsInJvdXRlci5qcyIsInNpZGViYXIuanMiLCJjYXJ0X21vZGVsLmpzIiwibG9naW5fbW9kZWwuanMiLCJsb2dvdXRfbW9kZWwuanMiLCJwYWdlX21vZGVsLmpzIiwicHJvZHVjdHNfbW9kZWwuanMiLCJyZWdpc3Rlcl9tb2RlbC5qcyIsInJlc2V0cGFzc3dvcmRfbW9kZWwuanMiLCJzaW5nbGVfcHJvZHVjdF9tb2RlbC5qcyIsIndpc2hsaXN0X21vZGVsLmpzIiwiYWRtaW5fY29udHJvbGxlci5qcyIsImNhcnRfY29udHJvbGxlci5qcyIsImVycm9yX2NvbnRyb2xsZXIuanMiLCJsb2dpbl9jb250cm9sbGVyLmpzIiwibG9nb3V0X2NvbnRyb2xsZXIuanMiLCJwYWdlX2NvbnRyb2xsZXIuanMiLCJwcm9kdWN0c19jb250cm9sbGVyLmpzIiwicmVnaXN0ZXJfY29udHJvbGxlci5qcyIsInJlc2V0cGFzc3dvcmRfY29udHJvbGxlci5qcyIsInNpbmdsZV9wcm9kdWN0X2NvbnRyb2xsZXIuanMiLCJ3aXNobGlzdF9jb250cm9sbGVyLmpzIiwiY2FydC9jYXJ0X3ZpZXcuanMiLCJlcnJvci9lcnJvcl92aWV3LmpzIiwibG9naW4vbG9naW5fdmlldy5qcyIsImxvZ291dC9sb2dvdXRfdmlldy5qcyIsInBhZ2UvcGFnZV92aWV3LmpzIiwicHJvZHVjdHMvcHJvZHVjdHNfdmlldy5qcyIsInJlZ2lzdGVyL3JlZ2lzdGVyX3ZpZXcuanMiLCJyZXNldHBhc3N3b3JkL3Jlc2V0cGFzc3dvcmRfdmlldy5qcyIsInNpbmdsZV9wcm9kdWN0L3NpbmdsZV9wcm9kdWN0X3ZpZXcuanMiLCJ3aXNobGlzdC93aXNobGlzdF92aWV3LmpzIl0sIm5hbWVzIjpbIlBsYXRmb3JtTG9nbyIsInBsYXRmb3JtbmFhbSIsInRvVXBwZXJDYXNlIiwiQmVzY2hpa2JhYXJoZWlkS2xldXIiLCJzdG9ja3ZhbHVlIiwiQ2FydEhlbHBlciIsInRoaXMiLCJyZW1vdmVQcm9kdWN0IiwiaWQiLCJhZGRQcm9kdWN0IiwiQ29va2llSGVscGVyIiwiZ2V0Q29va2llIiwibmFtZSIsImNvb2tpZXMiLCJkb2N1bWVudCIsImNvb2tpZSIsInNwbGl0IiwiaSIsImxlbmd0aCIsInRyaW0iLCJjcmVhdGVDb29raWUiLCJ2YWx1ZSIsImRlbGV0ZUNvb2tpZSIsInNob3dMb2FkU2NyZWVuIiwiJCIsImh0bWwiLCJXaXNobGlzdEhlbHBlciIsImFkZEl0ZW0iLCJlYW5fbnVtYmVyIiwiYWpheCIsInVybCIsInR5cGUiLCJkYXRhVHlwZSIsImRhdGEiLCJKU09OIiwic3RyaW5naWZ5IiwiaGVhZGVycyIsIkF1dGhvcml6YXRpb24iLCJzdWNjZXNzIiwidG9nZ2xlQ2xhc3MiLCJhbGVydCIsImVycm9yIiwieGhyIiwic3RhdHVzIiwib24iLCJldmVudCIsIlJvdXRlciIsInJvdXRlIiwiaGlzdG9yeSIsImlzSW50ZXJuYWwiLCJwYXJ0aWNsZXMiLCJnZXRQYXJ0aWNsZXMiLCJQcm9kdWN0c0NvbnRyb2xsZXIiLCJQcm9kdWN0c1ZpZXdIZWxwZXIiLCJQcm9kdWN0c01vZGVsIiwibWFpbiIsIlByb2R1Y3RDb250cm9sbGVyIiwiUHJvZHVjdFZpZXdIZWxwZXIiLCJQcm9kdWN0TW9kZWwiLCJSZWdpc3RlckNvbnRyb2xsZXIiLCJSZWdpc3RlclZpZXdIZWxwZXIiLCJSZWdpc3Rlck1vZGVsIiwiTG9naW5Db250cm9sbGVyIiwiTG9naW5WaWV3SGVscGVyIiwiTG9naW5Nb2RlbCIsIkxvZ291dENvbnRyb2xsZXIiLCJMb2dvdXRWaWV3SGVscGVyIiwiTG9nb3V0TW9kZWwiLCJSZXNldFBhc3N3b3JkQ29udHJvbGxlciIsIlJlc2V0UGFzc3dvcmRWaWV3SGVscGVyIiwiUmVzZXRQYXNzd29yZE1vZGVsIiwiV2lzaGxpc3RDb250cm9sbGVyIiwiV2lzaGxpc3RWaWV3SGVscGVyIiwiV2lzaGxpc3RNb2RlbCIsIkVycm9yQ29udHJvbGxlciIsIkVycm9yVmlld0hlbHBlciIsIndyaXRlSGlzdG9yeSIsIndpbmRvdyIsInNjcm9sbFRvIiwiaW5kZXhPZiIsImxvY2F0aW9uIiwic3Vic3RyaW5nIiwiYmFzZVVybCIsIm9iamVjdCIsInRpdGxlIiwicHVzaFN0YXRlIiwicmVhZHkiLCJ0b2dnbGVTaWRlYmFyIiwic2lkZWJhciIsImNsaWNrIiwiZSIsInByZXZlbnREZWZhdWx0IiwicGFyZW50IiwiQ2FydE1vZGVsIiwiZ2V0Q2FydCIsImNhbGxiYWNrIiwiY2FydCIsInVuZGVmaW5lZCIsInBhcnNlIiwiY29udGVudFR5cGUiLCJwcmljZSIsImltYWdlIiwiY3VycmVudENhcnQiLCJwdXNoIiwibG9hZCIsInNwbGljZSIsImxvZ2luIiwiZW1haWwiLCJwYXNzd29yZCIsImJ0b2EiLCJhY2Nlc3NfdG9rZW4iLCJ1c2VyX2lkIiwic2hvdyIsImxvZ291dCIsIlBhZ2VNb2RlbCIsImdldFBhZ2UiLCJmaWx0ZXIiLCJyZWdpc3RlciIsImZvcm1EYXRhIiwiZV9tYWlsIiwiZV9tYWlsYWRyZXMiLCJ3YWNodHdvb3JkIiwiZmlyc3RfbmFtZSIsInZvb3JuYWFtIiwiaW5zZXJ0aW9uIiwidHVzc2Vudm9lZ3NlbCIsInN1cm5hbWUiLCJhY2h0ZXJuYWFtIiwiZ2VuZGVyIiwiZGF0ZV9vZl9iaXJ0aCIsImJpcnRoX2RhdGUiLCJwaG9uZV9udW1iZXIiLCJtb2JpZWxfbnVtbWVyIiwic2VjcmV0X3F1ZXN0aW9uIiwic2VjdXJpdHlfcXVlc3Rpb24iLCJzZWNyZXRfcXVlc3Rpb25fYW5zd2VyIiwic2VjdXJpdHlfYW5zd2VyIiwicG9zdGFsX2NvZGUiLCJwb3N0Y29kZSIsIm51bWJlciIsImh1aXNudW1tZXIiLCJzdHJlZXRfbmFtZSIsInN0cmFhdG5hYW0iLCJjaXR5IiwicGxhYXRzIiwicmVzZXRwYXNzd29yZCIsImNvbnNvbGUiLCJsb2ciLCJuZXdfcGFzc3dvcmQiLCJyZXBlYXRfcGFzc3dvcmQiLCJ3YWNodHdvb3JkMiIsImVhbiIsIkdldFByb2R1Y3RJbmZvIiwiZ2V0V2lzaGxpc3QiLCJhZGRUb1dpc2hsaXN0Iiwidmlld0RhdGEiLCJ3aXNobGlzdF9pZCIsIkFkbWluQ29udHJvbGxlciIsInZpZXdIZWxwZXIiLCJtb2RlbCIsImdldFVzZXJJZHMiLCJzaG93VXNlcklkcyIsIkNhcnRDb250cm9sbGVyIiwiTW9kZWwiLCJWaWV3SGVscGVyIiwic2V0VmlldyIsInNldEFjdGlvbkxpc3RlbmVyIiwic2V0QWRkUHJvZHVjdExpc3RlbmVyIiwic2V0UmVtb3ZlTGlzdGVuZXIiLCJhY3Rpb25QZXJmb3JtZWQiLCJzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24iLCJlYWNoIiwic2VyaWFsaXplQXJyYXkiLCJmaWVsZCIsImhpZGUiLCJQYWdlQ29udHJvbGxlciIsIlBhZ2VWaWV3SGVscGVyIiwiVmlldyIsImZpbHRlclByb2R1Y3RzIiwiZmlsdGVycyIsInNlcmlhbGl6ZSIsImxvYWRQcm9kdWN0cyIsInNldEZpbHRlckxpc3RlbmVyIiwiamFhciIsIm1hYW5kIiwiZGFnIiwibWFuZGF0b3J5RmllbGRNaXNzZXMiLCJtYW5kYXRvcnlGaWVsZHMiLCJtYW5GaWVsZCIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJwYXNzd29yZHNOb3RJZGVudGljYWwiLCJzaG93VmlldyIsIkNhcnRWaWV3SGVscGVyIiwiZm9yRWFjaCIsIml0ZW0iLCJpbmRleCIsInVwZGF0ZVRvdGFsUHJpY2UiLCJuZXdQcmljZSIsInBhcnNlRmxvYXQiLCJzdWJzdHIiLCJ0b0ZpeGVkIiwiY2FydEl0ZW0iLCJmaW5kIiwiYXR0ciIsImFwcGVuZCIsImFtb3VudCIsInBhcnNlSW50IiwiYWN0aW9uIiwiYWRkVG9DYXJ0IiwicHJvZHVjdF9pZCIsImNhcnRpdGVtIiwicmVtb3ZlIiwiZXZlbnRIYW5kbGVyIiwidXNlcl90eXBlIiwia2V5IiwicHJvZHVjdCIsImNsb25lIiwiZ2VucmUiLCJwZWdpX2FnZSIsInBsYXRmb3JtIiwiQ3V0U3RyaW5nIiwiZGVzY3JpcHRpb24iLCJmaXJzdCIsInRleHQiLCJTaG93QW1vdW50IiwiV29yZHNBcnJheSIsIlNob3J0U3RyaW5nIiwib2ZmIiwic3VibWl0IiwidmFsIiwidmlld1RvU2hvdyIsInB1Ymxpc2hlciIsImQiLCJEYXRlIiwicmVsZWFzZV9kYXRlIiwibW9udGhzIiwiZ2V0RGF5IiwiZ2V0TW9udGgiLCJnZXRGdWxsWWVhciIsImxvYWRXaXNobGlzdCIsImN1cnJlbnQiLCJ3aXNoX19saXN0X19pdGVtIiwic3RvY2siXSwibWFwcGluZ3MiOiJBQUNBLFFBQUFBLGNBQUFDLEdBR0EsT0FEQUEsRUFBQUEsRUFBQUMsZUFJQSxJQUFBLE1BQ0EsTUFBQSwrQ0FDQSxLQUFBLE1BQ0EsTUFBQSwrQ0FDQSxLQUFBLEtBQ0EsTUFBQSxtREFDQSxLQUFBLE9BQ0EsTUFBQSxnREFDQSxLQUFBLE1BQ0EsTUFBQSwrQ0FDQSxLQUFBLE1BQ0EsTUFBQSwrQ0FDQSxLQUFBLGtCQUNBLE1BQUEsa0RBQ0EsU0FDQSxNQUFBRCxFQUdBLEtBQUEsV0FDQSxNQUFBLHlEQUNBLEtBQUEsVUFDQSxNQUFBLHdEQUNBLEtBQUEsa0JBQ0EsTUFBQSxxREFJQSxRQUFBRSxzQkFBQUMsR0FFQSxNQUFBQSxJQUFBLEVBQ0EsNkRBQ0FBLEdBQUEsRUFDQSwrREFFQUEsRUN0Q0EsUUFBQUMsY0FTQUMsS0FBQUMsY0FBQSxTQUFBQyxLQVVBRixLQUFBRyxXQUFBLFNBQUFELEtDbkJBLFFBQUFFLGdCQVNBSixLQUFBSyxVQUFBLFNBQUFDLEdBSUEsSUFBQSxHQUZBQyxHQUFBQyxTQUFBQyxPQUFBQyxNQUFBLEtBRUFDLEVBQUEsRUFBQUEsRUFBQUosRUFBQUssT0FBQUQsSUFDQSxDQUNBLEdBQUFGLEdBQUFGLEVBQUFJLEdBQUFELE1BQUEsSUFFQSxJQUFBRCxFQUFBLEdBQUFJLFFBQUFQLEVBRUEsTUFBQUcsR0FBQSxLQWFBVCxLQUFBYyxhQUFBLFNBQUFSLEVBQUFTLEdBRUFQLFNBQUFDLE9BQUFI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QUFBLE1BQUF2TCxFQUFBZ0YsT0FDQTdFLEVBQUEwTixHQUFBdkMsS0FBQSxzQkFBQWxMLEtBQUFKLEVBQUErRCxPQUNBNUQsRUFBQTBOLEdBQUF2QyxLQUFBLHNCQUFBRSxPQUFBLEtBQUF4TCxFQUFBK0UsT0FDQTVFLEVBQUEwTixHQUFBdkMsS0FBQSx5QkFBQUUsT0FBQTdNLGFBQUFxQixFQUFBdU0sV0FDQXBNLEVBQUEwTixHQUFBdkMsS0FBQSw2QkFBQUUsT0FBQTFNLHFCQUFBa0IsRUFBQThOLFFBQ0EzTixFQUFBME4sR0FBQXZDLEtBQUEsMkJBQUFFLFNBRUFyTCxFQUFBLGVBQUFxTCxPQUFBcUMsS0FJQTFOLEVBQUEscUJBQUF1TSxRQUFBWCxXQUdBLFFBQUE5QyxHQUFBMEMsR0FFQXhMLEVBQUFWLFVBQUF3RSxNQUFBMEgsR0FJQSxPQUNBM0MsUUFBQUEsRUFDQTJFLGFBQUFBLEVBQ0ExRSxrQkFBQUEiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy9QbGF0Zm9ybSBMb2dvJ3NcbmZ1bmN0aW9uIFBsYXRmb3JtTG9nbyhwbGF0Zm9ybW5hYW0pXG57XG4gICAgcGxhdGZvcm1uYWFtID0gcGxhdGZvcm1uYWFtLnRvVXBwZXJDYXNlKCk7XG4gICAgc3dpdGNoIChwbGF0Zm9ybW5hYW0pXG4gICAge1xuICAgICAgICAvL3BsYXRmb3Jtc1xuICAgICAgICBjYXNlIFwiUFMxXCI6XG4gICAgICAgICAgICByZXR1cm4gXCI8aW1nIHNyYz0nL3Jlc291cmNlcy9pbWFnZXMvaWNvbnMvcHMxLnBuZycgLz5cIjtcbiAgICAgICAgY2FzZSBcIlBTNFwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiPGltZyBzcmM9Jy9yZXNvdXJjZXMvaW1hZ2VzL2ljb25zL3BzNC5wbmcnIC8+XCI7XG4gICAgICAgIGNhc2UgXCJQQ1wiOlxuICAgICAgICAgICAgcmV0dXJuIFwiPGltZyBzcmM9Jy9yZXNvdXJjZXMvaW1hZ2VzL2ljb25zL3dpbmRvd3MucG5nJyAvPlwiO1xuICAgICAgICBjYXNlIFwiWEJPWFwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiPGltZyBzcmM9Jy9yZXNvdXJjZXMvaW1hZ2VzL2ljb25zL3hib3gucG5nJyAvPlwiO1xuICAgICAgICBjYXNlIFwiTkVTXCI6XG4gICAgICAgICAgICByZXR1cm4gXCI8aW1nIHNyYz0nL3Jlc291cmNlcy9pbWFnZXMvaWNvbnMvbmVzLnBuZycgLz5cIjtcbiAgICAgICAgY2FzZSBcIk42NFwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiPGltZyBzcmM9Jy9yZXNvdXJjZXMvaW1hZ2VzL2ljb25zL242NC5wbmcnIC8+XCI7XG4gICAgICAgIGNhc2UgXCJOSU5URU5ETyBTV0lUQ0hcIjpcbiAgICAgICAgICAgIHJldHVybiBcIjxpbWcgc3JjPScvcmVzb3VyY2VzL2ltYWdlcy9pY29ucy9zd2l0Y2gucG5nJyAvPlwiO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIHBsYXRmb3JtbmFhbTtcblxuICAgICAgICAvL3B1Ymxpc2hlcnNcbiAgICAgICAgY2FzZSBcIk5JTlRFTkRPXCI6XG4gICAgICAgICAgICByZXR1cm4gXCI8aW1nIHNyYz0nL3Jlc291cmNlcy9pbWFnZXMvcHVibGlzaGVycy9uaW50ZW5kby5wbmcnIC8+XCI7XG4gICAgICAgIGNhc2UgXCJVQklTT0ZUXCI6XG4gICAgICAgICAgICByZXR1cm4gXCI8aW1nIHNyYz0nL3Jlc291cmNlcy9pbWFnZXMvcHVibGlzaGVycy91Ymlzb2Z0LnBuZycgLz5cIjtcbiAgICAgICAgY2FzZSBcIkVMRUNUUk9OSUMgQVJUU1wiOlxuICAgICAgICAgICAgcmV0dXJuIFwiPGltZyBzcmM9Jy9yZXNvdXJjZXMvaW1hZ2VzL3B1Ymxpc2hlcnMvZWEucG5nJyAvPlwiO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gQmVzY2hpa2JhYXJoZWlkS2xldXIoc3RvY2t2YWx1ZSl7XG4gICAgXG4gICAgICAgIGlmIChzdG9ja3ZhbHVlPD0wKSB7XG4gICAgICAgICAgICByZXR1cm4gXCI8aW1nIHNyYz0nL3Jlc291cmNlcy9pbWFnZXMvYXZhaWxhYmlsaXR5L2J1dHRvbnJlZC5wbmcnIC8+XCI7XG4gICAgICAgIH0gZWxzZSBpZiAoc3RvY2t2YWx1ZT49MSkge1xuICAgICAgICAgICAgcmV0dXJuIFwiPGltZyBzcmM9Jy9yZXNvdXJjZXMvaW1hZ2VzL2F2YWlsYWJpbGl0eS9idXR0b25ncmVlbi5wbmcnIC8+XCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gc3RvY2t2YWx1ZVxuICAgICAgICB9XG59XG5cbi8vIFZhbiBXaXNobGlzdCBwYWdpbmFcbiQoZG9jdW1lbnQpLm9uKFwiY2xpY2tcIiwgXCJzcGFuLmxpa2VcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgJCh0aGlzKS50b2dnbGVDbGFzcyhcImxpa2UtLWFjdGl2ZVwiKTtcbn0pO1xuXG4vLyBWYW4gU2luZ2xlIFByb2R1Y3QgcGFnaW5hXG4kKGRvY3VtZW50KS5vbihcImNsaWNrXCIsIFwic3Bhbi5zaW5nbGVfbGlrZVwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKFwic2luZ2xlX2xpa2UtLWFjdGl2ZVwiKTtcbn0pOyIsIi8qKlxuICogSGVscGVyIGZvciBjYXJ0IGFjdGlvbnNcbiAqL1xuZnVuY3Rpb24gQ2FydEhlbHBlcigpXG57XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB2YWx1ZSBvZiBhIGNvb2tpZVxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpZCAgUHJvZGN1dCBJRCB0byByZW1vdmUgZm9tIHRoZSBjYXJcbiAgICAgKiBcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICovXG4gICAgdGhpcy5yZW1vdmVQcm9kdWN0ID0gZnVuY3Rpb24oaWQpXG4gICAge1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkIGEgbmV3IHByb2R1Y3QgdG8gdGhlIGNhcnRcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgUHJvZHVjdCBJRCB0byBhZGRcbiAgICAgKi9cbiAgICB0aGlzLmFkZFByb2R1Y3QgPSBmdW5jdGlvbihpZClcbiAgICB7XG4gICAgfVxufSIsIi8qKlxuICogSGVscGVyIGZvciBmaW5kaW5nLCBjcmVhdGluZyBhbmQgZGVsZXRpbmcgY29va2llc1xuICovXG5mdW5jdGlvbiBDb29raWVIZWxwZXIoKVxue1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdmFsdWUgb2YgYSBjb29raWVcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSAgTmFtZSBvZiB0aGUgY29va2llXG4gICAgICogXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqL1xuICAgIHRoaXMuZ2V0Q29va2llID0gZnVuY3Rpb24obmFtZSlcbiAgICB7XG4gICAgICAgIHZhciBjb29raWVzID0gZG9jdW1lbnQuY29va2llLnNwbGl0KCc7Jyk7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb29raWVzLmxlbmd0aDsgaSsrKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgY29va2llID0gY29va2llc1tpXS5zcGxpdChcIj1cIik7XG5cbiAgICAgICAgICAgIGlmIChjb29raWVbMF0udHJpbSgpID09IG5hbWUpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvb2tpZVsxXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIGNvb2tpZVxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lICAgTmFtZSBvZiB0aGUgY29va2llXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlICBWYWx1ZSBvZiB0aGUgY29va2llXG4gICAgICogXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKi9cbiAgICB0aGlzLmNyZWF0ZUNvb2tpZSA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKVxuICAgIHtcbiAgICAgICAgZG9jdW1lbnQuY29va2llID0gbmFtZSArICc9JyArIHZhbHVlICsgJzsnO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlbGV0ZSBhIGNvb2tpZSBhbmQgaXQncyB2YWx1ZVxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lICBOYW1lIG9mIHRoZSBjb29raWVcbiAgICAgKiBcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIHRoaXMuZGVsZXRlQ29va2llID0gZnVuY3Rpb24obmFtZSlcbiAgICB7XG4gICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IG5hbWUgKyAnPTsgZXhwaXJlcz1UaHUsIDAxIEphbiAxOTcwIDAwOjAwOjAxIEdNVDsnO1xuICAgIH1cbn1cbiIsInZhciBDb29raWVIZWxwZXIgPSBuZXcgQ29va2llSGVscGVyKCk7XG5cbnZhciBXaXNobGlzdEhlbHBlciA9IG5ldyBXaXNobGlzdEhlbHBlcigpO1xuXG5mdW5jdGlvbiBzaG93TG9hZFNjcmVlbigpXG57XG4gICAgJChcIiNjb21wb25lbnRcIikuaHRtbCgnPGRpdiBjbGFzcz1cInNwaW5uZXJcIj48ZGl2IGNsYXNzPVwiYm91bmNlMVwiPjwvZGl2PjxkaXYgY2xhc3M9XCJib3VuY2UyXCI+PC9kaXY+PGRpdiBjbGFzcz1cImJvdW5jZTNcIj48L2Rpdj4gPC9kaXY+Jyk7XG59IiwiLyoqXG4gKiBIZWxwZXIgZm9yIGNhcnQgYWN0aW9uc1xuICovXG5mdW5jdGlvbiBXaXNobGlzdEhlbHBlcigpXG57XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB2YWx1ZSBvZiBhIGNvb2tpZVxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpZCAgUHJvZGN1dCBJRCB0byByZW1vdmUgZm9tIHRoZSBjYXJcbiAgICAgKiBcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICovXG4gICAgdGhpcy5hZGRJdGVtID0gZnVuY3Rpb24oZWFuX251bWJlcilcbiAgICB7XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6IFwiaHR0cDovL2xvY2FsaG9zdDo4MDgxL3dpc2hsaXN0L1wiICsgQ29va2llSGVscGVyLmdldENvb2tpZShcInVzZXJfaWRcIikgKyBcIi9cIiArIGVhbl9udW1iZXIsXG4gICAgICAgICAgICB0eXBlOiBcInBvc3RcIixcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSh7fSksXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgXCJBdXRob3JpemF0aW9uXCI6IFwiQmVhcmVyIFwiICsgQ29va2llSGVscGVyLmdldENvb2tpZShcImFjY2Vzc190b2tlblwiKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcyhcImxpa2UtLWFjdGl2ZVwiKTtcbiAgICAgICAgICAgICAgICBhbGVydChcIlByb2R1Y3Qgc3VjY2Vzdm9sIHRvZWdldm9lZ2QgYWFuIFdpc2hsaXN0LlwiKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oeGhyLCBzdGF0dXMsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgYWxlcnQoXCJQcm9kdWN0IGlzIGFsIGluIFdpc2hsaXN0LlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufSIsInZhciBSb3V0ZXIgPSBmdW5jdGlvbiAoKVxue1xuICAgIGJhc2VVcmwgPSBcInByb2plY3Qtd2Vic2hvcC9cIjtcblxuICAgIGZ1bmN0aW9uIHJvdXRlKHVybCwgaGlzdG9yeSlcbiAgICB7XG4gICAgICAgIGlmIChpc0ludGVybmFsKHVybCkgPT0gZmFsc2UpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBwYXJ0aWNsZXMgPSBnZXRQYXJ0aWNsZXModXJsKTtcblxuICAgICAgICBzd2l0Y2gocGFydGljbGVzWzBdKVxuICAgICAgICB7XG4gICAgICAgICAgICBjYXNlIFwiXCI6XG4gICAgICAgICAgICBjYXNlIFwiaW5kZXguaHRtbFwiOlxuICAgICAgICAgICAgY2FzZSBcInByb2R1Y3RzXCI6XG4gICAgICAgICAgICAgICAgbmV3IFByb2R1Y3RzQ29udHJvbGxlcihuZXcgUHJvZHVjdHNWaWV3SGVscGVyKCksIG5ldyBQcm9kdWN0c01vZGVsKCkpLm1haW4oKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJwcm9kdWN0XCI6XG4gICAgICAgICAgICAgICAgbmV3IFByb2R1Y3RDb250cm9sbGVyKG5ldyBQcm9kdWN0Vmlld0hlbHBlcigpLCBuZXcgUHJvZHVjdE1vZGVsKHBhcnRpY2xlc1sxXSkpLm1haW4oKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJyZWdpc3RlclwiOlxuICAgICAgICAgICAgICAgIG5ldyBSZWdpc3RlckNvbnRyb2xsZXIobmV3IFJlZ2lzdGVyVmlld0hlbHBlcigpLCBuZXcgUmVnaXN0ZXJNb2RlbCgpKS5tYWluKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwibG9naW5cIjpcbiAgICAgICAgICAgICAgICBuZXcgTG9naW5Db250cm9sbGVyKG5ldyBMb2dpblZpZXdIZWxwZXIoKSwgbmV3IExvZ2luTW9kZWwoKSkubWFpbigpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImxvZ291dFwiOlxuICAgICAgICAgICAgICAgIG5ldyBMb2dvdXRDb250cm9sbGVyKG5ldyBMb2dvdXRWaWV3SGVscGVyKCksIG5ldyBMb2dvdXRNb2RlbCgpKS5tYWluKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwicmVnaXN0ZXJcIjpcbiAgICAgICAgICAgICAgICBuZXcgUmVnaXN0ZXJDb250cm9sbGVyKG5ldyBSZWdpc3RlclZpZXdIZWxwZXIoKSwgbmV3IFJlZ2lzdGVyTW9kZWwoKSkubWFpbigpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInJlc2V0cGFzc3dvcmRcIjpcbiAgICAgICAgICAgICAgICBuZXcgUmVzZXRQYXNzd29yZENvbnRyb2xsZXIobmV3IFJlc2V0UGFzc3dvcmRWaWV3SGVscGVyKCksIG5ldyBSZXNldFBhc3N3b3JkTW9kZWwoKSkubWFpbigpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIndpc2hsaXN0XCI6XG4gICAgICAgICAgICAgICAgbmV3IFdpc2hsaXN0Q29udHJvbGxlcihuZXcgV2lzaGxpc3RWaWV3SGVscGVyKCksIG5ldyBXaXNobGlzdE1vZGVsKCkpLm1haW4oKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgbmV3IEVycm9yQ29udHJvbGxlcihuZXcgRXJyb3JWaWV3SGVscGVyKCkpLm1haW4oKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChoaXN0b3J5ICE9IGZhbHNlKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAodXJsICE9IFwiXCIgJiYgdHlwZW9mIHVybCA9PT0gJ3N0cmluZycpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgd3JpdGVIaXN0b3J5KHt9LCBcIkEtWiBHYW1lc1wiLCB1cmwpO1xuXG4gICAgICAgICAgICAgICAgIC8vIExvYWQgc2NyZWVuXG4gICAgICAgICAgICAgICAgc2hvd0xvYWRTY3JlZW4oKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBTY3JvbGwgdG8gdG9wIG9mIHBhZ2VcbiAgICAgICAgICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc0ludGVybmFsKHVybClcbiAgICB7XG4gICAgICAgIGlmICh1cmwuaW5kZXhPZihcImh0dHBcIikgIT0gLTEgfHwgdXJsLmluZGV4T2YoXCJodHRwc1wiKSAhPSAtMSB8fCB1cmwuaW5kZXhPZihcInd3d1wiKSAhPSAtMSlcbiAgICAgICAge1xuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uID0gdXJsO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRQYXJ0aWNsZXModXJsKVxuICAgIHtcbiAgICAgICAgLy8gUmVtb3ZlIHRoZSBmaXJzdCAvXG4gICAgICAgIGlmICh1cmwuaW5kZXhPZihcIi9cIikgPT0gMClcbiAgICAgICAge1xuICAgICAgICAgICAgdXJsID0gdXJsLnN1YnN0cmluZygxKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIHRoZXJlIGlzIGEgYmFzZSB1cmwgc2V0LCByZW1vdmUgdGhlIGJhc2UgdXJsXG4gICAgICAgIGlmICh0aGlzLmJhc2VVcmwgIT0gbnVsbCAmJiB1cmwuaW5kZXhPZih0aGlzLmJhc2VVcmwpICE9IC0xKVxuICAgICAgICB7XG4gICAgICAgICAgICB1cmwgPSB1cmwuc3Vic3RyaW5nKHVybC5pbmRleE9mKHRoaXMuYmFzZVVybCkgKyB0aGlzLmJhc2VVcmwubGVuZ3RoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB1cmwuc3BsaXQoL1xcLyguKyk/LylcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB3cml0ZUhpc3Rvcnkob2JqZWN0LCB0aXRsZSwgdXJsKVxuICAgIHtcbiAgICAgICAgd2luZG93Lmhpc3RvcnkucHVzaFN0YXRlKG9iamVjdCwgdGl0bGUsIHVybCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcm91dGU6IHJvdXRlXG4gICAgfVxufSIsIiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKClcbntcbiAgICAkKFwiLnNpZGViYXItdG9nZ2xlXCIpLmNsaWNrKGZ1bmN0aW9uIChlKVxuICAgIHtcbiAgICAgICAgLy8gUHJldmVudCBkZWZhdWx0IGNsaWNrIGFjdGlvblxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgLy8gSWQgb2YgdGhlIHNpZGViYXIgdG8gdG9nZ2xlXG4gICAgICAgIHZhciBzaWRlYmFyID0gJCh0aGlzKS5kYXRhKFwic2lkZWJhclwiKTtcblxuICAgICAgICB0b2dnbGVTaWRlYmFyKCQoXCIjXCIgKyBzaWRlYmFyKSk7XG4gICAgfSk7XG5cbiAgICAkKFwiLnNpZGViYXJfX2Nsb3NlXCIpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHRvZ2dsZVNpZGViYXIoJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKSk7XG4gICAgfSlcblxuICAgICQoXCIub3ZlcmxheVwiKS5jbGljayhmdW5jdGlvbiAoZSkge1xuICAgICAgICB0b2dnbGVTaWRlYmFyKCQoXCIuc2lkZWJhclwiKSk7XG4gICAgfSk7XG5cbiAgICBmdW5jdGlvbiB0b2dnbGVTaWRlYmFyKHNpZGViYXIpXG4gICAge1xuICAgICAgICAkKHNpZGViYXIpLnRvZ2dsZUNsYXNzKFwic2lkZWJhci0tb3BlblwiKTtcbiAgICAgICAgJChcIi5vdmVybGF5XCIpLnRvZ2dsZUNsYXNzKFwib3ZlcmxheS0tdmlzaWJsZVwiKTtcbiAgICAgICAgJChcImJvZHlcIikudG9nZ2xlQ2xhc3MoXCJzaWRlYmFyLS1vcGVuXCIpO1xuICAgIH1cbn0pOyIsInZhciBDYXJ0TW9kZWwgPSBmdW5jdGlvbigpXG57XG4gICAgLyoqXG4gICAgICogR2V0IGFsbCBjYXJ0IGl0ZW1zXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0Q2FydChjYWxsYmFjaylcbiAgICB7XG4gICAgICAgIHZhciBjYXJ0ID0gQ29va2llSGVscGVyLmdldENvb2tpZShcImNhcnRcIik7XG5cbiAgICAgICAgaWYgKGNhcnQgIT0gdW5kZWZpbmVkKVxuICAgICAgICB7XG4gICAgICAgICAgICBjYWxsYmFjayhKU09OLnBhcnNlKGNhcnQpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZCBhIHByb2R1Y3QgdG8gdGhlIGNhcnQgY29va2llIGFuZCBkYXRhYmFzZSBpZiB0aGUgdXNlciBpcyByZWdpc3RlcmVkXG4gICAgICovXG4gICAgZnVuY3Rpb24gYWRkUHJvZHVjdChpZCwgY2FsbGJhY2spXG4gICAge1xuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgdXJsOiBcImh0dHBzOi8vYXBpLmF6LWdhbWVzLm5sL3Byb2R1Y3RzL1wiICsgaWQsXG4gICAgICAgICAgICB0eXBlOiBcImdldFwiLFxuICAgICAgICAgICAgY29udGVudFR5cGU6IFwianNvblwiLFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBjYXJ0ID0ge2Vhbl9udW1iZXI6ZGF0YVswXS5lYW5fbnVtYmVyLCB0aXRsZTpkYXRhWzBdLnRpdGxlLCBwcmljZTpkYXRhWzBdLnByaWNlLCBpbWFnZTpkYXRhWzBdLmltYWdlfTtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhjYXJ0KTtcblxuICAgICAgICAgICAgICAgIC8vIFNhdmUgY2FydCBpbiBjb29raWVzXG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRDYXJ0ID0gQ29va2llSGVscGVyLmdldENvb2tpZShcImNhcnRcIik7XG5cbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudENhcnQgPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgQ29va2llSGVscGVyLmNyZWF0ZUNvb2tpZShcImNhcnRcIiwgSlNPTi5zdHJpbmdpZnkoW2NhcnRdKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRDYXJ0ID0gSlNPTi5wYXJzZShjdXJyZW50Q2FydCk7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRDYXJ0LnB1c2goY2FydCk7XG5cbiAgICAgICAgICAgICAgICAgICAgQ29va2llSGVscGVyLmNyZWF0ZUNvb2tpZShcImNhcnRcIiwgSlNPTi5zdHJpbmdpZnkoY3VycmVudENhcnQpKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHhociwgc3RhdHVzLCBlcnJvcikge1xuICAgICAgICAgICAgICAgICQoXCIjY29tcG9uZW50XCIpLmxvYWQoXCIvdmlld3MvZXJyb3IvZXJyb3IuaHRtbFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGEgaXRlbSBmcm9tIHRoZSBjYXJ0XG4gICAgICogXG4gICAgICogQHBhcmFtIHtpbnR9IGlkIFByb2R1Y3QgaWRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZW1vdmVQcm9kdWN0KGlkKVxuICAgIHtcbiAgICAgICAgY2FydCA9IEpTT04ucGFyc2UoQ29va2llSGVscGVyLmdldENvb2tpZShcImNhcnRcIikpO1xuXG4gICAgICAgIGZvcihpID0gMDsgaSA8IGNhcnQubGVuZ3RoOyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmIChjYXJ0W2ldLmVhbl9udW1iZXIgPT0gaWQpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2FydC5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIENvb2tpZUhlbHBlci5jcmVhdGVDb29raWUoXCJjYXJ0XCIsIEpTT04uc3RyaW5naWZ5KGNhcnQpKTtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBieSBvdGhlciBwcm9ncmFtcyAodGhlIGNvbnRyb2xsZXIgaW4gdGhpcyBjYXNlKVxuICAgIHJldHVybiB7XG4gICAgICAgIGdldENhcnQ6IGdldENhcnQsXG4gICAgICAgIGFkZFByb2R1Y3Q6IGFkZFByb2R1Y3QsXG4gICAgICAgIHJlbW92ZVByb2R1Y3Q6IHJlbW92ZVByb2R1Y3RcbiAgICB9XG59OyIsInZhciBMb2dpbk1vZGVsID0gZnVuY3Rpb24oKVxue1xuICAgIGZ1bmN0aW9uIGxvZ2luKGVtYWlsLCBwYXNzd29yZCwgY2FsbGJhY2spXG4gICAge1xuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgdXJsOiBcImh0dHBzOi8vYXBpLmF6LWdhbWVzLm5sL3VzZXIvbG9naW5cIixcbiAgICAgICAgICAgIHR5cGU6IFwiR0VUXCIsXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiQXV0aG9yaXphdGlvblwiOiBcIkJhc2ljIFwiICsgYnRvYShlbWFpbCArIFwiOlwiICsgcGFzc3dvcmQpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAvLyBwdXQgdG9rZW4gaW4gY29va2llXG4gICAgICAgICAgICAgICAgQ29va2llSGVscGVyLmNyZWF0ZUNvb2tpZShcImFjY2Vzc190b2tlblwiLCBkYXRhLmFjY2Vzc190b2tlbik7XG4gICAgICAgICAgICAgICAgQ29va2llSGVscGVyLmNyZWF0ZUNvb2tpZShcInVzZXJfaWRcIiwgZGF0YS51c2VyX2lkKTtcblxuICAgICAgICAgICAgICAgIC8vIGxldCBjb250cm9sbGVyIHJlc3VtZSB3aXRoIHN0dWZmXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZGF0YSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICh4aHIsIHN0YXR1cywgZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAvLyBzaG93ICdub3QgZ29vZCBlbWFpbCBvciBwYXNzd29yZCB0byB1c2VyJ1xuICAgICAgICAgICAgICAgICQoXCIjZXJyb3JfbWVzc2FnZVwiKS5zaG93KCk7XG5cbiAgICAgICAgICAgICAgICAvLyQoXCIjY29tcG9uZW50XCIpLmh0bWwoXCJlcnJvciBmdW5jdGlvblwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHRoZSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgcHJvZ3JhbXMgKHRoZSBjb250cm9sbGVyIGluIHRoaXMgY2FzZSlcbiAgICByZXR1cm4ge1xuICAgICAgICBsb2dpbjogbG9naW5cbiAgICB9XG59OyIsInZhciBMb2dvdXRNb2RlbCA9IGZ1bmN0aW9uKClcbntcbiAgICBmdW5jdGlvbiBsb2dvdXQoY2FsbGJhY2spXG4gICAge1xuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgdXJsOiBcImh0dHBzOi8vYXBpLmF6LWdhbWVzLm5sL3VzZXIvbG9nb3V0XCIsIC8vPyBodHRwOi8vODQuODQuMjQ1LjI5OjI0MyA9IEFQSS1sb2NhdGllP1xuICAgICAgICAgICAgdHlwZTogXCJwb3N0XCIsXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIHVzZXJfaWQ6IGdldENvb2tpZShcInVzZXJfaWRcIilcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAvLyBsZXQgY29udHJvbGxlciByZXN1bWUgd2l0aCBzdHVmZlxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmNvb2tpZT0nYWNjZXNzX3Rva2VuPSc7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuY29va2llPSd1c2VyX2lkPSc7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZGF0YSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICh4aHIsIHN0YXR1cywgZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAvLyBzaG93ICdub3QgZ29vZCBlbWFpbCBvciBwYXNzd29yZCB0byB1c2VyJ1xuICAgICAgICAgICAgICAgICQoXCIjZXJyb3JfbWVzc2FnZVwiKS5zaG93KCk7XG5cbiAgICAgICAgICAgICAgICAvLyQoXCIjY29tcG9uZW50XCIpLmh0bWwoXCJlcnJvciBmdW5jdGlvblwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0Q29va2llKG5hbWUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciBjb29raWVzID0gZG9jdW1lbnQuY29va2llLnNwbGl0KCc7Jyk7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29va2llcy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB2YXIgY29va2llID0gY29va2llc1tpXS5zcGxpdChcIj1cIik7XG5cbiAgICAgICAgICAgICAgICBpZiAoY29va2llWzBdLnRyaW0oKSA9PSBuYW1lKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvb2tpZVsxXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBieSBvdGhlciBwcm9ncmFtcyAodGhlIGNvbnRyb2xsZXIgaW4gdGhpcyBjYXNlKVxuICAgIHJldHVybiB7XG4gICAgICAgIGxvZ291dDogbG9nb3V0XG4gICAgfVxufTsiLCJ2YXIgUGFnZU1vZGVsID0gZnVuY3Rpb24oKVxue1xuICAgIGZ1bmN0aW9uIGdldFBhZ2UoY2FsbGJhY2spXG4gICAge1xuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgdXJsOiBcImh0dHBzOi8vYXBpLmF6LWdhbWVzLm5sL3VzZXJcIixcbiAgICAgICAgICAgIHR5cGU6IFwiZ2V0XCIsXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiQXV0aG9yaXphdGlvblwiOiBcIkJlYXJlciBcIiArIENvb2tpZUhlbHBlci5nZXRDb29raWUoXCJhY2Nlc3NfdG9rZW5cIilcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGRhdGEpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoeGhyLCBzdGF0dXMsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgJChcIiNjb21wb25lbnRcIikubG9hZChcIi92aWV3cy9lcnJvci9lcnJvci5odG1sXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBieSBvdGhlciBwcm9ncmFtcyAodGhlIGNvbnRyb2xsZXIgaW4gdGhpcyBjYXNlKVxuICAgIHJldHVybiB7XG4gICAgICAgIGdldFBhZ2U6IGdldFBhZ2VcbiAgICB9XG59OyIsInZhciBQcm9kdWN0c01vZGVsID0gZnVuY3Rpb24oKVxue1xuICAgIGZ1bmN0aW9uIGdldFBhZ2UoZmlsdGVyLCBjYWxsYmFjaylcbiAgICB7XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6IFwiaHR0cHM6Ly9hcGkuYXotZ2FtZXMubmwvcHJvZHVjdHM/XCIgKyBmaWx0ZXIsIC8vPyBodHRwOi8vODQuODQuMjQ1LjI5OjI0MyA9IEFQSS1sb2NhdGllP1xuICAgICAgICAgICAgdHlwZTogXCJnZXRcIixcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGRhdGEpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoeGhyLCBzdGF0dXMsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgJChcIiNjb21wb25lbnRcIikubG9hZChcInZpZXdzL2Vycm9yL2Vycm9yLmh0bWxcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ2V0UGFnZTogZ2V0UGFnZVxuICAgIH1cbn07IiwidmFyIFJlZ2lzdGVyTW9kZWwgPSBmdW5jdGlvbigpXG57XG4gICAgZnVuY3Rpb24gcmVnaXN0ZXIoZm9ybURhdGEsIGNhbGxiYWNrKVxuICAgIHtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhmb3JtRGF0YSk7XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6IFwiaHR0cHM6Ly9hcGkuYXotZ2FtZXMubmwvdXNlci9yZWdpc3RlclwiLFxuICAgICAgICAgICAgdHlwZTogXCJwb3N0XCIsXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIGVfbWFpbCA6IGZvcm1EYXRhLmVfbWFpbGFkcmVzLFxuICAgICAgICAgICAgICAgIHBhc3N3b3JkIDogZm9ybURhdGEud2FjaHR3b29yZCxcbiAgICAgICAgICAgICAgICBmaXJzdF9uYW1lIDogZm9ybURhdGEudm9vcm5hYW0sXG4gICAgICAgICAgICAgICAgaW5zZXJ0aW9uIDogZm9ybURhdGEudHVzc2Vudm9lZ3NlbCxcbiAgICAgICAgICAgICAgICBzdXJuYW1lIDogZm9ybURhdGEuYWNodGVybmFhbSxcbiAgICAgICAgICAgICAgICBnZW5kZXIgOiBmb3JtRGF0YS5nZW5kZXIsXG4gICAgICAgICAgICAgICAgZGF0ZV9vZl9iaXJ0aCA6IGZvcm1EYXRhLmJpcnRoX2RhdGUsXG4gICAgICAgICAgICAgICAgcGhvbmVfbnVtYmVyIDogZm9ybURhdGEubW9iaWVsX251bW1lcixcbiAgICAgICAgICAgICAgICBzZWNyZXRfcXVlc3Rpb24gOiBmb3JtRGF0YS5zZWN1cml0eV9xdWVzdGlvbixcbiAgICAgICAgICAgICAgICBzZWNyZXRfcXVlc3Rpb25fYW5zd2VyIDogZm9ybURhdGEuc2VjdXJpdHlfYW5zd2VyLFxuXG4gICAgICAgICAgICAgICAgcG9zdGFsX2NvZGUgOiBmb3JtRGF0YS5wb3N0Y29kZSxcbiAgICAgICAgICAgICAgICBudW1iZXIgOiBmb3JtRGF0YS5odWlzbnVtbWVyLFxuICAgICAgICAgICAgICAgIHN0cmVldF9uYW1lIDogZm9ybURhdGEuc3RyYWF0bmFhbSxcbiAgICAgICAgICAgICAgICBjaXR5IDogZm9ybURhdGEucGxhYXRzXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgICAgICAgICAvLyBsZXQgY29udHJvbGxlciByZXN1bWUgd2l0aCBzdHVmZlxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGRhdGEpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoeGhyLCBzdGF0dXMsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgLy8gc2hvdyAnZW1haWwgYWwgZ2Vib25kZW4gYWFuIGVlbiBhY2NvdW50PydcbiAgICAgICAgICAgICAgICAkKFwiI3JlZ2lfYXBpX2Vycm9yX21lc3NhZ2VcIikuc2hvdygpO1xuICAgICAgICAgICAgICAgIC8vJChcIiNjb21wb25lbnRcIikuaHRtbChcImVycm9yIGZ1bmN0aW9uXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBieSBvdGhlciBwcm9ncmFtcyAodGhlIGNvbnRyb2xsZXIgaW4gdGhpcyBjYXNlKVxuICAgIHJldHVybiB7XG4gICAgICAgIHJlZ2lzdGVyOiByZWdpc3RlclxuICAgIH1cbn07IiwidmFyIFJlc2V0UGFzc3dvcmRNb2RlbCA9IGZ1bmN0aW9uKClcbntcbiAgICBmdW5jdGlvbiByZXNldHBhc3N3b3JkKGZvcm1EYXRhLCBjYWxsYmFjaylcbiAgICB7XG4gICAgICAgIGNvbnNvbGUubG9nKGZvcm1EYXRhKTtcbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHVybDogXCJodHRwczovL2FwaS5hei1nYW1lcy5ubC91c2VyL3Jlc2V0cGFzc3dvcmRcIixcbiAgICAgICAgICAgIHR5cGU6IFwicG9zdFwiLFxuICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBlbWFpbCA6IGZvcm1EYXRhLmVfbWFpbGFkcmVzLFxuICAgICAgICAgICAgICAgIHNlY3JldF9xdWVzdGlvbl9hbnN3ZXIgOiBmb3JtRGF0YS5zZWN1cml0eV9hbnN3ZXIsXG4gICAgICAgICAgICAgICAgc2VjcmV0X3F1ZXN0aW9uIDogZm9ybURhdGEuc2VjdXJpdHlfcXVlc3Rpb24sXG4gICAgICAgICAgICAgICAgbmV3X3Bhc3N3b3JkIDogZm9ybURhdGEud2FjaHR3b29yZCxcbiAgICAgICAgICAgICAgICByZXBlYXRfcGFzc3dvcmQgOiBmb3JtRGF0YS53YWNodHdvb3JkMlxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGRhdGEpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoeGhyLCBzdGF0dXMsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgLy8kKFwiI2NvbXBvbmVudFwiKS5sb2FkKFwidmlld3MvZXJyb3IvZXJyb3IuaHRtbFwiKTtcbiAgICAgICAgICAgICAgICAkKFwiI3Jlc2V0X3Bhc3N3b3JkX2FwaV9lcnJvcl9tZXNzYWdlXCIpLnNob3coKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHRoZSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgcHJvZ3JhbXMgKHRoZSBjb250cm9sbGVyIGluIHRoaXMgY2FzZSlcbiAgICByZXR1cm4ge1xuICAgICAgICByZXNldHBhc3N3b3JkOiByZXNldHBhc3N3b3JkXG4gICAgfVxufTsiLCJ2YXIgUHJvZHVjdE1vZGVsID0gZnVuY3Rpb24oZWFuKVxue1xuICAgIGZ1bmN0aW9uIEdldFByb2R1Y3RJbmZvKGNhbGxiYWNrKVxuICAgIHtcbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHVybDogXCJodHRwczovL2FwaS5hei1nYW1lcy5ubC9wcm9kdWN0cy9cIiArIGVhbixcbiAgICAgICAgICAgIHR5cGU6IFwiZ2V0XCIsXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAvLyBsZXQgY29udHJvbGxlciByZXN1bWUgd2l0aCBzdHVmZlxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGRhdGFbMF0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoeGhyLCBzdGF0dXMsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgJChcIiNjb21wb25lbnRcIikubG9hZChcIi9lcnJvci5odG1sXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBieSBvdGhlciBwcm9ncmFtcyAodGhlIGNvbnRyb2xsZXIgaW4gdGhpcyBjYXNlKVxuICAgIHJldHVybiB7XG4gICAgICAgIEdldFByb2R1Y3RJbmZvOiBHZXRQcm9kdWN0SW5mb1xuICAgIH1cbn07IiwidmFyIFdpc2hsaXN0TW9kZWwgPSBmdW5jdGlvbigpXG57XG4gICAgZnVuY3Rpb24gZ2V0V2lzaGxpc3QoY2FsbGJhY2spXG4gICAge1xuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgdXJsOiBcImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MS93aXNobGlzdFwiLFxuICAgICAgICAgICAgdHlwZTogXCJnZXRcIixcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgXCJBdXRob3JpemF0aW9uXCI6IFwiQmVhcmVyIFwiICsgQ29va2llSGVscGVyLmdldENvb2tpZShcImFjY2Vzc190b2tlblwiKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZGF0YSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICh4aHIsIHN0YXR1cywgZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAkKFwiI2NvbXBvbmVudFwiKS5sb2FkKFwiL3ZpZXdzL2Vycm9yL2Vycm9yLmh0bWxcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFkZFRvV2lzaGxpc3Qodmlld0RhdGEsIGNhbGxiYWNrKVxuICAgIHtcbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHVybDogXCJodHRwOi8vbG9jYWxob3N0OjgwODEvd2lzaGxpc3QvXCIgKyBDb29raWVIZWxwZXIuZ2V0Q29va2llKFwidXNlcl9pZFwiKSArIFwiL1wiICsgdmlld0RhdGEuZWFuX251bWJlcixcbiAgICAgICAgICAgIHR5cGU6IFwicG9zdFwiLFxuICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICB3aXNobGlzdF9pZCA6IHZpZXdEYXRhLndpc2hsaXN0X2lkLFxuICAgICAgICAgICAgICAgIGVhbl9udW1iZXIgOiB2aWV3RGF0YS5lYW5fbnVtYmVyXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcIkF1dGhvcml6YXRpb25cIjogXCJCZWFyZXIgXCIgKyBDb29raWVIZWxwZXIuZ2V0Q29va2llKFwiYWNjZXNzX3Rva2VuXCIpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhkYXRhKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oeGhyLCBzdGF0dXMsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgJChcIiNjb21wb25lbnRcIikubG9hZChcIi92aWV3cy9lcnJvci9lcnJvci5odG1sXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBieSBvdGhlciBwcm9ncmFtcyAodGhlIGNvbnRyb2xsZXIgaW4gdGhpcyBjYXNlKVxuICAgIHJldHVybiB7XG4gICAgICAgIGdldFdpc2hsaXN0OiBnZXRXaXNobGlzdCxcbiAgICAgICAgYWRkVG9XaXNobGlzdDogYWRkVG9XaXNobGlzdFxuICAgIH1cbn07IiwidmFyIEFkbWluQ29udHJvbGxlciA9IGZ1bmN0aW9uKHZpZXdIZWxwZXIsIG1vZGVsKVxue1xuICAgIHZhciBNb2RlbCAgICAgID0gbW9kZWw7XG4gICAgdmFyIFZpZXdIZWxwZXIgPSB2aWV3SGVscGVyO1xuICAgIFxuICAgIC8vIEZ1bmN0aW9uIHRoYXQgaXMgZXhlY3V0ZWQgb24gYSBhY3Rpb24gbGlzdGVuZXJcbiAgICBmdW5jdGlvbiBhY3Rpb25QZXJmb3JtZWQoZXZlbnQpXG4gICAge1xuICAgICAgICBcbiAgICB9XG5cbiAgICAvLyBNYWluIGZ1bmN0aW9uLCBhbHNvIHRoZSBzdGFydCBzdGFydHBvaW50IGZvciBhIHBhZ2VcbiAgICBmdW5jdGlvbiBtYWluKClcbiAgICB7XG4gICAgICAgIC8vIG1vZGVsIGdldHMgc29tZSB1c2VyIGluZm8gZnJvbSBkYXRhYmFzZVxuICAgICAgICAvLyB2aWV3IHNob3dzICBvbiBwYWdlXG4gICAgICAgIG1vZGVsLmdldFVzZXJJZHModmlld0hlbHBlci5zaG93VXNlcklkcyk7XG4gICAgICAgIC8vIHNldCB2aWV3IHRvIGFkbWluIHBhZ2UuIG1vZGVsIGdldHMgdXNlciBpbmZvIGZyb20gZGF0YWJhc2VcbiAgICAgICAgLy9WaWV3SGVscGVyLnNldEFjdGlvbkxpc3RlbmVyKGFjdGlvblBlcmZvcm1lZCk7XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHRoZSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgcHJvZ3JhbXMgKHRoZSBjb250cm9sbGVyIGluIHRoaXMgY2FzZSlcbiAgICByZXR1cm4ge1xuICAgICAgICBtYWluOiBtYWluXG4gICAgfVxufTsiLCJ2YXIgQ2FydENvbnRyb2xsZXIgPSBmdW5jdGlvbih2aWV3SGVscGVyLCBtb2RlbClcbntcbiAgICB2YXIgTW9kZWwgICAgICA9IG1vZGVsO1xuICAgIHZhciBWaWV3SGVscGVyID0gdmlld0hlbHBlcjtcbiAgICBcbiAgICAvKipcbiAgICAgKiBHZXQgYWxsIGNhcnQgaXRlbXMgYW5kIHBhc3MgdGhlIGl0ZW1zIHRvIHRoZSBWaWV3SGVscGVyXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0Q2FydCgpXG4gICAge1xuICAgICAgICBNb2RlbC5nZXRDYXJ0KGZ1bmN0aW9uIChkYXRhKSB7IFZpZXdIZWxwZXIuc2V0VmlldyhkYXRhKTsgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkIGEgaXRlbSB0byB0aGUgY2FydCBhbmQgcGFzcyBpdCB0byB0aGUgdmlld0hlbHBlclxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7aW50fSBpZCAgSXRlbSBpZFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFkZFByb2R1Y3QoaWQpXG4gICAge1xuICAgICAgICBNb2RlbC5hZGRQcm9kdWN0KGlkLCBmdW5jdGlvbiAoZGF0YSkgeyBWaWV3SGVscGVyLmFkZEl0ZW0oZGF0YSk7IH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhIHByb2R1Y3QgYW5kIGNhbGwgdGhlIHZpZXdIZWxwZXJcbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZW1vdmVQcm9kdWN0KGlkKVxuICAgIHtcbiAgICAgICAgTW9kZWwucmVtb3ZlUHJvZHVjdChpZCwgZnVuY3Rpb24gKGRhdGEpIHsgfSk7XG4gICAgfVxuXG4gICAgLy8gTWFpbiBmdW5jdGlvbiwgYWxzbyB0aGUgc3RhcnQgc3RhcnRwb2ludCBmb3IgYSBwYWdlXG4gICAgZnVuY3Rpb24gbWFpbigpXG4gICAgeyAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICBWaWV3SGVscGVyLnNldEFjdGlvbkxpc3RlbmVyKGdldENhcnQpO1xuICAgICAgICBWaWV3SGVscGVyLnNldEFkZFByb2R1Y3RMaXN0ZW5lcihhZGRQcm9kdWN0KTtcbiAgICAgICAgVmlld0hlbHBlci5zZXRSZW1vdmVMaXN0ZW5lcihyZW1vdmVQcm9kdWN0KTtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBieSBvdGhlciBwcm9ncmFtcyAodGhlIGNvbnRyb2xsZXIgaW4gdGhpcyBjYXNlKVxuICAgIHJldHVybiB7XG4gICAgICAgIG1haW46IG1haW5cbiAgICB9XG59OyIsInZhciBFcnJvckNvbnRyb2xsZXIgPSBmdW5jdGlvbih2aWV3SGVscGVyKVxue1xuICAgIHZhciBWaWV3SGVscGVyID0gdmlld0hlbHBlcjtcblxuICAgIC8vIE1haW4gZnVuY3Rpb24sIGFsc28gdGhlIHN0YXJ0IHN0YXJ0cG9pbnQgZm9yIGEgcGFnZVxuICAgIGZ1bmN0aW9uIG1haW4oKVxuICAgIHtcbiAgICAgICAgLy8gc2V0IHZpZXcgdG8gbG9naW4gZm9ybVxuICAgICAgICBWaWV3SGVscGVyLnNldFZpZXcoKTtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBieSBvdGhlciBwcm9ncmFtcyAodGhlIGNvbnRyb2xsZXIgaW4gdGhpcyBjYXNlKVxuICAgIHJldHVybiB7XG4gICAgICAgIG1haW46IG1haW5cbiAgICB9XG59OyIsInZhciBMb2dpbkNvbnRyb2xsZXIgPSBmdW5jdGlvbih2aWV3SGVscGVyLCBtb2RlbClcbntcbiAgICB2YXIgTW9kZWwgICAgICA9IG1vZGVsO1xuICAgIHZhciBWaWV3SGVscGVyID0gdmlld0hlbHBlcjtcbiAgICBcbiAgICAvLyBGdW5jdGlvbiB0aGF0IGlzIGV4ZWN1dGVkIG9uIGEgYWN0aW9uIGxpc3RlbmVyXG4gICAgZnVuY3Rpb24gYWN0aW9uUGVyZm9ybWVkKGV2ZW50KVxuICAgIHtcbiAgICAgICAgLy8gUHJldmVudCBzZW5kaW5nIHRoZSBmb3JtXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgIC8vIExvb3AgdHJvdWdoIHRoZSBmb3JtIGRhdGEgYW5kIGdldCBhbGwgZmllbGRzXG4gICAgICAgIHZhciBmb3JtRGF0YSA9IHt9O1xuICAgICAgICAkLmVhY2goJCh0aGlzKS5zZXJpYWxpemVBcnJheSgpLCBmdW5jdGlvbiAoaSwgZmllbGQpIHtcbiAgICAgICAgICAgIGZvcm1EYXRhW2ZpZWxkLm5hbWVdID0gZmllbGQudmFsdWU7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGxldCBtb2RlbCBzZW5kIGVtYWlsIGFuZCBwYXNzd29yZCB0byBBUElcbiAgICAgICAgTW9kZWwubG9naW4oZm9ybURhdGEuZW1haWwsIGZvcm1EYXRhLnBhc3N3b3JkLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgLy8gc2hvdyB1aXRsb2dnZW4gYnV0dG9uXG4gICAgICAgICAgICAkKFwiI2lubG9nZ2VuX3RleHRcIikuaGlkZSgpO1xuICAgICAgICAgICAgJChcIiN1aXRsb2dnZW5fdGV4dFwiKS5zaG93KCk7XG5cbiAgICAgICAgICAgIC8vIFdlZXJnZWVmIGVlbiBhbmRlcmUgcGFnaW5hIGdlYmFzc2VlcmQgb3AgJ2FkbWluJyBvZiAncmVnaXN0ZXJlZCB1c2VyJ1xuICAgICAgICAgICAgbmV3IFBhZ2VDb250cm9sbGVyKG5ldyBQYWdlVmlld0hlbHBlcigpLCBuZXcgUGFnZU1vZGVsKCkpLm1haW4oKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gTWFpbiBmdW5jdGlvbiwgYWxzbyB0aGUgc3RhcnQgc3RhcnRwb2ludCBmb3IgYSBwYWdlXG4gICAgZnVuY3Rpb24gbWFpbigpXG4gICAge1xuICAgICAgICAvLyBzZXQgdmlldyB0byBsb2dpbiBmb3JtXG4gICAgICAgIFZpZXdIZWxwZXIuc2V0VmlldygpO1xuXG4gICAgICAgIC8vIHVzZXIgZmlsbHMgaW4gZW1haWwgYW5kIHBhc3N3b3JkOyBjbGlja3MgJ2xvZ2luJzogVklFVyBub3RpY2VzIHRoaXMgYW5kIHJlYWN0c1xuICAgICAgICBWaWV3SGVscGVyLnNldEFjdGlvbkxpc3RlbmVyKGFjdGlvblBlcmZvcm1lZCk7XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHRoZSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgcHJvZ3JhbXMgKHRoZSBjb250cm9sbGVyIGluIHRoaXMgY2FzZSlcbiAgICByZXR1cm4ge1xuICAgICAgICBtYWluOiBtYWluXG4gICAgfVxufTsiLCJ2YXIgTG9nb3V0Q29udHJvbGxlciA9IGZ1bmN0aW9uKHZpZXdIZWxwZXIsIG1vZGVsKVxue1xuICAgIHZhciBNb2RlbCAgICAgID0gbW9kZWw7XG4gICAgdmFyIFZpZXdIZWxwZXIgPSB2aWV3SGVscGVyO1xuICAgIFxuICAgIC8vIEZ1bmN0aW9uIHRoYXQgaXMgZXhlY3V0ZWQgb24gYSBhY3Rpb24gbGlzdGVuZXJcbiAgICBmdW5jdGlvbiBhY3Rpb25QZXJmb3JtZWQoZXZlbnQpXG4gICAge1xuICAgICAgICBNb2RlbC5sb2dvdXQoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIC8vIHNob3cgdWl0bG9nZ2VuIGJ1dHRvblxuICAgICAgICAgICAgJChcIiNpbmxvZ2dlbl90ZXh0XCIpLnNob3coKTtcbiAgICAgICAgICAgICQoXCIjdWl0bG9nZ2VuX3RleHRcIikuaGlkZSgpO1xuXG4gICAgICAgICAgICAvLyBzZXQgdmlldyB0byBsb2dpbiBmb3JtXG4gICAgICAgICAgICBWaWV3SGVscGVyLnNldFZpZXcoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gTWFpbiBmdW5jdGlvbiwgYWxzbyB0aGUgc3RhcnQgc3RhcnRwb2ludCBmb3IgYSBwYWdlXG4gICAgZnVuY3Rpb24gbWFpbigpXG4gICAge1xuICAgICAgICAvLyB1c2VyIGZpbGxzIGluIGVtYWlsIGFuZCBwYXNzd29yZDsgY2xpY2tzICdsb2dpbic6IFZJRVcgbm90aWNlcyB0aGlzIGFuZCByZWFjdHNcbiAgICAgICAgVmlld0hlbHBlci5zZXRBY3Rpb25MaXN0ZW5lcihhY3Rpb25QZXJmb3JtZWQpO1xuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXG4gICAgcmV0dXJuIHtcbiAgICAgICAgbWFpbjogbWFpblxuICAgIH1cbn07IiwidmFyIFBhZ2VDb250cm9sbGVyID0gZnVuY3Rpb24odmlld0hlbHBlciwgbW9kZWwpXG57XG4gICAgdmFyIE1vZGVsID0gbW9kZWw7XG4gICAgdmFyIFZpZXcgID0gdmlld0hlbHBlcjtcbiAgICBcbiAgICAvLyBGdW5jdGlvbiB0aGF0IGlzIGV4ZWN1dGVkIG9uIGEgYWN0aW9uIGxpc3RlbmVyXG4gICAgZnVuY3Rpb24gYWN0aW9uUGVyZm9ybWVkKGV2ZW50KVxuICAgIHtcbiAgICAgICAgTW9kZWwuZ2V0UGFnZShmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgVmlldy5zZXRWaWV3KGRhdGEpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBNYWluIGZ1bmN0aW9uLCBhbHNvIHRoZSBzdGFydCBzdGFydHBvaW50IGZvciBhIHBhZ2VcbiAgICBmdW5jdGlvbiBtYWluKClcbiAgICB7ICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgIFZpZXcuc2V0QWN0aW9uTGlzdGVuZXIoYWN0aW9uUGVyZm9ybWVkKTtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBieSBvdGhlciBwcm9ncmFtcyAodGhlIGNvbnRyb2xsZXIgaW4gdGhpcyBjYXNlKVxuICAgIHJldHVybiB7XG4gICAgICAgIG1haW46IG1haW5cbiAgICB9XG59OyIsInZhciBQcm9kdWN0c0NvbnRyb2xsZXIgPSBmdW5jdGlvbih2aWV3SGVscGVyLCBtb2RlbClcbntcbiAgICB2YXIgTW9kZWwgICAgICA9IG1vZGVsO1xuICAgIHZhciBWaWV3SGVscGVyID0gdmlld0hlbHBlcjtcbiAgICBcbiAgICAvLyBGdW5jdGlvbiB0aGF0IGlzIGV4ZWN1dGVkIG9uIGEgYWN0aW9uIGxpc3RlbmVyXG4gICAgZnVuY3Rpb24gZ2V0UGFnZSgpXG4gICAge1xuICAgICAgICBNb2RlbC5nZXRQYWdlKFwiXCIsIGZ1bmN0aW9uIChkYXRhKSB7IFZpZXdIZWxwZXIuc2V0VmlldyhkYXRhKTsgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZmlsdGVyUHJvZHVjdHMoZXZlbnQpXG4gICAge1xuICAgICAgICAvLyBQcmV2ZW50IHNlbmRpbmcgdGhlIGZvcm0gKHBhZ2UgcmVsb2FkKVxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIHZhciBmaWx0ZXJzID0gJCh0aGlzKS5zZXJpYWxpemUoKTtcbiAgICAgICAgTW9kZWwuZ2V0UGFnZShmaWx0ZXJzLCBmdW5jdGlvbiAoZGF0YSkgeyBWaWV3SGVscGVyLmxvYWRQcm9kdWN0cyhkYXRhKTsgfSk7XG4gICAgfVxuXG4gICAgLy8gTWFpbiBmdW5jdGlvbiwgYWxzbyB0aGUgc3RhcnQgc3RhcnRwb2ludCBmb3IgYSBwYWdlXG4gICAgZnVuY3Rpb24gbWFpbigpXG4gICAge1xuICAgICAgICBWaWV3SGVscGVyLnNldEFjdGlvbkxpc3RlbmVyKGdldFBhZ2UpO1xuICAgICAgICBWaWV3SGVscGVyLnNldEZpbHRlckxpc3RlbmVyKGZpbHRlclByb2R1Y3RzKTtcbiAgICAgICAgLy8gbmV3IGFjdGlvbiB3YW5uZXIgZXIgb3AgZmlsdGVyIHdvcmR0IGdlZHJ1a3RcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBieSBvdGhlciBwcm9ncmFtcyAodGhlIGNvbnRyb2xsZXIgaW4gdGhpcyBjYXNlKVxuICAgIHJldHVybiB7XG4gICAgICAgIG1haW46IG1haW5cbiAgICB9XG59OyIsInZhciBSZWdpc3RlckNvbnRyb2xsZXIgPSBmdW5jdGlvbih2aWV3SGVscGVyLCBtb2RlbClcbntcbiAgICB2YXIgTW9kZWwgICAgICA9IG1vZGVsO1xuICAgIHZhciBWaWV3SGVscGVyID0gdmlld0hlbHBlcjtcbiAgICBcbiAgICAvLyBGdW5jdGlvbiB0aGF0IGlzIGV4ZWN1dGVkIG9uIGEgYWN0aW9uIGxpc3RlbmVyXG4gICAgZnVuY3Rpb24gYWN0aW9uUGVyZm9ybWVkKClcbiAgICB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiaW4gYWN0aW9uUGVyZm9ybWVkXCIpOyAvL3Rlc3RcblxuICAgICAgICAvLyBQcmV2ZW50IHNlbmRpbmcgdGhlIGZvcm1cbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAvLyByZXNldCBlcnJvciBtZXNzYWdlc1xuICAgICAgICAkKFwiI3JlZ2lfYXBpX2Vycm9yX21lc3NhZ2VcIikuaGlkZSgpO1xuICAgICAgICAkKFwiI3d3Ml9lcnJvcl9tZXNzYWdlXCIpLmhpZGUoKTtcblxuICAgICAgICAvLyBwdXQgZm9ybSBmaWVsZHMgaW4gamF2YXNjcmlwdCBPYmplY3RcbiAgICAgICAgdmFyIGZvcm1EYXRhID0ge307XG5cbiAgICAgICAgJC5lYWNoKCQodGhpcykuc2VyaWFsaXplQXJyYXkoKSwgZnVuY3Rpb24gKGksIGZpZWxkKSB7XG4gICAgICAgICAgICBmb3JtRGF0YVtmaWVsZC5uYW1lXSA9IGZpZWxkLnZhbHVlO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBmaXggZGF0ZSBvZiBiaXJ0aCAoQVBJIGV4cGVjdHMgY2VydGFpbiBmb3JtYXQpXG4gICAgICAgIGZvcm1EYXRhW1wiYmlydGhfZGF0ZVwiXSA9IGZvcm1EYXRhLmphYXIgKyBcIi1cIiArIGZvcm1EYXRhLm1hYW5kICsgXCItXCIgKyBmb3JtRGF0YS5kYWc7XG5cbiAgICAgICAgY29uc29sZS5sb2coZm9ybURhdGEpO1xuXG4gICAgICAgIC8vIGNoZWNrIHdoZXRoZXIgYW55IG1hbmRhdG9yeSBmaWVsZCBpcyBsZWZ0IGVtcHR5IGJ5IHVzZXIgYW5kXG4gICAgICAgIC8vIGlmIHNvLCBhYm9ydCBmdW5jdGlvblxuICAgICAgICB2YXIgbWFuZGF0b3J5RmllbGRNaXNzZXMgPSBmYWxzZTtcbiAgICAgICAgdmFyIG1hbmRhdG9yeUZpZWxkcyA9IFtcInZvb3JuYWFtXCIsIFwiYWNodGVybmFhbVwiLCBcInBvc3Rjb2RlXCIsIFwiaHVpc251bW1lclwiLCBcImVfbWFpbGFkcmVzXCIsIFwid2FjaHR3b29yZFwiLCBcIndhY2h0d29vcmQyXCIsIFwic2VjdXJpdHlfYW5zd2VyXCJdOyAvL2Ryb3Bkb3ducyAobGlrZSBnZW5kZXIpIGFyZSBhbHdheXMgZmlsbGVkIGluLCBzbyBkb24ndCBwdXQgaW4gdGhpcyBsaXN0XG5cbiAgICAgICAgLy8gKHJlc2V0IGFsbCBmaWVsZHMgdG8gJ3ZhbGlkJyBiZWNhdXNlIHVzZXIgbWF5IGhhdmUgZmlsbGVkIGluIGZpZWxkcyBzaW5jZVxuICAgICAgICAvLyB0aGUgcHJldmlvdXMgdGltZSB0aGlzIGZ1bmN0aW9uIHdhcyBjYWxsZWQpXG4gICAgICAgICQuZWFjaChtYW5kYXRvcnlGaWVsZHMsIGZ1bmN0aW9uIChpLCBtYW5GaWVsZCkge1xuICAgICAgICAgICAgJChcIiNcIiArIG1hbkZpZWxkKS5yZW1vdmVDbGFzcyhcImludmFsaWRcIik7XG4gICAgICAgIH0pXG5cbiAgICAgICAgJC5lYWNoKG1hbmRhdG9yeUZpZWxkcywgZnVuY3Rpb24gKGksIG1hbkZpZWxkKSB7XG4gICAgICAgICAgICBpZiAoZm9ybURhdGFbbWFuRmllbGRdID09IFwiXCIpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgJChcIiNcIiArIG1hbkZpZWxkKS5hZGRDbGFzcyhcImludmFsaWRcIik7XG5cbiAgICAgICAgICAgICAgICBtYW5kYXRvcnlGaWVsZE1pc3NlcyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgXG4gICAgICAgIC8vIGlmIGEgbWFuZGF0b3J5IGZpZWxkIGlzIGVtcHR5LCBzaG93IGVycm9yIG1lc3NhZ2UgdG8gdXNlciBhbmQgYWJvcnQgZnVuY3Rpb25cbiAgICAgICAgaWYgKG1hbmRhdG9yeUZpZWxkTWlzc2VzKVxuICAgICAgICB7IFxuICAgICAgICAgICAgLy8gc2Nyb2xsIHRvIHRvcCBvZiBwYWdlIHNvIHRoYXQgdXNlcnMgc2VlIG1lc3NhZ2UgXCJzb21ldGhpbmcgaXMgbm90IGZpbGxlZCBpblwiXG4gICAgICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7XG4gICAgICAgICAgICAvLyBzaG93IG1lc3NhZ2UgXCJzb21ldGhpbmcgaXMgbm90IGZpbGxlZCBpblwiXG4gICAgICAgICAgICAkKFwiI3JlZ2lzdGVyX2Vycm9yX21lc3NhZ2VcIikuc2hvdygpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBwYXNzd29yZHNOb3RJZGVudGljYWwgPSBmYWxzZTtcblxuICAgICAgICBpZiAoZm9ybURhdGEud2FjaHR3b29yZCAhPSBmb3JtRGF0YS53YWNodHdvb3JkMikgXG4gICAgICAgIHtcbiAgICAgICAgICAgIHBhc3N3b3Jkc05vdElkZW50aWNhbCA9IHRydWU7XG4gICAgICAgICAgICAkKFwiI3d3Ml9lcnJvcl9tZXNzYWdlXCIpLnNob3coKTtcbiAgICAgICAgICAgICQoXCIjd2FjaHR3b29yZFwiKS5hZGRDbGFzcyhcImludmFsaWRcIik7XG4gICAgICAgICAgICAkKFwiI3dhY2h0d29vcmQyXCIpLmFkZENsYXNzKFwiaW52YWxpZFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGFib3J0IGZ1bmN0aW9uIGlmIG1hbmRhdG9yeSBmaWVsZCBtaXNzZXMgb3IgcGFzc3dvcmRzIG5vdCBpZGVudGljYWxcbiAgICAgICAgaWYgKG1hbmRhdG9yeUZpZWxkTWlzc2VzIHx8IHBhc3N3b3Jkc05vdElkZW50aWNhbClcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUubG9nKFwiY29udGludWVkXCIpXG4gICAgICAgIC8vIGxldCBtb2RlbCBzZW5kIHVzZXIgaW5mbyB0byBBUElcbiAgICAgICAgTW9kZWwucmVnaXN0ZXIoZm9ybURhdGEsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBWaWV3SGVscGVyLnNldFZpZXcoJy92aWV3cy9yZWdpc3Rlci9hZnRlcl9yZWdpc3Rlci5odG1sJyk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIE1haW4gZnVuY3Rpb24sIGFsc28gdGhlIHN0YXJ0IHN0YXJ0cG9pbnQgZm9yIGEgcGFnZVxuICAgIGZ1bmN0aW9uIG1haW4oKVxuICAgIHtcbiAgICAgICAgLy8gc2V0IHZpZXcgdG8gcmVnaXN0ZXIgZm9ybVxuICAgICAgICBWaWV3SGVscGVyLnNldFZpZXcoJy92aWV3cy9yZWdpc3Rlci9yZWdpc3Rlci5odG1sJyk7XG5cbiAgICAgICAgLy8gdXNlciBmaWxscyBpbiByZWdpc3RlciBpbmZvOyBjbGlja3MgJ3JlZ2lzdGVyJzogdmlldyBub3RpY2VzIHRoaXMgYW5kIHJlYWN0c1xuICAgICAgICBWaWV3SGVscGVyLnNldEFjdGlvbkxpc3RlbmVyKGFjdGlvblBlcmZvcm1lZCk7XG5cbiAgICAgICAgLy8gZW1haWwgYW5kIHBhc3N3b3JkIGFyZSBzZW5kIHRvIEFQSTsgQVBJIGNoZWNrcyBpZiBlbWFpbCBhbHJlYWR5IGV4aXN0cyAoYW5kIHdoZXRoZXIgcGFzc3dvcmQgaXMgY29ycmVjdD8pIFxuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXG4gICAgcmV0dXJuIHtcbiAgICAgICAgbWFpbjogbWFpblxuICAgIH1cbn07IiwidmFyIFJlc2V0UGFzc3dvcmRDb250cm9sbGVyID0gZnVuY3Rpb24odmlld0hlbHBlciwgbW9kZWwpXG57XG4gICAgdmFyIE1vZGVsICAgICAgPSBtb2RlbDtcbiAgICB2YXIgVmlld0hlbHBlciA9IHZpZXdIZWxwZXI7XG4gICAgXG4gICAgIC8vIEZ1bmN0aW9uIHRoYXQgaXMgZXhlY3V0ZWQgb24gYSBhY3Rpb24gbGlzdGVuZXJcbiAgICBmdW5jdGlvbiBhY3Rpb25QZXJmb3JtZWQoKVxuICAgIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJpbiBhY3Rpb25QZXJmb3JtZWRcIik7IC8vdGVzdFxuXG4gICAgICAgIC8vIFByZXZlbnQgc2VuZGluZyB0aGUgZm9ybVxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIC8vIHJlc2V0IGVycm9yIG1lc3NhZ2VzXG4gICAgICAgICQoXCIjcmVzZXRfcGFzc3dvcmRfYXBpX2Vycm9yX21lc3NhZ2VcIikuaGlkZSgpO1xuICAgICAgICAkKFwiI3d3Ml9lcnJvcl9tZXNzYWdlXCIpLmhpZGUoKTtcblxuICAgICAgICAvLyBwdXQgZm9ybSBmaWVsZHMgaW4gamF2YXNjcmlwdCBPYmplY3RcbiAgICAgICAgdmFyIGZvcm1EYXRhID0ge307XG5cbiAgICAgICAgJC5lYWNoKCQodGhpcykuc2VyaWFsaXplQXJyYXkoKSwgZnVuY3Rpb24gKGksIGZpZWxkKSB7XG4gICAgICAgICAgICBmb3JtRGF0YVtmaWVsZC5uYW1lXSA9IGZpZWxkLnZhbHVlO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBjaGVjayB3aGV0aGVyIGFueSBtYW5kYXRvcnkgZmllbGQgaXMgbGVmdCBlbXB0eSBieSB1c2VyIGFuZFxuICAgICAgICAvLyBpZiBzbywgYWJvcnQgZnVuY3Rpb25cbiAgICAgICAgdmFyIG1hbmRhdG9yeUZpZWxkTWlzc2VzID0gZmFsc2U7XG4gICAgICAgIHZhciBtYW5kYXRvcnlGaWVsZHMgPSBbXCJ3YWNodHdvb3JkXCIsIFwid2FjaHR3b29yZDJcIiwgXCJlX21haWxhZHJlc1wiLFwic2VjdXJpdHlfYW5zd2VyXCJdOyAvL2Ryb3Bkb3ducyAobGlrZSBzZWN1cml0eV9xdWVzdGlvbl9hbnN3ZXIpIGFyZSBhbHdheXMgZmlsbGVkIGluLCBzbyBkb24ndCBwdXQgaW4gdGhpcyBsaXN0XG5cbiAgICAgICAgLy8gKHJlc2V0IGFsbCBmaWVsZHMgdG8gJ3ZhbGlkJyBiZWNhdXNlIHVzZXIgbWF5IGhhdmUgZmlsbGVkIGluIGZpZWxkcyBzaW5jZVxuICAgICAgICAvLyB0aGUgcHJldmlvdXMgdGltZSB0aGlzIGZ1bmN0aW9uIHdhcyBjYWxsZWQpXG4gICAgICAgICQuZWFjaChtYW5kYXRvcnlGaWVsZHMsIGZ1bmN0aW9uIChpLCBtYW5GaWVsZCkge1xuICAgICAgICAgICAgJChcIiNcIiArIG1hbkZpZWxkKS5yZW1vdmVDbGFzcyhcImludmFsaWRcIik7XG4gICAgICAgIH0pXG5cbiAgICAgICAgJC5lYWNoKG1hbmRhdG9yeUZpZWxkcywgZnVuY3Rpb24gKGksIG1hbkZpZWxkKSB7XG4gICAgICAgICAgICBpZiAoZm9ybURhdGFbbWFuRmllbGRdID09IFwiXCIpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgJChcIiNcIiArIG1hbkZpZWxkKS5hZGRDbGFzcyhcImludmFsaWRcIik7XG5cbiAgICAgICAgICAgICAgICBtYW5kYXRvcnlGaWVsZE1pc3NlcyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgXG4gICAgICAgIC8vIGlmIGEgbWFuZGF0b3J5IGZpZWxkIGlzIGVtcHR5LCBzaG93IGVycm9yIG1lc3NhZ2UgdG8gdXNlciBhbmQgYWJvcnQgZnVuY3Rpb25cbiAgICAgICAgaWYgKG1hbmRhdG9yeUZpZWxkTWlzc2VzKVxuICAgICAgICB7IFxuICAgICAgICAgICAgLy8gc2Nyb2xsIHRvIHRvcCBvZiBwYWdlIHNvIHRoYXQgdXNlcnMgc2VlIG1lc3NhZ2UgXCJzb21ldGhpbmcgaXMgbm90IGZpbGxlZCBpblwiXG4gICAgICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7XG4gICAgICAgICAgICAvLyBzaG93IG1lc3NhZ2UgXCJzb21ldGhpbmcgaXMgbm90IGZpbGxlZCBpblwiXG4gICAgICAgICAgICAkKFwiI3Jlc2V0X2Vycm9yX21lc3NhZ2VcIikuc2hvdygpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBwYXNzd29yZHNOb3RJZGVudGljYWwgPSBmYWxzZTtcblxuICAgICAgICBpZiAoZm9ybURhdGEud2FjaHR3b29yZCAhPSBmb3JtRGF0YS53YWNodHdvb3JkMikgXG4gICAgICAgIHtcbiAgICAgICAgICAgIHBhc3N3b3Jkc05vdElkZW50aWNhbCA9IHRydWU7XG4gICAgICAgICAgICAkKFwiI3d3Ml9lcnJvcl9tZXNzYWdlXCIpLnNob3coKTtcbiAgICAgICAgICAgICQoXCIjd2FjaHR3b29yZFwiKS5hZGRDbGFzcyhcImludmFsaWRcIik7XG4gICAgICAgICAgICAkKFwiI3dhY2h0d29vcmQyXCIpLmFkZENsYXNzKFwiaW52YWxpZFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGFib3J0IGZ1bmN0aW9uIGlmIG1hbmRhdG9yeSBmaWVsZCBtaXNzZXMgb3IgcGFzc3dvcmRzIG5vdCBpZGVudGljYWxcbiAgICAgICAgaWYgKG1hbmRhdG9yeUZpZWxkTWlzc2VzIHx8IHBhc3N3b3Jkc05vdElkZW50aWNhbClcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUubG9nKFwiY29udGludWVkXCIpXG4gICAgICAgIC8vIGxldCBtb2RlbCBzZW5kIHVzZXIgaW5mbyB0byBBUElcbiAgICAgICAgTW9kZWwucmVzZXRwYXNzd29yZChmb3JtRGF0YSwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIFZpZXdIZWxwZXIuc2V0Vmlldygndmlld3MvcmVzZXRwYXNzd29yZC9hZnRlcl9yZXNldC5odG1sJyk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIE1haW4gZnVuY3Rpb24sIGFsc28gdGhlIHN0YXJ0IHN0YXJ0cG9pbnQgZm9yIGEgcGFnZVxuICAgIGZ1bmN0aW9uIG1haW4oKVxuICAgIHsgICAgICBcbiAgICAgICAgLy8gc2V0IHZpZXcgdG8gcmVzZXQgcGFzc3dvcmQgZm9ybVxuICAgICAgICBWaWV3SGVscGVyLnNldFZpZXcoJ3ZpZXdzL3Jlc2V0cGFzc3dvcmQvcmVzZXRwYXNzd29yZC5odG1sJyk7XG5cbiAgICAgICAgVmlld0hlbHBlci5zZXRBY3Rpb25MaXN0ZW5lcihhY3Rpb25QZXJmb3JtZWQpO1xuICAgICAgICAvLyBuZXcgYWN0aW9uIHdhbm5lciBlciBvcCBmaWx0ZXIgd29yZHQgZ2VkcnVrdFxuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXG4gICAgcmV0dXJuIHtcbiAgICAgICAgbWFpbjogbWFpblxuICAgIH1cbn07XG5cblxuXG5cbiIsInZhciBQcm9kdWN0Q29udHJvbGxlciA9IGZ1bmN0aW9uKHZpZXdIZWxwZXIsIG1vZGVsKVxue1xuICAgIHZhciBNb2RlbCAgICAgID0gbW9kZWw7XG4gICAgdmFyIFZpZXdIZWxwZXIgPSB2aWV3SGVscGVyO1xuICAgIFxuICAgIC8vIEZ1bmN0aW9uIHRoYXQgaXMgZXhlY3V0ZWQgb24gYSBhY3Rpb24gbGlzdGVuZXJcbiAgICBmdW5jdGlvbiBhY3Rpb25QZXJmb3JtZWQoZXZlbnQpXG4gICAge1xuICAgICAgICAvLyBQcmV2ZW50IHNlbmRpbmcgdGhlIGZvcm1cbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuXG5cblxuXG5cbiAgICAgICAgLy8gTG9vcCB0cm91Z2ggdGhlIGZvcm0gZGF0YSBhbmQgZ2V0IGFsbCBmaWVsZHNcbiAgICAgICAgdmFyIGZvcm1EYXRhID0ge307XG4gICAgICAgICQuZWFjaCgkKHRoaXMpLnNlcmlhbGl6ZUFycmF5KCksIGZ1bmN0aW9uIChpLCBmaWVsZCkge1xuICAgICAgICAgICAgZm9ybURhdGFbZmllbGQubmFtZV0gPSBmaWVsZC52YWx1ZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gbGV0IG1vZGVsIHNlbmQgZW1haWwgYW5kIHBhc3N3b3JkIHRvIEFQSVxuICAgICAgICBNb2RlbC5sb2dpbihmb3JtRGF0YS5lbWFpbCwgZm9ybURhdGEucGFzc3dvcmQsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAvLyBzaG93IHVpdGxvZ2dlbiBidXR0b25cbiAgICAgICAgICAgICQoXCIjaW5sb2dnZW5fdGV4dFwiKS5oaWRlKCk7XG4gICAgICAgICAgICAkKFwiI3VpdGxvZ2dlbl90ZXh0XCIpLnNob3coKTtcblxuICAgICAgICAgICAgLy8gV2VlcmdlZWYgZWVuIGFuZGVyZSBwYWdpbmEgZ2ViYXNzZWVyZCBvcCAnYWRtaW4nIG9mICdyZWdpc3RlcmVkIHVzZXInXG4gICAgICAgICAgICBuZXcgUGFnZUNvbnRyb2xsZXIobmV3IFBhZ2VWaWV3SGVscGVyKCksIG5ldyBQYWdlTW9kZWwoKSkubWFpbigpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBsZXQgdmlldyBzaG93IHZpZXcgd2l0aCBkYXRhIGZyb20gZGF0YWJhc2VcbiAgICBmdW5jdGlvbiBzaG93VmlldyhkYXRhKVxuICAgIHtcbiAgICAgICAgdmlld0hlbHBlci5zZXRWaWV3KGRhdGEpO1xuICAgIH1cblxuICAgIC8vIE1haW4gZnVuY3Rpb24sIGFsc28gdGhlIHN0YXJ0IHN0YXJ0cG9pbnQgZm9yIGEgcGFnZVxuICAgIGZ1bmN0aW9uIG1haW4oKVxuICAgIHtcbiAgICAgICAgLy8gd2hhdCBoYXBwZW5zOlxuICAgICAgICAvLyAxKSB1c2VyIGNsaWNrcyBvbiBhIHByb2R1Y3QgXG4gICAgICAgIC8vIDIpIG1vZGVsIGdldHMgaW5mbyBvZiB0aGUgcHJvZHVjdFxuICAgICAgICAvLyAzKSBzeXN0ZW0gcHV0cyBpbmZvIGluIGh0bWxcbiAgICAgICAgLy8gNCkgdmlldyBzaG93cyBpbmZvXG5cbiAgICAgICAgLy8gMikgbW9kZWwgZ2V0cyBpbmZvIG9mIHRoZSBwcm9kdWN0XG4gICAgICAgIC8vIDMpIHN5c3RlbSBwdXRzIGluZm8gaW4gaHRtbFxuICAgICAgICBtb2RlbC5HZXRQcm9kdWN0SW5mbyhzaG93Vmlldyk7XG5cblxuXG4gICAgICAgIC8vIHNldCB2aWV3IHRvIGxvZ2luIGZvcm1cbiAgICAgICAgLy9WaWV3SGVscGVyLnNldFZpZXcoKTtcblxuICAgICAgICAvLyB1c2VyIGZpbGxzIGluIGVtYWlsIGFuZCBwYXNzd29yZDsgY2xpY2tzICdsb2dpbic6IFZJRVcgbm90aWNlcyB0aGlzIGFuZCByZWFjdHNcbiAgICAgICAgLy9WaWV3SGVscGVyLnNldEFjdGlvbkxpc3RlbmVyKGFjdGlvblBlcmZvcm1lZCk7XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHRoZSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgcHJvZ3JhbXMgKHRoZSBjb250cm9sbGVyIGluIHRoaXMgY2FzZSlcbiAgICByZXR1cm4ge1xuICAgICAgICBtYWluOiBtYWluLFxuICAgICAgICBzaG93VmlldyA6IHNob3dWaWV3XG4gICAgfVxufTsiLCJ2YXIgV2lzaGxpc3RDb250cm9sbGVyID0gZnVuY3Rpb24odmlld0hlbHBlciwgbW9kZWwpXG57XG4gICAgdmFyIE1vZGVsID0gbW9kZWw7XG4gICAgdmFyIFZpZXdIZWxwZXIgPSB2aWV3SGVscGVyO1xuICAgIHZhciB2aWV3RGF0YSA9IHt9O1xuXG4gICAgZnVuY3Rpb24gZ2V0V2lzaGxpc3QoKVxuICAgIHtcbiAgICAgICAgTW9kZWwuZ2V0V2lzaGxpc3QoZnVuY3Rpb24gKGRhdGEpIHsgVmlld0hlbHBlci5zZXRWaWV3KGRhdGEpOyB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtYWluKClcbiAgICB7XG4gICAgICAgIFZpZXdIZWxwZXIuc2V0QWN0aW9uTGlzdGVuZXIoZ2V0V2lzaGxpc3QpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBtYWluOiBtYWluXG4gICAgfVxufTsiLCJ2YXIgQ2FydFZpZXdIZWxwZXIgPSBmdW5jdGlvbigpXG57XG4gICAgLy8gQ2hhbmdlIHRoZSB2aWV3IG9mIHRoZSBwYWdlXG4gICAgZnVuY3Rpb24gc2V0Vmlldyh2aWV3RGF0YSlcbiAgICB7XG4gICAgICAgIGlmICh2aWV3RGF0YSAhPSBcIlwiKVxuICAgICAgICB7XG4gICAgICAgICAgICB2aWV3RGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkge1xuICAgICAgICAgICAgICAgIGFkZEl0ZW0oaXRlbSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB0aGUgdG90YWwgcHJpY2UgIG9mIHRoZSBjYXJ0XG4gICAgICogXG4gICAgICogQHBhcmFtIHtpbnR9IHRvdGFsUHJpY2UgIFRvdGFsIHByaWNlIG9mIHRoZSBjYXJ0XG4gICAgICovXG4gICAgZnVuY3Rpb24gdXBkYXRlVG90YWxQcmljZShuZXdQcmljZSlcbiAgICB7XG4gICAgICAgIG5ld1ByaWNlID0gcGFyc2VGbG9hdChuZXdQcmljZSkgKyBwYXJzZUZsb2F0KCQoXCIuY2FydF9fdG90YWwgLnByaWNlXCIpLmh0bWwoKS5zdWJzdHIoMSkpO1xuICAgICAgICAkKFwiLmNhcnRfX3RvdGFsIC5wcmljZVwiKS5odG1sKFwi4oKsXCIgKyBwYXJzZUZsb2F0KG5ld1ByaWNlKS50b0ZpeGVkKDIpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNYWtlIG5ldyBjYXJ0IGl0ZW0gdmlzaWFibGUgaW4gdGhlIERPTVxuICAgICAqIFxuICAgICAqIEBwYXJhbSAge2FycmF5fSAgaXRlbSAgUHJvZHVjdFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFkZEl0ZW0oaXRlbSlcbiAgICB7XG4gICAgICAgIHZhciBjYXJ0SXRlbSA9ICQoJzxkaXY+JykuaHRtbCgkKCcuc2lkZWJhcl9fY29udGVudF9fdG1wJykuaHRtbCgpKTtcblxuICAgICAgICBjYXJ0SXRlbS5maW5kKFwiLmNhcnRfX2l0ZW1fX3RpdGxlXCIpLmh0bWwoaXRlbS50aXRsZSk7XG4gICAgICAgIGNhcnRJdGVtLmZpbmQoXCIuY2FydF9faXRlbV9fcHJpY2VcIikuaHRtbChcIuKCrFwiICsgaXRlbS5wcmljZSk7XG4gICAgICAgIGNhcnRJdGVtLmZpbmQoXCIuY2FydF9faXRlbV9faW1hZ2UgaW1nXCIpLmF0dHIoXCJzcmNcIiwgaXRlbS5pbWFnZSk7XG4gICAgICAgIGNhcnRJdGVtLmZpbmQoXCIuY2FydF9faXRlbVwiKS5hdHRyKFwiZGF0YS1pZFwiLCBpdGVtLmVhbl9udW1iZXIpXG5cbiAgICAgICAgJChcIi5jYXJ0XCIpLmFwcGVuZChjYXJ0SXRlbSk7XG5cbiAgICAgICAgLy8gQ2hhbmdlIGFtb3VudCBvZiBpdGVtc1xuICAgICAgICB2YXIgYW1vdW50ID0gJChcIi5jYXJ0X2J1dHRvbiAuY291bnRcIikuaHRtbCgpO1xuICAgICAgICAkKFwiLmNhcnRfYnV0dG9uIC5jb3VudFwiKS5odG1sKHBhcnNlSW50KGFtb3VudCkgKyAxKTtcblxuICAgICAgICAvLyBVcGRhdGUgdGhlIHRvdGFsIHByaWNlXG4gICAgICAgIHVwZGF0ZVRvdGFsUHJpY2UoaXRlbS5wcmljZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTG9hZCB0aGUgY2FydCB3aGVuIHRoZSBwYWdlIGlzICByZWFzZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHNldEFjdGlvbkxpc3RlbmVyKGFjdGlvbilcbiAgICB7XG4gICAgICAgICQoZG9jdW1lbnQpLnJlYWR5KGFjdGlvbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTGlzdGVuZXIgZm9yIHRoZSBBZGQgdG8gY2FydCBidXR0b25cbiAgICAgKiBcbiAgICAgKiBAcGFyYW0gIHtmdW5jdGlvbn0gYWRkdG9DYXJ0ICBNb2RlbCBjYWxsYmFja1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIHNldEFkZFByb2R1Y3RMaXN0ZW5lcihhZGRUb0NhcnQpXG4gICAge1xuICAgICAgICAkKFwiYm9keVwiKS5vbihcImNsaWNrXCIsIFwiLmFkZHRvY2FydFwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIHZhciBwcm9kdWN0X2lkID0gJCh0aGlzKS5kYXRhKFwiaWRcIik7XG4gICAgICAgICAgICBhZGRUb0NhcnQocHJvZHVjdF9pZCk7XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTGlzdGVuZXIgZm9yIHJlbW92ZSBhIHByb2R1Y3QgZnJvbSB0aGUgRE9NIGNhcnRcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSByZW1vdmVQcm9kdWN0IENhbGxiYWNrIGZ1bmN0aW9uIHRvIHJlbW92ZSB0aGUgcHJvZGN1dCBmcm9tIHRoZSBtZW1vcnlcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBzZXRSZW1vdmVMaXN0ZW5lcihyZW1vdmVQcm9kdWN0KSB7XG4gICAgICAgICQoXCJib2R5XCIpLm9uKFwiY2xpY2tcIiwgXCIuY2FydF9faXRlbV9fcmVtb3ZlXCIsIGZ1bmN0aW9uIChldmVudCl7XG4gICAgICAgICAgICB2YXIgY2FydGl0ZW0gICA9ICQodGhpcykucGFyZW50KCk7XG4gICAgICAgICAgICB2YXIgcHJvZHVjdF9pZCA9ICQodGhpcykucGFyZW50KCkuZGF0YShcImlkXCIpO1xuXG4gICAgICAgICAgICAvLyBSZW1vdmUgcHJvZHVjdCBmcm9tIERPTSBjYXJ0XG4gICAgICAgICAgICAkKGNhcnRpdGVtKS5hZGRDbGFzcyhcImNhcnRfX2l0ZW0tLXJlbW92ZWRcIik7XG4gICAgICAgICAgICAkKGNhcnRpdGVtKS5vbihcImFuaW1hdGlvbmVuZCB3ZWJraXRBbmltYXRpb25FbmQgb0FuaW1hdGlvbkVuZCBNU0FuaW1hdGlvbkVuZFwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZSgpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIERlY3Jlc2UgY291bnRcbiAgICAgICAgICAgIHZhciBhbW91bnQgPSAkKFwiLmNhcnRfYnV0dG9uIC5jb3VudFwiKS5odG1sKCk7XG4gICAgICAgICAgICAkKFwiLmNhcnRfYnV0dG9uIC5jb3VudFwiKS5odG1sKHBhcnNlSW50KGFtb3VudCkgLSAxKTtcblxuICAgICAgICAgICAgcmVtb3ZlUHJvZHVjdChwcm9kdWN0X2lkKVxuICAgICAgICAgICAgdXBkYXRlVG90YWxQcmljZSgtJChjYXJ0aXRlbSkuZmluZChcIi5jYXJ0X19pdGVtX19wcmljZVwiKS5odG1sKCkuc3Vic3RyKDEpKVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgLy8gUmV0dXJuIHRoZSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgcHJvZ3JhbXMgKHRoZSBjb250cm9sbGVyIGluIHRoaXMgY2FzZSlcbiAgICByZXR1cm4ge1xuICAgICAgICBzZXRWaWV3OiBzZXRWaWV3LFxuICAgICAgICBhZGRJdGVtOiBhZGRJdGVtLFxuICAgICAgICB1cGRhdGVUb3RhbFByaWNlOiB1cGRhdGVUb3RhbFByaWNlLFxuICAgICAgICBzZXRBY3Rpb25MaXN0ZW5lcjogc2V0QWN0aW9uTGlzdGVuZXIsXG4gICAgICAgIHNldEFkZFByb2R1Y3RMaXN0ZW5lcjogc2V0QWRkUHJvZHVjdExpc3RlbmVyLFxuICAgICAgICBzZXRSZW1vdmVMaXN0ZW5lcjogc2V0UmVtb3ZlTGlzdGVuZXJcbiAgICB9XG59OyIsInZhciBFcnJvclZpZXdIZWxwZXIgPSBmdW5jdGlvbigpXG57XG4gICAgLy8gQ2hhbmdlIHRoZSB2aWV3IG9mIHRoZSBwYWdlXG4gICAgZnVuY3Rpb24gc2V0VmlldygpXG4gICAge1xuICAgICAgICBkb2N1bWVudC50aXRsZSA9IFwiT2VwcyAtIEFaIEdhbWVzXCI7XG5cbiAgICAgICAgJChcIiNjb21wb25lbnRcIikubG9hZCgnL3ZpZXdzL2Vycm9yL2Vycm9yLmh0bWwnKTtcbiAgICB9XG5cbiAgICAvLyBBY3Rpb25MaXN0ZW5lciB0aGF0IGV4ZWN1dGVzIGFjdGlvbnMgb24gc3BlY2lmaWMgZXZlbnRzXG4gICAgZnVuY3Rpb24gc2V0QWN0aW9uTGlzdGVuZXIoZXZlbnRIYW5kbGVyKVxuICAgIHtcbiAgICAgICAgJChkb2N1bWVudCkucmVhZHkoZXZlbnRIYW5kbGVyKTtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBieSBvdGhlciBwcm9ncmFtcyAodGhlIGNvbnRyb2xsZXIgaW4gdGhpcyBjYXNlKVxuICAgIHJldHVybiB7XG4gICAgICAgIHNldFZpZXc6IHNldFZpZXcsXG4gICAgICAgIHNldEFjdGlvbkxpc3RlbmVyOiBzZXRBY3Rpb25MaXN0ZW5lclxuICAgIH1cbn07IiwidmFyIExvZ2luVmlld0hlbHBlciA9IGZ1bmN0aW9uKClcbntcbiAgICAvLyBDaGFuZ2UgdGhlIHZpZXcgb2YgdGhlIHBhZ2VcbiAgICBmdW5jdGlvbiBzZXRWaWV3KClcbiAgICB7XG4gICAgICAgIGRvY3VtZW50LnRpdGxlID1cIklubG9nZ2VuIC0gQVogR2FtZXNcIjtcblxuICAgICAgICAkKFwiI2NvbXBvbmVudFwiKS5sb2FkKCcvdmlld3MvbG9naW4vbG9naW4uaHRtbCcpO1xuICAgIH1cblxuICAgIC8vIEV4ZWN1dGUgdGhlIGV2ZW50IHdoZW4gJ3NvbWV0aGluZycgaGFwcGVucyAod2hlbiBhIGJ1dHRvbiBpcyBjbGlja2VkIGZvciBleGFtcGxlKVxuICAgIGZ1bmN0aW9uIHNldEFjdGlvbkxpc3RlbmVyKGFjdGlvbilcbiAgICB7XG4gICAgICAgIC8vIHVzZXIgZmlsbHMgaW4gbG9naW4gZm9ybVxuICAgICAgICAvLyB1c2VyIHByZXNzZXMgJ2xvZ2luJ1xuXG4gICAgICAgIC8vIGlmIHVzZXIgcHJlc3NlcyAnbG9naW4nLCBwZXJmb3JtIGFjdGlvbiAobWFrZSBjb250cm9sbGVyIHNlbmQgZW1haWwgYW5kIHBhc3N3b3JkIHRvIEFQSSlcbiAgICAgICAgJChcIiNjb21wb25lbnRcIikub24oXCJzdWJtaXRcIiwgXCIjbG9naW5mb3JtXCIsIGFjdGlvbik7XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHRoZSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgcHJvZ3JhbXMgKHRoZSBjb250cm9sbGVyIGluIHRoaXMgY2FzZSlcbiAgICByZXR1cm4ge1xuICAgICAgICBzZXRWaWV3OiBzZXRWaWV3LFxuICAgICAgICBzZXRBY3Rpb25MaXN0ZW5lcjogc2V0QWN0aW9uTGlzdGVuZXJcbiAgICB9XG59OyIsInZhciBMb2dvdXRWaWV3SGVscGVyID0gZnVuY3Rpb24oKVxue1xuICAgIC8vIENoYW5nZSB0aGUgdmlldyBvZiB0aGUgcGFnZVxuICAgIGZ1bmN0aW9uIHNldFZpZXcoKVxuICAgIHtcbiAgICAgICAgZG9jdW1lbnQudGl0bGUgPSBcIlVpdGxvZ2dlbiAtIEFaIEdhbWVzXCI7XG5cbiAgICAgICAgJChcIiNjb21wb25lbnRcIikubG9hZCgnL3ZpZXdzL2xvZ291dC9sb2dvdXQuaHRtbCcpO1xuICAgIH1cblxuICAgIC8vIEV4ZWN1dGUgdGhlIGV2ZW50IHdoZW4gJ3NvbWV0aGluZycgaGFwcGVucyAod2hlbiBhIGJ1dHRvbiBpcyBjbGlja2VkIGZvciBleGFtcGxlKVxuICAgIGZ1bmN0aW9uIHNldEFjdGlvbkxpc3RlbmVyKGFjdGlvbilcbiAgICB7XG4gICAgICAgICQoZG9jdW1lbnQpLnJlYWR5KGFjdGlvbik7XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHRoZSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgcHJvZ3JhbXMgKHRoZSBjb250cm9sbGVyIGluIHRoaXMgY2FzZSlcbiAgICByZXR1cm4ge1xuICAgICAgICBzZXRWaWV3OiBzZXRWaWV3LFxuICAgICAgICBzZXRBY3Rpb25MaXN0ZW5lcjogc2V0QWN0aW9uTGlzdGVuZXJcbiAgICB9XG59OyIsInZhciBQYWdlVmlld0hlbHBlciA9IGZ1bmN0aW9uKClcbntcbiAgICAvLyBDaGFuZ2UgdGhlIHZpZXcgb2YgdGhlIHBhZ2VcbiAgICBmdW5jdGlvbiBzZXRWaWV3KHZpZXdEYXRhKVxuICAgIHtcbiAgICAgICAgZG9jdW1lbnQudGl0bGUgPSBcIldlbGtvbSAtIEFaIEdhbWVzXCI7XG5cbiAgICAgICAgJChcIiNjb21wb25lbnRcIikubG9hZCgnL3ZpZXdzL3BhZ2UvcGFnZS5odG1sJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHZpZXdEYXRhWzBdLnVzZXJfdHlwZSA9PSBcImN1c3RvbWVyXCIpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgJChcIiN1c2VyLWJsb2NrXCIpLmFwcGVuZChcIjxoMT5KZSBsZWVzIGRpdCBhbGxlZW4gYWxzIGplIGVlbiBjdXN0b21lciBiZW50XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHZpZXdEYXRhWzBdLnVzZXJfdHlwZSA9PSBcImFkbWluXCIpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgJChcIiN1c2VyLWJsb2NrXCIpLmFwcGVuZChcIjxoMT5KZSBsZWVzIGRpdCBhbGxlZW4gYWxzIGplIGVlbiBhZG1pbmlzdHJhdG9yIGJlbnRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIEFjdGlvbkxpc3RlbmVyIHRoYXQgZXhlY3V0ZXMgYWN0aW9ucyBvbiBzcGVjaWZpYyBldmVudHNcbiAgICBmdW5jdGlvbiBzZXRBY3Rpb25MaXN0ZW5lcihldmVudEhhbmRsZXIpXG4gICAge1xuICAgICAgICAkKGRvY3VtZW50KS5yZWFkeShldmVudEhhbmRsZXIpO1xuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXG4gICAgcmV0dXJuIHtcbiAgICAgICAgc2V0Vmlldzogc2V0VmlldyxcbiAgICAgICAgc2V0QWN0aW9uTGlzdGVuZXI6IHNldEFjdGlvbkxpc3RlbmVyXG4gICAgfVxufTsiLCJ2YXIgUHJvZHVjdHNWaWV3SGVscGVyID0gZnVuY3Rpb24oKVxue1xuICAgIC8vIENoYW5nZSB0aGUgdmlldyBvZiB0aGUgcGFnZVxuICAgIGZ1bmN0aW9uIHNldFZpZXcodmlld0RhdGEpXG4gICAge1xuICAgICAgICBkb2N1bWVudC50aXRsZSA9IFwiUHJvZHVjdGVuIC0gQVogR2FtZXNcIjtcblxuICAgICAgICAkKFwiI2NvbXBvbmVudFwiKS5odG1sKCc8ZGl2IGNsYXNzPVwiY29sLTEyXCI+PGRpdiBjbGFzcz1cImNvbC0zXCIgaWQ9XCJmaWx0ZXJzXCI+PC9kaXY+PGRpdiBjbGFzcz1cImNvbC05XCIgaWQ9XCJwcm9kdWN0c1wiPjwvZGl2PjwvZGl2PicpO1xuICAgICAgICAvLyBsb2FkIGZpbHRlcnNcbiAgICAgICAgJChcIiNmaWx0ZXJzXCIpLmxvYWQoJy92aWV3cy9wcm9kdWN0cy9maWx0ZXJzLmh0bWwnKTtcblxuICAgICAgICAvLyBsb2FkIHByb2R1Y3RzXG4gICAgICAgIGxvYWRQcm9kdWN0cyh2aWV3RGF0YSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbG9hZFByb2R1Y3RzKHZpZXdEYXRhKVxuICAgIHtcbiAgICAgICAgJChcIiNwcm9kdWN0c1wiKS5sb2FkKCcvdmlld3MvcHJvZHVjdHMvcHJvZHVjdHMuaHRtbCcsIGZ1bmN0aW9uICgpIHsgLy8gd2FhciBpZCA9ICdjb21wb25lbnQnIGRvZSAubG9hZC4uLi4uLlxuICAgICAgICAgICAgJC5lYWNoKHZpZXdEYXRhLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgLy8gQ2xvbmUgcHJvZHVjdFxuICAgICAgICAgICAgICAgIHZhciBwcm9kdWN0ID0gJCgnPGRpdj4nKS5hcHBlbmQoJCgnI3Byb2R1Y3RfX2xpc3RfX2l0ZW0nKS5jbG9uZSgpKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBBZGQgcHJvZHVjdCBpbmZvXG4gICAgICAgICAgICAgICAgJChwcm9kdWN0KS5maW5kKFwiLnByb2R1Y3RfX3RpdGxlXCIpLmh0bWwodmFsdWUudGl0bGUpO1xuICAgICAgICAgICAgICAgICQocHJvZHVjdCkuZmluZChcIi5wcm9kdWN0X19zdWJ0aXRsZVwiKS5hcHBlbmQodmFsdWUuZ2VucmUgKyhcIiB8IFBFR0kgXCIpICsgdmFsdWUucGVnaV9hZ2UgKyhcIiB8IFwiKSsgUGxhdGZvcm1Mb2dvKHZhbHVlLnBsYXRmb3JtKSk7XG4gICAgICAgICAgICAgICAgJChwcm9kdWN0KS5maW5kKFwiLnByb2R1Y3RfX2Rlc2NyaXB0aW9uXCIpLmh0bWwoQ3V0U3RyaW5nKHZhbHVlLmRlc2NyaXB0aW9uKSk7XG4gICAgICAgICAgICAgICAgJChwcm9kdWN0KS5maW5kKFwiLnByb2R1Y3RfX3ByaWNlXCIpLmFwcGVuZCgoXCLigqwgXCIpK3ZhbHVlLnByaWNlKTtcbiAgICAgICAgICAgICAgICAkKHByb2R1Y3QpLmZpbmQoXCIjYnV0dG9uc19faW5mb1wiKS5hdHRyKFwiaHJlZlwiLCBcInByb2R1Y3QvXCIgKyB2YWx1ZS5lYW5fbnVtYmVyKTtcbiAgICAgICAgICAgICAgICAkKHByb2R1Y3QpLmZpbmQoXCIucHJvZHVjdF9faW1hZ2UgaW1nXCIpLmF0dHIoXCJzcmNcIiwgdmFsdWUuaW1hZ2UpO1xuICAgICAgICAgICAgICAgICQocHJvZHVjdCkuZmluZChcIi5hZGR0b2NhcnRcIikuYXR0cihcImRhdGEtaWRcIiwgdmFsdWUuZWFuX251bWJlcik7XG5cbiAgICAgICAgICAgICAgICAkKFwiI3Byb2R1Y3RfX2xpc3RcIikuYXBwZW5kKHByb2R1Y3QpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgZmlyc3QgbGlzdCBpdGVtLCBiZWNhdXNlIHRoaXMgaXRlbSBpcyBhbHdheXMgZW1wdHlcbiAgICAgICAgICAgICQoXCIjcHJvZHVjdF9fbGlzdF9faXRlbVwiKS5maXJzdCgpLnJlbW92ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvL1Nob3cgbW9yZS9sZXNzXG4gICAgZnVuY3Rpb24gQ3V0U3RyaW5nKHRleHQpe1xuICAgICAgICB2YXIgU2hvd0Ftb3VudCA9IDUwO1xuICAgICAgICB2YXIgV29yZHNBcnJheSA9IHRleHQuc3BsaXQoXCIgXCIpO1xuICAgICAgICBpZihXb3Jkc0FycmF5Lmxlbmd0aD5TaG93QW1vdW50KXtcbiAgICAgICAgICAgIHZhciBTaG9ydFN0cmluZyA9IFwiXCI7XG4gICAgICAgICAgICBmb3IoaT0wOyBpPFNob3dBbW91bnQ7IGkrKyl7XG4gICAgICAgICAgICAgICAgU2hvcnRTdHJpbmcgKz0gV29yZHNBcnJheVtpXSArIFwiIFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFNob3J0U3RyaW5nK1wiLi4uXCI7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgcmV0dXJuIHRleHQ7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gRXhlY3V0ZSB0aGUgZXZlbnQgd2hlbiAnc29tZXRoaW5nJyBoYXBwZW5zICh3aGVuIGEgYnV0dG9uIGlzIGNsaWNrZWQgZm9yIGV4YW1wbGUpXG4gICAgZnVuY3Rpb24gc2V0QWN0aW9uTGlzdGVuZXIoYWN0aW9uKVxuICAgIHtcbiAgICAgICAgJChkb2N1bWVudCkucmVhZHkoYWN0aW9uKTsgLy8gaWYgJ2RvY3VtZW50IHJlYWR5JyBwZXJmb3JtIFwiYWN0aW9uXCJcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXRGaWx0ZXJMaXN0ZW5lcihhY3Rpb24pXG4gICAge1xuICAgICAgICAgLy8gSGllciBoZXQgZm9ybXVsaWVyIHZlcnN0dXJlbiBhbHMgd2Ugb3AgZWVuIGNoZWNrYm94IGRydWtrZW5cbiAgICAgICAgJChcIiNjb21wb25lbnRcIikub2ZmKCkub24oXCJjaGFuZ2VcIiwgXCJpbnB1dFt0eXBlPWNoZWNrYm94XVwiLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgJChcIiNwcm9kdWN0X2ZpbHRlclwiKS5zdWJtaXQoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gVXBkYXRlIGRlIHByb2R1Y3RlbmxpanN0IGFscyBlZW4gd2FhcmRlIGluIGRlIHNsaWRlciB2ZXJhbmRlcmQoYWxsZSBtYW5pZXJlbilcbiAgICAgICAgJChcIiNjb21wb25lbnRcIikub24oXCJjaGFuZ2Uga2V5dXBcIiwgXCJpbnB1dFtuYW1lPXByaWNlLW1heF0sIGlucHV0W25hbWU9cHJpY2UtbWluXVwiLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgaWYoJChcIiNwcmljZW1pblwiKS52YWwoKSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgJChcIiNwcmljZW1pblwiKS52YWwoMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgJChcIiNwcm9kdWN0X2ZpbHRlclwiKS5zdWJtaXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgJChcIiNjb21wb25lbnRcIikub24oXCJzdWJtaXRcIiwgXCIjcHJvZHVjdF9maWx0ZXJcIiwgYWN0aW9uKTtcbiAgICB9XG4gICAgLy8gUmV0dXJuIHRoZSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgcHJvZ3JhbXMgKHRoZSBjb250cm9sbGVyIGluIHRoaXMgY2FzZSlcbiAgICByZXR1cm4ge1xuICAgICAgICBzZXRWaWV3OiBzZXRWaWV3LFxuICAgICAgICBsb2FkUHJvZHVjdHM6IGxvYWRQcm9kdWN0cyxcbiAgICAgICAgc2V0QWN0aW9uTGlzdGVuZXI6IHNldEFjdGlvbkxpc3RlbmVyLFxuICAgICAgICBzZXRGaWx0ZXJMaXN0ZW5lcjogc2V0RmlsdGVyTGlzdGVuZXJcbiAgICB9XG59OyIsInZhciBSZWdpc3RlclZpZXdIZWxwZXIgPSBmdW5jdGlvbigpXG57XG4gICAgLy8gQ2hhbmdlIHRoZSB2aWV3IG9mIHRoZSBwYWdlXG4gICAgZnVuY3Rpb24gc2V0Vmlldyh2aWV3VG9TaG93KVxuICAgIHtcbiAgICAgICAgZG9jdW1lbnQudGl0bGUgPSBcIlJlZ2lzdHJlcmVuIC0gQVogR2FtZXNcIjtcbiAgICAgICAgXG4gICAgICAgICQoXCIjY29tcG9uZW50XCIpLmxvYWQodmlld1RvU2hvdyk7XG4gICAgfVxuXG4gICAgLy8gRXhlY3V0ZSB0aGUgZXZlbnQgd2hlbiAnc29tZXRoaW5nJyBoYXBwZW5zICh3aGVuIGEgYnV0dG9uIGlzIGNsaWNrZWQgZm9yIGV4YW1wbGUpXG4gICAgZnVuY3Rpb24gc2V0QWN0aW9uTGlzdGVuZXIoYWN0aW9uKVxuICAgIHtcbiAgICAgICAgLy8gdXNlciBmaWxscyBpbiByZWdpc3RlciBmb3JtXG4gICAgICAgIC8vIHVzZXIgcHJlc3NlcyAncmVnaXN0ZXInXG5cbiAgICAgICAgLy8gaWYgdXNlciBwcmVzc2VzICdyZWdpc3RlcicsIHBlcmZvcm0gYWN0aW9uXG4gICAgICAgICQoXCIjY29tcG9uZW50XCIpLm9uKFwic3VibWl0XCIsIFwiI3JlZ2lzdGVyZm9ybVwiLCBhY3Rpb24pO1xuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXG4gICAgcmV0dXJuIHtcbiAgICAgICAgc2V0Vmlldzogc2V0VmlldyxcbiAgICAgICAgc2V0QWN0aW9uTGlzdGVuZXI6IHNldEFjdGlvbkxpc3RlbmVyXG4gICAgfVxufTsiLCJ2YXIgUmVzZXRQYXNzd29yZFZpZXdIZWxwZXIgPSBmdW5jdGlvbigpXG57XG4gICAgLy8gQ2hhbmdlIHRoZSB2aWV3IG9mIHRoZSBwYWdlXG4gICAgZnVuY3Rpb24gc2V0Vmlldyh2aWV3VG9TaG93KVxuICAgIHtcbiAgICAgICAgZG9jdW1lbnQudGl0bGUgPSBcIklubG9nZ2VuIC0gQVogR2FtZXNcIjtcblxuICAgICAgICAkKFwiI2NvbXBvbmVudFwiKS5sb2FkKHZpZXdUb1Nob3cpO1xuICAgIH1cblxuICAgIC8vIEFjdGlvbkxpc3RlbmVyIHRoYXQgZXhlY3V0ZXMgYWN0aW9ucyBvbiBzcGVjaWZpYyBldmVudHNcbiAgICBmdW5jdGlvbiBzZXRBY3Rpb25MaXN0ZW5lcihldmVudEhhbmRsZXIpXG4gICAge1xuICAgICAgICAvLyQoZG9jdW1lbnQpLnJlYWR5KGV2ZW50SGFuZGxlcik7XG4gICAgICAgICQoXCIjY29tcG9uZW50XCIpLm9uKFwic3VibWl0XCIsIFwiI3Jlc2V0Zm9ybVwiLCBldmVudEhhbmRsZXIpO1xuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXG4gICAgcmV0dXJuIHtcbiAgICAgICAgc2V0Vmlldzogc2V0VmlldyxcbiAgICAgICAgc2V0QWN0aW9uTGlzdGVuZXI6IHNldEFjdGlvbkxpc3RlbmVyXG4gICAgfVxufTtcblxuLypcbnZhciBSZXNldFBhc3N3b3JkVmlld0hlbHBlciA9IGZ1bmN0aW9uKClcbntcbiAgICAvLyBDaGFuZ2UgdGhlIHZpZXcgb2YgdGhlIHBhZ2VcbiAgICBmdW5jdGlvbiBzZXRWaWV3KHZpZXdEYXRhKVxuICAgIHtcbiAgICAgICAgJChcIiNjb21wb25lbnRcIikubG9hZCgndmlld3MvcmVzZXRwYXNzd29yZC9yZXNldHBhc3N3b3JkLmh0bWwnKTtcbiAgICB9XG5cbiAgICAvLyBBY3Rpb25MaXN0ZW5lciB0aGF0IGV4ZWN1dGVzIGFjdGlvbnMgb24gc3BlY2lmaWMgZXZlbnRzXG4gICAgZnVuY3Rpb24gc2V0QWN0aW9uTGlzdGVuZXIoZXZlbnRIYW5kbGVyKVxuICAgIHtcbiAgICAgICAgLy8kKGRvY3VtZW50KS5yZWFkeShldmVudEhhbmRsZXIpO1xuICAgICAgICAkKFwiI2NvbXBvbmVudFwiKS5vbihcInN1Ym1pdFwiLCBcIiNyZXNldGZvcm1cIiwgZXZlbnRIYW5kbGVyKTtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBieSBvdGhlciBwcm9ncmFtcyAodGhlIGNvbnRyb2xsZXIgaW4gdGhpcyBjYXNlKVxuICAgIHJldHVybiB7XG4gICAgICAgIHNldFZpZXc6IHNldFZpZXcsXG4gICAgICAgIHNldEFjdGlvbkxpc3RlbmVyOiBzZXRBY3Rpb25MaXN0ZW5lclxuICAgIH1cbn07XG4qLyIsInZhciBQcm9kdWN0Vmlld0hlbHBlciA9IGZ1bmN0aW9uKClcbntcbiAgICAvLyBDaGFuZ2UgdGhlIHZpZXcgb2YgdGhlIHBhZ2VcbiAgICBmdW5jdGlvbiBzZXRWaWV3KHByb2R1Y3QpXG4gICAge1xuICAgICAgICBkb2N1bWVudC50aXRsZSA9IHByb2R1Y3QudGl0bGUgKyBcIiAtIEFaIEdhbWVzXCI7XG5cbiAgICAgICAgICQoXCIjY29tcG9uZW50XCIpLmxvYWQoJy92aWV3cy9zaW5nbGVfcHJvZHVjdC9zaW5nbGVfcHJvZHVjdC5odG1sJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICQoXCIuc2luZ2xlcHJvZHVjdF9faW1hZ2UgaW1nXCIpLmF0dHIoXCJzcmNcIiwgcHJvZHVjdC5pbWFnZSk7XG4gICAgICAgICAgICAgICAgJChcIi5zaW5nbGVwcm9kdWN0X190aXRsZVwiKS5odG1sKHByb2R1Y3QudGl0bGUpO1xuICAgICAgICAgICAgICAgICQoXCIuc2luZ2xlcHJvZHVjdF9fcHJpY2VcIikuaHRtbChcIuKCrCBcIiArIHByb2R1Y3QucHJpY2UpO1xuXG4gICAgICAgICAgICAgICAgJChcIi5zaW5nbGVwcm9kdWN0X19lYW5cIikuYXBwZW5kKHByb2R1Y3QuZWFuX251bWJlcik7XG4gICAgICAgICAgICAgICAgJChcIi5zaW5nbGVwcm9kdWN0X19wbGF0Zm9ybVwiKS5hcHBlbmQoUGxhdGZvcm1Mb2dvKHByb2R1Y3QucGxhdGZvcm0pKTsgLy8gZnVuY3RpZSB2b29yIGxvZ29cbiAgICAgICAgICAgICAgICAkKFwiLnNpbmdsZXByb2R1Y3RfX3B1Ymxpc2hlclwiKS5hcHBlbmQoUGxhdGZvcm1Mb2dvKHByb2R1Y3QucHVibGlzaGVyKSk7IC8vIGZ1bmN0aWUgdm9vciBsb2dvXG4gICAgICAgICAgICAgICAgJChcIi5zaW5nbGVwcm9kdWN0X19wZWdpXCIpLmFwcGVuZChwcm9kdWN0LnBlZ2lfYWdlKTtcbiAgICAgICAgICAgICAgICAkKFwiLnNpbmdsZXByb2R1Y3RfX2dlbnJlXCIpLmFwcGVuZChwcm9kdWN0LmdlbnJlKTtcbiAgICAgICAgICAgICAgICAkKFwiLnNpbmdsZXByb2R1Y3RfX2Rlc2NyXCIpLmh0bWwocHJvZHVjdC5kZXNjcmlwdGlvbilcbiAgICAgICAgICAgICAgICAkKFwiLmFkZHRvY2FydFwiKS5hdHRyKFwiZGF0YS1pZFwiLCBwcm9kdWN0LmVhbl9udW1iZXIpO1xuICAgICAgICAgICAgICAgICQoXCIuYWRkVG9XaXNobGlzdEJ1dHRvblwiKS5hdHRyKFwib25jbGlja1wiLCBcIldpc2hsaXN0SGVscGVyLmFkZEl0ZW0oXCIgKyBwcm9kdWN0LmVhbl9udW1iZXIgKyBcIik7XCIpO1xuXG4gICAgICAgICAgICAgICAgdmFyIGQgPSBuZXcgRGF0ZShwcm9kdWN0LnJlbGVhc2VfZGF0ZSk7XG5cbiAgICAgICAgICAgICAgICB2YXIgbW9udGhzID0gW1wiamFudWFyaVwiLCBcImZlYnJ1YXJpXCIsIFwibWFhcnRcIiwgXCJhcHJpbFwiLCBcIm1laVwiLCBcImp1bmlcIiwgXCJqdWxpXCIsIFwiYXVndXN0dXNcIiwgXCJzZXB0ZW1iZXJcIiwgXCJva3RvYmVyXCIsIFwibm92ZW1iZXJcIiwgXCJkZWNlbWJlclwiXTtcblxuICAgICAgICAgICAgICAgICQoXCIuc2luZ2xlcHJvZHVjdF9fcmVsZWFzZWRhdGVcIikuYXBwZW5kKGQuZ2V0RGF5KCkgKyBcIiBcIiArIG1vbnRoc1tkLmdldE1vbnRoKCldICsgXCIgXCIgKyBkLmdldEZ1bGxZZWFyKCkpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXRBY3Rpb25MaXN0ZW5lcihhY3Rpb24pXG4gICAge1xuICAgICAgICAvLyB1c2VyIGZpbGxzIGluIHJlZ2lzdGVyIGZvcm1cbiAgICAgICAgLy8gdXNlciBwcmVzc2VzICdyZWdpc3RlcidcblxuICAgICAgICAvLyBpZiB1c2VyIHByZXNzZXMgJ3JlZ2lzdGVyJywgcGVyZm9ybSBhY3Rpb25cbiAgICAgICAgJChkb2N1bWVudCkucmVhZHkoYWN0aW9uKTtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBieSBvdGhlciBwcm9ncmFtcyAodGhlIGNvbnRyb2xsZXIgaW4gdGhpcyBjYXNlKVxuICAgIHJldHVybiB7XG4gICAgICAgIHNldFZpZXc6IHNldFZpZXcsXG4gICAgICAgIHNldEFjdGlvbkxpc3RlbmVyOiBzZXRBY3Rpb25MaXN0ZW5lclxuICAgIH1cbn07IiwidmFyIFdpc2hsaXN0Vmlld0hlbHBlciA9IGZ1bmN0aW9uKClcbntcbiAgICAvL2NoYW5nZSB2aWV3IG9mIHBhZ2VcbiAgICBmdW5jdGlvbiBzZXRWaWV3KHZpZXdEYXRhKVxuICAgIHtcbiAgICAgICAgZG9jdW1lbnQudGl0bGUgPSBcIldpc2hsaXN0IC0gQVogR2FtZXNcIjtcbiAgICAgICAgJChcIiNjb21wb25lbnRcIikuaHRtbCgnPGRpdiBjbGFzcz1cImNvbC0xMlwiPjxkaXYgY2xhc3M9XCJjb2wtMTJcIiBpZD1cIndpc2hsaXN0XCI+PC9kaXY+PC9kaXY+Jyk7XG5cbiAgICAgICAgbG9hZFdpc2hsaXN0KHZpZXdEYXRhKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsb2FkV2lzaGxpc3Qodmlld0RhdGEpXG4gICAge1xuICAgICAgICAkKFwiI3dpc2hsaXN0XCIpLmxvYWQoJy92aWV3cy93aXNobGlzdC93aXNobGlzdC5odG1sJywgZnVuY3Rpb24gKClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudCA9IDBcblxuICAgICAgICAgICAgICAgIC8vIFVTRVIgRklSU1QgTkFNRVxuICAgICAgICAgICAgICAgIC8vJCh3aXNoX19saXN0X19oZWFkdGl0bGUpLmZpbmQoXCJ3aXNoX19saXN0X19oZWFkdGl0bGVcIikuYXBwZW5kKHVzZXJfaWQpO1xuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2codmlld0RhdGEuZmlyc3RfbmFtZSk7XG5cbiAgICAgICAgICAgICAgICAkLmVhY2godmlld0RhdGEsIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2xvbmUgcHJvZHVjdFxuICAgICAgICAgICAgICAgICAgICB2YXIgd2lzaF9fbGlzdF9faXRlbSA9ICQoJzxkaXY+JykuYXBwZW5kKCQoJyN3aXNoX19saXN0X19pdGVtJykuY2xvbmUoKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHByb2R1Y3QgaW5mb1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudCArMVxuICAgICAgICAgICAgICAgICAgICAkKHdpc2hfX2xpc3RfX2l0ZW0pLmZpbmQoXCIud2lzaF9fbGlzdF9faWRcIikuYXBwZW5kKGN1cnJlbnQpO1xuICAgICAgICAgICAgICAgICAgICAkKHdpc2hfX2xpc3RfX2l0ZW0pLmZpbmQoXCIud2lzaF9fbGlzdF9faW1hZ2UgaW1nXCIpLmF0dHIoXCJzcmNcIiwgdmFsdWUuaW1hZ2UpO1xuICAgICAgICAgICAgICAgICAgICAkKHdpc2hfX2xpc3RfX2l0ZW0pLmZpbmQoXCIud2lzaF9fbGlzdF9fdGl0bGVcIikuaHRtbCh2YWx1ZS50aXRsZSk7XG4gICAgICAgICAgICAgICAgICAgICQod2lzaF9fbGlzdF9faXRlbSkuZmluZChcIi53aXNoX19saXN0X19wcmljZVwiKS5hcHBlbmQoKFwi4oKsIFwiKSt2YWx1ZS5wcmljZSk7XG4gICAgICAgICAgICAgICAgICAgICQod2lzaF9fbGlzdF9faXRlbSkuZmluZChcIi53aXNoX19saXN0X19wbGF0Zm9ybVwiKS5hcHBlbmQoUGxhdGZvcm1Mb2dvKHZhbHVlLnBsYXRmb3JtKSk7XG4gICAgICAgICAgICAgICAgICAgICQod2lzaF9fbGlzdF9faXRlbSkuZmluZChcIi53aXNoX19saXN0X19hdmFpbGFiaWxpdHlcIikuYXBwZW5kKEJlc2NoaWtiYWFyaGVpZEtsZXVyKHZhbHVlLnN0b2NrKSk7XG4gICAgICAgICAgICAgICAgICAgICQod2lzaF9fbGlzdF9faXRlbSkuZmluZChcIi53aXNoX19saXN0X19saWtlYnV0dG9uXCIpLmFwcGVuZCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICQoXCIjd2lzaF9fbGlzdFwiKS5hcHBlbmQod2lzaF9fbGlzdF9faXRlbSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gUmVtb3ZlIHRoZSBmaXJzdCBsaXN0IGl0ZW0sIGJlY2F1c2UgdGhpcyBpdGVtIGlzIGFsd2F5cyBlbXB0eVxuICAgICAgICAgICAgJChcIiN3aXNoX19saXN0X19pdGVtXCIpLmZpcnN0KCkucmVtb3ZlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBzZXRBY3Rpb25MaXN0ZW5lcihhY3Rpb24pXG4gICAge1xuICAgICAgICAkKGRvY3VtZW50KS5yZWFkeShhY3Rpb24pOyAvLyBpZiAnZG9jdW1lbnQgcmVhZHknIHBlcmZvcm0gXCJhY3Rpb25cIlxuICAgICAgICBcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBzZXRWaWV3OiBzZXRWaWV3LFxuICAgICAgICBsb2FkV2lzaGxpc3Q6IGxvYWRXaXNobGlzdCxcbiAgICAgICAgc2V0QWN0aW9uTGlzdGVuZXI6IHNldEFjdGlvbkxpc3RlbmVyXG4gICAgfVxufSJdfQ==

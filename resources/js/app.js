function CartHelper(){this.removeProduct=function(e){},this.addProduct=function(e){}}function CookieHelper(){this.getCookie=function(e){for(var t=document.cookie.split(";"),n=0;n<t.length;n++){var r=t[n].split("=");if(r[0].trim()==e)return r[1]}},this.createCookie=function(e,t){var n=new Date;n.setTime(n.getTime()+864e5);var r="expires="+n.toUTCString();document.cookie=e+"="+t+";"+r+";path=/"},this.deleteCookie=function(e){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;"}}function showLoadScreen(){$("#component").html('<div class="spinner"><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div> </div>')}function onLoadPage(){UserHelper.isCustomer()&&($("#inloggen_text").hide(),$("#uitloggen_text").show()),UserHelper.isAdmin()?$(".visible-admin").css("display","inline-block"):$(".visible-admin").hide()}function UserHelper(){this.isLogedIn=function(){var e=CookieHelper.getCookie("access_token");return void 0!=e&&""!=e},this.isCustomer=function(){if(UserHelper.isLogedIn()){var e=this.decodeToken().usertype;if("customer"==e||"admin"==e)return!0}return!1},this.isAdmin=function(){if(UserHelper.isLogedIn()){var e=this.decodeToken().usertype;if("admin"==e)return!0}return!1},this.decodeToken=function(){var e=CookieHelper.getCookie("access_token");if(void 0!=e&&""!=e){var t=e.split(".")[1];return JSON.parse(atob(t))}}}var Router=function(){function e(e,o){if(0!=t(e)){var i=n(e);switch(i[0]){case"":case"index.html":case"products":new ProductsController(new ProductsViewHelper,new ProductsModel).main();break;case"product":new ProductController(new ProductViewHelper,new ProductModel(i[1])).main();break;case"register":new RegisterController(new RegisterViewHelper,new RegisterModel).main();break;case"login":new LoginController(new LoginViewHelper,new LoginModel).main();break;case"logout":new LogoutController(new LogoutViewHelper,new LogoutModel).main();break;case"register":new RegisterController(new RegisterViewHelper,new RegisterModel).main();break;case"resetpassword":new ResetPasswordController(new ResetPasswordViewHelper,new ResetPasswordModel).main();break;case"admin":new AdminController(new AdminViewHelper,new AdminModel).main();break;case"admin_user":new AdminUserController(new AdminUserViewHelper,new AdminUserModel(i[1])).main();break;default:new ErrorController(new ErrorViewHelper).main()}0!=o&&(""==e&&(e="index.html"),r({},"A-Z Games",e),window.scrollTo(0,0))}}function t(e){return e.indexOf("http")==-1&&e.indexOf("https")==-1&&e.indexOf("www")==-1||(window.location=e,!1)}function n(e){return 0==e.indexOf("/")&&(e=e.substring(1)),null!=this.baseUrl&&e.indexOf(this.baseUrl)!=-1&&(e=e.substring(e.indexOf(this.baseUrl)+this.baseUrl.length)),e.split(/\/(.+)?/)}function r(e,t,n){window.history.pushState(e,t,n)}return baseUrl="project-webshop/",{route:e}};$(document).ready(function(){function e(e){$(e).toggleClass("sidebar--open"),$(".overlay").toggleClass("overlay--visible"),$("body").toggleClass("sidebar--open")}$(".sidebar-toggle").click(function(t){t.preventDefault();var n=$(this).data("sidebar");e($("#"+n))}),$(".sidebar__close").click(function(t){e($(this).parent().parent())}),$(".overlay").click(function(t){e($(".sidebar"))})});var CookieHelper=new CookieHelper,UserHelper=new UserHelper;$.fn.serializeObject=function(){var e={},t=this.serializeArray();return $.each(t,function(){void 0!==e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),""!=this.value&&e[this.name].push(this.value)):""!=this.value&&(e[this.name]=this.value||"")}),e};var AdminModel=function(){function e(e){$.ajax({url:"http://localhost:8081/admin/users",type:"GET",dataType:"json",headers:{Authorization:"Bearer "+CookieHelper.getCookie("access_token")},success:function(t){e(t)},error:function(e,t,n){$("#component").load("/views/error/error.html")}})}return{getPage:e}},AdminUserModel=function(e){function t(t){$.ajax({url:"http://localhost:8081/admin/users/"+e,type:"GET",dataType:"json",headers:{Authorization:"Bearer "+CookieHelper.getCookie("access_token")},success:function(e){t(e)},error:function(e,t,n){$("#component").load("/views/error/error.html")}})}function n(t,n){$.ajax({url:"http://localhost:8081/admin/users/"+e,type:"PATCH",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify(t),headers:{Authorization:"Bearer "+CookieHelper.getCookie("access_token")},success:function(e){n(e)},error:function(e,t,n){$("#component").load("/views/error/error.html")}})}function r(t){$.ajax({url:"http://localhost:8081/admin/users/"+e,type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+CookieHelper.getCookie("access_token")},success:function(e){t(e)},error:function(e,t,n){$("#component").load("/views/error/error.html")}})}return{getPage:t,saveUserInfo:n,deleteUser:r}},CartModel=function(){function e(e){var t=CookieHelper.getCookie("cart");void 0!=t&&e(JSON.parse(t))}function t(e,t){$.ajax({url:"https://api.az-games.nl/products/"+e,type:"get",contentType:"json",success:function(e){cart={ean_number:e[0].ean_number,title:e[0].title,price:e[0].price,image:e[0].image},t(cart);var n=CookieHelper.getCookie("cart");void 0==n?CookieHelper.createCookie("cart",JSON.stringify([cart])):(n=JSON.parse(n),n.push(cart),CookieHelper.createCookie("cart",JSON.stringify(n)))},error:function(e,t,n){$("#component").load("/views/error/error.html")}})}function n(e){for(cart=JSON.parse(CookieHelper.getCookie("cart")),i=0;i<cart.length;i++)if(cart[i].ean_number==e){cart.splice(i,1);break}CookieHelper.createCookie("cart",JSON.stringify(cart))}return{getCart:e,addProduct:t,removeProduct:n}},LoginModel=function(){function e(e,t,n){$.ajax({url:"https://api.az-games.nl/user/login",type:"GET",dataType:"json",headers:{Authorization:"Basic "+btoa(e+":"+t)},success:function(e){CookieHelper.createCookie("access_token",e.access_token),CookieHelper.createCookie("user_id",e.user_id),onLoadPage(),n(e)},error:function(e,t,n){$("#error_message").show()}})}return{login:e}},LogoutModel=function(){function e(e){function t(e){for(var t=document.cookie.split(";"),n=0;n<t.length;n++){var r=t[n].split("=");if(r[0].trim()==e)return r[1]}}$.ajax({url:"https://api.az-games.nl/user/logout",type:"post",dataType:"json",data:JSON.stringify({user_id:t("user_id")}),success:function(t){CookieHelper.deleteCookie("access_token"),CookieHelper.deleteCookie("user_id"),onLoadPage(),e(t)},error:function(e,t,n){$("#error_message").show()}})}return{logout:e}},PageModel=function(){function e(e){$.ajax({url:"https://api.az-games.nl/user",type:"get",dataType:"json",headers:{Authorization:"Bearer "+t("access_token")},success:function(t){e(t)},error:function(e,t,n){$("#component").load("/views/error/error.html")}})}function t(e){for(var t=document.cookie.split(";"),n=0;n<t.length;n++){var r=t[n].split("=");if(r[0]==e)return r[1]}}return{getPage:e}},ProductsModel=function(){function e(e,t){$.ajax({url:"https://api.az-games.nl/products?"+e,type:"get",dataType:"json",success:function(e){t(e)},error:function(e,t,n){$("#component").load("/views/error/error.html")}})}return{getPage:e}},RegisterModel=function(){function e(e,t){$.ajax({url:"https://api.az-games.nl/user/register",type:"post",dataType:"json",data:JSON.stringify({e_mail:e.e_mailadres,password:e.wachtwoord,first_name:e.voornaam,insertion:e.tussenvoegsel,surname:e.achternaam,gender:e.gender,date_of_birth:e.birth_date,phone_number:e.mobiel_nummer,secret_question:e.security_question,secret_question_answer:e.security_answer,postal_code:e.postcode,number:e.huisnummer,street_name:e.straatnaam,city:e.plaats}),success:function(e){t(e)},error:function(e,t,n){$("#regi_api_error_message").show()}})}return{register:e}},ResetPasswordModel=function(){function e(e,t){console.log(e),$.ajax({url:"https://api.az-games.nl/user/resetpassword",type:"post",dataType:"json",data:JSON.stringify({email:e.e_mailadres,secret_question_answer:e.security_answer,secret_question:e.security_question,new_password:e.wachtwoord,repeat_password:e.wachtwoord2}),success:function(e){t(e)},error:function(e,t,n){$("#reset_password_api_error_message").show()}})}return{resetpassword:e}},ProductModel=function(e){function t(t){$.ajax({url:"https://api.az-games.nl/products/"+e,type:"get",dataType:"json",success:function(e){t(e[0])},error:function(e,t,n){$("#component").load("/views/error/error.html")}})}return{GetProductInfo:t}},UserModel=function(e){function t(t){$.ajax({url:"https://api.az-games.nl/users/"+e,type:"get",dataType:"json",success:function(e){t(e[0])},error:function(e,t,n){$("#component").load("/error.html")}})}return{GetUserInfo:t}},AdminController=function(e,t){function n(){s.setActionListener(r)}function r(){i.getPage(o)}function o(e){s.setView(e)}var i=t,s=e;return{main:n}},AdminUserController=function(e,t){function n(){c.setActionListener(r),e.setSaveListener(i),e.setDeleteListener(s)}function r(){a.getPage(o)}function o(e){c.setView(e)}function i(e){e.preventDefault(),e.stopImmediatePropagation();var t=$(this).serializeObject();a.saveUserInfo(t,function(e){alert("Gebruiker succesvol geÃ¼pdate.")})}function s(){a.deleteUser(function(){console.log("verwijderd?"),alert("Gebruiker succesvol gedelete.")})}var a=t,c=e;return{main:n}},CartController=function(e,t){function n(){s.getCart(function(e){a.setView(e)})}function r(e){s.addProduct(e,function(e){a.addItem(e)})}function o(e){s.removeProduct(e,function(e){})}function i(){a.setActionListener(n),a.setAddProductListener(r),a.setRemoveListener(o)}var s=t,a=e;return{main:i}},DeleteController=function(e,t){},ErrorController=function(e){function t(){n.setView()}var n=e;return{main:t}},LoginController=function(e,t){function n(e){e.preventDefault(),e.stopImmediatePropagation();var t={};$.each($(this).serializeArray(),function(e,n){t[n.name]=n.value}),o.login(t.email,t.password,function(e){$("#inloggen_text").hide(),$("#uitloggen_text").show(),new PageController(new PageViewHelper,new PageModel).main()})}function r(){i.setView(),i.setActionListener(n)}var o=t,i=e;return{main:r}},LogoutController=function(e,t){function n(e){o.logout(function(e){$("#inloggen_text").show(),$("#uitloggen_text").hide(),i.setView()})}function r(){i.setActionListener(n)}var o=t,i=e;return{main:r}},PageController=function(e,t){function n(e){o.getPage(function(e){i.setView(e)})}function r(){i.setActionListener(n)}var o=t,i=e;return{main:r}},ProductsController=function(e,t){function n(){i.getPage("",function(e){s.setView(e)})}function r(e){e.preventDefault();var t=$(this).serialize();i.getPage(t,function(e){s.loadProducts(e)})}function o(){s.setActionListener(n),s.setFilterListener(r)}var i=t,s=e;return{main:o}},RegisterController=function(e,t){function n(){console.log("in actionPerformed"),event.preventDefault(),$("#regi_api_error_message").hide(),$("#ww2_error_message").hide();var e={};$.each($(this).serializeArray(),function(t,n){e[n.name]=n.value}),e.birth_date=e.jaar+"-"+e.maand+"-"+e.dag,console.log(e);var t=!1,n=["voornaam","achternaam","postcode","huisnummer","e_mailadres","wachtwoord","wachtwoord2","security_answer"];$.each(n,function(e,t){$("#"+t).removeClass("invalid")}),$.each(n,function(n,r){""==e[r]&&($("#"+r).addClass("invalid"),t=!0)}),t&&(window.scrollTo(0,0),$("#register_error_message").show());var r=!1;return e.wachtwoord!=e.wachtwoord2&&(r=!0,$("#ww2_error_message").show(),$("#wachtwoord").addClass("invalid"),$("#wachtwoord2").addClass("invalid")),!t&&!r&&(console.log("continued"),void o.register(e,function(e){i.setView("/views/register/after_register.html")}))}function r(){i.setView("/views/register/register.html"),i.setActionListener(n)}var o=t,i=e;return{main:r}},ResetPasswordController=function(e,t){function n(){console.log("in actionPerformed"),event.preventDefault(),$("#reset_password_api_error_message").hide(),$("#ww2_error_message").hide();var e={};$.each($(this).serializeArray(),function(t,n){e[n.name]=n.value});var t=!1,n=["wachtwoord","wachtwoord2","e_mailadres","security_answer"];$.each(n,function(e,t){$("#"+t).removeClass("invalid")}),$.each(n,function(n,r){""==e[r]&&($("#"+r).addClass("invalid"),t=!0)}),t&&(window.scrollTo(0,0),$("#reset_error_message").show());var r=!1;return e.wachtwoord!=e.wachtwoord2&&(r=!0,$("#ww2_error_message").show(),$("#wachtwoord").addClass("invalid"),$("#wachtwoord2").addClass("invalid")),!t&&!r&&(console.log("continued"),void o.resetpassword(e,function(e){i.setView("views/resetpassword/after_reset.html")}))}function r(){i.setView("views/resetpassword/resetpassword.html"),i.setActionListener(n)}var o=t,i=e;return{main:r}},ProductController=function(e,t){function n(t){e.setView(t)}function r(){t.GetProductInfo(n)}return{main:r,showView:n}},AdminViewHelper=function(){function e(e){$(document).ready(e)}function t(e){document.title="Admin - AZ Games",$("#component").load("/views/admin/admin.html",function(){$.each(e,function(e,t){var n=$("#single_user").clone();$(n).find(".user__firstname").html(t.first_name),$(n).find(".user__firstname").attr("href","/admin_user/"+t.user_id),$(n).find(".user__insertion").html(t.insertion),$(n).find(".user__lastname").html(t.surname),$(n).find(".user__email").html(t.email),$(n).find(".user__phonenumber").html(t.phone_number),$("#users_body").append(n)}),$("#single_user").first().remove()})}return{setActionListener:e,setView:t}},AdminUserViewHelper=function(){function e(e){$(document).ready(e)}function t(e){$("#component").load("/views/adminuser/adminuser.html",function(){$.each(e,function(e,t){$("#first_name").val(t.first_name),$("#insertion").val(t.insertion),$("#surname").val(t.surname),$("#user_type").val(t.user_type),$("#email").val(t.email),$("#password").attr("placeholder","Vul hier iets in om het wachtwoord te veranderen"),$("#gender").val(t.gender),$("#date_of_birth").val(t.date_of_birth),$("#phone_number").val(t.phone_number),$("#is_active").val(t.is_active)})})}function n(e){$(document).on("submit","#userform",e)}function r(e){$("#component").off().on("click","#delete_btn",e)}return{setActionListener:e,setView:t,setSaveListener:n,setDeleteListener:r}},CartViewHelper=function(){function e(e){""!=e&&e.forEach(function(e,t){n(e)})}function t(e){e=parseFloat(e)+parseFloat($(".cart__total .price").html().substr(1)),$(".cart__total .price").html("â¬"+parseFloat(e).toFixed(2))}function n(e){var n=$("<div>").html($(".sidebar__content__tmp").html());n.find(".cart__item__title").html(e.title),n.find(".cart__item__price").html("â¬"+e.price),n.find(".cart__item__image img").attr("src",e.image),n.find(".cart__item").attr("data-id",e.ean_number),$(".cart").append(n);var r=$(".cart_button .count").html();$(".cart_button .count").html(parseInt(r)+1),t(e.price)}function r(e){$(document).ready(e)}function o(e){$("body").on("click",".addtocart",function(t){t.preventDefault();var n=$(this).data("id");e(n)})}function i(e){$("body").on("click",".cart__item__remove",function(n){var r=$(this).parent(),o=$(this).parent().data("id");$(r).addClass("cart__item--removed"),$(r).on("animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",function(){$(this).remove()});var i=$(".cart_button .count").html();$(".cart_button .count").html(parseInt(i)-1),e(o),t(-$(r).find(".cart__item__price").html().substr(1))})}return{setView:e,addItem:n,updateTotalPrice:t,setActionListener:r,setAddProductListener:o,setRemoveListener:i}},ErrorViewHelper=function(){function e(){document.title="Oeps - AZ Games",$("#component").load("/views/error/error.html")}function t(e){$(document).ready(e)}return{setView:e,setActionListener:t}},LoginViewHelper=function(){function e(){document.title="Inloggen - AZ Games",$("#component").load("/views/login/login.html")}function t(e){$("#component").on("submit","#loginform",e)}return{setView:e,setActionListener:t}},LogoutViewHelper=function(){function e(){document.title="Uitloggen - AZ Games",$("#component").load("/views/logout/logout.html")}function t(e){$(document).ready(e)}return{setView:e,setActionListener:t}},PageViewHelper=function(){function e(e){document.title="Welkom - AZ Games",$("#component").load("/views/page/page.html",function(){"customer"==e[0].user_type&&$("#user-block").append("<h1>Je lees dit alleen als je een customer</h1>"),"admin"==e[0].user_type&&$("#user-block").append("<h1>Je lees dit alleen als je een administrator</h1>")})}function t(e){$(document).ready(e)}return{setView:e,setActionListener:t}},ResetPasswordViewHelper=function(){function e(e){document.title="Inloggen - AZ Games",$("#component").load(e)}function t(e){$("#component").on("submit","#resetform",e)}return{setView:e,setActionListener:t}},RegisterViewHelper=function(){function e(e){document.title="Registreren - AZ Games",$("#component").load(e)}function t(e){$("#component").on("submit","#registerform",e)}return{setView:e,setActionListener:t}},ProductsViewHelper=function(){function e(e){document.title="Producten - AZ Games",$("#component").html('<div class="col-12"><div class="col-3" id="filters"></div><div class="col-9" id="products"></div></div>'),$("#filters").load("/views/products/filters.html"),t(e)}function t(e){$("#products").load("/views/products/products.html",function(){$.each(e,function(e,t){var o=$("<div>").append($("#product__list__item").clone());$(o).find(".product__title").html(t.title),$(o).find(".product__subtitle").append(t.genre+" | PEGI "+t.pegi_age+" | "+r(t.platform)),$(o).find(".product__description").html(n(t.description)),$(o).find(".product__price").append("â¬ "+t.price),$(o).find("#buttons__info, .product__image a, .product__title").attr("href","product/"+t.ean_number),$(o).find(".product__image img").attr("src",t.image),$(o).find(".addtocart").attr("data-id",t.ean_number),$("#product__list").append(o)}),$("#product__list__item").first().remove()})}function n(e){var t=50,n=e.split(" ");if(n.length>t){var r="";for(i=0;i<t;i++)r+=n[i]+" ";return r+"..."}return e}function r(e){switch(e=e.toUpperCase()){case"PS4":return"<img src='/resources/images/icons/ps.png' />";case"PC":return"<img src='/resources/images/icons/windows.png' />";case"XBOX":return"<img src='/resources/images/icons/xbox.png' />";case"NINTENDO":return"<img src='/resources/images/icons/nintendo.png' />";default:return e}}function o(e){$(document).ready(e)}function s(e){$("#component").off().on("change","input[type=checkbox]",function(e){$("#product_filter").submit()}),$("#component").on("change keyup","input[name=price-max], input[name=price-min]",function(e){null==$("#pricemin").val()?$("#pricemin").val(0):$("#product_filter").submit()}),$("#component").on("submit","#product_filter",e)}return{setView:e,loadProducts:t,setActionListener:o,setFilterListener:s}},ProductViewHelper=function(){function e(e){document.title=e.title+" - AZ Games",$("#component").load("/views/single_product/single_product.html",function(){$(".singleproduct__image img").attr("src",e.image),$(".singleproduct__title").html(e.title),$(".singleproduct__price").html("â¬ "+e.price),$(".singleproduct__ean").append(e.ean_number),$(".singleproduct__platform").append(e.platform),$(".singleproduct__publisher").append(e.publisher),$(".singleproduct__pegi").append(e.pegi_age),$(".singleproduct__genre").append(e.genre),$(".singleproduct__descr").html(e.description),$(".addtocart").attr("data-id",e.ean_number);var t=new Date(e.release_date),n=["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"];$(".singleproduct__releasedate").append(t.getDay()+" "+n[t.getMonth()]+" "+t.getFullYear())})}function t(e){$(document).ready(e)}return{setView:e,setActionListener:t}};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImhlbHBlcnMvY2FydC5qcyIsImhlbHBlcnMvY29va2llLmpzIiwiaGVscGVycy9nbG9iYWwuanMiLCJoZWxwZXJzL3VzZXIuanMiLCJyb3V0ZXIuanMiLCJzaWRlYmFyLmpzIiwiaGVscGVycy9zZXJpYWxpemVvYmplY3QuanMiLCJhZG1pbl9tb2RlbC5qcyIsImFkbWludXNlcl9tb2RlbC5qcyIsImNhcnRfbW9kZWwuanMiLCJsb2dpbl9tb2RlbC5qcyIsImxvZ291dF9tb2RlbC5qcyIsInBhZ2VfbW9kZWwuanMiLCJwcm9kdWN0c19tb2RlbC5qcyIsInJlZ2lzdGVyX21vZGVsLmpzIiwicmVzZXRwYXNzd29yZF9tb2RlbC5qcyIsInNpbmdsZV9wcm9kdWN0X21vZGVsLmpzIiwidXNlcl9tb2RlbC5qcyIsImFkbWluX2NvbnRyb2xsZXIuanMiLCJhZG1pbnVzZXJfY29udHJvbGxlci5qcyIsImNhcnRfY29udHJvbGxlci5qcyIsImRlbGV0ZV9jb250cm9sbGVyLmpzIiwiZXJyb3JfY29udHJvbGxlci5qcyIsImxvZ2luX2NvbnRyb2xsZXIuanMiLCJsb2dvdXRfY29udHJvbGxlci5qcyIsInBhZ2VfY29udHJvbGxlci5qcyIsInByb2R1Y3RzX2NvbnRyb2xsZXIuanMiLCJyZWdpc3Rlcl9jb250cm9sbGVyLmpzIiwicmVzZXRwYXNzd29yZF9jb250cm9sbGVyLmpzIiwic2luZ2xlX3Byb2R1Y3RfY29udHJvbGxlci5qcyIsImFkbWluL2FkbWluX3ZpZXcuanMiLCJhZG1pbnVzZXIvYWRtaW51c2VyX3ZpZXcuanMiLCJjYXJ0L2NhcnRfdmlldy5qcyIsImVycm9yL2Vycm9yX3ZpZXcuanMiLCJsb2dpbi9sb2dpbl92aWV3LmpzIiwibG9nb3V0L2xvZ291dF92aWV3LmpzIiwicGFnZS9wYWdlX3ZpZXcuanMiLCJyZXNldHBhc3N3b3JkL3Jlc2V0cGFzc3dvcmRfdmlldy5qcyIsInJlZ2lzdGVyL3JlZ2lzdGVyX3ZpZXcuanMiLCJwcm9kdWN0cy9wcm9kdWN0c192aWV3LmpzIiwic2luZ2xlX3Byb2R1Y3Qvc2luZ2xlX3Byb2R1Y3Rfdmlldy5qcyJdLCJuYW1lcyI6WyJDYXJ0SGVscGVyIiwidGhpcyIsInJlbW92ZVByb2R1Y3QiLCJpZCIsImFkZFByb2R1Y3QiLCJDb29raWVIZWxwZXIiLCJnZXRDb29raWUiLCJuYW1lIiwiY29va2llcyIsImRvY3VtZW50IiwiY29va2llIiwic3BsaXQiLCJpIiwibGVuZ3RoIiwidHJpbSIsImNyZWF0ZUNvb2tpZSIsInZhbHVlIiwiZCIsIkRhdGUiLCJzZXRUaW1lIiwiZ2V0VGltZSIsImV4cGlyZXMiLCJ0b1VUQ1N0cmluZyIsImRlbGV0ZUNvb2tpZSIsInNob3dMb2FkU2NyZWVuIiwiJCIsImh0bWwiLCJvbkxvYWRQYWdlIiwiVXNlckhlbHBlciIsImlzQ3VzdG9tZXIiLCJoaWRlIiwic2hvdyIsImlzQWRtaW4iLCJjc3MiLCJpc0xvZ2VkSW4iLCJhY2Nlc3NUb2tlbiIsInVuZGVmaW5lZCIsInVzZXJ0eXBlIiwiZGVjb2RlVG9rZW4iLCJwYXlsb2FkIiwiSlNPTiIsInBhcnNlIiwiYXRvYiIsIlJvdXRlciIsInJvdXRlIiwidXJsIiwiaGlzdG9yeSIsImlzSW50ZXJuYWwiLCJwYXJ0aWNsZXMiLCJnZXRQYXJ0aWNsZXMiLCJQcm9kdWN0c0NvbnRyb2xsZXIiLCJQcm9kdWN0c1ZpZXdIZWxwZXIiLCJQcm9kdWN0c01vZGVsIiwibWFpbiIsIlByb2R1Y3RDb250cm9sbGVyIiwiUHJvZHVjdFZpZXdIZWxwZXIiLCJQcm9kdWN0TW9kZWwiLCJSZWdpc3RlckNvbnRyb2xsZXIiLCJSZWdpc3RlclZpZXdIZWxwZXIiLCJSZWdpc3Rlck1vZGVsIiwiTG9naW5Db250cm9sbGVyIiwiTG9naW5WaWV3SGVscGVyIiwiTG9naW5Nb2RlbCIsIkxvZ291dENvbnRyb2xsZXIiLCJMb2dvdXRWaWV3SGVscGVyIiwiTG9nb3V0TW9kZWwiLCJSZXNldFBhc3N3b3JkQ29udHJvbGxlciIsIlJlc2V0UGFzc3dvcmRWaWV3SGVscGVyIiwiUmVzZXRQYXNzd29yZE1vZGVsIiwiQWRtaW5Db250cm9sbGVyIiwiQWRtaW5WaWV3SGVscGVyIiwiQWRtaW5Nb2RlbCIsIkFkbWluVXNlckNvbnRyb2xsZXIiLCJBZG1pblVzZXJWaWV3SGVscGVyIiwiQWRtaW5Vc2VyTW9kZWwiLCJFcnJvckNvbnRyb2xsZXIiLCJFcnJvclZpZXdIZWxwZXIiLCJ3cml0ZUhpc3RvcnkiLCJ3aW5kb3ciLCJzY3JvbGxUbyIsImluZGV4T2YiLCJsb2NhdGlvbiIsInN1YnN0cmluZyIsImJhc2VVcmwiLCJvYmplY3QiLCJ0aXRsZSIsInB1c2hTdGF0ZSIsInJlYWR5IiwidG9nZ2xlU2lkZWJhciIsInNpZGViYXIiLCJ0b2dnbGVDbGFzcyIsImNsaWNrIiwiZSIsInByZXZlbnREZWZhdWx0IiwiZGF0YSIsInBhcmVudCIsImZuIiwic2VyaWFsaXplT2JqZWN0IiwibyIsImEiLCJzZXJpYWxpemVBcnJheSIsImVhY2giLCJwdXNoIiwiZ2V0UGFnZSIsImNhbGxiYWNrIiwiYWpheCIsInR5cGUiLCJkYXRhVHlwZSIsImhlYWRlcnMiLCJBdXRob3JpemF0aW9uIiwic3VjY2VzcyIsImVycm9yIiwieGhyIiwic3RhdHVzIiwibG9hZCIsInNhdmVVc2VySW5mbyIsImNvbnRlbnRUeXBlIiwic3RyaW5naWZ5IiwiZGVsZXRlVXNlciIsIkNhcnRNb2RlbCIsImdldENhcnQiLCJjYXJ0IiwiZWFuX251bWJlciIsInByaWNlIiwiaW1hZ2UiLCJjdXJyZW50Q2FydCIsInNwbGljZSIsImxvZ2luIiwiZW1haWwiLCJwYXNzd29yZCIsImJ0b2EiLCJhY2Nlc3NfdG9rZW4iLCJ1c2VyX2lkIiwibG9nb3V0IiwiUGFnZU1vZGVsIiwiZmlsdGVyIiwicmVnaXN0ZXIiLCJmb3JtRGF0YSIsImVfbWFpbCIsImVfbWFpbGFkcmVzIiwid2FjaHR3b29yZCIsImZpcnN0X25hbWUiLCJ2b29ybmFhbSIsImluc2VydGlvbiIsInR1c3NlbnZvZWdzZWwiLCJzdXJuYW1lIiwiYWNodGVybmFhbSIsImdlbmRlciIsImRhdGVfb2ZfYmlydGgiLCJiaXJ0aF9kYXRlIiwicGhvbmVfbnVtYmVyIiwibW9iaWVsX251bW1lciIsInNlY3JldF9xdWVzdGlvbiIsInNlY3VyaXR5X3F1ZXN0aW9uIiwic2VjcmV0X3F1ZXN0aW9uX2Fuc3dlciIsInNlY3VyaXR5X2Fuc3dlciIsInBvc3RhbF9jb2RlIiwicG9zdGNvZGUiLCJudW1iZXIiLCJodWlzbnVtbWVyIiwic3RyZWV0X25hbWUiLCJzdHJhYXRuYWFtIiwiY2l0eSIsInBsYWF0cyIsInJlc2V0cGFzc3dvcmQiLCJjb25zb2xlIiwibG9nIiwibmV3X3Bhc3N3b3JkIiwicmVwZWF0X3Bhc3N3b3JkIiwid2FjaHR3b29yZDIiLCJlYW4iLCJHZXRQcm9kdWN0SW5mbyIsIlVzZXJNb2RlbCIsInVzZXJpZCIsIkdldFVzZXJJbmZvIiwidmlld0hlbHBlciIsIm1vZGVsIiwiVmlld0hlbHBlciIsInNldEFjdGlvbkxpc3RlbmVyIiwiTW9kZWwiLCJzZXRWaWV3Iiwic2V0U2F2ZUxpc3RlbmVyIiwic2V0RGVsZXRlTGlzdGVuZXIiLCJldmVudCIsInN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiIsImFsZXJ0IiwiQ2FydENvbnRyb2xsZXIiLCJhZGRJdGVtIiwic2V0QWRkUHJvZHVjdExpc3RlbmVyIiwic2V0UmVtb3ZlTGlzdGVuZXIiLCJEZWxldGVDb250cm9sbGVyIiwiYWN0aW9uUGVyZm9ybWVkIiwiZmllbGQiLCJQYWdlQ29udHJvbGxlciIsIlBhZ2VWaWV3SGVscGVyIiwiVmlldyIsImZpbHRlclByb2R1Y3RzIiwiZmlsdGVycyIsInNlcmlhbGl6ZSIsImxvYWRQcm9kdWN0cyIsInNldEZpbHRlckxpc3RlbmVyIiwiamFhciIsIm1hYW5kIiwiZGFnIiwibWFuZGF0b3J5RmllbGRNaXNzZXMiLCJtYW5kYXRvcnlGaWVsZHMiLCJtYW5GaWVsZCIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJwYXNzd29yZHNOb3RJZGVudGljYWwiLCJzaG93VmlldyIsImFjdGlvbiIsImtleSIsInVzZXIiLCJjbG9uZSIsImZpbmQiLCJhdHRyIiwiYXBwZW5kIiwiZmlyc3QiLCJyZW1vdmUiLCJ2YWwiLCJ1c2VyX3R5cGUiLCJpc19hY3RpdmUiLCJvbiIsIm9mZiIsIkNhcnRWaWV3SGVscGVyIiwidmlld0RhdGEiLCJmb3JFYWNoIiwiaXRlbSIsImluZGV4IiwidXBkYXRlVG90YWxQcmljZSIsIm5ld1ByaWNlIiwicGFyc2VGbG9hdCIsInN1YnN0ciIsInRvRml4ZWQiLCJjYXJ0SXRlbSIsImFtb3VudCIsInBhcnNlSW50IiwiYWRkVG9DYXJ0IiwicHJvZHVjdF9pZCIsImNhcnRpdGVtIiwiZXZlbnRIYW5kbGVyIiwidmlld1RvU2hvdyIsInByb2R1Y3QiLCJnZW5yZSIsInBlZ2lfYWdlIiwiUGxhdGZvcm1Mb2dvIiwicGxhdGZvcm0iLCJDdXRTdHJpbmciLCJkZXNjcmlwdGlvbiIsInRleHQiLCJTaG93QW1vdW50IiwiV29yZHNBcnJheSIsIlNob3J0U3RyaW5nIiwicGxhdGZvcm1uYWFtIiwidG9VcHBlckNhc2UiLCJzdWJtaXQiLCJwdWJsaXNoZXIiLCJyZWxlYXNlX2RhdGUiLCJtb250aHMiLCJnZXREYXkiLCJnZXRNb250aCIsImdldEZ1bGxZZWFyIl0sIm1hcHBpbmdzIjoiQUFHQSxRQUFBQSxjQVNBQyxLQUFBQyxjQUFBLFNBQUFDLEtBVUFGLEtBQUFHLFdBQUEsU0FBQUQsS0NuQkEsUUFBQUUsZ0JBU0FKLEtBQUFLLFVBQUEsU0FBQUMsR0FJQSxJQUFBLEdBRkFDLEdBQUFDLFNBQUFDLE9BQUFDLE1BQUEsS0FFQUMsRUFBQSxFQUFBQSxFQUFBSixFQUFBSyxPQUFBRCxJQUNBLENBQ0EsR0FBQUYsR0FBQUYsRUFBQUksR0FBQUQsTUFBQSxJQUVBLElBQUFELEVBQUEsR0FBQUksUUFBQVAsRUFFQSxNQUFBRyxHQUFBLEtBYUFULEtBQUFjLGFBQUEsU0FBQVIsRUFBQVMsR0FFQSxHQUFBQyxHQUFBLEdBQUFDLEtBQ0FELEdBQUFFLFFBQUFGLEVBQUFHLFVBQUEsTUFDQSxJQUFBQyxH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aEIsVUFBQThFLE1BQUE0SCxHQUlBLE9BQ0EvQixRQUFBQSxFQUNBRixrQkFBQUEiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBIZWxwZXIgZm9yIGNhcnQgYWN0aW9uc1xuICovXG5mdW5jdGlvbiBDYXJ0SGVscGVyKClcbntcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHZhbHVlIG9mIGEgY29va2llXG4gICAgICogXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGlkICBQcm9kY3V0IElEIHRvIHJlbW92ZSBmb20gdGhlIGNhclxuICAgICAqIFxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKi9cbiAgICB0aGlzLnJlbW92ZVByb2R1Y3QgPSBmdW5jdGlvbihpZClcbiAgICB7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGQgYSBuZXcgcHJvZHVjdCB0byB0aGUgY2FydFxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpZCBQcm9kdWN0IElEIHRvIGFkZFxuICAgICAqL1xuICAgIHRoaXMuYWRkUHJvZHVjdCA9IGZ1bmN0aW9uKGlkKVxuICAgIHtcbiAgICB9XG59IiwiLyoqXG4gKiBIZWxwZXIgZm9yIGZpbmRpbmcsIGNyZWF0aW5nIGFuZCBkZWxldGluZyBjb29raWVzXG4gKi9cbmZ1bmN0aW9uIENvb2tpZUhlbHBlcigpXG57XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB2YWx1ZSBvZiBhIGNvb2tpZVxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lICBOYW1lIG9mIHRoZSBjb29raWVcbiAgICAgKiBcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICovXG4gICAgdGhpcy5nZXRDb29raWUgPSBmdW5jdGlvbihuYW1lKVxuICAgIHtcbiAgICAgICAgdmFyIGNvb2tpZXMgPSBkb2N1bWVudC5jb29raWUuc3BsaXQoJzsnKTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvb2tpZXMubGVuZ3RoOyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciBjb29raWUgPSBjb29raWVzW2ldLnNwbGl0KFwiPVwiKTtcblxuICAgICAgICAgICAgaWYgKGNvb2tpZVswXS50cmltKCkgPT0gbmFtZSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29va2llWzFdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgY29va2llXG4gICAgICogXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgICBOYW1lIG9mIHRoZSBjb29raWVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgIFZhbHVlIG9mIHRoZSBjb29raWVcbiAgICAgKiBcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIHRoaXMuY3JlYXRlQ29va2llID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpXG4gICAge1xuICAgICAgICB2YXIgZCA9IG5ldyBEYXRlKCk7XG4gICAgICAgIGQuc2V0VGltZShkLmdldFRpbWUoKSArICgxKjI0KjYwKjYwKjEwMDApKTtcbiAgICAgICAgdmFyIGV4cGlyZXMgPSBcImV4cGlyZXM9XCIrIGQudG9VVENTdHJpbmcoKTtcblxuICAgICAgICBkb2N1bWVudC5jb29raWUgPSBuYW1lICsgJz0nICsgdmFsdWUgKyAnOycgKyBleHBpcmVzICsgJztwYXRoPS8nO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlbGV0ZSBhIGNvb2tpZSBhbmQgaXQncyB2YWx1ZVxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lICBOYW1lIG9mIHRoZSBjb29raWVcbiAgICAgKiBcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIHRoaXMuZGVsZXRlQ29va2llID0gZnVuY3Rpb24obmFtZSlcbiAgICB7XG4gICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IG5hbWUgKyAnPTsgZXhwaXJlcz1UaHUsIDAxIEphbiAxOTcwIDAwOjAwOjAxIEdNVDsnO1xuICAgIH1cbn0iLCJ2YXIgQ29va2llSGVscGVyID0gbmV3IENvb2tpZUhlbHBlcigpO1xudmFyIFVzZXJIZWxwZXIgICA9IG5ldyBVc2VySGVscGVyKCk7XG5cbmZ1bmN0aW9uIHNob3dMb2FkU2NyZWVuKClcbntcbiAgICAkKFwiI2NvbXBvbmVudFwiKS5odG1sKCc8ZGl2IGNsYXNzPVwic3Bpbm5lclwiPjxkaXYgY2xhc3M9XCJib3VuY2UxXCI+PC9kaXY+PGRpdiBjbGFzcz1cImJvdW5jZTJcIj48L2Rpdj48ZGl2IGNsYXNzPVwiYm91bmNlM1wiPjwvZGl2PiA8L2Rpdj4nKTtcbn1cblxuZnVuY3Rpb24gb25Mb2FkUGFnZSgpXG57XG4gICAgaWYgKFVzZXJIZWxwZXIuaXNDdXN0b21lcigpKVxuICAgIHtcbiAgICAgICAgJChcIiNpbmxvZ2dlbl90ZXh0XCIpLmhpZGUoKTtcbiAgICAgICAgJChcIiN1aXRsb2dnZW5fdGV4dFwiKS5zaG93KCk7XG4gICAgfVxuXG4gICAgaWYgKFVzZXJIZWxwZXIuaXNBZG1pbigpKVxuICAgIHtcbiAgICAgICAgJChcIi52aXNpYmxlLWFkbWluXCIpLmNzcyhcImRpc3BsYXlcIiwgXCJpbmxpbmUtYmxvY2tcIik7XG4gICAgfVxuICAgIGVsc2VcbiAgICB7XG4gICAgICAgICQoXCIudmlzaWJsZS1hZG1pblwiKS5oaWRlKCk7XG4gICAgfVxufSIsIi8qKlxuICogSGVscGVyIGZvciB1c2VyIHJlbGF0ZWQgc3R1ZmZcbiAqL1xuZnVuY3Rpb24gVXNlckhlbHBlcigpXG57XG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgdGhlIHVzZXIgaXMgYSBndWVzdCAobm90IGxvZ2dlZCBpbilcbiAgICAgKi9cbiAgICB0aGlzLmlzTG9nZWRJbiA9IGZ1bmN0aW9uKClcbiAgICB7XG4gICAgICAgIHZhciBhY2Nlc3NUb2tlbiA9IENvb2tpZUhlbHBlci5nZXRDb29raWUoXCJhY2Nlc3NfdG9rZW5cIik7XG4gICAgICAgIFxuICAgICAgICBpZiAoYWNjZXNzVG9rZW4gIT0gdW5kZWZpbmVkICYmIGFjY2Vzc1Rva2VuICE9IFwiXCIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIHRoZSBjdXJyZW50IHVzZXIgaXMgYSBjdXN0b21lclxuICAgICAqL1xuICAgIHRoaXMuaXNDdXN0b21lciA9IGZ1bmN0aW9uKClcbiAgICB7XG4gICAgICAgIGlmIChVc2VySGVscGVyLmlzTG9nZWRJbigpKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgdXNlcnR5cGUgPSB0aGlzLmRlY29kZVRva2VuKCkudXNlcnR5cGU7XG5cbiAgICAgICAgICAgIGlmICh1c2VydHlwZSA9PSBcImN1c3RvbWVyXCIgfHwgdXNlcnR5cGUgPT0gXCJhZG1pblwiKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIHRoZSBjdXJyZW50IHVzZXIgaXMgYWRtaW5cbiAgICAgKi9cbiAgICB0aGlzLmlzQWRtaW4gPSBmdW5jdGlvbigpXG4gICAge1xuICAgICAgICBpZiAoVXNlckhlbHBlci5pc0xvZ2VkSW4oKSlcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIHVzZXJ0eXBlID0gdGhpcy5kZWNvZGVUb2tlbigpLnVzZXJ0eXBlO1xuXG4gICAgICAgICAgICBpZiAodXNlcnR5cGUgPT0gXCJhZG1pblwiKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlY29kZSB0aGUgSldUIHRva2VuXG4gICAgICovXG4gICAgdGhpcy5kZWNvZGVUb2tlbiA9IGZ1bmN0aW9uKClcbiAgICB7XG4gICAgICAgIHZhciBhY2Nlc3NUb2tlbiA9IENvb2tpZUhlbHBlci5nZXRDb29raWUoXCJhY2Nlc3NfdG9rZW5cIik7XG5cbiAgICAgICAgaWYgKGFjY2Vzc1Rva2VuICE9IHVuZGVmaW5lZCAmJiBhY2Nlc3NUb2tlbiAgIT0gXCJcIilcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIHBheWxvYWQgPSBhY2Nlc3NUb2tlbi5zcGxpdChcIi5cIilbMV07XG5cbiAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKGF0b2IocGF5bG9hZCkpO1xuICAgICAgICB9XG4gICAgfVxufSIsInZhciBSb3V0ZXIgPSBmdW5jdGlvbiAoKVxue1xuICAgIGJhc2VVcmwgPSBcInByb2plY3Qtd2Vic2hvcC9cIjtcblxuICAgIGZ1bmN0aW9uIHJvdXRlKHVybCwgaGlzdG9yeSlcbiAgICB7XG4gICAgICAgIGlmIChpc0ludGVybmFsKHVybCkgPT0gZmFsc2UpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBwYXJ0aWNsZXMgPSBnZXRQYXJ0aWNsZXModXJsKTtcblxuICAgICAgICBzd2l0Y2gocGFydGljbGVzWzBdKVxuICAgICAgICB7XG4gICAgICAgICAgICBjYXNlIFwiXCI6XG4gICAgICAgICAgICBjYXNlIFwiaW5kZXguaHRtbFwiOlxuICAgICAgICAgICAgY2FzZSBcInByb2R1Y3RzXCI6XG4gICAgICAgICAgICAgICAgbmV3IFByb2R1Y3RzQ29udHJvbGxlcihuZXcgUHJvZHVjdHNWaWV3SGVscGVyKCksIG5ldyBQcm9kdWN0c01vZGVsKCkpLm1haW4oKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJwcm9kdWN0XCI6XG4gICAgICAgICAgICAgICAgbmV3IFByb2R1Y3RDb250cm9sbGVyKG5ldyBQcm9kdWN0Vmlld0hlbHBlcigpLCBuZXcgUHJvZHVjdE1vZGVsKHBhcnRpY2xlc1sxXSkpLm1haW4oKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJyZWdpc3RlclwiOlxuICAgICAgICAgICAgICAgIG5ldyBSZWdpc3RlckNvbnRyb2xsZXIobmV3IFJlZ2lzdGVyVmlld0hlbHBlcigpLCBuZXcgUmVnaXN0ZXJNb2RlbCgpKS5tYWluKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwibG9naW5cIjpcbiAgICAgICAgICAgICAgICBuZXcgTG9naW5Db250cm9sbGVyKG5ldyBMb2dpblZpZXdIZWxwZXIoKSwgbmV3IExvZ2luTW9kZWwoKSkubWFpbigpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImxvZ291dFwiOlxuICAgICAgICAgICAgICAgIG5ldyBMb2dvdXRDb250cm9sbGVyKG5ldyBMb2dvdXRWaWV3SGVscGVyKCksIG5ldyBMb2dvdXRNb2RlbCgpKS5tYWluKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwicmVnaXN0ZXJcIjpcbiAgICAgICAgICAgICAgICBuZXcgUmVnaXN0ZXJDb250cm9sbGVyKG5ldyBSZWdpc3RlclZpZXdIZWxwZXIoKSwgbmV3IFJlZ2lzdGVyTW9kZWwoKSkubWFpbigpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInJlc2V0cGFzc3dvcmRcIjpcbiAgICAgICAgICAgICAgICBuZXcgUmVzZXRQYXNzd29yZENvbnRyb2xsZXIobmV3IFJlc2V0UGFzc3dvcmRWaWV3SGVscGVyKCksIG5ldyBSZXNldFBhc3N3b3JkTW9kZWwoKSkubWFpbigpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImFkbWluXCI6XG4gICAgICAgICAgICAgICAgbmV3IEFkbWluQ29udHJvbGxlcihuZXcgQWRtaW5WaWV3SGVscGVyKCksIG5ldyBBZG1pbk1vZGVsKCkpLm1haW4oKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJhZG1pbl91c2VyXCI6XG4gICAgICAgICAgICAgICAgbmV3IEFkbWluVXNlckNvbnRyb2xsZXIobmV3IEFkbWluVXNlclZpZXdIZWxwZXIoKSwgbmV3IEFkbWluVXNlck1vZGVsKHBhcnRpY2xlc1sxXSkpLm1haW4oKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgbmV3IEVycm9yQ29udHJvbGxlcihuZXcgRXJyb3JWaWV3SGVscGVyKCkpLm1haW4oKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChoaXN0b3J5ICE9IGZhbHNlKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAodXJsID09IFwiXCIpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdXJsID0gXCJpbmRleC5odG1sXCI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHdyaXRlSGlzdG9yeSh7fSwgXCJBLVogR2FtZXNcIiwgdXJsKVxuICAgICAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsIDApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNJbnRlcm5hbCh1cmwpXG4gICAge1xuICAgICAgICBpZiAodXJsLmluZGV4T2YoXCJodHRwXCIpICE9IC0xIHx8IHVybC5pbmRleE9mKFwiaHR0cHNcIikgIT0gLTEgfHwgdXJsLmluZGV4T2YoXCJ3d3dcIikgIT0gLTEpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9IHVybDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0UGFydGljbGVzKHVybClcbiAgICB7XG4gICAgICAgIC8vIFJlbW92ZSB0aGUgZmlyc3QgL1xuICAgICAgICBpZiAodXJsLmluZGV4T2YoXCIvXCIpID09IDApXG4gICAgICAgIHtcbiAgICAgICAgICAgIHVybCA9IHVybC5zdWJzdHJpbmcoMSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiB0aGVyZSBpcyBhIGJhc2UgdXJsIHNldCwgcmVtb3ZlIHRoZSBiYXNlIHVybFxuICAgICAgICBpZiAodGhpcy5iYXNlVXJsICE9IG51bGwgJiYgdXJsLmluZGV4T2YodGhpcy5iYXNlVXJsKSAhPSAtMSlcbiAgICAgICAge1xuICAgICAgICAgICAgdXJsID0gdXJsLnN1YnN0cmluZyh1cmwuaW5kZXhPZih0aGlzLmJhc2VVcmwpICsgdGhpcy5iYXNlVXJsLmxlbmd0aCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdXJsLnNwbGl0KC9cXC8oLispPy8pXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gd3JpdGVIaXN0b3J5KG9iamVjdCwgdGl0bGUsIHVybClcbiAgICB7XG4gICAgICAgIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZShvYmplY3QsIHRpdGxlLCB1cmwpO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIHJvdXRlOiByb3V0ZVxuICAgIH1cbn0iLCIkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpXG57XG4gICAgJChcIi5zaWRlYmFyLXRvZ2dsZVwiKS5jbGljayhmdW5jdGlvbiAoZSlcbiAgICB7XG4gICAgICAgIC8vIFByZXZlbnQgZGVmYXVsdCBjbGljayBhY3Rpb25cbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIC8vIElkIG9mIHRoZSBzaWRlYmFyIHRvIHRvZ2dsZVxuICAgICAgICB2YXIgc2lkZWJhciA9ICQodGhpcykuZGF0YShcInNpZGViYXJcIik7XG5cbiAgICAgICAgdG9nZ2xlU2lkZWJhcigkKFwiI1wiICsgc2lkZWJhcikpO1xuICAgIH0pO1xuXG4gICAgJChcIi5zaWRlYmFyX19jbG9zZVwiKS5jbGljayhmdW5jdGlvbiAoZSkge1xuICAgICAgICB0b2dnbGVTaWRlYmFyKCQodGhpcykucGFyZW50KCkucGFyZW50KCkpO1xuICAgIH0pXG5cbiAgICAkKFwiLm92ZXJsYXlcIikuY2xpY2soZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdG9nZ2xlU2lkZWJhcigkKFwiLnNpZGViYXJcIikpO1xuICAgIH0pO1xuXG4gICAgZnVuY3Rpb24gdG9nZ2xlU2lkZWJhcihzaWRlYmFyKVxuICAgIHtcbiAgICAgICAgJChzaWRlYmFyKS50b2dnbGVDbGFzcyhcInNpZGViYXItLW9wZW5cIik7XG4gICAgICAgICQoXCIub3ZlcmxheVwiKS50b2dnbGVDbGFzcyhcIm92ZXJsYXktLXZpc2libGVcIik7XG4gICAgICAgICQoXCJib2R5XCIpLnRvZ2dsZUNsYXNzKFwic2lkZWJhci0tb3BlblwiKTtcbiAgICB9XG59KTsiLCIkLmZuLnNlcmlhbGl6ZU9iamVjdCA9IGZ1bmN0aW9uKClcbntcbiAgICB2YXIgbyA9IHt9O1xuICAgIHZhciBhID0gdGhpcy5zZXJpYWxpemVBcnJheSgpO1xuICAgICQuZWFjaChhLCBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKG9bdGhpcy5uYW1lXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZiAoIW9bdGhpcy5uYW1lXS5wdXNoKSB7XG4gICAgICAgICAgICAgICAgb1t0aGlzLm5hbWVdID0gW29bdGhpcy5uYW1lXV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy52YWx1ZSAhPSBcIlwiKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG9bdGhpcy5uYW1lXS5wdXNoKHRoaXMudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRoaXMudmFsdWUgIT0gXCJcIilcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBvW3RoaXMubmFtZV0gPSB0aGlzLnZhbHVlIHx8ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIG87XG59OyIsInZhciBBZG1pbk1vZGVsID0gZnVuY3Rpb24oKVxue1xuICAgIGZ1bmN0aW9uIGdldFBhZ2UoY2FsbGJhY2spXG4gICAge1xuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgdXJsOiBcImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MS9hZG1pbi91c2Vyc1wiLCAvL1wiaHR0cHM6Ly9hcGkuYXotZ2FtZXMubmwvXG4gICAgICAgICAgICB0eXBlOiBcIkdFVFwiLFxuICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcIkF1dGhvcml6YXRpb25cIjogXCJCZWFyZXIgXCIgKyBDb29raWVIZWxwZXIuZ2V0Q29va2llKFwiYWNjZXNzX3Rva2VuXCIpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhkYXRhKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHhociwgc3RhdHVzLCBlcnJvcikge1xuICAgICAgICAgICAgICAgICQoXCIjY29tcG9uZW50XCIpLmxvYWQoXCIvdmlld3MvZXJyb3IvZXJyb3IuaHRtbFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHRoZSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgcHJvZ3JhbXMgKHRoZSBjb250cm9sbGVyIGluIHRoaXMgY2FzZSlcbiAgICByZXR1cm4ge1xuICAgICAgICBnZXRQYWdlOiBnZXRQYWdlXG4gICAgfVxuXG59OyIsInZhciBBZG1pblVzZXJNb2RlbCA9IGZ1bmN0aW9uKGlkKVxue1xuICAgIGZ1bmN0aW9uIGdldFBhZ2UoY2FsbGJhY2spXG4gICAge1xuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgdXJsOiBcImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MS9hZG1pbi91c2Vycy9cIiArIGlkLCAvL1wiaHR0cHM6Ly9hcGkuYXotZ2FtZXMubmwvXG4gICAgICAgICAgICB0eXBlOiBcIkdFVFwiLFxuICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcIkF1dGhvcml6YXRpb25cIjogXCJCZWFyZXIgXCIgKyBDb29raWVIZWxwZXIuZ2V0Q29va2llKFwiYWNjZXNzX3Rva2VuXCIpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhkYXRhKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHhociwgc3RhdHVzLCBlcnJvcikge1xuICAgICAgICAgICAgICAgICQoXCIjY29tcG9uZW50XCIpLmxvYWQoXCIvdmlld3MvZXJyb3IvZXJyb3IuaHRtbFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2F2ZVVzZXJJbmZvKGRhdGEsIGNhbGxiYWNrKVxuICAgIHtcbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHVybDogXCJodHRwOi8vbG9jYWxob3N0OjgwODEvYWRtaW4vdXNlcnMvXCIgKyBpZCwgLy9cImh0dHBzOi8vYXBpLmF6LWdhbWVzLm5sL1xuICAgICAgICAgICAgdHlwZTogXCJQQVRDSFwiLFxuICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgIGNvbnRlbnRUeXBlOiBcImFwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLThcIixcbiAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiQXV0aG9yaXphdGlvblwiOiBcIkJlYXJlciBcIiArIENvb2tpZUhlbHBlci5nZXRDb29raWUoXCJhY2Nlc3NfdG9rZW5cIilcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGRhdGEpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoeGhyLCBzdGF0dXMsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgJChcIiNjb21wb25lbnRcIikubG9hZChcIi92aWV3cy9lcnJvci9lcnJvci5odG1sXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkZWxldGVVc2VyKGNhbGxiYWNrKVxuICAgIHtcbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHVybDogXCJodHRwOi8vbG9jYWxob3N0OjgwODEvYWRtaW4vdXNlcnMvXCIgKyBpZCwgLy9cImh0dHBzOi8vYXBpLmF6LWdhbWVzLm5sL1xuICAgICAgICAgICAgdHlwZTogXCJERUxFVEVcIixcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICAvL2NvbnRlbnRUeXBlOiBcImFwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLThcIixcbiAgICAgICAgICAgIC8vZGF0YTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgXCJBdXRob3JpemF0aW9uXCI6IFwiQmVhcmVyIFwiICsgQ29va2llSGVscGVyLmdldENvb2tpZShcImFjY2Vzc190b2tlblwiKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZGF0YSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICh4aHIsIHN0YXR1cywgZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAkKFwiI2NvbXBvbmVudFwiKS5sb2FkKFwiL3ZpZXdzL2Vycm9yL2Vycm9yLmh0bWxcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ2V0UGFnZTogZ2V0UGFnZSxcbiAgICAgICAgc2F2ZVVzZXJJbmZvOiBzYXZlVXNlckluZm8sXG4gICAgICAgIGRlbGV0ZVVzZXI6IGRlbGV0ZVVzZXJcbiAgICB9XG59IiwidmFyIENhcnRNb2RlbCA9IGZ1bmN0aW9uKClcbntcbiAgICAvKipcbiAgICAgKiBHZXQgYWxsIGNhcnQgaXRlbXNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRDYXJ0KGNhbGxiYWNrKVxuICAgIHtcbiAgICAgICAgdmFyIGNhcnQgPSBDb29raWVIZWxwZXIuZ2V0Q29va2llKFwiY2FydFwiKTtcblxuICAgICAgICBpZiAoY2FydCAhPSB1bmRlZmluZWQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKEpTT04ucGFyc2UoY2FydCkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkIGEgcHJvZHVjdCB0byB0aGUgY2FydCBjb29raWUgYW5kIGRhdGFiYXNlIGlmIHRoZSB1c2VyIGlzIHJlZ2lzdGVyZWRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhZGRQcm9kdWN0KGlkLCBjYWxsYmFjaylcbiAgICB7XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6IFwiaHR0cHM6Ly9hcGkuYXotZ2FtZXMubmwvcHJvZHVjdHMvXCIgKyBpZCxcbiAgICAgICAgICAgIHR5cGU6IFwiZ2V0XCIsXG4gICAgICAgICAgICBjb250ZW50VHlwZTogXCJqc29uXCIsXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIGNhcnQgPSB7ZWFuX251bWJlcjpkYXRhWzBdLmVhbl9udW1iZXIsIHRpdGxlOmRhdGFbMF0udGl0bGUsIHByaWNlOmRhdGFbMF0ucHJpY2UsIGltYWdlOmRhdGFbMF0uaW1hZ2V9O1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGNhcnQpO1xuXG4gICAgICAgICAgICAgICAgLy8gU2F2ZSBjYXJ0IGluIGNvb2tpZXNcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudENhcnQgPSBDb29raWVIZWxwZXIuZ2V0Q29va2llKFwiY2FydFwiKTtcblxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Q2FydCA9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBDb29raWVIZWxwZXIuY3JlYXRlQ29va2llKFwiY2FydFwiLCBKU09OLnN0cmluZ2lmeShbY2FydF0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudENhcnQgPSBKU09OLnBhcnNlKGN1cnJlbnRDYXJ0KTtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudENhcnQucHVzaChjYXJ0KTtcblxuICAgICAgICAgICAgICAgICAgICBDb29raWVIZWxwZXIuY3JlYXRlQ29va2llKFwiY2FydFwiLCBKU09OLnN0cmluZ2lmeShjdXJyZW50Q2FydCkpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoeGhyLCBzdGF0dXMsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgJChcIiNjb21wb25lbnRcIikubG9hZChcIi92aWV3cy9lcnJvci9lcnJvci5odG1sXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgYSBpdGVtIGZyb20gdGhlIGNhcnRcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge2ludH0gaWQgUHJvZHVjdCBpZFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJlbW92ZVByb2R1Y3QoaWQpXG4gICAge1xuICAgICAgICBjYXJ0ID0gSlNPTi5wYXJzZShDb29raWVIZWxwZXIuZ2V0Q29va2llKFwiY2FydFwiKSk7XG5cbiAgICAgICAgZm9yKGkgPSAwOyBpIDwgY2FydC5sZW5ndGg7IGkrKylcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKGNhcnRbaV0uZWFuX251bWJlciA9PSBpZClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjYXJ0LnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgQ29va2llSGVscGVyLmNyZWF0ZUNvb2tpZShcImNhcnRcIiwgSlNPTi5zdHJpbmdpZnkoY2FydCkpO1xuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ2V0Q2FydDogZ2V0Q2FydCxcbiAgICAgICAgYWRkUHJvZHVjdDogYWRkUHJvZHVjdCxcbiAgICAgICAgcmVtb3ZlUHJvZHVjdDogcmVtb3ZlUHJvZHVjdFxuICAgIH1cbn07IiwidmFyIExvZ2luTW9kZWwgPSBmdW5jdGlvbigpXG57XG4gICAgZnVuY3Rpb24gbG9naW4oZW1haWwsIHBhc3N3b3JkLCBjYWxsYmFjaylcbiAgICB7XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6IFwiaHR0cHM6Ly9hcGkuYXotZ2FtZXMubmwvdXNlci9sb2dpblwiLFxuICAgICAgICAgICAgdHlwZTogXCJHRVRcIixcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgXCJBdXRob3JpemF0aW9uXCI6IFwiQmFzaWMgXCIgKyBidG9hKGVtYWlsICsgXCI6XCIgKyBwYXNzd29yZClcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIC8vIHB1dCB0b2tlbiBpbiBjb29raWVcbiAgICAgICAgICAgICAgICBDb29raWVIZWxwZXIuY3JlYXRlQ29va2llKFwiYWNjZXNzX3Rva2VuXCIsIGRhdGEuYWNjZXNzX3Rva2VuKTtcbiAgICAgICAgICAgICAgICBDb29raWVIZWxwZXIuY3JlYXRlQ29va2llKFwidXNlcl9pZFwiLCBkYXRhLnVzZXJfaWQpO1xuXG4gICAgICAgICAgICAgICAgLy8gJ3JlbG9hZCcgcGFnZVxuICAgICAgICAgICAgICAgIG9uTG9hZFBhZ2UoKTtcblxuICAgICAgICAgICAgICAgIC8vIGxldCBjb250cm9sbGVyIHJlc3VtZSB3aXRoIHN0dWZmXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZGF0YSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICh4aHIsIHN0YXR1cywgZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAvLyBzaG93ICdub3QgZ29vZCBlbWFpbCBvciBwYXNzd29yZCB0byB1c2VyJ1xuICAgICAgICAgICAgICAgICQoXCIjZXJyb3JfbWVzc2FnZVwiKS5zaG93KCk7XG5cbiAgICAgICAgICAgICAgICAvLyQoXCIjY29tcG9uZW50XCIpLmh0bWwoXCJlcnJvciBmdW5jdGlvblwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHRoZSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgcHJvZ3JhbXMgKHRoZSBjb250cm9sbGVyIGluIHRoaXMgY2FzZSlcbiAgICByZXR1cm4ge1xuICAgICAgICBsb2dpbjogbG9naW5cbiAgICB9XG59OyIsInZhciBMb2dvdXRNb2RlbCA9IGZ1bmN0aW9uKClcbntcbiAgICBmdW5jdGlvbiBsb2dvdXQoY2FsbGJhY2spXG4gICAge1xuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgdXJsOiBcImh0dHBzOi8vYXBpLmF6LWdhbWVzLm5sL3VzZXIvbG9nb3V0XCIsIC8vPyBodHRwOi8vODQuODQuMjQ1LjI5OjI0MyA9IEFQSS1sb2NhdGllP1xuICAgICAgICAgICAgdHlwZTogXCJwb3N0XCIsXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIHVzZXJfaWQ6IGdldENvb2tpZShcInVzZXJfaWRcIilcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAvLyBsZXQgY29udHJvbGxlciByZXN1bWUgd2l0aCBzdHVmZlxuICAgICAgICAgICAgICAgIENvb2tpZUhlbHBlci5kZWxldGVDb29raWUoXCJhY2Nlc3NfdG9rZW5cIik7XG4gICAgICAgICAgICAgICAgQ29va2llSGVscGVyLmRlbGV0ZUNvb2tpZShcInVzZXJfaWRcIik7XG5cbiAgICAgICAgICAgICAgICAvLyAncmVsb2FkJyBwYWdlXG4gICAgICAgICAgICAgICAgb25Mb2FkUGFnZSgpO1xuXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZGF0YSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICh4aHIsIHN0YXR1cywgZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAvLyBzaG93ICdub3QgZ29vZCBlbWFpbCBvciBwYXNzd29yZCB0byB1c2VyJ1xuICAgICAgICAgICAgICAgICQoXCIjZXJyb3JfbWVzc2FnZVwiKS5zaG93KCk7XG5cbiAgICAgICAgICAgICAgICAvLyQoXCIjY29tcG9uZW50XCIpLmh0bWwoXCJlcnJvciBmdW5jdGlvblwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0Q29va2llKG5hbWUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciBjb29raWVzID0gZG9jdW1lbnQuY29va2llLnNwbGl0KCc7Jyk7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29va2llcy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB2YXIgY29va2llID0gY29va2llc1tpXS5zcGxpdChcIj1cIik7XG5cbiAgICAgICAgICAgICAgICBpZiAoY29va2llWzBdLnRyaW0oKSA9PSBuYW1lKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvb2tpZVsxXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBieSBvdGhlciBwcm9ncmFtcyAodGhlIGNvbnRyb2xsZXIgaW4gdGhpcyBjYXNlKVxuICAgIHJldHVybiB7XG4gICAgICAgIGxvZ291dDogbG9nb3V0XG4gICAgfVxufTsiLCJ2YXIgUGFnZU1vZGVsID0gZnVuY3Rpb24oKVxue1xuICAgIGZ1bmN0aW9uIGdldFBhZ2UoY2FsbGJhY2spXG4gICAge1xuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgdXJsOiBcImh0dHBzOi8vYXBpLmF6LWdhbWVzLm5sL3VzZXJcIixcbiAgICAgICAgICAgIHR5cGU6IFwiZ2V0XCIsXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiQXV0aG9yaXphdGlvblwiOiBcIkJlYXJlciBcIiArIGdldENvb2tpZShcImFjY2Vzc190b2tlblwiKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZGF0YSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICh4aHIsIHN0YXR1cywgZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAkKFwiI2NvbXBvbmVudFwiKS5sb2FkKFwiL3ZpZXdzL2Vycm9yL2Vycm9yLmh0bWxcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldENvb2tpZShuYW1lKVxuICAgIHtcbiAgICAgICAgdmFyIGNvb2tpZXMgPSBkb2N1bWVudC5jb29raWUuc3BsaXQoJzsnKTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvb2tpZXMubGVuZ3RoOyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciBjb29raWUgPSBjb29raWVzW2ldLnNwbGl0KFwiPVwiKTtcblxuICAgICAgICAgICAgaWYgKGNvb2tpZVswXSA9PSBuYW1lKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb29raWVbMV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBieSBvdGhlciBwcm9ncmFtcyAodGhlIGNvbnRyb2xsZXIgaW4gdGhpcyBjYXNlKVxuICAgIHJldHVybiB7XG4gICAgICAgIGdldFBhZ2U6IGdldFBhZ2VcbiAgICB9XG59OyIsInZhciBQcm9kdWN0c01vZGVsID0gZnVuY3Rpb24oKVxue1xuICAgIGZ1bmN0aW9uIGdldFBhZ2UoZmlsdGVyLCBjYWxsYmFjaylcbiAgICB7XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6IFwiaHR0cHM6Ly9hcGkuYXotZ2FtZXMubmwvcHJvZHVjdHM/XCIgKyBmaWx0ZXIsIC8vPyBodHRwOi8vODQuODQuMjQ1LjI5OjI0MyA9IEFQSS1sb2NhdGllP1xuICAgICAgICAgICAgdHlwZTogXCJnZXRcIixcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGRhdGEpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoeGhyLCBzdGF0dXMsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgJChcIiNjb21wb25lbnRcIikubG9hZChcIi92aWV3cy9lcnJvci9lcnJvci5odG1sXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBieSBvdGhlciBwcm9ncmFtcyAodGhlIGNvbnRyb2xsZXIgaW4gdGhpcyBjYXNlKVxuICAgIHJldHVybiB7XG4gICAgICAgIGdldFBhZ2U6IGdldFBhZ2VcbiAgICB9XG59OyIsInZhciBSZWdpc3Rlck1vZGVsID0gZnVuY3Rpb24oKVxue1xuICAgIGZ1bmN0aW9uIHJlZ2lzdGVyKGZvcm1EYXRhLCBjYWxsYmFjaylcbiAgICB7XG4gICAgICAgIC8vY29uc29sZS5sb2coZm9ybURhdGEpO1xuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgdXJsOiBcImh0dHBzOi8vYXBpLmF6LWdhbWVzLm5sL3VzZXIvcmVnaXN0ZXJcIixcbiAgICAgICAgICAgIHR5cGU6IFwicG9zdFwiLFxuICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBlX21haWwgOiBmb3JtRGF0YS5lX21haWxhZHJlcyxcbiAgICAgICAgICAgICAgICBwYXNzd29yZCA6IGZvcm1EYXRhLndhY2h0d29vcmQsXG4gICAgICAgICAgICAgICAgZmlyc3RfbmFtZSA6IGZvcm1EYXRhLnZvb3JuYWFtLFxuICAgICAgICAgICAgICAgIGluc2VydGlvbiA6IGZvcm1EYXRhLnR1c3NlbnZvZWdzZWwsXG4gICAgICAgICAgICAgICAgc3VybmFtZSA6IGZvcm1EYXRhLmFjaHRlcm5hYW0sXG4gICAgICAgICAgICAgICAgZ2VuZGVyIDogZm9ybURhdGEuZ2VuZGVyLFxuICAgICAgICAgICAgICAgIGRhdGVfb2ZfYmlydGggOiBmb3JtRGF0YS5iaXJ0aF9kYXRlLFxuICAgICAgICAgICAgICAgIHBob25lX251bWJlciA6IGZvcm1EYXRhLm1vYmllbF9udW1tZXIsXG4gICAgICAgICAgICAgICAgc2VjcmV0X3F1ZXN0aW9uIDogZm9ybURhdGEuc2VjdXJpdHlfcXVlc3Rpb24sXG4gICAgICAgICAgICAgICAgc2VjcmV0X3F1ZXN0aW9uX2Fuc3dlciA6IGZvcm1EYXRhLnNlY3VyaXR5X2Fuc3dlcixcblxuICAgICAgICAgICAgICAgIHBvc3RhbF9jb2RlIDogZm9ybURhdGEucG9zdGNvZGUsXG4gICAgICAgICAgICAgICAgbnVtYmVyIDogZm9ybURhdGEuaHVpc251bW1lcixcbiAgICAgICAgICAgICAgICBzdHJlZXRfbmFtZSA6IGZvcm1EYXRhLnN0cmFhdG5hYW0sXG4gICAgICAgICAgICAgICAgY2l0eSA6IGZvcm1EYXRhLnBsYWF0cyAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAgICAgICAgIC8vIGxldCBjb250cm9sbGVyIHJlc3VtZSB3aXRoIHN0dWZmXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZGF0YSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICh4aHIsIHN0YXR1cywgZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAvLyBzaG93ICdlbWFpbCBhbCBnZWJvbmRlbiBhYW4gZWVuIGFjY291bnQ/J1xuICAgICAgICAgICAgICAgICQoXCIjcmVnaV9hcGlfZXJyb3JfbWVzc2FnZVwiKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgLy8kKFwiI2NvbXBvbmVudFwiKS5odG1sKFwiZXJyb3IgZnVuY3Rpb25cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVnaXN0ZXI6IHJlZ2lzdGVyXG4gICAgfVxufTsiLCJ2YXIgUmVzZXRQYXNzd29yZE1vZGVsID0gZnVuY3Rpb24oKVxue1xuICAgIGZ1bmN0aW9uIHJlc2V0cGFzc3dvcmQoZm9ybURhdGEsIGNhbGxiYWNrKVxuICAgIHtcbiAgICAgICAgY29uc29sZS5sb2coZm9ybURhdGEpO1xuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgdXJsOiBcImh0dHBzOi8vYXBpLmF6LWdhbWVzLm5sL3VzZXIvcmVzZXRwYXNzd29yZFwiLFxuICAgICAgICAgICAgdHlwZTogXCJwb3N0XCIsXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIGVtYWlsIDogZm9ybURhdGEuZV9tYWlsYWRyZXMsXG4gICAgICAgICAgICAgICAgc2VjcmV0X3F1ZXN0aW9uX2Fuc3dlciA6IGZvcm1EYXRhLnNlY3VyaXR5X2Fuc3dlcixcbiAgICAgICAgICAgICAgICBzZWNyZXRfcXVlc3Rpb24gOiBmb3JtRGF0YS5zZWN1cml0eV9xdWVzdGlvbixcbiAgICAgICAgICAgICAgICBuZXdfcGFzc3dvcmQgOiBmb3JtRGF0YS53YWNodHdvb3JkLFxuICAgICAgICAgICAgICAgIHJlcGVhdF9wYXNzd29yZCA6IGZvcm1EYXRhLndhY2h0d29vcmQyXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZGF0YSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICh4aHIsIHN0YXR1cywgZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAvLyQoXCIjY29tcG9uZW50XCIpLmxvYWQoXCJ2aWV3cy9lcnJvci9lcnJvci5odG1sXCIpO1xuICAgICAgICAgICAgICAgICQoXCIjcmVzZXRfcGFzc3dvcmRfYXBpX2Vycm9yX21lc3NhZ2VcIikuc2hvdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBieSBvdGhlciBwcm9ncmFtcyAodGhlIGNvbnRyb2xsZXIgaW4gdGhpcyBjYXNlKVxuICAgIHJldHVybiB7XG4gICAgICAgIHJlc2V0cGFzc3dvcmQ6IHJlc2V0cGFzc3dvcmRcbiAgICB9XG59OyIsInZhciBQcm9kdWN0TW9kZWwgPSBmdW5jdGlvbihlYW4pXG57XG4gICAgZnVuY3Rpb24gR2V0UHJvZHVjdEluZm8oY2FsbGJhY2spXG4gICAge1xuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgdXJsOiBcImh0dHBzOi8vYXBpLmF6LWdhbWVzLm5sL3Byb2R1Y3RzL1wiICsgZWFuLFxuICAgICAgICAgICAgdHlwZTogXCJnZXRcIixcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIC8vIGxldCBjb250cm9sbGVyIHJlc3VtZSB3aXRoIHN0dWZmXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZGF0YVswXSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICh4aHIsIHN0YXR1cywgZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAkKFwiI2NvbXBvbmVudFwiKS5sb2FkKFwiL3ZpZXdzL2Vycm9yL2Vycm9yLmh0bWxcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXG4gICAgcmV0dXJuIHtcbiAgICAgICAgR2V0UHJvZHVjdEluZm86IEdldFByb2R1Y3RJbmZvXG4gICAgfVxufTsiLCJ2YXIgVXNlck1vZGVsID0gZnVuY3Rpb24odXNlcmlkKVxue1xuICAgIGZ1bmN0aW9uIEdldFVzZXJJbmZvKGNhbGxiYWNrKVxuICAgIHtcbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHVybDogXCJodHRwczovL2FwaS5hei1nYW1lcy5ubC91c2Vycy9cIiArIHVzZXJpZCxcbiAgICAgICAgICAgIHR5cGU6IFwiZ2V0XCIsXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAvLyBsZXQgY29udHJvbGxlciByZXN1bWUgd2l0aCBzdHVmZlxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGRhdGFbMF0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoeGhyLCBzdGF0dXMsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgJChcIiNjb21wb25lbnRcIikubG9hZChcIi9lcnJvci5odG1sXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBieSBvdGhlciBwcm9ncmFtcyAodGhlIGNvbnRyb2xsZXIgaW4gdGhpcyBjYXNlKVxuICAgIHJldHVybiB7XG4gICAgICAgIEdldFVzZXJJbmZvOiBHZXRVc2VySW5mb1xuICAgIH1cbn07IiwidmFyIEFkbWluQ29udHJvbGxlciA9IGZ1bmN0aW9uKHZpZXdIZWxwZXIsIG1vZGVsKVxue1xuICAgIHZhciBNb2RlbCAgICAgID0gbW9kZWw7XG4gICAgdmFyIFZpZXdIZWxwZXIgPSB2aWV3SGVscGVyO1xuICAgIFxuICAgIC8vIE1haW4gZnVuY3Rpb24sIGFsc28gdGhlIHN0YXJ0IHN0YXJ0cG9pbnQgZm9yIGEgcGFnZVxuICAgIGZ1bmN0aW9uIG1haW4oKVxuICAgIHtcbiAgICAgICAgVmlld0hlbHBlci5zZXRBY3Rpb25MaXN0ZW5lcihnZXRQYWdlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRQYWdlKClcbiAgICB7XG4gICAgICAgIE1vZGVsLmdldFBhZ2Uoc2V0Vmlldyk7IC8vXCJcIiwgZnVuY3Rpb24gKGRhdGEpIHsgVmlld0hlbHBlci5zZXRWaWV3KGRhdGEpOyB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gc2V0VmlldyhkYXRhKSBcbiAgICB7XG4gICAgICAgIFZpZXdIZWxwZXIuc2V0VmlldyhkYXRhKTtcbiAgICB9XG5cblxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXG4gICAgcmV0dXJuIHtcbiAgICAgICAgbWFpbjogbWFpblxuICAgIH1cbn07IiwidmFyIEFkbWluVXNlckNvbnRyb2xsZXIgPSBmdW5jdGlvbih2aWV3SGVscGVyLCBtb2RlbClcbntcbiAgICB2YXIgTW9kZWwgICAgICA9IG1vZGVsO1xuICAgIHZhciBWaWV3SGVscGVyID0gdmlld0hlbHBlcjtcbiAgICBcbiAgICAvLyBNYWluIGZ1bmN0aW9uLCBhbHNvIHRoZSBzdGFydCBzdGFydHBvaW50IGZvciBhIHBhZ2VcbiAgICBmdW5jdGlvbiBtYWluKClcbiAgICB7XG4gICAgICAgIFZpZXdIZWxwZXIuc2V0QWN0aW9uTGlzdGVuZXIoZ2V0UGFnZSk7XG4gICAgICAgIHZpZXdIZWxwZXIuc2V0U2F2ZUxpc3RlbmVyKHNhdmVVc2VySW5mbyk7XG4gICAgICAgIHZpZXdIZWxwZXIuc2V0RGVsZXRlTGlzdGVuZXIoZGVsZXRlVXNlcik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0UGFnZSgpXG4gICAge1xuICAgICAgICBNb2RlbC5nZXRQYWdlKHNldFZpZXcpO1xuICAgIH1cbiAgICBcbiAgICBmdW5jdGlvbiBzZXRWaWV3KGRhdGEpIFxuICAgIHtcbiAgICAgICAgVmlld0hlbHBlci5zZXRWaWV3KGRhdGEpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNhdmVVc2VySW5mbyhldmVudClcbiAgICB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgIHZhciBmb3JtRGF0YSA9ICQodGhpcykuc2VyaWFsaXplT2JqZWN0KCk7XG5cbiAgICAgICAgTW9kZWwuc2F2ZVVzZXJJbmZvKGZvcm1EYXRhLCBmdW5jdGlvbihmb3JtRGF0YSlcbiAgICAgICAge1xuICAgICAgICAgICAgYWxlcnQoXCJHZWJydWlrZXIgc3VjY2Vzdm9sIGdlw7xwZGF0ZS5cIik7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRlbGV0ZVVzZXIoKVxuICAgIHtcbiAgICAgICAgTW9kZWwuZGVsZXRlVXNlciggZnVuY3Rpb24oKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygndmVyd2lqZGVyZD8nKTtcbiAgICAgICAgICAgIGFsZXJ0KFwiR2VicnVpa2VyIHN1Y2Nlc3ZvbCBnZWRlbGV0ZS5cIik7XG4gICAgICAgIH0gKTtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBieSBvdGhlciBwcm9ncmFtcyAodGhlIGNvbnRyb2xsZXIgaW4gdGhpcyBjYXNlKVxuICAgIHJldHVybiB7XG4gICAgICAgIG1haW46IG1haW5cbiAgICB9XG59OyIsInZhciBDYXJ0Q29udHJvbGxlciA9IGZ1bmN0aW9uKHZpZXdIZWxwZXIsIG1vZGVsKVxue1xuICAgIHZhciBNb2RlbCAgICAgID0gbW9kZWw7XG4gICAgdmFyIFZpZXdIZWxwZXIgPSB2aWV3SGVscGVyO1xuICAgIFxuICAgIC8qKlxuICAgICAqIEdldCBhbGwgY2FydCBpdGVtcyBhbmQgcGFzcyB0aGUgaXRlbXMgdG8gdGhlIFZpZXdIZWxwZXJcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRDYXJ0KClcbiAgICB7XG4gICAgICAgIE1vZGVsLmdldENhcnQoZnVuY3Rpb24gKGRhdGEpIHsgVmlld0hlbHBlci5zZXRWaWV3KGRhdGEpOyB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGQgYSBpdGVtIHRvIHRoZSBjYXJ0IGFuZCBwYXNzIGl0IHRvIHRoZSB2aWV3SGVscGVyXG4gICAgICogXG4gICAgICogQHBhcmFtIHtpbnR9IGlkICBJdGVtIGlkXG4gICAgICovXG4gICAgZnVuY3Rpb24gYWRkUHJvZHVjdChpZClcbiAgICB7XG4gICAgICAgIE1vZGVsLmFkZFByb2R1Y3QoaWQsIGZ1bmN0aW9uIChkYXRhKSB7IFZpZXdIZWxwZXIuYWRkSXRlbShkYXRhKTsgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGEgcHJvZHVjdCBhbmQgY2FsbCB0aGUgdmlld0hlbHBlclxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJlbW92ZVByb2R1Y3QoaWQpXG4gICAge1xuICAgICAgICBNb2RlbC5yZW1vdmVQcm9kdWN0KGlkLCBmdW5jdGlvbiAoZGF0YSkgeyB9KTtcbiAgICB9XG5cbiAgICAvLyBNYWluIGZ1bmN0aW9uLCBhbHNvIHRoZSBzdGFydCBzdGFydHBvaW50IGZvciBhIHBhZ2VcbiAgICBmdW5jdGlvbiBtYWluKClcbiAgICB7ICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgIFZpZXdIZWxwZXIuc2V0QWN0aW9uTGlzdGVuZXIoZ2V0Q2FydCk7XG4gICAgICAgIFZpZXdIZWxwZXIuc2V0QWRkUHJvZHVjdExpc3RlbmVyKGFkZFByb2R1Y3QpO1xuICAgICAgICBWaWV3SGVscGVyLnNldFJlbW92ZUxpc3RlbmVyKHJlbW92ZVByb2R1Y3QpO1xuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXG4gICAgcmV0dXJuIHtcbiAgICAgICAgbWFpbjogbWFpblxuICAgIH1cbn07IiwidmFyIERlbGV0ZUNvbnRyb2xsZXIgPSBmdW5jdGlvbih2aWV3SGVscGVyLCBtb2RlbClcbntcbiAgICB2YXIgTW9kZWwgICAgICA9IG1vZGVsO1xuICAgIHZhciBWaWV3SGVscGVyID0gdmlld0hlbHBlcjtcblxuICAgIGZ1bmN0aW9uIG1haW4oKVxuICAgIHtcbiAgICAgICAgXG4gICAgfVxufSIsInZhciBFcnJvckNvbnRyb2xsZXIgPSBmdW5jdGlvbih2aWV3SGVscGVyKVxue1xuICAgIHZhciBWaWV3SGVscGVyID0gdmlld0hlbHBlcjtcblxuICAgIC8vIE1haW4gZnVuY3Rpb24sIGFsc28gdGhlIHN0YXJ0IHN0YXJ0cG9pbnQgZm9yIGEgcGFnZVxuICAgIGZ1bmN0aW9uIG1haW4oKVxuICAgIHtcbiAgICAgICAgLy8gc2V0IHZpZXcgdG8gbG9naW4gZm9ybVxuICAgICAgICBWaWV3SGVscGVyLnNldFZpZXcoKTtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBieSBvdGhlciBwcm9ncmFtcyAodGhlIGNvbnRyb2xsZXIgaW4gdGhpcyBjYXNlKVxuICAgIHJldHVybiB7XG4gICAgICAgIG1haW46IG1haW5cbiAgICB9XG59OyIsInZhciBMb2dpbkNvbnRyb2xsZXIgPSBmdW5jdGlvbih2aWV3SGVscGVyLCBtb2RlbClcbntcbiAgICB2YXIgTW9kZWwgICAgICA9IG1vZGVsO1xuICAgIHZhciBWaWV3SGVscGVyID0gdmlld0hlbHBlcjtcbiAgICBcbiAgICAvLyBGdW5jdGlvbiB0aGF0IGlzIGV4ZWN1dGVkIG9uIGEgYWN0aW9uIGxpc3RlbmVyXG4gICAgZnVuY3Rpb24gYWN0aW9uUGVyZm9ybWVkKGV2ZW50KVxuICAgIHtcbiAgICAgICAgLy8gUHJldmVudCBzZW5kaW5nIHRoZSBmb3JtXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgIC8vIExvb3AgdHJvdWdoIHRoZSBmb3JtIGRhdGEgYW5kIGdldCBhbGwgZmllbGRzXG4gICAgICAgIHZhciBmb3JtRGF0YSA9IHt9O1xuICAgICAgICAkLmVhY2goJCh0aGlzKS5zZXJpYWxpemVBcnJheSgpLCBmdW5jdGlvbiAoaSwgZmllbGQpIHtcbiAgICAgICAgICAgIGZvcm1EYXRhW2ZpZWxkLm5hbWVdID0gZmllbGQudmFsdWU7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGxldCBtb2RlbCBzZW5kIGVtYWlsIGFuZCBwYXNzd29yZCB0byBBUElcbiAgICAgICAgTW9kZWwubG9naW4oZm9ybURhdGEuZW1haWwsIGZvcm1EYXRhLnBhc3N3b3JkLCBmdW5jdGlvbiBvblN1Y2Nlc3MoZGF0YSkge1xuICAgICAgICAgICAgLy8gc2hvdyB1aXRsb2dnZW4gYnV0dG9uXG4gICAgICAgICAgICAkKFwiI2lubG9nZ2VuX3RleHRcIikuaGlkZSgpO1xuICAgICAgICAgICAgJChcIiN1aXRsb2dnZW5fdGV4dFwiKS5zaG93KCk7XG5cbiAgICAgICAgICAgIC8vIFdlZXJnZWVmIGVlbiBhbmRlcmUgcGFnaW5hIGdlYmFzc2VlcmQgb3AgJ2FkbWluJyBvZiAncmVnaXN0ZXJlZCB1c2VyJ1xuICAgICAgICAgICAgbmV3IFBhZ2VDb250cm9sbGVyKG5ldyBQYWdlVmlld0hlbHBlcigpLCBuZXcgUGFnZU1vZGVsKCkpLm1haW4oKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gTWFpbiBmdW5jdGlvbiwgYWxzbyB0aGUgc3RhcnQgc3RhcnRwb2ludCBmb3IgYSBwYWdlXG4gICAgZnVuY3Rpb24gbWFpbigpXG4gICAge1xuICAgICAgICAvLyBzZXQgdmlldyB0byBsb2dpbiBmb3JtXG4gICAgICAgIFZpZXdIZWxwZXIuc2V0VmlldygpO1xuXG4gICAgICAgIC8vIHVzZXIgZmlsbHMgaW4gZW1haWwgYW5kIHBhc3N3b3JkOyBjbGlja3MgJ2xvZ2luJzogVklFVyBub3RpY2VzIHRoaXMgYW5kIHJlYWN0c1xuICAgICAgICBWaWV3SGVscGVyLnNldEFjdGlvbkxpc3RlbmVyKGFjdGlvblBlcmZvcm1lZCk7XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHRoZSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgcHJvZ3JhbXMgKHRoZSBjb250cm9sbGVyIGluIHRoaXMgY2FzZSlcbiAgICByZXR1cm4ge1xuICAgICAgICBtYWluOiBtYWluXG4gICAgfVxufTsiLCJ2YXIgTG9nb3V0Q29udHJvbGxlciA9IGZ1bmN0aW9uKHZpZXdIZWxwZXIsIG1vZGVsKVxue1xuICAgIHZhciBNb2RlbCAgICAgID0gbW9kZWw7XG4gICAgdmFyIFZpZXdIZWxwZXIgPSB2aWV3SGVscGVyO1xuICAgIFxuICAgIC8vIEZ1bmN0aW9uIHRoYXQgaXMgZXhlY3V0ZWQgb24gYSBhY3Rpb24gbGlzdGVuZXJcbiAgICBmdW5jdGlvbiBhY3Rpb25QZXJmb3JtZWQoZXZlbnQpXG4gICAge1xuICAgICAgICBNb2RlbC5sb2dvdXQoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIC8vIHNob3cgdWl0bG9nZ2VuIGJ1dHRvblxuICAgICAgICAgICAgJChcIiNpbmxvZ2dlbl90ZXh0XCIpLnNob3coKTtcbiAgICAgICAgICAgICQoXCIjdWl0bG9nZ2VuX3RleHRcIikuaGlkZSgpO1xuXG4gICAgICAgICAgICAvLyBzZXQgdmlldyB0byBsb2dpbiBmb3JtXG4gICAgICAgICAgICBWaWV3SGVscGVyLnNldFZpZXcoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gTWFpbiBmdW5jdGlvbiwgYWxzbyB0aGUgc3RhcnQgc3RhcnRwb2ludCBmb3IgYSBwYWdlXG4gICAgZnVuY3Rpb24gbWFpbigpXG4gICAge1xuICAgICAgICAvLyB1c2VyIGZpbGxzIGluIGVtYWlsIGFuZCBwYXNzd29yZDsgY2xpY2tzICdsb2dpbic6IFZJRVcgbm90aWNlcyB0aGlzIGFuZCByZWFjdHNcbiAgICAgICAgVmlld0hlbHBlci5zZXRBY3Rpb25MaXN0ZW5lcihhY3Rpb25QZXJmb3JtZWQpO1xuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXG4gICAgcmV0dXJuIHtcbiAgICAgICAgbWFpbjogbWFpblxuICAgIH1cbn07IiwidmFyIFBhZ2VDb250cm9sbGVyID0gZnVuY3Rpb24odmlld0hlbHBlciwgbW9kZWwpXG57XG4gICAgdmFyIE1vZGVsID0gbW9kZWw7XG4gICAgdmFyIFZpZXcgID0gdmlld0hlbHBlcjtcbiAgICBcbiAgICAvLyBGdW5jdGlvbiB0aGF0IGlzIGV4ZWN1dGVkIG9uIGEgYWN0aW9uIGxpc3RlbmVyXG4gICAgZnVuY3Rpb24gYWN0aW9uUGVyZm9ybWVkKGV2ZW50KVxuICAgIHtcbiAgICAgICAgTW9kZWwuZ2V0UGFnZShmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgVmlldy5zZXRWaWV3KGRhdGEpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBNYWluIGZ1bmN0aW9uLCBhbHNvIHRoZSBzdGFydHBvaW50IGZvciBhIHBhZ2VcbiAgICBmdW5jdGlvbiBtYWluKClcbiAgICB7ICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgIFZpZXcuc2V0QWN0aW9uTGlzdGVuZXIoYWN0aW9uUGVyZm9ybWVkKTtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBieSBvdGhlciBwcm9ncmFtcyAodGhlIGNvbnRyb2xsZXIgaW4gdGhpcyBjYXNlKVxuICAgIHJldHVybiB7XG4gICAgICAgIG1haW46IG1haW5cbiAgICB9XG59OyIsInZhciBQcm9kdWN0c0NvbnRyb2xsZXIgPSBmdW5jdGlvbih2aWV3SGVscGVyLCBtb2RlbClcbntcbiAgICB2YXIgTW9kZWwgICAgICA9IG1vZGVsO1xuICAgIHZhciBWaWV3SGVscGVyID0gdmlld0hlbHBlcjtcbiAgICBcbiAgICAvLyBGdW5jdGlvbiB0aGF0IGlzIGV4ZWN1dGVkIG9uIGEgYWN0aW9uIGxpc3RlbmVyXG4gICAgZnVuY3Rpb24gZ2V0UGFnZSgpXG4gICAge1xuICAgICAgICBNb2RlbC5nZXRQYWdlKFwiXCIsIGZ1bmN0aW9uIChkYXRhKSB7IFZpZXdIZWxwZXIuc2V0VmlldyhkYXRhKTsgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZmlsdGVyUHJvZHVjdHMoZXZlbnQpXG4gICAge1xuICAgICAgICAvLyBQcmV2ZW50IHNlbmRpbmcgdGhlIGZvcm0gKHBhZ2UgcmVsb2FkKVxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIHZhciBmaWx0ZXJzID0gJCh0aGlzKS5zZXJpYWxpemUoKTtcbiAgICAgICAgTW9kZWwuZ2V0UGFnZShmaWx0ZXJzLCBmdW5jdGlvbiAoZGF0YSkgeyBWaWV3SGVscGVyLmxvYWRQcm9kdWN0cyhkYXRhKTsgfSk7XG4gICAgfVxuXG4gICAgLy8gTWFpbiBmdW5jdGlvbiwgYWxzbyB0aGUgc3RhcnQgc3RhcnRwb2ludCBmb3IgYSBwYWdlXG4gICAgZnVuY3Rpb24gbWFpbigpXG4gICAgeyAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICBWaWV3SGVscGVyLnNldEFjdGlvbkxpc3RlbmVyKGdldFBhZ2UpO1xuICAgICAgICBWaWV3SGVscGVyLnNldEZpbHRlckxpc3RlbmVyKGZpbHRlclByb2R1Y3RzKTtcbiAgICAgICAgLy8gbmV3IGFjdGlvbiB3YW5uZXIgZXIgb3AgZmlsdGVyIHdvcmR0IGdlZHJ1a3RcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBieSBvdGhlciBwcm9ncmFtcyAodGhlIGNvbnRyb2xsZXIgaW4gdGhpcyBjYXNlKVxuICAgIHJldHVybiB7XG4gICAgICAgIG1haW46IG1haW5cbiAgICB9XG59OyIsInZhciBSZWdpc3RlckNvbnRyb2xsZXIgPSBmdW5jdGlvbih2aWV3SGVscGVyLCBtb2RlbClcbntcbiAgICB2YXIgTW9kZWwgICAgICA9IG1vZGVsO1xuICAgIHZhciBWaWV3SGVscGVyID0gdmlld0hlbHBlcjtcbiAgICBcbiAgICAvLyBGdW5jdGlvbiB0aGF0IGlzIGV4ZWN1dGVkIG9uIGEgYWN0aW9uIGxpc3RlbmVyXG4gICAgZnVuY3Rpb24gYWN0aW9uUGVyZm9ybWVkKClcbiAgICB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiaW4gYWN0aW9uUGVyZm9ybWVkXCIpOyAvL3Rlc3RcblxuICAgICAgICAvLyBQcmV2ZW50IHNlbmRpbmcgdGhlIGZvcm1cbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAvLyByZXNldCBlcnJvciBtZXNzYWdlc1xuICAgICAgICAkKFwiI3JlZ2lfYXBpX2Vycm9yX21lc3NhZ2VcIikuaGlkZSgpO1xuICAgICAgICAkKFwiI3d3Ml9lcnJvcl9tZXNzYWdlXCIpLmhpZGUoKTtcblxuICAgICAgICAvLyBwdXQgZm9ybSBmaWVsZHMgaW4gamF2YXNjcmlwdCBPYmplY3RcbiAgICAgICAgdmFyIGZvcm1EYXRhID0ge307XG5cbiAgICAgICAgJC5lYWNoKCQodGhpcykuc2VyaWFsaXplQXJyYXkoKSwgZnVuY3Rpb24gKGksIGZpZWxkKSB7XG4gICAgICAgICAgICBmb3JtRGF0YVtmaWVsZC5uYW1lXSA9IGZpZWxkLnZhbHVlO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBmaXggZGF0ZSBvZiBiaXJ0aCAoQVBJIGV4cGVjdHMgY2VydGFpbiBmb3JtYXQpXG4gICAgICAgIGZvcm1EYXRhW1wiYmlydGhfZGF0ZVwiXSA9IGZvcm1EYXRhLmphYXIgKyBcIi1cIiArIGZvcm1EYXRhLm1hYW5kICsgXCItXCIgKyBmb3JtRGF0YS5kYWc7XG5cbiAgICAgICAgY29uc29sZS5sb2coZm9ybURhdGEpO1xuXG4gICAgICAgIC8vIGNoZWNrIHdoZXRoZXIgYW55IG1hbmRhdG9yeSBmaWVsZCBpcyBsZWZ0IGVtcHR5IGJ5IHVzZXIgYW5kXG4gICAgICAgIC8vIGlmIHNvLCBhYm9ydCBmdW5jdGlvblxuICAgICAgICB2YXIgbWFuZGF0b3J5RmllbGRNaXNzZXMgPSBmYWxzZTtcbiAgICAgICAgdmFyIG1hbmRhdG9yeUZpZWxkcyA9IFtcInZvb3JuYWFtXCIsIFwiYWNodGVybmFhbVwiLCBcInBvc3Rjb2RlXCIsIFwiaHVpc251bW1lclwiLCBcImVfbWFpbGFkcmVzXCIsIFwid2FjaHR3b29yZFwiLCBcIndhY2h0d29vcmQyXCIsIFwic2VjdXJpdHlfYW5zd2VyXCJdOyAvL2Ryb3Bkb3ducyAobGlrZSBnZW5kZXIpIGFyZSBhbHdheXMgZmlsbGVkIGluLCBzbyBkb24ndCBwdXQgaW4gdGhpcyBsaXN0XG5cbiAgICAgICAgLy8gKHJlc2V0IGFsbCBmaWVsZHMgdG8gJ3ZhbGlkJyBiZWNhdXNlIHVzZXIgbWF5IGhhdmUgZmlsbGVkIGluIGZpZWxkcyBzaW5jZVxuICAgICAgICAvLyB0aGUgcHJldmlvdXMgdGltZSB0aGlzIGZ1bmN0aW9uIHdhcyBjYWxsZWQpXG4gICAgICAgICQuZWFjaChtYW5kYXRvcnlGaWVsZHMsIGZ1bmN0aW9uIChpLCBtYW5GaWVsZCkge1xuICAgICAgICAgICAgJChcIiNcIiArIG1hbkZpZWxkKS5yZW1vdmVDbGFzcyhcImludmFsaWRcIik7XG4gICAgICAgIH0pXG5cbiAgICAgICAgJC5lYWNoKG1hbmRhdG9yeUZpZWxkcywgZnVuY3Rpb24gKGksIG1hbkZpZWxkKSB7XG4gICAgICAgICAgICBpZiAoZm9ybURhdGFbbWFuRmllbGRdID09IFwiXCIpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgJChcIiNcIiArIG1hbkZpZWxkKS5hZGRDbGFzcyhcImludmFsaWRcIik7XG5cbiAgICAgICAgICAgICAgICBtYW5kYXRvcnlGaWVsZE1pc3NlcyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgXG4gICAgICAgIC8vIGlmIGEgbWFuZGF0b3J5IGZpZWxkIGlzIGVtcHR5LCBzaG93IGVycm9yIG1lc3NhZ2UgdG8gdXNlciBhbmQgYWJvcnQgZnVuY3Rpb25cbiAgICAgICAgaWYgKG1hbmRhdG9yeUZpZWxkTWlzc2VzKVxuICAgICAgICB7IFxuICAgICAgICAgICAgLy8gc2Nyb2xsIHRvIHRvcCBvZiBwYWdlIHNvIHRoYXQgdXNlcnMgc2VlIG1lc3NhZ2UgXCJzb21ldGhpbmcgaXMgbm90IGZpbGxlZCBpblwiXG4gICAgICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7XG4gICAgICAgICAgICAvLyBzaG93IG1lc3NhZ2UgXCJzb21ldGhpbmcgaXMgbm90IGZpbGxlZCBpblwiXG4gICAgICAgICAgICAkKFwiI3JlZ2lzdGVyX2Vycm9yX21lc3NhZ2VcIikuc2hvdygpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBwYXNzd29yZHNOb3RJZGVudGljYWwgPSBmYWxzZTtcblxuICAgICAgICBpZiAoZm9ybURhdGEud2FjaHR3b29yZCAhPSBmb3JtRGF0YS53YWNodHdvb3JkMikgXG4gICAgICAgIHtcbiAgICAgICAgICAgIHBhc3N3b3Jkc05vdElkZW50aWNhbCA9IHRydWU7XG4gICAgICAgICAgICAkKFwiI3d3Ml9lcnJvcl9tZXNzYWdlXCIpLnNob3coKTtcbiAgICAgICAgICAgICQoXCIjd2FjaHR3b29yZFwiKS5hZGRDbGFzcyhcImludmFsaWRcIik7XG4gICAgICAgICAgICAkKFwiI3dhY2h0d29vcmQyXCIpLmFkZENsYXNzKFwiaW52YWxpZFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGFib3J0IGZ1bmN0aW9uIGlmIG1hbmRhdG9yeSBmaWVsZCBtaXNzZXMgb3IgcGFzc3dvcmRzIG5vdCBpZGVudGljYWxcbiAgICAgICAgaWYgKG1hbmRhdG9yeUZpZWxkTWlzc2VzIHx8IHBhc3N3b3Jkc05vdElkZW50aWNhbClcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUubG9nKFwiY29udGludWVkXCIpXG4gICAgICAgIC8vIGxldCBtb2RlbCBzZW5kIHVzZXIgaW5mbyB0byBBUElcbiAgICAgICAgTW9kZWwucmVnaXN0ZXIoZm9ybURhdGEsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBWaWV3SGVscGVyLnNldFZpZXcoJy92aWV3cy9yZWdpc3Rlci9hZnRlcl9yZWdpc3Rlci5odG1sJyk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIE1haW4gZnVuY3Rpb24sIGFsc28gdGhlIHN0YXJ0IHN0YXJ0cG9pbnQgZm9yIGEgcGFnZVxuICAgIGZ1bmN0aW9uIG1haW4oKVxuICAgIHtcbiAgICAgICAgLy8gc2V0IHZpZXcgdG8gcmVnaXN0ZXIgZm9ybVxuICAgICAgICBWaWV3SGVscGVyLnNldFZpZXcoJy92aWV3cy9yZWdpc3Rlci9yZWdpc3Rlci5odG1sJyk7XG5cbiAgICAgICAgLy8gdXNlciBmaWxscyBpbiByZWdpc3RlciBpbmZvOyBjbGlja3MgJ3JlZ2lzdGVyJzogdmlldyBub3RpY2VzIHRoaXMgYW5kIHJlYWN0c1xuICAgICAgICBWaWV3SGVscGVyLnNldEFjdGlvbkxpc3RlbmVyKGFjdGlvblBlcmZvcm1lZCk7XG5cbiAgICAgICAgLy8gZW1haWwgYW5kIHBhc3N3b3JkIGFyZSBzZW5kIHRvIEFQSTsgQVBJIGNoZWNrcyBpZiBlbWFpbCBhbHJlYWR5IGV4aXN0cyAoYW5kIHdoZXRoZXIgcGFzc3dvcmQgaXMgY29ycmVjdD8pIFxuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXG4gICAgcmV0dXJuIHtcbiAgICAgICAgbWFpbjogbWFpblxuICAgIH1cbn07IiwidmFyIFJlc2V0UGFzc3dvcmRDb250cm9sbGVyID0gZnVuY3Rpb24odmlld0hlbHBlciwgbW9kZWwpXG57XG4gICAgdmFyIE1vZGVsICAgICAgPSBtb2RlbDtcbiAgICB2YXIgVmlld0hlbHBlciA9IHZpZXdIZWxwZXI7XG4gICAgXG4gICAgIC8vIEZ1bmN0aW9uIHRoYXQgaXMgZXhlY3V0ZWQgb24gYSBhY3Rpb24gbGlzdGVuZXJcbiAgICBmdW5jdGlvbiBhY3Rpb25QZXJmb3JtZWQoKVxuICAgIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJpbiBhY3Rpb25QZXJmb3JtZWRcIik7IC8vdGVzdFxuXG4gICAgICAgIC8vIFByZXZlbnQgc2VuZGluZyB0aGUgZm9ybVxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIC8vIHJlc2V0IGVycm9yIG1lc3NhZ2VzXG4gICAgICAgICQoXCIjcmVzZXRfcGFzc3dvcmRfYXBpX2Vycm9yX21lc3NhZ2VcIikuaGlkZSgpO1xuICAgICAgICAkKFwiI3d3Ml9lcnJvcl9tZXNzYWdlXCIpLmhpZGUoKTtcblxuICAgICAgICAvLyBwdXQgZm9ybSBmaWVsZHMgaW4gamF2YXNjcmlwdCBPYmplY3RcbiAgICAgICAgdmFyIGZvcm1EYXRhID0ge307XG5cbiAgICAgICAgJC5lYWNoKCQodGhpcykuc2VyaWFsaXplQXJyYXkoKSwgZnVuY3Rpb24gKGksIGZpZWxkKSB7XG4gICAgICAgICAgICBmb3JtRGF0YVtmaWVsZC5uYW1lXSA9IGZpZWxkLnZhbHVlO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBjaGVjayB3aGV0aGVyIGFueSBtYW5kYXRvcnkgZmllbGQgaXMgbGVmdCBlbXB0eSBieSB1c2VyIGFuZFxuICAgICAgICAvLyBpZiBzbywgYWJvcnQgZnVuY3Rpb25cbiAgICAgICAgdmFyIG1hbmRhdG9yeUZpZWxkTWlzc2VzID0gZmFsc2U7XG4gICAgICAgIHZhciBtYW5kYXRvcnlGaWVsZHMgPSBbXCJ3YWNodHdvb3JkXCIsIFwid2FjaHR3b29yZDJcIiwgXCJlX21haWxhZHJlc1wiLFwic2VjdXJpdHlfYW5zd2VyXCJdOyAvL2Ryb3Bkb3ducyAobGlrZSBzZWN1cml0eV9xdWVzdGlvbl9hbnN3ZXIpIGFyZSBhbHdheXMgZmlsbGVkIGluLCBzbyBkb24ndCBwdXQgaW4gdGhpcyBsaXN0XG5cbiAgICAgICAgLy8gKHJlc2V0IGFsbCBmaWVsZHMgdG8gJ3ZhbGlkJyBiZWNhdXNlIHVzZXIgbWF5IGhhdmUgZmlsbGVkIGluIGZpZWxkcyBzaW5jZVxuICAgICAgICAvLyB0aGUgcHJldmlvdXMgdGltZSB0aGlzIGZ1bmN0aW9uIHdhcyBjYWxsZWQpXG4gICAgICAgICQuZWFjaChtYW5kYXRvcnlGaWVsZHMsIGZ1bmN0aW9uIChpLCBtYW5GaWVsZCkge1xuICAgICAgICAgICAgJChcIiNcIiArIG1hbkZpZWxkKS5yZW1vdmVDbGFzcyhcImludmFsaWRcIik7XG4gICAgICAgIH0pXG5cbiAgICAgICAgJC5lYWNoKG1hbmRhdG9yeUZpZWxkcywgZnVuY3Rpb24gKGksIG1hbkZpZWxkKSB7XG4gICAgICAgICAgICBpZiAoZm9ybURhdGFbbWFuRmllbGRdID09IFwiXCIpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgJChcIiNcIiArIG1hbkZpZWxkKS5hZGRDbGFzcyhcImludmFsaWRcIik7XG5cbiAgICAgICAgICAgICAgICBtYW5kYXRvcnlGaWVsZE1pc3NlcyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgXG4gICAgICAgIC8vIGlmIGEgbWFuZGF0b3J5IGZpZWxkIGlzIGVtcHR5LCBzaG93IGVycm9yIG1lc3NhZ2UgdG8gdXNlciBhbmQgYWJvcnQgZnVuY3Rpb25cbiAgICAgICAgaWYgKG1hbmRhdG9yeUZpZWxkTWlzc2VzKVxuICAgICAgICB7IFxuICAgICAgICAgICAgLy8gc2Nyb2xsIHRvIHRvcCBvZiBwYWdlIHNvIHRoYXQgdXNlcnMgc2VlIG1lc3NhZ2UgXCJzb21ldGhpbmcgaXMgbm90IGZpbGxlZCBpblwiXG4gICAgICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7XG4gICAgICAgICAgICAvLyBzaG93IG1lc3NhZ2UgXCJzb21ldGhpbmcgaXMgbm90IGZpbGxlZCBpblwiXG4gICAgICAgICAgICAkKFwiI3Jlc2V0X2Vycm9yX21lc3NhZ2VcIikuc2hvdygpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBwYXNzd29yZHNOb3RJZGVudGljYWwgPSBmYWxzZTtcblxuICAgICAgICBpZiAoZm9ybURhdGEud2FjaHR3b29yZCAhPSBmb3JtRGF0YS53YWNodHdvb3JkMikgXG4gICAgICAgIHtcbiAgICAgICAgICAgIHBhc3N3b3Jkc05vdElkZW50aWNhbCA9IHRydWU7XG4gICAgICAgICAgICAkKFwiI3d3Ml9lcnJvcl9tZXNzYWdlXCIpLnNob3coKTtcbiAgICAgICAgICAgICQoXCIjd2FjaHR3b29yZFwiKS5hZGRDbGFzcyhcImludmFsaWRcIik7XG4gICAgICAgICAgICAkKFwiI3dhY2h0d29vcmQyXCIpLmFkZENsYXNzKFwiaW52YWxpZFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGFib3J0IGZ1bmN0aW9uIGlmIG1hbmRhdG9yeSBmaWVsZCBtaXNzZXMgb3IgcGFzc3dvcmRzIG5vdCBpZGVudGljYWxcbiAgICAgICAgaWYgKG1hbmRhdG9yeUZpZWxkTWlzc2VzIHx8IHBhc3N3b3Jkc05vdElkZW50aWNhbClcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUubG9nKFwiY29udGludWVkXCIpXG4gICAgICAgIC8vIGxldCBtb2RlbCBzZW5kIHVzZXIgaW5mbyB0byBBUElcbiAgICAgICAgTW9kZWwucmVzZXRwYXNzd29yZChmb3JtRGF0YSwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIFZpZXdIZWxwZXIuc2V0Vmlldygndmlld3MvcmVzZXRwYXNzd29yZC9hZnRlcl9yZXNldC5odG1sJyk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIE1haW4gZnVuY3Rpb24sIGFsc28gdGhlIHN0YXJ0IHN0YXJ0cG9pbnQgZm9yIGEgcGFnZVxuICAgIGZ1bmN0aW9uIG1haW4oKVxuICAgIHsgICAgICBcbiAgICAgICAgLy8gc2V0IHZpZXcgdG8gcmVzZXQgcGFzc3dvcmQgZm9ybVxuICAgICAgICBWaWV3SGVscGVyLnNldFZpZXcoJ3ZpZXdzL3Jlc2V0cGFzc3dvcmQvcmVzZXRwYXNzd29yZC5odG1sJyk7XG5cbiAgICAgICAgVmlld0hlbHBlci5zZXRBY3Rpb25MaXN0ZW5lcihhY3Rpb25QZXJmb3JtZWQpO1xuICAgICAgICAvLyBuZXcgYWN0aW9uIHdhbm5lciBlciBvcCBmaWx0ZXIgd29yZHQgZ2VkcnVrdFxuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXG4gICAgcmV0dXJuIHtcbiAgICAgICAgbWFpbjogbWFpblxuICAgIH1cbn07XG5cblxuXG5cbiIsInZhciBQcm9kdWN0Q29udHJvbGxlciA9IGZ1bmN0aW9uKHZpZXdIZWxwZXIsIG1vZGVsKVxue1xuICAgIHZhciBNb2RlbCAgICAgID0gbW9kZWw7XG4gICAgdmFyIFZpZXdIZWxwZXIgPSB2aWV3SGVscGVyO1xuICAgIFxuICAgIC8vIEZ1bmN0aW9uIHRoYXQgaXMgZXhlY3V0ZWQgb24gYSBhY3Rpb24gbGlzdGVuZXJcbiAgICBmdW5jdGlvbiBhY3Rpb25QZXJmb3JtZWQoZXZlbnQpXG4gICAge1xuICAgICAgICAvLyBQcmV2ZW50IHNlbmRpbmcgdGhlIGZvcm1cbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuXG5cblxuXG5cbiAgICAgICAgLy8gTG9vcCB0cm91Z2ggdGhlIGZvcm0gZGF0YSBhbmQgZ2V0IGFsbCBmaWVsZHNcbiAgICAgICAgdmFyIGZvcm1EYXRhID0ge307XG4gICAgICAgICQuZWFjaCgkKHRoaXMpLnNlcmlhbGl6ZUFycmF5KCksIGZ1bmN0aW9uIChpLCBmaWVsZCkge1xuICAgICAgICAgICAgZm9ybURhdGFbZmllbGQubmFtZV0gPSBmaWVsZC52YWx1ZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gbGV0IG1vZGVsIHNlbmQgZW1haWwgYW5kIHBhc3N3b3JkIHRvIEFQSVxuICAgICAgICBNb2RlbC5sb2dpbihmb3JtRGF0YS5lbWFpbCwgZm9ybURhdGEucGFzc3dvcmQsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAvLyBzaG93IHVpdGxvZ2dlbiBidXR0b25cbiAgICAgICAgICAgICQoXCIjaW5sb2dnZW5fdGV4dFwiKS5oaWRlKCk7XG4gICAgICAgICAgICAkKFwiI3VpdGxvZ2dlbl90ZXh0XCIpLnNob3coKTtcblxuICAgICAgICAgICAgLy8gV2VlcmdlZWYgZWVuIGFuZGVyZSBwYWdpbmEgZ2ViYXNzZWVyZCBvcCAnYWRtaW4nIG9mICdyZWdpc3RlcmVkIHVzZXInXG4gICAgICAgICAgICBuZXcgUGFnZUNvbnRyb2xsZXIobmV3IFBhZ2VWaWV3SGVscGVyKCksIG5ldyBQYWdlTW9kZWwoKSkubWFpbigpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBsZXQgdmlldyBzaG93IHZpZXcgd2l0aCBkYXRhIGZyb20gZGF0YWJhc2VcbiAgICBmdW5jdGlvbiBzaG93VmlldyhkYXRhKVxuICAgIHtcbiAgICAgICAgdmlld0hlbHBlci5zZXRWaWV3KGRhdGEpO1xuICAgIH1cblxuICAgIC8vIE1haW4gZnVuY3Rpb24sIGFsc28gdGhlIHN0YXJ0IHN0YXJ0cG9pbnQgZm9yIGEgcGFnZVxuICAgIGZ1bmN0aW9uIG1haW4oKVxuICAgIHtcbiAgICAgICAgLy8gd2hhdCBoYXBwZW5zOlxuICAgICAgICAvLyAxKSB1c2VyIGNsaWNrcyBvbiBhIHByb2R1Y3QgXG4gICAgICAgIC8vIDIpIG1vZGVsIGdldHMgaW5mbyBvZiB0aGUgcHJvZHVjdFxuICAgICAgICAvLyAzKSBzeXN0ZW0gcHV0cyBpbmZvIGluIGh0bWxcbiAgICAgICAgLy8gNCkgdmlldyBzaG93cyBpbmZvXG5cbiAgICAgICAgLy8gMikgbW9kZWwgZ2V0cyBpbmZvIG9mIHRoZSBwcm9kdWN0XG4gICAgICAgIC8vIDMpIHN5c3RlbSBwdXRzIGluZm8gaW4gaHRtbFxuICAgICAgICBtb2RlbC5HZXRQcm9kdWN0SW5mbyhzaG93Vmlldyk7XG5cblxuXG4gICAgICAgIC8vIHNldCB2aWV3IHRvIGxvZ2luIGZvcm1cbiAgICAgICAgLy9WaWV3SGVscGVyLnNldFZpZXcoKTtcblxuICAgICAgICAvLyB1c2VyIGZpbGxzIGluIGVtYWlsIGFuZCBwYXNzd29yZDsgY2xpY2tzICdsb2dpbic6IFZJRVcgbm90aWNlcyB0aGlzIGFuZCByZWFjdHNcbiAgICAgICAgLy9WaWV3SGVscGVyLnNldEFjdGlvbkxpc3RlbmVyKGFjdGlvblBlcmZvcm1lZCk7XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHRoZSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgcHJvZ3JhbXMgKHRoZSBjb250cm9sbGVyIGluIHRoaXMgY2FzZSlcbiAgICByZXR1cm4ge1xuICAgICAgICBtYWluOiBtYWluLFxuICAgICAgICBzaG93VmlldyA6IHNob3dWaWV3XG4gICAgfVxufTsiLCJ2YXIgQWRtaW5WaWV3SGVscGVyID0gZnVuY3Rpb24gKClcbntcbiAgICBmdW5jdGlvbiBzZXRBY3Rpb25MaXN0ZW5lcihhY3Rpb24pXG4gICAge1xuICAgICAgICAkKGRvY3VtZW50KS5yZWFkeShhY3Rpb24pOyAvLyBpZiAnZG9jdW1lbnQgcmVhZHknIHBlcmZvcm0gXCJhY3Rpb25cIlxuICAgIH1cblxuICAgIC8vIENoYW5nZSB0aGUgdmlldyBvZiB0aGUgcGFnZVxuICAgICBmdW5jdGlvbiBzZXRWaWV3KGRhdGEpXG4gICAge1xuICAgICAgICBkb2N1bWVudC50aXRsZSA9XCJBZG1pbiAtIEFaIEdhbWVzXCI7XG5cbiAgICAgICAgJChcIiNjb21wb25lbnRcIikubG9hZCgnL3ZpZXdzL2FkbWluL2FkbWluLmh0bWwnLCBmdW5jdGlvbiAoKSB7IC8vIHdhYXIgaWQgPSAnY29tcG9uZW50JyBkb2UgLmxvYWQuLi4uLi5cbiAgICAgICAgICAgICQuZWFjaChkYXRhLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgLy8gQ2xvbmUgcHJvZHVjdFxuICAgICAgICAgICAgICAgIHZhciB1c2VyID0gJCgnI3NpbmdsZV91c2VyJykuY2xvbmUoKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBBZGQgcHJvZHVjdCBpbmZvXG4gICAgICAgICAgICAgICAgJCh1c2VyKS5maW5kKFwiLnVzZXJfX2ZpcnN0bmFtZVwiKS5odG1sKHZhbHVlLmZpcnN0X25hbWUpO1xuICAgICAgICAgICAgICAgICQodXNlcikuZmluZChcIi51c2VyX19maXJzdG5hbWVcIikuYXR0cignaHJlZicsICcvYWRtaW5fdXNlci8nICsgdmFsdWUudXNlcl9pZCk7XG4gICAgICAgICAgICAgICAgJCh1c2VyKS5maW5kKFwiLnVzZXJfX2luc2VydGlvblwiKS5odG1sKHZhbHVlLmluc2VydGlvbik7XG4gICAgICAgICAgICAgICAgJCh1c2VyKS5maW5kKFwiLnVzZXJfX2xhc3RuYW1lXCIpLmh0bWwodmFsdWUuc3VybmFtZSk7XG4gICAgICAgICAgICAgICAgJCh1c2VyKS5maW5kKFwiLnVzZXJfX2VtYWlsXCIpLmh0bWwodmFsdWUuZW1haWwpO1xuICAgICAgICAgICAgICAgICQodXNlcikuZmluZChcIi51c2VyX19waG9uZW51bWJlclwiKS5odG1sKHZhbHVlLnBob25lX251bWJlcik7XG5cbiAgICAgICAgICAgICAgICAkKFwiI3VzZXJzX2JvZHlcIikuYXBwZW5kKHVzZXIpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgZmlyc3QgbGlzdCBpdGVtLCBiZWNhdXNlIHRoaXMgaXRlbSBpcyBhbHdheXMgZW1wdHlcbiAgICAgICAgICAgICQoXCIjc2luZ2xlX3VzZXJcIikuZmlyc3QoKS5yZW1vdmUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgc2V0QWN0aW9uTGlzdGVuZXI6IHNldEFjdGlvbkxpc3RlbmVyLFxuICAgICAgICBzZXRWaWV3OiBzZXRWaWV3LFxuICAgIH1cbn1cblxuICAgIC8vZGF0IGhpZXJvbmRlciB6YXQgYWFyZGlnIHdhdCB3ZXJrIGluLi4uIERvbmFsZCB3aWwgbm9nIGZmIGhvdWRlblxuXG4gICAgLy8gZnVuY3Rpb24gc2hvd1VzZXJzKGRhdGEpXG4gICAgLy8ge1xuICAgIC8vICAgICBkb2N1bWVudC50aXRsZSA9XCJBZG1pbiAtIEFaIEdhbWVzXCI7XG5cbiAgICAvLyAgICAgJChcIiNjb21wb25lbnRcIikubG9hZCgnL3ZpZXdzL2FkbWluL2FkbWluLmh0bWwnLCBmdW5jdGlvbiAoKSB7XG4gICAgLy8gICAgICAgICB2YXIgdGFibGUgPSAkKFwiPHRhYmxlIGlkPSd1c2Vyc190YWJsZSc+PC90YWJsZT5cIik7XG5cbiAgICAvLyAgICAgICAgIC8vIHRhYmxlIGhlYWRlclxuICAgIC8vICAgICAgICAgdmFyIHJvdyA9ICQoJzx0cj48L3RyPicpO1xuICAgIC8vICAgICAgICAgcm93LmFwcGVuZCgnPHRkPlZvb3JuYWFtPC90ZD48dGQ+VHVzc2VudjwvdGQ+PHRkPkFjaHRlcm5hYW08L3RkPjx0ZD5HZWJydWlrZXJzbmFhbTwvdGQ+PHRkPmVtYWlsPC90ZD48dGQ+dHlwZTwvdGQ+Jyk7XG5cbiAgICAvLyAgICAgICAgICQuZWFjaChkYXRhLCBmdW5jdGlvbihudW1iZXJyLCB1c2VyKSBcbiAgICAvLyAgICAgICAgIHtcbiAgICAvLyAgICAgICAgICAgICB2YXIgcm93ID0gJCgnPHRyPjwvdHI+Jyk7XG4gICAgLy8gICAgICAgICAgICAgJC5lYWNoKHVzZXIsIGZ1bmN0aW9uKGtleSwgdmFsdWUpXG4gICAgLy8gICAgICAgICAgICAge1xuICAgIC8vICAgICAgICAgICAgICAgICBpZiAodmFsdWUgIT0gdW5kZWZpbmVkKVxuICAgIC8vICAgICAgICAgICAgICAgICB7XG4gICAgLy8gICAgICAgICAgICAgICAgICAgICByb3cuYXBwZW5kKCAkKFwiPHRkIGNsYXNzPSd0ZF91c2VyJz48L3RkPlwiKS5odG1sKFN0cmluZyh2YWx1ZSkpICk7XG4gICAgLy8gICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgLy8gICAgICAgICAgICAgICAgICAgICByb3cuYXBwZW5kKCAkKFwiPHRkIGNsYXNzPSd0ZF91c2VyJz48L3RkPlwiKSApO1xuICAgIC8vICAgICAgICAgICAgICAgICB9XG4gICAgLy8gICAgICAgICAgICAgfSlcbiAgICAvLyAgICAgICAgICAgICB0YWJsZS5hcHBlbmQocm93KTtcbiAgICAvLyAgICAgICAgICAgICAvLyAvL2ZvciBhZGRpdGlvbmFsIHVzZXIgaW5mbyBpZiBjbGlja2VkXG4gICAgLy8gICAgICAgICAgICAgLy8gcm93ID0gJCgnPGRpdiBjbGFzcz1cInRvYmV0YWJsZVwiPjwvZGl2PicpO1xuICAgIC8vICAgICAgICAgICAgIC8vIHRhYmxlLmFwcGVuZChyb3cpO1xuICAgIC8vICAgICAgICAgfSk7XG4gICAgLy8gICAgICAgICAkKCcjdXNlcnMnKS5hcHBlbmQodGFibGUpO1xuICAgIC8vICAgICB9KTtcbiAgICAvLyB9XG5cbiAgICAvLyBmdW5jdGlvbiBwdXRJbmZvSW5IdG1sKGNsaWNrZWQsIGRhdGEpXG4gICAgLy8ge1xuICAgIC8vICAgICBjb25zb2xlLmxvZygnaW4gcHV0SW5mb0luSHRtbCgpJyk7XG4gICAgLy8gICAgIC8vIHNob3cgaW5mbyBvZiB0aGUgcmlnaHQgdXNlciAoaWYgbm90IGFscmVhZHkgc2hvd2luZyBpdClcbiAgICAvLyAgICAgLy8gaW5zZXJ0IHJvdyBhcyB0YWJsZSBoZWFkZXJcbiAgICAvLyAgICAgdmFyIGhlYWRlcnJvdyA9ICQoJzx0cj48L3RyPicpLmFwcGVuZCgnPHRkPnd3PC90ZD48dGQ+Z2VibG9ra2VlcmQ8L3RkPjx0ZD5pZDwvdGQ+PHRkPmdlbmRlcjwvdGQ+PHRkPmdlYm9vcnRlZGF0dW08L3RkPjx0ZD52cmFhZzwvdGQ+PHRkPmFudHdvb3JkPC90ZD4nKTtcblxuICAgIC8vICAgICAvLyBpbnNlcnQgcm93IHdpdGggdGUgdXNlcmluZm9cbiAgICAvLyAgICAgdmFyIGluZm9yb3cgPSAkKCc8dHI+PC90cj4nKTtcblxuICAgIC8vICAgICB2YXIgY291bnQgPSAwO1xuICAgIC8vICAgICAkLmVhY2goZGF0YVswXSwgZnVuY3Rpb24oa2V5LCB2YWx1ZSlcbiAgICAvLyAgICAge1xuICAgIC8vICAgICAgICAgaWYgKGNvdW50ID09IDEpIHsgLy8gZ2VibG9ra2VlcmRcbiAgICAvLyAgICAgICAgICAgICBpZiAodmFsdWUgPT0gMSkge1xuICAgIC8vICAgICAgICAgICAgICAgICB2YWx1ZSA9ICduZWUnO1xuICAgIC8vICAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT0gMCkge1xuICAgIC8vICAgICAgICAgICAgICAgICB2YWx1ZSA9ICdqYSdcbiAgICAvLyAgICAgICAgICAgICB9IGVsc2Uge1xuICAgIC8vICAgICAgICAgICAgICAgICB2YWx1ZSA9ICdkYiBmb3V0PydcbiAgICAvLyAgICAgICAgICAgICB9XG4gICAgLy8gICAgICAgICB9XG5cbiAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKGNvdW50KTtcbiAgICAvLyAgICAgICAgIHZhciB0ZCA9ICQoJzx0ZD48L3RkPicpLmFwcGVuZCh2YWx1ZSk7XG5cbiAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKCdrZXksIHZhbHVlOiAnICsga2V5LCB2YWx1ZSk7XG5cbiAgICAvLyAgICAgICAgIGluZm9yb3cuYXBwZW5kKHRkKTtcblxuICAgIC8vICAgICAgICAgY291bnQgKz0gMTtcbiAgICAvLyAgICAgfSlcblxuICAgIC8vICAgICBpbmZvcm93Lmluc2VydEFmdGVyKCAkKGNsaWNrZWQpLmNsb3Nlc3QoJ3RyJykgKTtcbiAgICAvLyAgICAgaGVhZGVycm93Lmluc2VydEFmdGVyKCQoY2xpY2tlZCkuY2xvc2VzdCgndHInKSk7XG4gICAgLy8gfVxuXG4iLCJ2YXIgQWRtaW5Vc2VyVmlld0hlbHBlciA9IGZ1bmN0aW9uICgpXG57XG4gICAgZnVuY3Rpb24gc2V0QWN0aW9uTGlzdGVuZXIoYWN0aW9uKVxuICAgIHtcbiAgICAgICAgJChkb2N1bWVudCkucmVhZHkoYWN0aW9uKTsgLy8gaWYgJ2RvY3VtZW50IHJlYWR5JyBwZXJmb3JtIFwiYWN0aW9uXCJcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXRWaWV3KGRhdGEpXG4gICAge1xuICAgICAgICAvL3ByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICQoXCIjY29tcG9uZW50XCIpLmxvYWQoJy92aWV3cy9hZG1pbnVzZXIvYWRtaW51c2VyLmh0bWwnLCBmdW5jdGlvbiAoKVxuICAgICAgICB7XG4gICAgICAgICAgICAkLmVhY2goZGF0YSwgZnVuY3Rpb24oa2V5LCB2YWx1ZSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAkKFwiI2ZpcnN0X25hbWVcIikudmFsKHZhbHVlLmZpcnN0X25hbWUpO1xuICAgICAgICAgICAgICAgICQoXCIjaW5zZXJ0aW9uXCIpLnZhbCh2YWx1ZS5pbnNlcnRpb24pO1xuICAgICAgICAgICAgICAgICQoXCIjc3VybmFtZVwiKS52YWwodmFsdWUuc3VybmFtZSk7XG4gICAgICAgICAgICAgICAgJChcIiN1c2VyX3R5cGVcIikudmFsKHZhbHVlLnVzZXJfdHlwZSk7XG4gICAgICAgICAgICAgICAgJChcIiNlbWFpbFwiKS52YWwodmFsdWUuZW1haWwpO1xuICAgICAgICAgICAgICAgICQoXCIjcGFzc3dvcmRcIikuYXR0cigncGxhY2Vob2xkZXInLCAnVnVsIGhpZXIgaWV0cyBpbiBvbSBoZXQgd2FjaHR3b29yZCB0ZSB2ZXJhbmRlcmVuJyk7XG5cbiAgICAgICAgICAgICAgICAkKFwiI2dlbmRlclwiKS52YWwodmFsdWUuZ2VuZGVyKTtcblxuICAgICAgICAgICAgICAgICQoXCIjZGF0ZV9vZl9iaXJ0aFwiKS52YWwodmFsdWUuZGF0ZV9vZl9iaXJ0aCk7XG4gICAgICAgICAgICAgICAgJChcIiNwaG9uZV9udW1iZXJcIikudmFsKHZhbHVlLnBob25lX251bWJlcik7XG5cbiAgICAgICAgICAgICAgICAkKFwiI2lzX2FjdGl2ZVwiKS52YWwodmFsdWUuaXNfYWN0aXZlKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0U2F2ZUxpc3RlbmVyKGFjdGlvbilcbiAgICB7XG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdzdWJtaXQnLCAnI3VzZXJmb3JtJywgYWN0aW9uKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXREZWxldGVMaXN0ZW5lcihhY3Rpb24pXG4gICAge1xuICAgICAgICAkKFwiI2NvbXBvbmVudFwiKS5vZmYoKS5vbihcImNsaWNrXCIsICcjZGVsZXRlX2J0bicsIGFjdGlvbik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgc2V0QWN0aW9uTGlzdGVuZXI6IHNldEFjdGlvbkxpc3RlbmVyLFxuICAgICAgICBzZXRWaWV3OiBzZXRWaWV3LFxuICAgICAgICBzZXRTYXZlTGlzdGVuZXI6IHNldFNhdmVMaXN0ZW5lcixcbiAgICAgICAgc2V0RGVsZXRlTGlzdGVuZXI6IHNldERlbGV0ZUxpc3RlbmVyXG4gICAgfVxufSIsInZhciBDYXJ0Vmlld0hlbHBlciA9IGZ1bmN0aW9uKClcbntcbiAgICAvLyBDaGFuZ2UgdGhlIHZpZXcgb2YgdGhlIHBhZ2VcbiAgICBmdW5jdGlvbiBzZXRWaWV3KHZpZXdEYXRhKVxuICAgIHtcbiAgICAgICAgaWYgKHZpZXdEYXRhICE9IFwiXCIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZpZXdEYXRhLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgYWRkSXRlbShpdGVtKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSB0b3RhbCBwcmljZSAgb2YgdGhlIGNhcnRcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge2ludH0gdG90YWxQcmljZSAgVG90YWwgcHJpY2Ugb2YgdGhlIGNhcnRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiB1cGRhdGVUb3RhbFByaWNlKG5ld1ByaWNlKVxuICAgIHtcbiAgICAgICAgbmV3UHJpY2UgPSBwYXJzZUZsb2F0KG5ld1ByaWNlKSArIHBhcnNlRmxvYXQoJChcIi5jYXJ0X190b3RhbCAucHJpY2VcIikuaHRtbCgpLnN1YnN0cigxKSk7XG4gICAgICAgICQoXCIuY2FydF9fdG90YWwgLnByaWNlXCIpLmh0bWwoXCLigqxcIiArIHBhcnNlRmxvYXQobmV3UHJpY2UpLnRvRml4ZWQoMikpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1ha2UgbmV3IGNhcnQgaXRlbSB2aXNpYWJsZSBpbiB0aGUgRE9NXG4gICAgICogXG4gICAgICogQHBhcmFtICB7YXJyYXl9ICBpdGVtICBQcm9kdWN0XG4gICAgICovXG4gICAgZnVuY3Rpb24gYWRkSXRlbShpdGVtKVxuICAgIHtcbiAgICAgICAgdmFyIGNhcnRJdGVtID0gJCgnPGRpdj4nKS5odG1sKCQoJy5zaWRlYmFyX19jb250ZW50X190bXAnKS5odG1sKCkpO1xuXG4gICAgICAgIGNhcnRJdGVtLmZpbmQoXCIuY2FydF9faXRlbV9fdGl0bGVcIikuaHRtbChpdGVtLnRpdGxlKTtcbiAgICAgICAgY2FydEl0ZW0uZmluZChcIi5jYXJ0X19pdGVtX19wcmljZVwiKS5odG1sKFwi4oKsXCIgKyBpdGVtLnByaWNlKTtcbiAgICAgICAgY2FydEl0ZW0uZmluZChcIi5jYXJ0X19pdGVtX19pbWFnZSBpbWdcIikuYXR0cihcInNyY1wiLCBpdGVtLmltYWdlKTtcbiAgICAgICAgY2FydEl0ZW0uZmluZChcIi5jYXJ0X19pdGVtXCIpLmF0dHIoXCJkYXRhLWlkXCIsIGl0ZW0uZWFuX251bWJlcilcblxuICAgICAgICAkKFwiLmNhcnRcIikuYXBwZW5kKGNhcnRJdGVtKTtcblxuICAgICAgICAvLyBDaGFuZ2UgYW1vdW50IG9mIGl0ZW1zXG4gICAgICAgIHZhciBhbW91bnQgPSAkKFwiLmNhcnRfYnV0dG9uIC5jb3VudFwiKS5odG1sKCk7XG4gICAgICAgICQoXCIuY2FydF9idXR0b24gLmNvdW50XCIpLmh0bWwocGFyc2VJbnQoYW1vdW50KSArIDEpO1xuXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgdG90YWwgcHJpY2VcbiAgICAgICAgdXBkYXRlVG90YWxQcmljZShpdGVtLnByaWNlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMb2FkIHRoZSBjYXJ0IHdoZW4gdGhlIHBhZ2UgaXMgIHJlYXNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gc2V0QWN0aW9uTGlzdGVuZXIoYWN0aW9uKVxuICAgIHtcbiAgICAgICAgJChkb2N1bWVudCkucmVhZHkoYWN0aW9uKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMaXN0ZW5lciBmb3IgdGhlIEFkZCB0byBjYXJ0IGJ1dHRvblxuICAgICAqIFxuICAgICAqIEBwYXJhbSAge2Z1bmN0aW9ufSBhZGR0b0NhcnQgIE1vZGVsIGNhbGxiYWNrXG4gICAgICovXG4gICAgZnVuY3Rpb24gc2V0QWRkUHJvZHVjdExpc3RlbmVyKGFkZFRvQ2FydClcbiAgICB7XG4gICAgICAgICQoXCJib2R5XCIpLm9uKFwiY2xpY2tcIiwgXCIuYWRkdG9jYXJ0XCIsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgdmFyIHByb2R1Y3RfaWQgPSAkKHRoaXMpLmRhdGEoXCJpZFwiKTtcbiAgICAgICAgICAgIGFkZFRvQ2FydChwcm9kdWN0X2lkKTtcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMaXN0ZW5lciBmb3IgcmVtb3ZlIGEgcHJvZHVjdCBmcm9tIHRoZSBET00gY2FydFxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IHJlbW92ZVByb2R1Y3QgQ2FsbGJhY2sgZnVuY3Rpb24gdG8gcmVtb3ZlIHRoZSBwcm9kY3V0IGZyb20gdGhlIG1lbW9yeVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHNldFJlbW92ZUxpc3RlbmVyKHJlbW92ZVByb2R1Y3QpIHtcbiAgICAgICAgJChcImJvZHlcIikub24oXCJjbGlja1wiLCBcIi5jYXJ0X19pdGVtX19yZW1vdmVcIiwgZnVuY3Rpb24gKGV2ZW50KXtcbiAgICAgICAgICAgIHZhciBjYXJ0aXRlbSAgID0gJCh0aGlzKS5wYXJlbnQoKTtcbiAgICAgICAgICAgIHZhciBwcm9kdWN0X2lkID0gJCh0aGlzKS5wYXJlbnQoKS5kYXRhKFwiaWRcIik7XG5cbiAgICAgICAgICAgIC8vIFJlbW92ZSBwcm9kdWN0IGZyb20gRE9NIGNhcnRcbiAgICAgICAgICAgICQoY2FydGl0ZW0pLmFkZENsYXNzKFwiY2FydF9faXRlbS0tcmVtb3ZlZFwiKTtcbiAgICAgICAgICAgICQoY2FydGl0ZW0pLm9uKFwiYW5pbWF0aW9uZW5kIHdlYmtpdEFuaW1hdGlvbkVuZCBvQW5pbWF0aW9uRW5kIE1TQW5pbWF0aW9uRW5kXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlKCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gRGVjcmVzZSBjb3VudFxuICAgICAgICAgICAgdmFyIGFtb3VudCA9ICQoXCIuY2FydF9idXR0b24gLmNvdW50XCIpLmh0bWwoKTtcbiAgICAgICAgICAgICQoXCIuY2FydF9idXR0b24gLmNvdW50XCIpLmh0bWwocGFyc2VJbnQoYW1vdW50KSAtIDEpO1xuXG4gICAgICAgICAgICByZW1vdmVQcm9kdWN0KHByb2R1Y3RfaWQpXG4gICAgICAgICAgICB1cGRhdGVUb3RhbFByaWNlKC0kKGNhcnRpdGVtKS5maW5kKFwiLmNhcnRfX2l0ZW1fX3ByaWNlXCIpLmh0bWwoKS5zdWJzdHIoMSkpXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICAvLyBSZXR1cm4gdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBieSBvdGhlciBwcm9ncmFtcyAodGhlIGNvbnRyb2xsZXIgaW4gdGhpcyBjYXNlKVxuICAgIHJldHVybiB7XG4gICAgICAgIHNldFZpZXc6IHNldFZpZXcsXG4gICAgICAgIGFkZEl0ZW06IGFkZEl0ZW0sXG4gICAgICAgIHVwZGF0ZVRvdGFsUHJpY2U6IHVwZGF0ZVRvdGFsUHJpY2UsXG4gICAgICAgIHNldEFjdGlvbkxpc3RlbmVyOiBzZXRBY3Rpb25MaXN0ZW5lcixcbiAgICAgICAgc2V0QWRkUHJvZHVjdExpc3RlbmVyOiBzZXRBZGRQcm9kdWN0TGlzdGVuZXIsXG4gICAgICAgIHNldFJlbW92ZUxpc3RlbmVyOiBzZXRSZW1vdmVMaXN0ZW5lclxuICAgIH1cbn07IiwidmFyIEVycm9yVmlld0hlbHBlciA9IGZ1bmN0aW9uKClcbntcbiAgICAvLyBDaGFuZ2UgdGhlIHZpZXcgb2YgdGhlIHBhZ2VcbiAgICBmdW5jdGlvbiBzZXRWaWV3KClcbiAgICB7XG4gICAgICAgIGRvY3VtZW50LnRpdGxlID0gXCJPZXBzIC0gQVogR2FtZXNcIjtcblxuICAgICAgICAkKFwiI2NvbXBvbmVudFwiKS5sb2FkKCcvdmlld3MvZXJyb3IvZXJyb3IuaHRtbCcpO1xuICAgIH1cblxuICAgIC8vIEFjdGlvbkxpc3RlbmVyIHRoYXQgZXhlY3V0ZXMgYWN0aW9ucyBvbiBzcGVjaWZpYyBldmVudHNcbiAgICBmdW5jdGlvbiBzZXRBY3Rpb25MaXN0ZW5lcihldmVudEhhbmRsZXIpXG4gICAge1xuICAgICAgICAkKGRvY3VtZW50KS5yZWFkeShldmVudEhhbmRsZXIpO1xuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXG4gICAgcmV0dXJuIHtcbiAgICAgICAgc2V0Vmlldzogc2V0VmlldyxcbiAgICAgICAgc2V0QWN0aW9uTGlzdGVuZXI6IHNldEFjdGlvbkxpc3RlbmVyXG4gICAgfVxufTsiLCJ2YXIgTG9naW5WaWV3SGVscGVyID0gZnVuY3Rpb24oKVxue1xuICAgIC8vIENoYW5nZSB0aGUgdmlldyBvZiB0aGUgcGFnZVxuICAgIGZ1bmN0aW9uIHNldFZpZXcoKVxuICAgIHtcbiAgICAgICAgZG9jdW1lbnQudGl0bGUgPVwiSW5sb2dnZW4gLSBBWiBHYW1lc1wiO1xuXG4gICAgICAgICQoXCIjY29tcG9uZW50XCIpLmxvYWQoJy92aWV3cy9sb2dpbi9sb2dpbi5odG1sJyk7XG4gICAgfVxuXG4gICAgLy8gRXhlY3V0ZSB0aGUgZXZlbnQgd2hlbiAnc29tZXRoaW5nJyBoYXBwZW5zICh3aGVuIGEgYnV0dG9uIGlzIGNsaWNrZWQgZm9yIGV4YW1wbGUpXG4gICAgZnVuY3Rpb24gc2V0QWN0aW9uTGlzdGVuZXIoYWN0aW9uKVxuICAgIHtcbiAgICAgICAgLy8gdXNlciBmaWxscyBpbiBsb2dpbiBmb3JtXG4gICAgICAgIC8vIHVzZXIgcHJlc3NlcyAnbG9naW4nXG5cbiAgICAgICAgLy8gaWYgdXNlciBwcmVzc2VzICdsb2dpbicsIHBlcmZvcm0gYWN0aW9uIChtYWtlIGNvbnRyb2xsZXIgc2VuZCBlbWFpbCBhbmQgcGFzc3dvcmQgdG8gQVBJKVxuICAgICAgICAkKFwiI2NvbXBvbmVudFwiKS5vbihcInN1Ym1pdFwiLCBcIiNsb2dpbmZvcm1cIiwgYWN0aW9uKTtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBieSBvdGhlciBwcm9ncmFtcyAodGhlIGNvbnRyb2xsZXIgaW4gdGhpcyBjYXNlKVxuICAgIHJldHVybiB7XG4gICAgICAgIHNldFZpZXc6IHNldFZpZXcsXG4gICAgICAgIHNldEFjdGlvbkxpc3RlbmVyOiBzZXRBY3Rpb25MaXN0ZW5lclxuICAgIH1cbn07IiwidmFyIExvZ291dFZpZXdIZWxwZXIgPSBmdW5jdGlvbigpXG57XG4gICAgLy8gQ2hhbmdlIHRoZSB2aWV3IG9mIHRoZSBwYWdlXG4gICAgZnVuY3Rpb24gc2V0VmlldygpXG4gICAge1xuICAgICAgICBkb2N1bWVudC50aXRsZSA9IFwiVWl0bG9nZ2VuIC0gQVogR2FtZXNcIjtcblxuICAgICAgICAkKFwiI2NvbXBvbmVudFwiKS5sb2FkKCcvdmlld3MvbG9nb3V0L2xvZ291dC5odG1sJyk7XG4gICAgfVxuXG4gICAgLy8gRXhlY3V0ZSB0aGUgZXZlbnQgd2hlbiAnc29tZXRoaW5nJyBoYXBwZW5zICh3aGVuIGEgYnV0dG9uIGlzIGNsaWNrZWQgZm9yIGV4YW1wbGUpXG4gICAgZnVuY3Rpb24gc2V0QWN0aW9uTGlzdGVuZXIoYWN0aW9uKVxuICAgIHtcbiAgICAgICAgJChkb2N1bWVudCkucmVhZHkoYWN0aW9uKTtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBieSBvdGhlciBwcm9ncmFtcyAodGhlIGNvbnRyb2xsZXIgaW4gdGhpcyBjYXNlKVxuICAgIHJldHVybiB7XG4gICAgICAgIHNldFZpZXc6IHNldFZpZXcsXG4gICAgICAgIHNldEFjdGlvbkxpc3RlbmVyOiBzZXRBY3Rpb25MaXN0ZW5lclxuICAgIH1cbn07IiwidmFyIFBhZ2VWaWV3SGVscGVyID0gZnVuY3Rpb24oKVxue1xuICAgIC8vIENoYW5nZSB0aGUgdmlldyBvZiB0aGUgcGFnZVxuICAgIGZ1bmN0aW9uIHNldFZpZXcodmlld0RhdGEpXG4gICAge1xuICAgICAgICBkb2N1bWVudC50aXRsZSA9IFwiV2Vsa29tIC0gQVogR2FtZXNcIjtcblxuICAgICAgICAkKFwiI2NvbXBvbmVudFwiKS5sb2FkKCcvdmlld3MvcGFnZS9wYWdlLmh0bWwnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodmlld0RhdGFbMF0udXNlcl90eXBlID09IFwiY3VzdG9tZXJcIilcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAkKFwiI3VzZXItYmxvY2tcIikuYXBwZW5kKFwiPGgxPkplIGxlZXMgZGl0IGFsbGVlbiBhbHMgamUgZWVuIGN1c3RvbWVyPC9oMT5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodmlld0RhdGFbMF0udXNlcl90eXBlID09IFwiYWRtaW5cIilcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAkKFwiI3VzZXItYmxvY2tcIikuYXBwZW5kKFwiPGgxPkplIGxlZXMgZGl0IGFsbGVlbiBhbHMgamUgZWVuIGFkbWluaXN0cmF0b3I8L2gxPlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gQWN0aW9uTGlzdGVuZXIgdGhhdCBleGVjdXRlcyBhY3Rpb25zIG9uIHNwZWNpZmljIGV2ZW50c1xuICAgIGZ1bmN0aW9uIHNldEFjdGlvbkxpc3RlbmVyKGV2ZW50SGFuZGxlcilcbiAgICB7XG4gICAgICAgICQoZG9jdW1lbnQpLnJlYWR5KGV2ZW50SGFuZGxlcik7XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHRoZSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgcHJvZ3JhbXMgKHRoZSBjb250cm9sbGVyIGluIHRoaXMgY2FzZSlcbiAgICByZXR1cm4ge1xuICAgICAgICBzZXRWaWV3OiBzZXRWaWV3LFxuICAgICAgICBzZXRBY3Rpb25MaXN0ZW5lcjogc2V0QWN0aW9uTGlzdGVuZXJcbiAgICB9XG59OyIsInZhciBSZXNldFBhc3N3b3JkVmlld0hlbHBlciA9IGZ1bmN0aW9uKClcbntcbiAgICAvLyBDaGFuZ2UgdGhlIHZpZXcgb2YgdGhlIHBhZ2VcbiAgICBmdW5jdGlvbiBzZXRWaWV3KHZpZXdUb1Nob3cpXG4gICAge1xuICAgICAgICBkb2N1bWVudC50aXRsZSA9IFwiSW5sb2dnZW4gLSBBWiBHYW1lc1wiO1xuXG4gICAgICAgICQoXCIjY29tcG9uZW50XCIpLmxvYWQodmlld1RvU2hvdyk7XG4gICAgfVxuXG4gICAgLy8gQWN0aW9uTGlzdGVuZXIgdGhhdCBleGVjdXRlcyBhY3Rpb25zIG9uIHNwZWNpZmljIGV2ZW50c1xuICAgIGZ1bmN0aW9uIHNldEFjdGlvbkxpc3RlbmVyKGV2ZW50SGFuZGxlcilcbiAgICB7XG4gICAgICAgIC8vJChkb2N1bWVudCkucmVhZHkoZXZlbnRIYW5kbGVyKTtcbiAgICAgICAgJChcIiNjb21wb25lbnRcIikub24oXCJzdWJtaXRcIiwgXCIjcmVzZXRmb3JtXCIsIGV2ZW50SGFuZGxlcik7XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHRoZSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgcHJvZ3JhbXMgKHRoZSBjb250cm9sbGVyIGluIHRoaXMgY2FzZSlcbiAgICByZXR1cm4ge1xuICAgICAgICBzZXRWaWV3OiBzZXRWaWV3LFxuICAgICAgICBzZXRBY3Rpb25MaXN0ZW5lcjogc2V0QWN0aW9uTGlzdGVuZXJcbiAgICB9XG59O1xuXG4vKlxudmFyIFJlc2V0UGFzc3dvcmRWaWV3SGVscGVyID0gZnVuY3Rpb24oKVxue1xuICAgIC8vIENoYW5nZSB0aGUgdmlldyBvZiB0aGUgcGFnZVxuICAgIGZ1bmN0aW9uIHNldFZpZXcodmlld0RhdGEpXG4gICAge1xuICAgICAgICAkKFwiI2NvbXBvbmVudFwiKS5sb2FkKCd2aWV3cy9yZXNldHBhc3N3b3JkL3Jlc2V0cGFzc3dvcmQuaHRtbCcpO1xuICAgIH1cblxuICAgIC8vIEFjdGlvbkxpc3RlbmVyIHRoYXQgZXhlY3V0ZXMgYWN0aW9ucyBvbiBzcGVjaWZpYyBldmVudHNcbiAgICBmdW5jdGlvbiBzZXRBY3Rpb25MaXN0ZW5lcihldmVudEhhbmRsZXIpXG4gICAge1xuICAgICAgICAvLyQoZG9jdW1lbnQpLnJlYWR5KGV2ZW50SGFuZGxlcik7XG4gICAgICAgICQoXCIjY29tcG9uZW50XCIpLm9uKFwic3VibWl0XCIsIFwiI3Jlc2V0Zm9ybVwiLCBldmVudEhhbmRsZXIpO1xuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXG4gICAgcmV0dXJuIHtcbiAgICAgICAgc2V0Vmlldzogc2V0VmlldyxcbiAgICAgICAgc2V0QWN0aW9uTGlzdGVuZXI6IHNldEFjdGlvbkxpc3RlbmVyXG4gICAgfVxufTtcbiovIiwidmFyIFJlZ2lzdGVyVmlld0hlbHBlciA9IGZ1bmN0aW9uKClcbntcbiAgICAvLyBDaGFuZ2UgdGhlIHZpZXcgb2YgdGhlIHBhZ2VcbiAgICBmdW5jdGlvbiBzZXRWaWV3KHZpZXdUb1Nob3cpXG4gICAge1xuICAgICAgICBkb2N1bWVudC50aXRsZSA9IFwiUmVnaXN0cmVyZW4gLSBBWiBHYW1lc1wiO1xuICAgICAgICBcbiAgICAgICAgJChcIiNjb21wb25lbnRcIikubG9hZCh2aWV3VG9TaG93KTtcbiAgICB9XG5cbiAgICAvLyBFeGVjdXRlIHRoZSBldmVudCB3aGVuICdzb21ldGhpbmcnIGhhcHBlbnMgKHdoZW4gYSBidXR0b24gaXMgY2xpY2tlZCBmb3IgZXhhbXBsZSlcbiAgICBmdW5jdGlvbiBzZXRBY3Rpb25MaXN0ZW5lcihhY3Rpb24pXG4gICAge1xuICAgICAgICAvLyB1c2VyIGZpbGxzIGluIHJlZ2lzdGVyIGZvcm1cbiAgICAgICAgLy8gdXNlciBwcmVzc2VzICdyZWdpc3RlcidcblxuICAgICAgICAvLyBpZiB1c2VyIHByZXNzZXMgJ3JlZ2lzdGVyJywgcGVyZm9ybSBhY3Rpb25cbiAgICAgICAgJChcIiNjb21wb25lbnRcIikub24oXCJzdWJtaXRcIiwgXCIjcmVnaXN0ZXJmb3JtXCIsIGFjdGlvbik7XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHRoZSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgcHJvZ3JhbXMgKHRoZSBjb250cm9sbGVyIGluIHRoaXMgY2FzZSlcbiAgICByZXR1cm4ge1xuICAgICAgICBzZXRWaWV3OiBzZXRWaWV3LFxuICAgICAgICBzZXRBY3Rpb25MaXN0ZW5lcjogc2V0QWN0aW9uTGlzdGVuZXJcbiAgICB9XG59OyIsInZhciBQcm9kdWN0c1ZpZXdIZWxwZXIgPSBmdW5jdGlvbigpXG57XG4gICAgLy8gQ2hhbmdlIHRoZSB2aWV3IG9mIHRoZSBwYWdlXG4gICAgZnVuY3Rpb24gc2V0Vmlldyh2aWV3RGF0YSlcbiAgICB7XG4gICAgICAgIGRvY3VtZW50LnRpdGxlID0gXCJQcm9kdWN0ZW4gLSBBWiBHYW1lc1wiO1xuXG4gICAgICAgICQoXCIjY29tcG9uZW50XCIpLmh0bWwoJzxkaXYgY2xhc3M9XCJjb2wtMTJcIj48ZGl2IGNsYXNzPVwiY29sLTNcIiBpZD1cImZpbHRlcnNcIj48L2Rpdj48ZGl2IGNsYXNzPVwiY29sLTlcIiBpZD1cInByb2R1Y3RzXCI+PC9kaXY+PC9kaXY+Jyk7XG4gICAgICAgIC8vIGxvYWQgZmlsdGVyc1xuICAgICAgICAkKFwiI2ZpbHRlcnNcIikubG9hZCgnL3ZpZXdzL3Byb2R1Y3RzL2ZpbHRlcnMuaHRtbCcpO1xuXG4gICAgICAgIC8vIGxvYWQgcHJvZHVjdHNcbiAgICAgICAgbG9hZFByb2R1Y3RzKHZpZXdEYXRhKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsb2FkUHJvZHVjdHModmlld0RhdGEpXG4gICAge1xuICAgICAgICAkKFwiI3Byb2R1Y3RzXCIpLmxvYWQoJy92aWV3cy9wcm9kdWN0cy9wcm9kdWN0cy5odG1sJywgZnVuY3Rpb24gKCkgeyAvLyB3YWFyIGlkID0gJ2NvbXBvbmVudCcgZG9lIC5sb2FkLi4uLi4uXG4gICAgICAgICAgICAkLmVhY2godmlld0RhdGEsIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcbiAgICAgICAgICAgICAgICAvLyBDbG9uZSBwcm9kdWN0XG4gICAgICAgICAgICAgICAgdmFyIHByb2R1Y3QgPSAkKCc8ZGl2PicpLmFwcGVuZCgkKCcjcHJvZHVjdF9fbGlzdF9faXRlbScpLmNsb25lKCkpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIEFkZCBwcm9kdWN0IGluZm9cbiAgICAgICAgICAgICAgICAkKHByb2R1Y3QpLmZpbmQoXCIucHJvZHVjdF9fdGl0bGVcIikuaHRtbCh2YWx1ZS50aXRsZSk7XG4gICAgICAgICAgICAgICAgJChwcm9kdWN0KS5maW5kKFwiLnByb2R1Y3RfX3N1YnRpdGxlXCIpLmFwcGVuZCh2YWx1ZS5nZW5yZSArKFwiIHwgUEVHSSBcIikgKyB2YWx1ZS5wZWdpX2FnZSArKFwiIHwgXCIpKyBQbGF0Zm9ybUxvZ28odmFsdWUucGxhdGZvcm0pKTtcbiAgICAgICAgICAgICAgICAkKHByb2R1Y3QpLmZpbmQoXCIucHJvZHVjdF9fZGVzY3JpcHRpb25cIikuaHRtbChDdXRTdHJpbmcodmFsdWUuZGVzY3JpcHRpb24pKTtcbiAgICAgICAgICAgICAgICAkKHByb2R1Y3QpLmZpbmQoXCIucHJvZHVjdF9fcHJpY2VcIikuYXBwZW5kKChcIuKCrCBcIikrdmFsdWUucHJpY2UpO1xuICAgICAgICAgICAgICAgICQocHJvZHVjdCkuZmluZChcIiNidXR0b25zX19pbmZvLCAucHJvZHVjdF9faW1hZ2UgYSwgLnByb2R1Y3RfX3RpdGxlXCIpLmF0dHIoXCJocmVmXCIsIFwicHJvZHVjdC9cIiArIHZhbHVlLmVhbl9udW1iZXIpO1xuICAgICAgICAgICAgICAgICQocHJvZHVjdCkuZmluZChcIi5wcm9kdWN0X19pbWFnZSBpbWdcIikuYXR0cihcInNyY1wiLCB2YWx1ZS5pbWFnZSk7XG4gICAgICAgICAgICAgICAgJChwcm9kdWN0KS5maW5kKFwiLmFkZHRvY2FydFwiKS5hdHRyKFwiZGF0YS1pZFwiLCB2YWx1ZS5lYW5fbnVtYmVyKTtcblxuICAgICAgICAgICAgICAgICQoXCIjcHJvZHVjdF9fbGlzdFwiKS5hcHBlbmQocHJvZHVjdCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gUmVtb3ZlIHRoZSBmaXJzdCBsaXN0IGl0ZW0sIGJlY2F1c2UgdGhpcyBpdGVtIGlzIGFsd2F5cyBlbXB0eVxuICAgICAgICAgICAgJChcIiNwcm9kdWN0X19saXN0X19pdGVtXCIpLmZpcnN0KCkucmVtb3ZlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vU2hvdyBtb3JlL2xlc3NcbiAgICBmdW5jdGlvbiBDdXRTdHJpbmcodGV4dCl7XG4gICAgICAgIHZhciBTaG93QW1vdW50ID0gNTA7XG4gICAgICAgIHZhciBXb3Jkc0FycmF5ID0gdGV4dC5zcGxpdChcIiBcIik7XG4gICAgICAgIGlmKFdvcmRzQXJyYXkubGVuZ3RoPlNob3dBbW91bnQpe1xuICAgICAgICAgICAgdmFyIFNob3J0U3RyaW5nID0gXCJcIjtcbiAgICAgICAgICAgIGZvcihpPTA7IGk8U2hvd0Ftb3VudDsgaSsrKXtcbiAgICAgICAgICAgICAgICBTaG9ydFN0cmluZyArPSBXb3Jkc0FycmF5W2ldICsgXCIgXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gU2hvcnRTdHJpbmcrXCIuLi5cIjtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICByZXR1cm4gdGV4dDtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvL1BsYXRmb3JtIExvZ28nc1xuICAgIGZ1bmN0aW9uIFBsYXRmb3JtTG9nbyhwbGF0Zm9ybW5hYW0pXG4gICAge1xuICAgICAgICBwbGF0Zm9ybW5hYW0gPSBwbGF0Zm9ybW5hYW0udG9VcHBlckNhc2UoKTtcbiAgICAgICAgc3dpdGNoIChwbGF0Zm9ybW5hYW0pXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNhc2UgXCJQUzRcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCI8aW1nIHNyYz0nL3Jlc291cmNlcy9pbWFnZXMvaWNvbnMvcHMucG5nJyAvPlwiO1xuICAgICAgICAgICAgY2FzZSBcIlBDXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiPGltZyBzcmM9Jy9yZXNvdXJjZXMvaW1hZ2VzL2ljb25zL3dpbmRvd3MucG5nJyAvPlwiO1xuICAgICAgICAgICAgY2FzZSBcIlhCT1hcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCI8aW1nIHNyYz0nL3Jlc291cmNlcy9pbWFnZXMvaWNvbnMveGJveC5wbmcnIC8+XCI7XG4gICAgICAgICAgICBjYXNlIFwiTklOVEVORE9cIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCI8aW1nIHNyYz0nL3Jlc291cmNlcy9pbWFnZXMvaWNvbnMvbmludGVuZG8ucG5nJyAvPlwiO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gcGxhdGZvcm1uYWFtO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gRXhlY3V0ZSB0aGUgZXZlbnQgd2hlbiAnc29tZXRoaW5nJyBoYXBwZW5zICh3aGVuIGEgYnV0dG9uIGlzIGNsaWNrZWQgZm9yIGV4YW1wbGUpXG4gICAgZnVuY3Rpb24gc2V0QWN0aW9uTGlzdGVuZXIoYWN0aW9uKVxuICAgIHtcbiAgICAgICAgJChkb2N1bWVudCkucmVhZHkoYWN0aW9uKTsgLy8gaWYgJ2RvY3VtZW50IHJlYWR5JyBwZXJmb3JtIFwiYWN0aW9uXCJcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXRGaWx0ZXJMaXN0ZW5lcihhY3Rpb24pXG4gICAge1xuICAgICAgICAgLy8gSGllciBoZXQgZm9ybXVsaWVyIHZlcnN0dXJlbiBhbHMgd2Ugb3AgZWVuIGNoZWNrYm94IGRydWtrZW5cbiAgICAgICAgJChcIiNjb21wb25lbnRcIikub2ZmKCkub24oXCJjaGFuZ2VcIiwgXCJpbnB1dFt0eXBlPWNoZWNrYm94XVwiLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgJChcIiNwcm9kdWN0X2ZpbHRlclwiKS5zdWJtaXQoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gVXBkYXRlIGRlIHByb2R1Y3RlbmxpanN0IGFscyBlZW4gd2FhcmRlIGluIGRlIHNsaWRlciB2ZXJhbmRlcmQoYWxsZSBtYW5pZXJlbilcbiAgICAgICAgJChcIiNjb21wb25lbnRcIikub24oXCJjaGFuZ2Uga2V5dXBcIiwgXCJpbnB1dFtuYW1lPXByaWNlLW1heF0sIGlucHV0W25hbWU9cHJpY2UtbWluXVwiLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgaWYoJChcIiNwcmljZW1pblwiKS52YWwoKSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgJChcIiNwcmljZW1pblwiKS52YWwoMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgJChcIiNwcm9kdWN0X2ZpbHRlclwiKS5zdWJtaXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgJChcIiNjb21wb25lbnRcIikub24oXCJzdWJtaXRcIiwgXCIjcHJvZHVjdF9maWx0ZXJcIiwgYWN0aW9uKTtcbiAgICB9XG4gICAgLy8gUmV0dXJuIHRoZSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgcHJvZ3JhbXMgKHRoZSBjb250cm9sbGVyIGluIHRoaXMgY2FzZSlcbiAgICByZXR1cm4ge1xuICAgICAgICBzZXRWaWV3OiBzZXRWaWV3LFxuICAgICAgICBsb2FkUHJvZHVjdHM6IGxvYWRQcm9kdWN0cyxcbiAgICAgICAgc2V0QWN0aW9uTGlzdGVuZXI6IHNldEFjdGlvbkxpc3RlbmVyLFxuICAgICAgICBzZXRGaWx0ZXJMaXN0ZW5lcjogc2V0RmlsdGVyTGlzdGVuZXJcbiAgICB9XG59OyIsInZhciBQcm9kdWN0Vmlld0hlbHBlciA9IGZ1bmN0aW9uKClcbntcbiAgICAvLyBDaGFuZ2UgdGhlIHZpZXcgb2YgdGhlIHBhZ2VcbiAgICBmdW5jdGlvbiBzZXRWaWV3KHByb2R1Y3QpXG4gICAge1xuICAgICAgICBkb2N1bWVudC50aXRsZSA9IHByb2R1Y3QudGl0bGUgKyBcIiAtIEFaIEdhbWVzXCI7XG5cbiAgICAgICAgICQoXCIjY29tcG9uZW50XCIpLmxvYWQoJy92aWV3cy9zaW5nbGVfcHJvZHVjdC9zaW5nbGVfcHJvZHVjdC5odG1sJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICQoXCIuc2luZ2xlcHJvZHVjdF9faW1hZ2UgaW1nXCIpLmF0dHIoXCJzcmNcIiwgcHJvZHVjdC5pbWFnZSk7XG4gICAgICAgICAgICAgICAgJChcIi5zaW5nbGVwcm9kdWN0X190aXRsZVwiKS5odG1sKHByb2R1Y3QudGl0bGUpO1xuICAgICAgICAgICAgICAgICQoXCIuc2luZ2xlcHJvZHVjdF9fcHJpY2VcIikuaHRtbChcIuKCrCBcIiArIHByb2R1Y3QucHJpY2UpO1xuXG4gICAgICAgICAgICAgICAgJChcIi5zaW5nbGVwcm9kdWN0X19lYW5cIikuYXBwZW5kKHByb2R1Y3QuZWFuX251bWJlcik7XG4gICAgICAgICAgICAgICAgJChcIi5zaW5nbGVwcm9kdWN0X19wbGF0Zm9ybVwiKS5hcHBlbmQocHJvZHVjdC5wbGF0Zm9ybSk7XG4gICAgICAgICAgICAgICAgJChcIi5zaW5nbGVwcm9kdWN0X19wdWJsaXNoZXJcIikuYXBwZW5kKHByb2R1Y3QucHVibGlzaGVyKTtcbiAgICAgICAgICAgICAgICAkKFwiLnNpbmdsZXByb2R1Y3RfX3BlZ2lcIikuYXBwZW5kKHByb2R1Y3QucGVnaV9hZ2UpO1xuICAgICAgICAgICAgICAgICQoXCIuc2luZ2xlcHJvZHVjdF9fZ2VucmVcIikuYXBwZW5kKHByb2R1Y3QuZ2VucmUpO1xuICAgICAgICAgICAgICAgICQoXCIuc2luZ2xlcHJvZHVjdF9fZGVzY3JcIikuaHRtbChwcm9kdWN0LmRlc2NyaXB0aW9uKVxuICAgICAgICAgICAgICAgICQoXCIuYWRkdG9jYXJ0XCIpLmF0dHIoXCJkYXRhLWlkXCIsIHByb2R1Y3QuZWFuX251bWJlcik7XG5cbiAgICAgICAgICAgICAgICB2YXIgZCA9IG5ldyBEYXRlKHByb2R1Y3QucmVsZWFzZV9kYXRlKTtcblxuICAgICAgICAgICAgICAgIHZhciBtb250aHMgPSBbXCJqYW51YXJpXCIsIFwiZmVicnVhcmlcIiwgXCJtYWFydFwiLCBcImFwcmlsXCIsIFwibWVpXCIsIFwianVuaVwiLCBcImp1bGlcIiwgXCJhdWd1c3R1c1wiLCBcInNlcHRlbWJlclwiLCBcIm9rdG9iZXJcIiwgXCJub3ZlbWJlclwiLCBcImRlY2VtYmVyXCJdO1xuXG4gICAgICAgICAgICAgICAgJChcIi5zaW5nbGVwcm9kdWN0X19yZWxlYXNlZGF0ZVwiKS5hcHBlbmQoZC5nZXREYXkoKSArIFwiIFwiICsgbW9udGhzW2QuZ2V0TW9udGgoKV0gKyBcIiBcIiArIGQuZ2V0RnVsbFllYXIoKSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldEFjdGlvbkxpc3RlbmVyKGFjdGlvbilcbiAgICB7XG4gICAgICAgIC8vIHVzZXIgZmlsbHMgaW4gcmVnaXN0ZXIgZm9ybVxuICAgICAgICAvLyB1c2VyIHByZXNzZXMgJ3JlZ2lzdGVyJ1xuXG4gICAgICAgIC8vIGlmIHVzZXIgcHJlc3NlcyAncmVnaXN0ZXInLCBwZXJmb3JtIGFjdGlvblxuICAgICAgICAkKGRvY3VtZW50KS5yZWFkeShhY3Rpb24pO1xuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXG4gICAgcmV0dXJuIHtcbiAgICAgICAgc2V0Vmlldzogc2V0VmlldyxcbiAgICAgICAgc2V0QWN0aW9uTGlzdGVuZXI6IHNldEFjdGlvbkxpc3RlbmVyXG4gICAgfVxufTsiXX0=

function PlatformLogo(e){switch(e=e.toUpperCase()){case"PS1":return"<img src='/resources/images/icons/ps1.png' />";case"PS4":return"<img src='/resources/images/icons/ps4.png' />";case"PC":return"<img src='/resources/images/icons/windows.png' />";case"XBOX":return"<img src='/resources/images/icons/xbox.png' />";case"NES":return"<img src='/resources/images/icons/nes.png' />";case"N64":return"<img src='/resources/images/icons/n64.png' />";case"NINTENDO SWITCH":return"<img src='/resources/images/icons/switch.png' />";default:return e;case"NINTENDO":return"<img src='/resources/images/publishers/nintendo.png' />";case"UBISOFT":return"<img src='/resources/images/publishers/ubisoft.png' />";case"ELECTRONIC ARTS":return"<img src='/resources/images/publishers/ea.png' />"}}function BeschikbaarheidKleur(e){return e<=0?"<img src='/resources/images/availability/buttonred.png' />":e>=1?"<img src='/resources/images/availability/buttongreen.png' />":e}function CartHelper(){this.removeProduct=function(e){},this.addProduct=function(e){}}function CookieHelper(){this.getCookie=function(e){for(var t=document.cookie.split(";"),n=0;n<t.length;n++){var i=t[n].split("=");if(i[0].trim()==e)return i[1]}},this.createCookie=function(e,t){document.cookie=e+"="+t+";"},this.deleteCookie=function(e){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;"}}function showLoadScreen(){$("#component").html('<div class="spinner"><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div> </div>')}function onLoadPage(){UserHelper.isAdmin()?($(".visible-admin").css("display","inline-block"),$(".visible-customer").css("display","inline-block"),$("#inloggen_text").hide()):UserHelper.isCustomer()?($(".visible-customer").css("display","inline-block"),$("#inloggen_text").hide()):($(".visible-admin").hide(),$(".visible-customer").hide(),$("#inloggen_text").css("display","inline-block"))}function UserHelper(){this.isLogedIn=function(){var e=CookieHelper.getCookie("access_token");return void 0!=e&&""!=e},this.isCustomer=function(){if(UserHelper.isLogedIn()){var e=this.decodeToken().usertype;if("customer"==e||"admin"==e)return!0}return!1},this.isAdmin=function(){if(UserHelper.isLogedIn()){var e=this.decodeToken().usertype;if("admin"==e)return!0}return!1},this.decodeToken=function(){var e=CookieHelper.getCookie("access_token");if(void 0!=e&&""!=e){var t=e.split(".")[1];return JSON.parse(atob(t))}}}function WishlistHelper(){this.addItem=function(e){$.ajax({url:"http://localhost:8081/wishlist/"+CookieHelper.getCookie("user_id")+"/"+e,type:"post",dataType:"json",data:JSON.stringify({}),headers:{Authorization:"Bearer "+CookieHelper.getCookie("access_token")},success:function(e){$(this).toggleClass("like--active"),alert("Product succesvol toegevoegd aan Wishlist.")},error:function(e,t,n){alert("Product is al in Wishlist.")}})}}$(document).on("click","span.like",function(e){$(this).toggleClass("like--active")}),$(document).on("click","span.single_like",function(e){$(this).toggleClass("single_like--active")});var Router=function(){function e(e,o){if(0!=t(e)){var r=n(e);switch(r[0]){case"":case"index.html":case"products":new ProductsController(new ProductsViewHelper,new ProductsModel).main();break;case"product":new ProductController(new ProductViewHelper,new ProductModel(r[1])).main();break;case"register":new RegisterController(new RegisterViewHelper,new RegisterModel).main();break;case"login":new LoginController(new LoginViewHelper,new LoginModel).main();break;case"logout":new LogoutController(new LogoutViewHelper,new LogoutModel).main();break;case"register":new RegisterController(new RegisterViewHelper,new RegisterModel).main();break;case"resetpassword":new ResetPasswordController(new ResetPasswordViewHelper,new ResetPasswordModel).main();break;case"wishlist":new WishlistController(new WishlistViewHelper,new WishlistModel).main();case"admin":new AdminController(new AdminViewHelper,new AdminModel).main();break;case"admin_user":new AdminUserController(new AdminUserViewHelper,new AdminUserModel(r[1])).main();break;default:new ErrorController(new ErrorViewHelper).main()}0!=o&&""!=e&&"string"==typeof e&&(i({},"A-Z Games",e),showLoadScreen(),window.scrollTo(0,0))}}function t(e){return e.indexOf("http")==-1&&e.indexOf("https")==-1&&e.indexOf("www")==-1||(window.location=e,!1)}function n(e){return 0==e.indexOf("/")&&(e=e.substring(1)),null!=this.baseUrl&&e.indexOf(this.baseUrl)!=-1&&(e=e.substring(e.indexOf(this.baseUrl)+this.baseUrl.length)),e.split(/\/(.+)?/)}function i(e,t,n){window.history.pushState(e,t,n)}return baseUrl="project-webshop/",{route:e}};$(document).ready(function(){function e(e){$(e).toggleClass("sidebar--open"),$(".overlay").toggleClass("overlay--visible"),$("body").toggleClass("sidebar--open")}$(".sidebar-toggle").click(function(t){t.preventDefault();var n=$(this).data("sidebar");e($("#"+n))}),$(".sidebar__close").click(function(t){e($(this).parent().parent())}),$(".overlay").click(function(t){e($(".sidebar"))})});var Router=new Router,CookieHelper=new CookieHelper,UserHelper=new UserHelper,WishlistHelper=new WishlistHelper;$.fn.serializeObject=function(){var e={},t=this.serializeArray();return $.each(t,function(){void 0!==e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),""!=this.value&&e[this.name].push(this.value)):""!=this.value&&(e[this.name]=this.value||"")}),e};var AdminModel=function(){function e(e){$.ajax({url:"https://api.az-games.nl/admin/users",type:"GET",dataType:"json",headers:{Authorization:"Bearer "+CookieHelper.getCookie("access_token")},success:function(t){e(t)},error:function(e,t,n){$("#component").load("/views/error/error.html")}})}return{getPage:e}},AdminUserModel=function(e){function t(t){$.ajax({url:"https://api.az-games.nl/admin/users/"+e,type:"GET",dataType:"json",headers:{Authorization:"Bearer "+CookieHelper.getCookie("access_token")},success:function(e){t(e[0])},error:function(e,t,n){$("#component").load("/views/error/error.html")}})}function n(e,t){e.date_of_birth=new Date(Date.UTC(e.jaar,e.maand,e.dag)),delete e.jaar,delete e.maand,delete e.dag,$.ajax({url:"http://localhost:8081/admin/users/"+e.user_id,type:"PATCH",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify(e),headers:{Authorization:"Bearer "+CookieHelper.getCookie("access_token")},success:function(e){t(e)},error:function(e,t,n){$("#component").load("/views/error/error.html")}})}function i(e,t){$.ajax({url:"https://api.az-games.nl/admin/users/"+e,type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+CookieHelper.getCookie("access_token")},success:function(e){t()},error:function(e,t,n){$("#component").load("/views/error/error.html")}})}return{getPage:t,saveUserInfo:n,deleteUser:i}},CartModel=function(){function e(e){var t=CookieHelper.getCookie("cart");void 0!=t&&e(JSON.parse(t))}function t(e,t){$.ajax({url:"https://api.az-games.nl/products/"+e,type:"get",contentType:"json",success:function(e){cart={ean_number:e[0].ean_number,title:e[0].title,price:e[0].price,image:e[0].image},t(cart);var n=CookieHelper.getCookie("cart");void 0==n?CookieHelper.createCookie("cart",JSON.stringify([cart])):(n=JSON.parse(n),n.push(cart),CookieHelper.createCookie("cart",JSON.stringify(n)))},error:function(e,t,n){$("#component").load("/views/error/error.html")}})}function n(e){for(cart=JSON.parse(CookieHelper.getCookie("cart")),i=0;i<cart.length;i++)if(cart[i].ean_number==e){cart.splice(i,1);break}CookieHelper.createCookie("cart",JSON.stringify(cart))}return{getCart:e,addProduct:t,removeProduct:n}},LoginModel=function(){function e(e,t,n){$.ajax({url:"https://api.az-games.nl/user/login",type:"GET",dataType:"json",headers:{Authorization:"Basic "+btoa(e+":"+t)},success:function(e){CookieHelper.createCookie("access_token",e.access_token),CookieHelper.createCookie("user_id",e.user_id),onLoadPage(),n(e)},error:function(e,t,n){$("#error_message").show()}})}return{login:e}},LogoutModel=function(){function e(e){function t(e){for(var t=document.cookie.split(";"),n=0;n<t.length;n++){var i=t[n].split("=");if(i[0].trim()==e)return i[1]}}$.ajax({url:"https://api.az-games.nl/user/logout",type:"post",dataType:"json",data:JSON.stringify({user_id:t("user_id")}),success:function(t){CookieHelper.deleteCookie("access_token"),CookieHelper.deleteCookie("user_id"),onLoadPage(),e(t)},error:function(e,t,n){$("#error_message").show()}})}return{logout:e}},PageModel=function(){function e(e){$.ajax({url:"https://api.az-games.nl/user",type:"get",dataType:"json",headers:{Authorization:"Bearer "+CookieHelper.getCookie("access_token")},success:function(t){e(t)},error:function(e,t,n){$("#component").load("/views/error/error.html")}})}return{getPage:e}},ProductsModel=function(){function e(e,t){$.ajax({url:"https://api.az-games.nl/products?"+e,type:"get",dataType:"json",success:function(e){t(e)},error:function(e,t,n){$("#component").load("/views/error/error.html")}})}return{getPage:e}},RegisterModel=function(){function e(e,t){$.ajax({url:"https://api.az-games.nl/user/register",type:"post",dataType:"json",data:JSON.stringify({e_mail:e.e_mailadres,password:e.wachtwoord,first_name:e.voornaam,insertion:e.tussenvoegsel,surname:e.achternaam,gender:e.gender,date_of_birth:e.birth_date,phone_number:e.mobiel_nummer,secret_question:e.security_question,secret_question_answer:e.security_answer,postal_code:e.postcode,number:e.huisnummer,street_name:e.straatnaam,city:e.plaats}),success:function(e){t(e)},error:function(e,t,n){$("#regi_api_error_message").show()}})}return{register:e}},ResetPasswordModel=function(){function e(e,t){console.log(e),$.ajax({url:"https://api.az-games.nl/user/resetpassword",type:"post",dataType:"json",data:JSON.stringify({email:e.e_mailadres,secret_question_answer:e.security_answer,secret_question:e.security_question,new_password:e.wachtwoord,repeat_password:e.wachtwoord2}),success:function(e){t(e)},error:function(e,t,n){$("#reset_password_api_error_message").show()}})}return{resetpassword:e}},ProductModel=function(e){function t(t){$.ajax({url:"https://api.az-games.nl/products/"+e,type:"get",dataType:"json",success:function(e){t(e[0])},error:function(e,t,n){$("#component").load("/views/error/error.html")}})}return{GetProductInfo:t}},UserModel=function(e){function t(t){$.ajax({url:"https://api.az-games.nl/users/"+e,type:"get",dataType:"json",success:function(e){t(e[0])},error:function(e,t,n){$("#component").load("/error.html")}})}return{GetUserInfo:t}},WishlistModel=function(){function e(e){$.ajax({url:"http://localhost:8081/wishlist",type:"get",dataType:"json",headers:{Authorization:"Bearer "+CookieHelper.getCookie("access_token")},success:function(t){e(t)},error:function(e,t,n){$("#component").load("/views/error/error.html")}})}function t(e,t){$.ajax({url:"http://localhost:8081/wishlist/"+CookieHelper.getCookie("user_id"),type:"post",dataType:"json",data:JSON.stringify({wishlist_id:e.wishlist_id}),headers:{Authorization:"Bearer "+CookieHelper.getCookie("access_token")},success:function(e){t(e)},error:function(e,t,n){$("#component").load("/views/error/error.html")}})}function n(){$.ajax({url:"http://localhost:8081/wishlist"+data.user_id,type:"PATCH",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify(data),headers:{Authorization:"Bearer "+CookieHelper.getCookie("access_token")},success:function(e){callback(e)},error:function(e,t,n){$("#component").load("/views/error/error.html")}})}return{getWishlist:e,addToWishlist:t,deleteFromWishlist:n}},AdminController=function(e,t){function n(){s.setActionListener(i)}function i(){r.getPage(o)}function o(e){s.setView(e)}var r=t,s=e;return{main:n}},AdminUserController=function(e,t){function n(){c.setActionListener(i),e.setSaveListener(r),e.setDeleteListener(s)}function i(){a.getPage(o)}function o(e){c.setView(e)}function r(e){e.preventDefault(),e.stopImmediatePropagation();var t=$(this).serializeObject();a.saveUserInfo(t,function(e){alert("Gebruiker succesvol geüpdate.")})}function s(e){a.deleteUser(e,function(){alert("Gebruiker succesvol gedelete."),Router.route("/admin")})}var a=t,c=e;return{main:n}},CartController=function(e,t){function n(){s.getCart(function(e){a.setView(e)})}function i(e){s.addProduct(e,function(e){a.addItem(e)})}function o(e){s.removeProduct(e,function(e){})}function r(){a.setActionListener(n),a.setAddProductListener(i),a.setRemoveListener(o)}var s=t,a=e;return{main:r}},DeleteController=function(e,t){},ErrorController=function(e){function t(){n.setView()}var n=e;return{main:t}},LoginController=function(e,t){function n(e){e.preventDefault(),e.stopImmediatePropagation();var t={};$.each($(this).serializeArray(),function(e,n){t[n.name]=n.value}),o.login(t.email,t.password,function(e){$("#inloggen_text").hide(),$("#uitloggen_text").show(),new PageController(new PageViewHelper,new PageModel).main()})}function i(){r.setView(),r.setActionListener(n)}var o=t,r=e;return{main:i}},LogoutController=function(e,t){function n(e){o.logout(function(e){$("#inloggen_text").show(),$("#uitloggen_text").hide(),r.setView()})}function i(){r.setActionListener(n)}var o=t,r=e;return{main:i}},PageController=function(e,t){function n(e){o.getPage(function(e){r.setView(e)})}function i(){r.setActionListener(n)}var o=t,r=e;return{main:i}},ProductsController=function(e,t){function n(){r.getPage("",function(e){s.setView(e)})}function i(e){e.preventDefault();var t=$(this).serialize();r.getPage(t,function(e){s.loadProducts(e)})}function o(){s.setActionListener(n),s.setFilterListener(i)}var r=t,s=e;return{main:o}},RegisterController=function(e,t){function n(){console.log("in actionPerformed"),event.preventDefault(),$("#regi_api_error_message").hide(),$("#ww2_error_message").hide();var e={};$.each($(this).serializeArray(),function(t,n){e[n.name]=n.value}),e.birth_date=e.jaar+"-"+e.maand+"-"+e.dag,console.log(e);var t=!1,n=["voornaam","achternaam","postcode","huisnummer","e_mailadres","wachtwoord","wachtwoord2","security_answer"];$.each(n,function(e,t){$("#"+t).removeClass("invalid")}),$.each(n,function(n,i){""==e[i]&&($("#"+i).addClass("invalid"),t=!0)}),t&&(window.scrollTo(0,0),$("#register_error_message").show());var i=!1;return e.wachtwoord!=e.wachtwoord2&&(i=!0,$("#ww2_error_message").show(),$("#wachtwoord").addClass("invalid"),$("#wachtwoord2").addClass("invalid")),!t&&!i&&(console.log("continued"),void o.register(e,function(e){r.setView("/views/register/after_register.html")}))}function i(){r.setView("/views/register/register.html"),r.setActionListener(n)}var o=t,r=e;return{main:i}},ResetPasswordController=function(e,t){function n(){console.log("in actionPerformed"),event.preventDefault(),$("#reset_password_api_error_message").hide(),$("#ww2_error_message").hide();var e={};$.each($(this).serializeArray(),function(t,n){e[n.name]=n.value});var t=!1,n=["wachtwoord","wachtwoord2","e_mailadres","security_answer"];$.each(n,function(e,t){$("#"+t).removeClass("invalid")}),$.each(n,function(n,i){""==e[i]&&($("#"+i).addClass("invalid"),t=!0)}),t&&(window.scrollTo(0,0),$("#reset_error_message").show());var i=!1;return e.wachtwoord!=e.wachtwoord2&&(i=!0,$("#ww2_error_message").show(),$("#wachtwoord").addClass("invalid"),$("#wachtwoord2").addClass("invalid")),!t&&!i&&(console.log("continued"),void o.resetpassword(e,function(e){r.setView("views/resetpassword/after_reset.html")}))}function i(){r.setView("views/resetpassword/resetpassword.html"),r.setActionListener(n)}var o=t,r=e;return{main:i}},ProductController=function(e,t){function n(t){e.setView(t)}function i(){t.GetProductInfo(n)}return{main:i,showView:n}},WishlistController=function(e,t){function n(){r.getWishlist(i(data))}function i(e){s.setView(e)}function o(){s.setActionListener(n),s.setDeleteListener(r.deleteFromWishlist)}var r=t,s=e;return{main:o}},AdminViewHelper=function(){function e(e){$(document).ready(e)}function t(e){document.title="Admin - AZ Games",$("#component").load("/views/admin/admin.html",function(){$.each(e,function(e,t){var n=$("#single_user").clone();$(n).find(".user__firstname").html(t.first_name),$(n).find(".user__firstname").attr("href","/admin_user/"+t.user_id),$(n).find(".user__insertion").html(t.insertion),$(n).find(".user__lastname").html(t.surname),$(n).find(".user__email").html(t.email),$(n).find(".user__phonenumber").html(t.phone_number),$("#users_body").append(n)}),$("#single_user").first().remove()})}return{setActionListener:e,setView:t}},AdminUserViewHelper=function(){function e(e){$(document).ready(e)}function t(e){$("#component").load("/views/adminuser/adminuser.html",function(){$("#delete_btn").attr("data-id",e.user_id),$("#first_name").val(e.first_name),$("#insertion").val(e.insertion),$("#surname").val(e.surname),$("#user_type").val(e.user_type),$("#email").val(e.email),$("#password").attr("placeholder","Vul hier iets in om het wachtwoord te veranderen"),$("#gender").val(e.gender),$("#date_of_birth").val(e.date_of_birth),$("#phone_number").val(e.phone_number),$("#is_active").val(e.is_active),$("#user_id").val(e.user_id);var t=new Date,n=new Date(e.date_of_birth);for(i=1;i<32;i++)i==n.getDate()?$("#dag").append("<option value='"+i+"' selected='selected'>"+i+"</option>"):$("#dag").append("<option value='"+i+"'>"+i+"</option>");for(i=1900;i<t.getFullYear()+1;i++)i==n.getFullYear()?$("#jaar").append("<option value='"+i+"' selected='selected'>"+i+"</option>"):$("#jaar").append("<option value='"+i+"'>"+i+"</option>");$("#maand").val(n.getMonth())})}function n(e){$(document).on("submit","#userform",e)}function o(e){$("#component").off().on("click","#delete_btn",function(t){t.preventDefault(),e($(this).data("id"))})}return{setActionListener:e,setView:t,setSaveListener:n,setDeleteListener:o}},CartViewHelper=function(){function e(e){""!=e&&e.forEach(function(e,t){n(e)})}function t(e){e=parseFloat(e)+parseFloat($(".cart__total .price").html().substr(1)),$(".cart__total .price").html("€"+parseFloat(e).toFixed(2))}function n(e){var n=$("<div>").html($(".sidebar__content__tmp").html());n.find(".cart__item__title").html(e.title),n.find(".cart__item__price").html("€"+e.price),n.find(".cart__item__image img").attr("src",e.image),n.find(".cart__item").attr("data-id",e.ean_number),$(".cart").append(n);var i=$(".cart_button .count").html();$(".cart_button .count").html(parseInt(i)+1),t(e.price)}function i(e){$(document).ready(e)}function o(e){$("body").on("click",".addtocart",function(t){t.preventDefault();var n=$(this).data("id");e(n)})}function r(e){$("body").on("click",".cart__item__remove",function(n){var i=$(this).parent(),o=$(this).parent().data("id");$(i).addClass("cart__item--removed"),$(i).on("animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",function(){$(this).remove()});var r=$(".cart_button .count").html();$(".cart_button .count").html(parseInt(r)-1),e(o),t(-$(i).find(".cart__item__price").html().substr(1))})}return{setView:e,addItem:n,updateTotalPrice:t,setActionListener:i,setAddProductListener:o,setRemoveListener:r}},ErrorViewHelper=function(){function e(){document.title="Oeps - AZ Games",$("#component").load("/views/error/error.html")}function t(e){$(document).ready(e)}return{setView:e,setActionListener:t}},LoginViewHelper=function(){function e(){document.title="Inloggen - AZ Games",$("#component").load("/views/login/login.html")}function t(e){$("#component").on("submit","#loginform",e)}return{setView:e,setActionListener:t}},LogoutViewHelper=function(){function e(){document.title="Uitloggen - AZ Games",$("#component").load("/views/logout/logout.html")}function t(e){$(document).ready(e)}return{setView:e,setActionListener:t}},PageViewHelper=function(){function e(e){document.title="Welkom - AZ Games",$("#component").load("/views/page/page.html",function(){"customer"==e[0].user_type&&$("#user-block").append("<h1>Je lees dit alleen als je een customer</h1>"),"admin"==e[0].user_type&&$("#user-block").append("<h1>Je lees dit alleen als je een administrator</h1>")})}function t(e){$(document).ready(e)}return{setView:e,setActionListener:t}},ProductsViewHelper=function(){function e(e){document.title="Producten - AZ Games",$("#component").html('<div class="col-12"><div class="col-3" id="filters"></div><div class="col-9" id="products"></div></div>'),$("#filters").load("/views/products/filters.html"),t(e)}function t(e){$("#products").load("/views/products/products.html",function(){$.each(e,function(e,t){var i=$("<div>").append($("#product__list__item").clone());$(i).find(".product__title").html(t.title),$(i).find(".product__subtitle").append(t.genre+" | PEGI "+t.pegi_age+" | "+PlatformLogo(t.platform)),$(i).find(".product__description").html(n(t.description)),$(i).find(".product__price").append("€ "+t.price),$(i).find("#buttons__info, .product__image a, .product__title").attr("href","product/"+t.ean_number),$(i).find(".product__image img").attr("src",t.image),$(i).find(".addtocart").attr("data-id",t.ean_number),$("#product__list").append(i)}),$("#product__list__item").first().remove()})}function n(e){var t=50,n=e.split(" ");if(n.length>t){var o="";for(i=0;i<t;i++)o+=n[i]+" ";return o+"..."}return e}function o(e){$(document).ready(e)}function r(e){$("#component").off().on("change","input[type=checkbox]",function(e){$("#product_filter").submit()}),$("#component").on("change keyup","input[name=price-max], input[name=price-min]",function(e){null==$("#pricemin").val()?$("#pricemin").val(0):$("#product_filter").submit()}),$("#component").on("submit","#product_filter",e)}return{setView:e,loadProducts:t,setActionListener:o,setFilterListener:r}},RegisterViewHelper=function(){function e(e){document.title="Registreren - AZ Games",$("#component").load(e,function(){var e=new Date;for(i=1;i<32;i++)$("#dag").append("<option value='"+i+"'>"+i+"</option>");for(i=1900;i<e.getFullYear()+1;i++)2e3!=i?$("#jaar").append("<option value='"+i+"'>"+i+"</option>"):$("#jaar").append("<option value='"+i+"' selected='selected'>"+i+"</option>")})}function t(e){$("#component").on("submit","#registerform",e)}return{setView:e,setActionListener:t}},ResetPasswordViewHelper=function(){function e(e){document.title="Inloggen - AZ Games",$("#component").load(e)}function t(e){$("#component").on("submit","#resetform",e)}return{setView:e,setActionListener:t}},ProductViewHelper=function(){function e(e){document.title=e.title+" - AZ Games",$("#component").load("/views/single_product/single_product.html",function(){$(".singleproduct__image img").attr("src",e.image),$(".singleproduct__title").html(e.title),$(".singleproduct__price").html("€ "+e.price),$(".singleproduct__ean").append(e.ean_number),$(".singleproduct__platform").append(PlatformLogo(e.platform)),$(".singleproduct__publisher").append(PlatformLogo(e.publisher)),$(".singleproduct__pegi").append(e.pegi_age),$(".singleproduct__genre").append(e.genre),$(".singleproduct__descr").html(e.description),$(".addtocart").attr("data-id",e.ean_number),$(".addToWishlistButton").attr("onclick","WishlistHelper.addItem("+e.ean_number+");");var t=new Date(e.release_date),n=["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"];$(".singleproduct__releasedate").append(t.getDay()+" "+n[t.getMonth()]+" "+t.getFullYear())})}function t(e){$(document).ready(e)}return{setView:e,setActionListener:t}},WishlistViewHelper=function(){function e(e){document.title="Wishlist - AZ Games",$("#component").html('<div class="col-12"><div class="col-12" id="wishlist"></div></div>'),t(e)}function t(e){$("#wishlist").load("/views/wishlist/wishlist.html",function(){var t=0;$.each(e,function(e,n){var i=$("<div>").append($("#wish__list__item").clone());t+=1,$(i).find("#delete_btn").attr("data-id",n.ean_number),$(i).find(".wish__list__id").append(t),$(i).find(".wish__list__image img").attr("src",n.image),$(i).find(".wish__list__title").html(n.title),$(i).find(".wish__list__price").append("€ "+n.price),$(i).find(".wish__list__platform").append(PlatformLogo(n.platform)),$(i).find(".wish__list__availability").append(BeschikbaarheidKleur(n.stock)),$(i).find(".wish__list__likebutton").append(),$(wish_list_item),$("#wish__list").append(i)}),$("#wish__list__item").first().remove()})}function n(e){$(document).ready(e)}function i(e){$(".wish__list__deletebutton").off().on("click",function(){e()})}return{setView:e,loadWishlist:t,setActionListener:n,setDeleteListener:i}};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1pbm9ydG9vbHMuanMiLCJoZWxwZXJzL2NhcnQuanMiLCJoZWxwZXJzL2Nvb2tpZS5qcyIsImhlbHBlcnMvZ2xvYmFsLmpzIiwiaGVscGVycy91c2VyLmpzIiwiaGVscGVycy93aXNobGlzdC5qcyIsInJvdXRlci5qcyIsInNpZGViYXIuanMiLCJoZWxwZXJzL3NlcmlhbGl6ZW9iamVjdC5qcyIsImFkbWluX21vZGVsLmpzIiwiYWRtaW51c2VyX21vZGVsLmpzIiwiY2FydF9tb2RlbC5qcyIsImxvZ2luX21vZGVsLmpzIiwibG9nb3V0X21vZGVsLmpzIiwicGFnZV9tb2RlbC5qcyIsInByb2R1Y3RzX21vZGVsLmpzIiwicmVnaXN0ZXJfbW9kZWwuanMiLCJyZXNldHBhc3N3b3JkX21vZGVsLmpzIiwic2luZ2xlX3Byb2R1Y3RfbW9kZWwuanMiLCJ1c2VyX21vZGVsLmpzIiwid2lzaGxpc3RfbW9kZWwuanMiLCJhZG1pbl9jb250cm9sbGVyLmpzIiwiYWRtaW51c2VyX2NvbnRyb2xsZXIuanMiLCJjYXJ0X2NvbnRyb2xsZXIuanMiLCJkZWxldGVfY29udHJvbGxlci5qcyIsImVycm9yX2NvbnRyb2xsZXIuanMiLCJsb2dpbl9jb250cm9sbGVyLmpzIiwibG9nb3V0X2NvbnRyb2xsZXIuanMiLCJwYWdlX2NvbnRyb2xsZXIuanMiLCJwcm9kdWN0c19jb250cm9sbGVyLmpzIiwicmVnaXN0ZXJfY29udHJvbGxlci5qcyIsInJlc2V0cGFzc3dvcmRfY29udHJvbGxlci5qcyIsInNpbmdsZV9wcm9kdWN0X2NvbnRyb2xsZXIuanMiLCJ3aXNobGlzdF9jb250cm9sbGVyLmpzIiwiYWRtaW4vYWRtaW5fdmlldy5qcyIsImFkbWludXNlci9hZG1pbnVzZXJfdmlldy5qcyIsImNhcnQvY2FydF92aWV3LmpzIiwiZXJyb3IvZXJyb3Jfdmlldy5qcyIsImxvZ2luL2xvZ2luX3ZpZXcuanMiLCJsb2dvdXQvbG9nb3V0X3ZpZXcuanMiLCJwYWdlL3BhZ2Vfdmlldy5qcyIsInByb2R1Y3RzL3Byb2R1Y3RzX3ZpZXcuanMiLCJyZWdpc3Rlci9yZWdpc3Rlcl92aWV3LmpzIiwicmVzZXRwYXNzd29yZC9yZXNldHBhc3N3b3JkX3ZpZXcuanMiLCJzaW5nbGVfcHJvZHVjdC9zaW5nbGVfcHJvZHVjdF92aWV3LmpzIiwid2lzaGxpc3Qvd2lzaGxpc3Rfdmlldy5qcyJdLCJuYW1lcyI6WyJQbGF0Zm9ybUxvZ28iLCJwbGF0Zm9ybW5hYW0iLCJ0b1VwcGVyQ2FzZSIsIkJlc2NoaWtiYWFyaGVpZEtsZXVyIiwic3RvY2t2YWx1ZSIsIkNhcnRIZWxwZXIiLCJ0aGlzIiwicmVtb3ZlUHJvZHVjdCIsImlkIiwiYWRkUHJvZHVjdCIsIkNvb2tpZUhlbHBlciIsImdldENvb2tpZSIsIm5hbWUiLCJjb29raWVzIiwiZG9jdW1lbnQiLCJjb29raWUiLCJzcGxpdCIsImkiLCJsZW5ndGgiLCJ0cmltIiwiY3JlYXRlQ29va2llIiwidmFsdWUiLCJkZWxldGVDb29raWUiLCJzaG93TG9hZFNjcmVlbiIsIiQiLCJodG1sIiwib25Mb2FkUGFnZSIsIlVzZXJIZWxwZXIiLCJpc0FkbWluIiwiY3NzIiwiaGlkZSIsImlzQ3VzdG9tZXIiLCJpc0xvZ2VkSW4iLCJhY2Nlc3NUb2tlbiIsInVuZGVmaW5lZCIsInVzZXJ0eXBlIiwiZGVjb2RlVG9rZW4iLCJwYXlsb2FkIiwiSlNPTiIsInBhcnNlIiwiYXRvYiIsIldpc2hsaXN0SGVscGVyIiwiYWRkSXRlbSIsImVhbl9udW1iZXIiLCJhamF4IiwidXJsIiwidHlwZSIsImRhdGFUeXBlIiwiZGF0YSIsInN0cmluZ2lmeSIsImhlYWRlcnMiLCJBdXRob3JpemF0aW9uIiwic3VjY2VzcyIsInRvZ2dsZUNsYXNzIiwiYWxlcnQiLCJlcnJvciIsInhociIsInN0YXR1cyIsIm9uIiwiZXZlbnQiLCJSb3V0ZXIiLCJyb3V0ZSIsImhpc3RvcnkiLCJpc0ludGVybmFsIiwicGFydGljbGVzIiwiZ2V0UGFydGljbGVzIiwiUHJvZHVjdHNDb250cm9sbGVyIiwiUHJvZHVjdHNWaWV3SGVscGVyIiwiUHJvZHVjdHNNb2RlbCIsIm1haW4iLCJQcm9kdWN0Q29udHJvbGxlciIsIlByb2R1Y3RWaWV3SGVscGVyIiwiUHJvZHVjdE1vZGVsIiwiUmVnaXN0ZXJDb250cm9sbGVyIiwiUmVnaXN0ZXJWaWV3SGVscGVyIiwiUmVnaXN0ZXJNb2RlbCIsIkxvZ2luQ29udHJvbGxlciIsIkxvZ2luVmlld0hlbHBlciIsIkxvZ2luTW9kZWwiLCJMb2dvdXRDb250cm9sbGVyIiwiTG9nb3V0Vmlld0hlbHBlciIsIkxvZ291dE1vZGVsIiwiUmVzZXRQYXNzd29yZENvbnRyb2xsZXIiLCJSZXNldFBhc3N3b3JkVmlld0hlbHBlciIsIlJlc2V0UGFzc3dvcmRNb2RlbCIsIldpc2hsaXN0Q29udHJvbGxlciIsIldpc2hsaXN0Vmlld0hlbHBlciIsIldpc2hsaXN0TW9kZWwiLCJBZG1pbkNvbnRyb2xsZXIiLCJBZG1pblZpZXdIZWxwZXIiLCJBZG1pbk1vZGVsIiwiQWRtaW5Vc2VyQ29udHJvbGxlciIsIkFkbWluVXNlclZpZXdIZWxwZXIiLCJBZG1pblVzZXJNb2RlbCIsIkVycm9yQ29udHJvbGxlciIsIkVycm9yVmlld0hlbHBlciIsIndyaXRlSGlzdG9yeSIsIndpbmRvdyIsInNjcm9sbFRvIiwiaW5kZXhPZiIsImxvY2F0aW9uIiwic3Vic3RyaW5nIiwiYmFzZVVybCIsIm9iamVjdCIsInRpdGxlIiwicHVzaFN0YXRlIiwicmVhZHkiLCJ0b2dnbGVTaWRlYmFyIiwic2lkZWJhciIsImNsaWNrIiwiZSIsInByZXZlbnREZWZhdWx0IiwicGFyZW50IiwiZm4iLCJzZXJpYWxpemVPYmplY3QiLCJvIiwiYSIsInNlcmlhbGl6ZUFycmF5IiwiZWFjaCIsInB1c2giLCJnZXRQYWdlIiwiY2FsbGJhY2siLCJsb2FkIiwic2F2ZVVzZXJJbmZvIiwiZGF0ZV9vZl9iaXJ0aCIsIkRhdGUiLCJVVEMiLCJqYWFyIiwibWFhbmQiLCJkYWciLCJ1c2VyX2lkIiwiY29udGVudFR5cGUiLCJkZWxldGVVc2VyIiwiQ2FydE1vZGVsIiwiZ2V0Q2FydCIsImNhcnQiLCJwcmljZSIsImltYWdlIiwiY3VycmVudENhcnQiLCJzcGxpY2UiLCJsb2dpbiIsImVtYWlsIiwicGFzc3dvcmQiLCJidG9hIiwiYWNjZXNzX3Rva2VuIiwic2hvdyIsImxvZ291dCIsIlBhZ2VNb2RlbCIsImZpbHRlciIsInJlZ2lzdGVyIiwiZm9ybURhdGEiLCJlX21haWwiLCJlX21haWxhZHJlcyIsIndhY2h0d29vcmQiLCJmaXJzdF9uYW1lIiwidm9vcm5hYW0iLCJpbnNlcnRpb24iLCJ0dXNzZW52b2Vnc2VsIiwic3VybmFtZSIsImFjaHRlcm5hYW0iLCJnZW5kZXIiLCJiaXJ0aF9kYXRlIiwicGhvbmVfbnVtYmVyIiwibW9iaWVsX251bW1lciIsInNlY3JldF9xdWVzdGlvbiIsInNlY3VyaXR5X3F1ZXN0aW9uIiwic2VjcmV0X3F1ZXN0aW9uX2Fuc3dlciIsInNlY3VyaXR5X2Fuc3dlciIsInBvc3RhbF9jb2RlIiwicG9zdGNvZGUiLCJudW1iZXIiLCJodWlzbnVtbWVyIiwic3RyZWV0X25hbWUiLCJzdHJhYXRuYWFtIiwiY2l0eSIsInBsYWF0cyIsInJlc2V0cGFzc3dvcmQiLCJjb25zb2xlIiwibG9nIiwibmV3X3Bhc3N3b3JkIiwicmVwZWF0X3Bhc3N3b3JkIiwid2FjaHR3b29yZDIiLCJlYW4iLCJHZXRQcm9kdWN0SW5mbyIsIlVzZXJNb2RlbCIsInVzZXJpZCIsIkdldFVzZXJJbmZvIiwiZ2V0V2lzaGxpc3QiLCJhZGRUb1dpc2hsaXN0Iiwidmlld0RhdGEiLCJ3aXNobGlzdF9pZCIsImRlbGV0ZUZyb21XaXNobGlzdCIsInZpZXdIZWxwZXIiLCJtb2RlbCIsIlZpZXdIZWxwZXIiLCJzZXRBY3Rpb25MaXN0ZW5lciIsIk1vZGVsIiwic2V0VmlldyIsInNldFNhdmVMaXN0ZW5lciIsInNldERlbGV0ZUxpc3RlbmVyIiwic3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uIiwiQ2FydENvbnRyb2xsZXIiLCJzZXRBZGRQcm9kdWN0TGlzdGVuZXIiLCJzZXRSZW1vdmVMaXN0ZW5lciIsIkRlbGV0ZUNvbnRyb2xsZXIiLCJhY3Rpb25QZXJmb3JtZWQiLCJmaWVsZCIsIlBhZ2VDb250cm9sbGVyIiwiUGFnZVZpZXdIZWxwZXIiLCJWaWV3IiwiZmlsdGVyUHJvZHVjdHMiLCJmaWx0ZXJzIiwic2VyaWFsaXplIiwibG9hZFByb2R1Y3RzIiwic2V0RmlsdGVyTGlzdGVuZXIiLCJtYW5kYXRvcnlGaWVsZE1pc3NlcyIsIm1hbmRhdG9yeUZpZWxkcyIsIm1hbkZpZWxkIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsInBhc3N3b3Jkc05vdElkZW50aWNhbCIsInNob3dWaWV3IiwiYWN0aW9uIiwia2V5IiwidXNlciIsImNsb25lIiwiZmluZCIsImF0dHIiLCJhcHBlbmQiLCJmaXJzdCIsInJlbW92ZSIsInZhbCIsInVzZXJfdHlwZSIsImlzX2FjdGl2ZSIsInRvZGF5IiwiZGF0ZU9mQmlydGgiLCJnZXREYXRlIiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsIm9mZiIsIkNhcnRWaWV3SGVscGVyIiwiZm9yRWFjaCIsIml0ZW0iLCJpbmRleCIsInVwZGF0ZVRvdGFsUHJpY2UiLCJuZXdQcmljZSIsInBhcnNlRmxvYXQiLCJzdWJzdHIiLCJ0b0ZpeGVkIiwiY2FydEl0ZW0iLCJhbW91bnQiLCJwYXJzZUludCIsImFkZFRvQ2FydCIsInByb2R1Y3RfaWQiLCJjYXJ0aXRlbSIsImV2ZW50SGFuZGxlciIsInByb2R1Y3QiLCJnZW5yZSIsInBlZ2lfYWdlIiwicGxhdGZvcm0iLCJDdXRTdHJpbmciLCJkZXNjcmlwdGlvbiIsInRleHQiLCJTaG93QW1vdW50IiwiV29yZHNBcnJheSIsIlNob3J0U3RyaW5nIiwic3VibWl0Iiwidmlld1RvU2hvdyIsImRhdGUiLCJwdWJsaXNoZXIiLCJkIiwicmVsZWFzZV9kYXRlIiwibW9udGhzIiwiZ2V0RGF5IiwibG9hZFdpc2hsaXN0IiwiY3VycmVudCIsIndpc2hfX2xpc3RfX2l0ZW0iLCJzdG9jayIsIndpc2hfbGlzdF9pdGVtIl0sIm1hcHBpbmdzIjoiQUFDQSxRQUFBQSxjQUFBQyxHQUdBLE9BREFBLEVBQUFBLEVBQUFDLGVBSUEsSUFBQSxNQUNBLE1BQUEsK0NBQ0EsS0FBQSxNQUNBLE1BQUEsK0NBQ0EsS0FBQSxLQUNBLE1BQUEsbURBQ0EsS0FBQSxPQUNBLE1BQUEsZ0RBQ0EsS0FBQSxNQUNBLE1BQUEsK0NBQ0EsS0FBQSxNQUNBLE1BQUEsK0NBQ0EsS0FBQSxrQkFDQSxNQUFBLGtEQUNBLFNBQ0EsTUFBQUQsRUFHQSxLQUFBLFdBQ0EsTUFBQSx5REFDQSxLQUFBLFVBQ0EsTUFBQSx3REFDQSxLQUFBLGtCQUNBLE1BQUEscURBSUEsUUFBQUUsc0JBQUFDLEdBRUEsTUFBQUEsSUFBQSxFQUNBLDZEQUNBQSxHQUFBLEVBQ0EsK0RBRUFBLEVDdENBLFFBQUFDLGNBU0FDLEtBQUFDLGNBQUEsU0FBQUMsS0FVQUYsS0FBQUcsV0FBQSxTQUFBRCxLQ25CQSxRQUFBRSxnQkFTQUosS0FBQUssVUFBQSxTQUFBQyxHQUlBLElBQUEsR0FGQUMsR0FBQUMsU0FBQUMsT0FBQUMsTUFBQSxLQUVBQyxFQUFBLEVBQUFBLEVBQUFKLEVBQUFLLE9BQUFELElBQ0EsQ0FDQSxHQUFBRixHQUFBRixFQUFBSSxHQUFBRCxNQUFBLElBRUEsSUFBQUQsRUFBQSxHQUFBSSxRQUFBUCxFQUVBLE1BQUFHLEdBQUEsS0FhQVQsS0FBQWMsYUFBQSxTQUFBUixFQUFBUyxHQUVBUCxTQUFBQyxPQUFBSCxFQUFBLElBQUFTLEVBQUEsS0FVQWYsS0FBQWdCLGFBQUEsU0FBQVYsR0FFQUUsU0FBQUMsT0FBQUgsRUFBQSw2Q0MzQ0EsUUFBQVcsa0JBRUFDLEVBQUEsY0FBQUMsS0FBQSxpSEFHQSxRQUFBQyxjQUVBQyxXQUFBQyxXQUVBSixFQUFBLGtCQUFBSyxJQUFBLFVBQUEsZ0JBQ0FMLEVBQUEscUJBQUFLLElBQUEsVUFBQSxnQkFDQUwsRUFBQSxrQkFBQU0sUUFFQUgsV0FBQUksY0FFQVAsRUFBQSxxQkFBQUssSUFBQSxVQUFBLGdCQUNBTCxFQUFBLGtCQUFBTSxTQUlBTixFQUFBLGtCQUFBTSxPQUNBTixFQUFBLHFCQUFBTSxPQUNBTixFQUFBLGtCQUFBSyxJQUFBLFVBQUEsaUJDekJBLFFBQUFGLGNBS0FyQixLQUFBMEIsVUFBQSxXQUVBLEdBQUFDLEdBQUF2QixhQUFBQyxVQUFBLGVBRUEsT0FBQXVCLFNBQUFELEdBQUEsSUFBQUEsR0FXQTNCLEtBQUF5QixXQUFBLFdBRUEsR0FBQUosV0FBQUssWUFDQSxDQUNBLEdBQUFHLEdBQUE3QixLQUFBOEIsY0FBQUQsUUFFQSxJQUFBLFlBQUFBLEdBQUEsU0FBQUEsRUFFQSxPQUFBLEVBSUEsT0FBQSxHQU1BN0IsS0FBQXNCLFFBQUEsV0FFQSxHQUFBRCxXQUFBSyxZQUNBLENBQ0EsR0FBQUcsR0FBQTdCLEtBQUE4QixjQUFBRCxRQUVBLElBQUEsU0FBQUEsRUFFQSxPQUFBLEVBSUEsT0FBQSxHQU1BN0IsS0FBQThCLFlBQUEsV0FFQSxHQUFBSCxHQUFBdkIsYUFBQUMsVUFBQSxlQUVBLElBQUF1QixRQUFBRCxHQUFBLElBQUFBLEVBQ0EsQ0FDQSxHQUFBSSxHQUFBSixFQUFBakIsTUFBQSxLQUFBLEVBRUEsT0FBQXNCLE1BQUFDLE1BQUFDLEtBQUFILE1DaEVBLFFBQUFJLGtCQVNBbkMsS0FBQW9DLFFBQUEsU0FBQUMsR0FFQW5CLEVBQUFvQixNQUNBQyxJQUFBLGtDQUFBbkMsYUFBQUMsVUFBQSxXQUFBLElBQUFnQyxFQUNBRyxLQUFBLE9BQ0FDLFNBQUEsT0FDQUMsS0FBQVYsS0FBQVcsY0FDQUMsU0FDQUMsY0FBQSxVQUFBekMsYUFBQUMsVUFBQSxpQkFFQXlDLFFBQUEsU0FBQUosR0FDQXhCLEVBQUFsQixNQUFBK0MsWUFBQSxnQkFDQUMsTUFBQSwrQ0FFQUMsTUFBQSxTQUFBQyxFQUFBQyxFQUFBRixHQUNBRCxNQUFBLGtDTG1CQTlCLEVBQUFWLFVBQUE0QyxHQUFBLFFBQUEsWUFBQSxTQUFBQyxHQUNBbkMsRUFBQWxCLE1BQUErQyxZQUFBLGtCQUlBN0IsRUFBQVYsVUFBQTRDLEdBQUEsUUFBQSxtQkFBQSxTQUFBQyxHQUNBbkMsRUFBQWxCLE1BQUErQyxZQUFBLHdCTXBEQSxJQUFBTyxRQUFBLFdBSUEsUUFBQUMsR0FBQWhCLEVBQUFpQixHQUVBLEdBQUEsR0FBQUMsRUFBQWxCLEdBQUEsQ0FLQSxHQUFBbUIsR0FBQUMsRUFBQXBCLEVBRUEsUUFBQW1CLEVBQUEsSUFFQSxJQUFBLEdBQ0EsSUFBQSxhQUNBLElBQUEsV0FDQSxHQUFBRSxvQkFBQSxHQUFBQyxvQkFBQSxHQUFBQyxnQkFBQUMsTUFDQSxNQUNBLEtBQUEsVUFDQSxHQUFBQyxtQkFBQSxHQUFBQyxtQkFBQSxHQUFBQyxjQUFBUixFQUFBLEtBQUFLLE1BQ0EsTUFDQSxLQUFBLFdBQ0EsR0FBQUksb0JBQUEsR0FBQUMsb0JBQUEsR0FBQUMsZ0JBQUFOLE1BQ0EsTUFDQSxLQUFBLFFBQ0EsR0FBQU8saUJBQUEsR0FBQUMsaUJBQUEsR0FBQUMsYUFBQVQsTUFDQSxNQUNBLEtBQUEsU0FDQSxHQUFBVSxrQkFBQSxHQUFBQyxrQkFBQSxHQUFBQyxjQUFBWixNQUNBLE1BQ0EsS0FBQSxXQUNBLEdBQUFJLG9CQUFBLEdBQUFDLG9CQUFBLEdBQUFDLGdCQUFBTixNQUNBLE1BQ0EsS0FBQSxnQkFDQSxHQUFBYSx5QkFBQSxHQUFBQyx5QkFBQSxHQUFBQyxxQkFBQWYsTUFDQSxNQUNBLEtBQUEsV0FDQSxHQUFBZ0Isb0JBQUEsR0FBQUMsb0JBQUEsR0FBQUMsZ0JBQUFsQixNQUNBLEtBQUEsUUFDQSxHQUFBbUIsaUJBQUEsR0FBQUMsaUJBQUEsR0FBQUMsYUFBQXJCLE1BQ0EsTUFDQSxLQUFBLGFBQ0EsR0FBQXNCLHFCQUFBLEdBQUFDLHFCQUFBLEdBQUFDLGdCQUFBN0IsRUFBQSxLQUFBSyxNQUNBLE1BQ0EsU0FDQSxHQUFBeUIsaUJBQUEsR0FBQUMsa0JBQUExQixPQUlBLEdBQUFQLEdBRUEsSUFBQWpCLEdBQUEsZ0JBQUFBLEtBRUFtRCxLQUFBLFlBQUFuRCxHQUdBdEIsaUJBR0EwRSxPQUFBQyxTQUFBLEVBQUEsS0FLQSxRQUFBbkMsR0FBQWxCLEdBRUEsTUFBQUEsR0FBQXNELFFBQUEsVUFBQSxHQUFBdEQsRUFBQXNELFFBQUEsV0FBQSxHQUFBdEQsRUFBQXNELFFBQUEsU0FBQSxJQUVBRixPQUFBRyxTQUFBdkQsR0FFQSxHQU1BLFFBQUFvQixHQUFBcEIsR0FjQSxNQVhBLElBQUFBLEVBQUFzRCxRQUFBLE9BRUF0RCxFQUFBQSxFQUFBd0QsVUFBQSxJQUlBLE1BQUEvRixLQUFBZ0csU0FBQXpELEVBQUFzRCxRQUFBN0YsS0FBQWdHLFdBQUEsSUFFQXpELEVBQUFBLEVBQUF3RCxVQUFBeEQsRUFBQXNELFFBQUE3RixLQUFBZ0csU0FBQWhHLEtBQUFnRyxRQUFBcEYsU0FHQTJCLEVBQUE3QixNQUFBLFdBR0EsUUFBQWdGLEdBQUFPLEVBQUFDLEVBQUEzRCxHQUVBb0QsT0FBQW5DLFFBQUEyQyxVQUFBRixFQUFBQyxFQUFBM0QsR0FHQSxNQWxHQXlELFNBQUEsb0JBbUdBekMsTUFBQUEsR0NyR0FyQyxHQUFBVixVQUFBNEYsTUFBQSxXQXFCQSxRQUFBQyxHQUFBQyxHQUVBcEYsRUFBQW9GLEdBQUF2RCxZQUFBLGlCQUNBN0IsRUFBQSxZQUFBNkIsWUFBQSxvQkFDQTdCLEVBQUEsUUFBQTZCLFlBQUEsaUJBdkJBN0IsRUFBQSxtQkFBQXFGLE1BQUEsU0FBQUMsR0FHQUEsRUFBQUMsZ0JBR0EsSUFBQUgsR0FBQXBGLEVBQUFsQixNQUFBMEMsS0FBQSxVQUVBMkQsR0FBQW5GLEVBQUEsSUFBQW9GLE1BR0FwRixFQUFBLG1CQUFBcUYsTUFBQSxTQUFBQyxHQUNBSCxFQUFBbkYsRUFBQWxCLE1BQUEwRyxTQUFBQSxZQUdBeEYsRUFBQSxZQUFBcUYsTUFBQSxTQUFBQyxHQUNBSCxFQUFBbkYsRUFBQSxnQkpsQkEsSUFBQW9DLFFBQUEsR0FBQUEsUUFDQWxELGFBQUEsR0FBQUEsY0FDQWlCLFdBQUEsR0FBQUEsWUFFQWMsZUFBQSxHQUFBQSxlS0pBakIsR0FBQXlGLEdBQUFDLGdCQUFBLFdBRUEsR0FBQUMsTUFDQUMsRUFBQTlHLEtBQUErRyxnQkFpQkEsT0FoQkE3RixHQUFBOEYsS0FBQUYsRUFBQSxXQUNBbEYsU0FBQWlGLEVBQUE3RyxLQUFBTSxPQUNBdUcsRUFBQTdHLEtBQUFNLE1BQUEyRyxPQUNBSixFQUFBN0csS0FBQU0sT0FBQXVHLEVBQUE3RyxLQUFBTSxRQUVBLElBQUFOLEtBQUFlLE9BRUE4RixFQUFBN0csS0FBQU0sTUFBQTJHLEtBQUFqSCxLQUFBZSxRQUdBLElBQUFmLEtBQUFlLFFBRUE4RixFQUFBN0csS0FBQU0sTUFBQU4sS0FBQWUsT0FBQSxNQUlBOEYsRUNwQkEsSUFBQXpCLFlBQUEsV0FFQSxRQUFBOEIsR0FBQUMsR0FFQWpHLEVBQUFvQixNQUNBQyxJQUFBLHNDQUNBQyxLQUFBLE1BQ0FDLFNBQUEsT0FDQUcsU0FDQUMsY0FBQSxVQUFBekMsYUFBQUMsVUFBQSxpQkFFQXlDLFFBQUEsU0FBQUosR0FDQXlFLEVBQUF6RSxJQUVBTyxNQUFBLFNBQUFDLEVBQUFDLEVBQUFGLEdBQ0EvQixFQUFBLGNBQUFrRyxLQUFBLDhCQU1BLE9BQ0FGLFFBQUFBLElDdEJBM0IsZUFBQSxTQUFBckYsR0FFQSxRQUFBZ0gsR0FBQUMsR0FFQWpHLEVBQUFvQixNQUNBQyxJQUFBLHVDQUFBckMsRUFDQXNDLEtBQUEsTUFDQUMsU0FBQSxPQUNBRyxTQUNBQyxjQUFBLFVBQUF6QyxhQUFBQyxVQUFBLGlCQUVBeUMsUUFBQSxTQUFBSixHQUNBeUUsRUFBQXpFLEVBQUEsS0FFQU8sTUFBQSxTQUFBQyxFQUFBQyxFQUFBRixHQUNBL0IsRUFBQSxjQUFBa0csS0FBQSw4QkFLQSxRQUFBQyxHQUFBM0UsRUFBQXlFLEdBR0F6RSxFQUFBNEUsY0FBQSxHQUFBQyxNQUFBQSxLQUFBQyxJQUFBOUUsRUFBQStFLEtBQUEvRSxFQUFBZ0YsTUFBQWhGLEVBQUFpRixZQUdBakYsR0FBQStFLFdBQ0EvRSxHQUFBZ0YsWUFDQWhGLEdBQUFpRixJQUVBekcsRUFBQW9CLE1BQ0FDLElBQUEscUNBQUFHLEVBQUFrRixRQUNBcEYsS0FBQSxRQUNBQyxTQUFBLE9BQ0FvRixZQUFBLGtDQUNBbkYsS0FBQVYsS0FBQVcsVUFBQUQsR0FDQUUsU0FDQUMsY0FBQSxVQUFBekMsYUFBQUMsVUFBQSxpQkFFQXlDLFFBQUEsU0FBQUosR0FDQXlFLEVBQUF6RSxJQUVBTyxNQUFBLFNBQUFDLEVBQUFDLEVBQUFGLEdBQ0EvQixFQUFBLGNBQUFrRyxLQUFBLDhCQUtBLFFBQUFVLEdBQUFGLEVBQUFULEdBRUFqRyxFQUFBb0IsTUFDQUMsSUFBQSx1Q0FBQXFGLEVBQ0FwRixLQUFBLFNBQ0FDLFNBQUEsT0FDQUcsU0FDQUMsY0FBQSxVQUFBekMsYUFBQUMsVUFBQSxpQkFFQXlDLFFBQUEsU0FBQUosR0FDQXlFLEtBRUFsRSxNQUFBLFNBQUFDLEVBQUFDLEVBQUFGLEdBQ0EvQixFQUFBLGNBQUFrRyxLQUFBLDhCQU1BLE9BQ0FGLFFBQUFBLEVBQ0FHLGFBQUFBLEVBQ0FTLFdBQUFBLElDdEVBQyxVQUFBLFdBS0EsUUFBQUMsR0FBQWIsR0FFQSxHQUFBYyxHQUFBN0gsYUFBQUMsVUFBQSxPQUVBdUIsU0FBQXFHLEdBRUFkLEVBQUFuRixLQUFBQyxNQUFBZ0csSUFPQSxRQUFBOUgsR0FBQUQsRUFBQWlILEdBRUFqRyxFQUFBb0IsTUFDQUMsSUFBQSxvQ0FBQXJDLEVBQ0FzQyxLQUFBLE1BQ0FxRixZQUFBLE9BQ0EvRSxRQUFBLFNBQUFKLEdBQ0F1RixNQUFBNUYsV0FBQUssRUFBQSxHQUFBTCxXQUFBNkQsTUFBQXhELEVBQUEsR0FBQXdELE1BQUFnQyxNQUFBeEYsRUFBQSxHQUFBd0YsTUFBQUMsTUFBQXpGLEVBQUEsR0FBQXlGLE9BQ0FoQixFQUFBYyxLQUdBLElBQUFHLEdBQUFoSSxhQUFBQyxVQUFBLE9BRUF1QixTQUFBd0csRUFFQWhJLGFBQUFVLGFBQUEsT0FBQWtCLEtBQUFXLFdBQUFzRixTQUlBRyxFQUFBcEcsS0FBQUMsTUFBQW1HLEdBQ0FBLEVBQUFuQixLQUFBZ0IsTUFFQTdILGFBQUFVLGFBQUEsT0FBQWtCLEtBQUFXLFVBQUF5RixNQUdBbkYsTUFBQSxTQUFBQyxFQUFBQyxFQUFBRixHQUNBL0IsRUFBQSxjQUFBa0csS0FBQSw4QkFVQSxRQUFBbkgsR0FBQUMsR0FJQSxJQUZBK0gsS0FBQWpHLEtBQUFDLE1BQUE3QixhQUFBQyxVQUFBLFNBRUFNLEVBQUEsRUFBQUEsRUFBQXNILEtBQUFySCxPQUFBRCxJQUVBLEdBQUFzSCxLQUFBdEgsR0FBQTBCLFlBQUFuQyxFQUNBLENBQ0ErSCxLQUFBSSxPQUFBMUgsRUFBQSxFQUNBLE9BSUFQLGFBQUFVLGFBQUEsT0FBQWtCLEtBQUFXLFVBQUFzRixPQUlBLE9BQ0FELFFBQUFBLEVBQ0E3SCxXQUFBQSxFQUNBRixjQUFBQSxJQzFFQXVFLFdBQUEsV0FFQSxRQUFBOEQsR0FBQUMsRUFBQUMsRUFBQXJCLEdBRUFqRyxFQUFBb0IsTUFDQUMsSUFBQSxxQ0FDQUMsS0FBQSxNQUNBQyxTQUFBLE9BQ0FHLFNBQ0FDLGNBQUEsU0FBQTRGLEtBQUFGLEVBQUEsSUFBQUMsSUFFQTFGLFFBQUEsU0FBQUosR0FFQXRDLGFBQUFVLGFBQUEsZUFBQTRCLEVBQUFnRyxjQUNBdEksYUFBQVUsYUFBQSxVQUFBNEIsRUFBQWtGLFNBR0F4RyxhQUdBK0YsRUFBQXpFLElBRUFPLE1BQUEsU0FBQUMsRUFBQUMsRUFBQUYsR0FFQS9CLEVBQUEsa0JBQUF5SCxVQVFBLE9BQ0FMLE1BQUFBLElDakNBM0QsWUFBQSxXQUVBLFFBQUFpRSxHQUFBekIsR0EyQkEsUUFBQTlHLEdBQUFDLEdBSUEsSUFBQSxHQUZBQyxHQUFBQyxTQUFBQyxPQUFBQyxNQUFBLEtBRUFDLEVBQUEsRUFBQUEsRUFBQUosRUFBQUssT0FBQUQsSUFDQSxDQUNBLEdBQUFGLEdBQUFGLEVBQUFJLEdBQUFELE1BQUEsSUFFQSxJQUFBRCxFQUFBLEdBQUFJLFFBQUFQLEVBRUEsTUFBQUcsR0FBQSxJQW5DQVMsRUFBQW9CLE1BQ0FDLElBQUEsc0NBQ0FDLEtBQUEsT0FDQUMsU0FBQSxPQUNBQyxLQUFBVixLQUFBVyxXQUNBaUYsUUFBQXZILEVBQUEsYUFFQXlDLFFBQUEsU0FBQUosR0FFQXRDLGFBQUFZLGFBQUEsZ0JBQ0FaLGFBQUFZLGFBQUEsV0FHQUksYUFFQStGLEVBQUF6RSxJQUVBTyxNQUFBLFNBQUFDLEVBQUFDLEVBQUFGLEdBRUEvQixFQUFBLGtCQUFBeUgsVUF1QkEsT0FDQUMsT0FBQUEsSUMvQ0FDLFVBQUEsV0FFQSxRQUFBM0IsR0FBQUMsR0FFQWpHLEVBQUFvQixNQUNBQyxJQUFBLCtCQUNBQyxLQUFBLE1BQ0FDLFNBQUEsT0FDQUcsU0FDQUMsY0FBQSxVQUFBekMsYUFBQUMsVUFBQSxpQkFFQXlDLFFBQUEsU0FBQUosR0FDQXlFLEVBQUF6RSxJQUVBTyxNQUFBLFNBQUFDLEVBQUFDLEVBQUFGLEdBQ0EvQixFQUFBLGNBQUFrRyxLQUFBLDhCQU1BLE9BQ0FGLFFBQUFBLElDdEJBcEQsY0FBQSxXQUVBLFFBQUFvRCxHQUFBNEIsRUFBQTNCLEdBRUFqRyxFQUFBb0IsTUFDQUMsSUFBQSxvQ0FBQXVHLEVBQ0F0RyxLQUFBLE1BQ0FDLFNBQUEsT0FDQUssUUFBQSxTQUFBSixHQUNBeUUsRUFBQXpFLElBRUFPLE1BQUEsU0FBQUMsRUFBQUMsRUFBQUYsR0FDQS9CLEVBQUEsY0FBQWtHLEtBQUEsOEJBTUEsT0FDQUYsUUFBQUEsSUNuQkE3QyxjQUFBLFdBRUEsUUFBQTBFLEdBQUFDLEVBQUE3QixHQUdBakcsRUFBQW9CLE1BQ0FDLElBQUEsd0NBQ0FDLEtBQUEsT0FDQUMsU0FBQSxPQUNBQyxLQUFBVixLQUFBVyxXQUNBc0csT0FBQUQsRUFBQUUsWUFDQVYsU0FBQVEsRUFBQUcsV0FDQUMsV0FBQUosRUFBQUssU0FDQUMsVUFBQU4sRUFBQU8sY0FDQUMsUUFBQVIsRUFBQVMsV0FDQUMsT0FBQVYsRUFBQVUsT0FDQXBDLGNBQUEwQixFQUFBVyxXQUNBQyxhQUFBWixFQUFBYSxjQUNBQyxnQkFBQWQsRUFBQWUsa0JBQ0FDLHVCQUFBaEIsRUFBQWlCLGdCQUVBQyxZQUFBbEIsRUFBQW1CLFNBQ0FDLE9BQUFwQixFQUFBcUIsV0FDQUMsWUFBQXRCLEVBQUF1QixXQUNBQyxLQUFBeEIsRUFBQXlCLFNBRUEzSCxRQUFBLFNBQUFKLEdBR0F5RSxFQUFBekUsSUFFQU8sTUFBQSxTQUFBQyxFQUFBQyxFQUFBRixHQUVBL0IsRUFBQSwyQkFBQXlILFVBT0EsT0FDQUksU0FBQUEsSUN6Q0FqRSxtQkFBQSxXQUVBLFFBQUE0RixHQUFBMUIsRUFBQTdCLEdBRUF3RCxRQUFBQyxJQUFBNUIsR0FDQTlILEVBQUFvQixNQUNBQyxJQUFBLDZDQUNBQyxLQUFBLE9BQ0FDLFNBQUEsT0FDQUMsS0FBQVYsS0FBQVcsV0FDQTRGLE1BQUFTLEVBQUFFLFlBQ0FjLHVCQUFBaEIsRUFBQWlCLGdCQUNBSCxnQkFBQWQsRUFBQWUsa0JBQ0FjLGFBQUE3QixFQUFBRyxXQUNBMkIsZ0JBQUE5QixFQUFBK0IsY0FFQWpJLFFBQUEsU0FBQUosR0FDQXlFLEVBQUF6RSxJQUVBTyxNQUFBLFNBQUFDLEVBQUFDLEVBQUFGLEdBRUEvQixFQUFBLHFDQUFBeUgsVUFNQSxPQUNBK0IsY0FBQUEsSUM1QkF4RyxhQUFBLFNBQUE4RyxHQUVBLFFBQUFDLEdBQUE5RCxHQUVBakcsRUFBQW9CLE1BQ0FDLElBQUEsb0NBQUF5SSxFQUNBeEksS0FBQSxNQUNBQyxTQUFBLE9BQ0FLLFFBQUEsU0FBQUosR0FFQXlFLEVBQUF6RSxFQUFBLEtBRUFPLE1BQUEsU0FBQUMsRUFBQUMsRUFBQUYsR0FDQS9CLEVBQUEsY0FBQWtHLEtBQUEsOEJBTUEsT0FDQTZELGVBQUFBLElDcEJBQyxVQUFBLFNBQUFDLEdBRUEsUUFBQUMsR0FBQWpFLEdBRUFqRyxFQUFBb0IsTUFDQUMsSUFBQSxpQ0FBQTRJLEVBQ0EzSSxLQUFBLE1BQ0FDLFNBQUEsT0FDQUssUUFBQSxTQUFBSixHQUVBeUUsRUFBQXpFLEVBQUEsS0FFQU8sTUFBQSxTQUFBQyxFQUFBQyxFQUFBRixHQUNBL0IsRUFBQSxjQUFBa0csS0FBQSxrQkFNQSxPQUNBZ0UsWUFBQUEsSUNwQkFuRyxjQUFBLFdBRUEsUUFBQW9HLEdBQUFsRSxHQUdBakcsRUFBQW9CLE1BQ0FDLElBQUEsaUNBQ0FDLEtBQUEsTUFDQUMsU0FBQSxPQUNBRyxTQUNBQyxjQUFBLFVBQUF6QyxhQUFBQyxVQUFBLGlCQUVBeUMsUUFBQSxTQUFBSixHQUNBeUUsRUFBQXpFLElBRUFPLE1BQUEsU0FBQUMsRUFBQUMsRUFBQUYsR0FDQS9CLEVBQUEsY0FBQWtHLEtBQUEsOEJBS0EsUUFBQWtFLEdBQUFDLEVBQUFwRSxHQUdBakcsRUFBQW9CLE1BQ0FDLElBQUEsa0NBQUFuQyxhQUFBQyxVQUFBLFdBQ0FtQyxLQUFBLE9BQ0FDLFNBQUEsT0FDQUMsS0FBQVYsS0FBQVcsV0FDQTZJLFlBQUFELEVBQUFDLGNBR0E1SSxTQUNBQyxjQUFBLFVBQUF6QyxhQUFBQyxVQUFBLGlCQUVBeUMsUUFBQSxTQUFBSixHQUNBeUUsRUFBQXpFLElBRUFPLE1BQUEsU0FBQUMsRUFBQUMsRUFBQUYsR0FDQS9CLEVBQUEsY0FBQWtHLEtBQUEsOEJBS0EsUUFBQXFFLEtBRUF2SyxFQUFBb0IsTUFDQUMsSUFBQSxpQ0FBQUcsS0FBQWtGLFFBQ0FwRixLQUFBLFFBQ0FDLFNBQUEsT0FDQW9GLFlBQUEsa0NBQ0FuRixLQUFBVixLQUFBVyxVQUFBRCxNQUNBRSxTQUNBQyxjQUFBLFVBQUF6QyxhQUFBQyxVQUFBLGlCQUVBeUMsUUFBQSxTQUFBSixHQUNBeUUsU0FBQXpFLElBRUFPLE1BQUEsU0FBQUMsRUFBQUMsRUFBQUYsR0FDQS9CLEVBQUEsY0FBQWtHLEtBQUEsOEJBTUEsT0FDQWlFLFlBQUFBLEVBQ0FDLGNBQUFBLEVBQ0FHLG1CQUFBQSxJQ3BFQXZHLGdCQUFBLFNBQUF3RyxFQUFBQyxHQU1BLFFBQUE1SCxLQUVBNkgsRUFBQUMsa0JBQUEzRSxHQUdBLFFBQUFBLEtBRUE0RSxFQUFBNUUsUUFBQTZFLEdBRUEsUUFBQUEsR0FBQXJKLEdBRUFrSixFQUFBRyxRQUFBckosR0FmQSxHQUFBb0osR0FBQUgsRUFDQUMsRUFBQUYsQ0FtQkEsUUFDQTNILEtBQUFBLElDdkJBc0Isb0JBQUEsU0FBQXFHLEVBQUFDLEdBTUEsUUFBQTVILEtBRUE2SCxFQUFBQyxrQkFBQTNFLEdBQ0F3RSxFQUFBTSxnQkFBQTNFLEdBQ0FxRSxFQUFBTyxrQkFBQW5FLEdBR0EsUUFBQVosS0FFQTRFLEVBQUE1RSxRQUFBNkUsR0FHQSxRQUFBQSxHQUFBckosR0FFQWtKLEVBQUFHLFFBQUFySixHQUdBLFFBQUEyRSxHQUFBaEUsR0FFQUEsRUFBQW9ELGlCQUNBcEQsRUFBQTZJLDBCQUVBLElBQUFsRCxHQUFBOUgsRUFBQWxCLE1BQUE0RyxpQkFFQWtGLEdBQUF6RSxhQUFBMkIsRUFBQSxTQUFBQSxHQUVBaEcsTUFBQSxtQ0FJQSxRQUFBOEUsR0FBQUYsR0FFQWtFLEVBQUFoRSxXQUFBRixFQUFBLFdBRUE1RSxNQUFBLGlDQUNBTSxPQUFBQyxNQUFBLFlBdkNBLEdBQUF1SSxHQUFBSCxFQUNBQyxFQUFBRixDQTJDQSxRQUNBM0gsS0FBQUEsSUMvQ0FvSSxlQUFBLFNBQUFULEVBQUFDLEdBUUEsUUFBQTNELEtBRUE4RCxFQUFBOUQsUUFBQSxTQUFBdEYsR0FBQWtKLEVBQUFHLFFBQUFySixLQVFBLFFBQUF2QyxHQUFBRCxHQUVBNEwsRUFBQTNMLFdBQUFELEVBQUEsU0FBQXdDLEdBQUFrSixFQUFBeEosUUFBQU0sS0FNQSxRQUFBekMsR0FBQUMsR0FFQTRMLEVBQUE3TCxjQUFBQyxFQUFBLFNBQUF3QyxNQUlBLFFBQUFxQixLQUVBNkgsRUFBQUMsa0JBQUE3RCxHQUNBNEQsRUFBQVEsc0JBQUFqTSxHQUNBeUwsRUFBQVMsa0JBQUFwTSxHQWxDQSxHQUFBNkwsR0FBQUgsRUFDQUMsRUFBQUYsQ0FxQ0EsUUFDQTNILEtBQUFBLElDekNBdUksaUJBQUEsU0FBQVosRUFBQUMsS0NBQW5HLGdCQUFBLFNBQUFrRyxHQUtBLFFBQUEzSCxLQUdBNkgsRUFBQUcsVUFOQSxHQUFBSCxHQUFBRixDQVVBLFFBQ0EzSCxLQUFBQSxJQ2JBTyxnQkFBQSxTQUFBb0gsRUFBQUMsR0FNQSxRQUFBWSxHQUFBbEosR0FHQUEsRUFBQW9ELGlCQUNBcEQsRUFBQTZJLDBCQUdBLElBQUFsRCxLQUNBOUgsR0FBQThGLEtBQUE5RixFQUFBbEIsTUFBQStHLGlCQUFBLFNBQUFwRyxFQUFBNkwsR0FDQXhELEVBQUF3RCxFQUFBbE0sTUFBQWtNLEVBQUF6TCxRQUlBK0ssRUFBQXhELE1BQUFVLEVBQUFULE1BQUFTLEVBQUFSLFNBQUEsU0FBQTlGLEdBRUF4QixFQUFBLGtCQUFBTSxPQUNBTixFQUFBLG1CQUFBeUgsT0FHQSxHQUFBOEQsZ0JBQUEsR0FBQUMsZ0JBQUEsR0FBQTdELFlBQUE5RSxTQUtBLFFBQUFBLEtBR0E2SCxFQUFBRyxVQUdBSCxFQUFBQyxrQkFBQVUsR0FsQ0EsR0FBQVQsR0FBQUgsRUFDQUMsRUFBQUYsQ0FxQ0EsUUFDQTNILEtBQUFBLElDekNBVSxpQkFBQSxTQUFBaUgsRUFBQUMsR0FNQSxRQUFBWSxHQUFBbEosR0FFQXlJLEVBQUFsRCxPQUFBLFNBQUFsRyxHQUVBeEIsRUFBQSxrQkFBQXlILE9BQ0F6SCxFQUFBLG1CQUFBTSxPQUdBb0ssRUFBQUcsWUFLQSxRQUFBaEksS0FHQTZILEVBQUFDLGtCQUFBVSxHQXBCQSxHQUFBVCxHQUFBSCxFQUNBQyxFQUFBRixDQXVCQSxRQUNBM0gsS0FBQUEsSUMzQkEwSSxlQUFBLFNBQUFmLEVBQUFDLEdBTUEsUUFBQVksR0FBQWxKLEdBRUF5SSxFQUFBNUUsUUFBQSxTQUFBeEUsR0FDQWlLLEVBQUFaLFFBQUFySixLQUtBLFFBQUFxQixLQUVBNEksRUFBQWQsa0JBQUFVLEdBZEEsR0FBQVQsR0FBQUgsRUFDQWdCLEVBQUFqQixDQWlCQSxRQUNBM0gsS0FBQUEsSUNyQkFILG1CQUFBLFNBQUE4SCxFQUFBQyxHQU1BLFFBQUF6RSxLQUVBNEUsRUFBQTVFLFFBQUEsR0FBQSxTQUFBeEUsR0FBQWtKLEVBQUFHLFFBQUFySixLQUdBLFFBQUFrSyxHQUFBdkosR0FHQUEsRUFBQW9ELGdCQUVBLElBQUFvRyxHQUFBM0wsRUFBQWxCLE1BQUE4TSxXQUNBaEIsR0FBQTVFLFFBQUEyRixFQUFBLFNBQUFuSyxHQUFBa0osRUFBQW1CLGFBQUFySyxLQUlBLFFBQUFxQixLQUVBNkgsRUFBQUMsa0JBQUEzRSxHQUNBMEUsRUFBQW9CLGtCQUFBSixHQXRCQSxHQUFBZCxHQUFBSCxFQUNBQyxFQUFBRixDQTBCQSxRQUNBM0gsS0FBQUEsSUM5QkFJLG1CQUFBLFNBQUF1SCxFQUFBQyxHQU1BLFFBQUFZLEtBRUE1QixRQUFBQyxJQUFBLHNCQUdBdkgsTUFBQW9ELGlCQUdBdkYsRUFBQSwyQkFBQU0sT0FDQU4sRUFBQSxzQkFBQU0sTUFHQSxJQUFBd0gsS0FFQTlILEdBQUE4RixLQUFBOUYsRUFBQWxCLE1BQUErRyxpQkFBQSxTQUFBcEcsRUFBQTZMLEdBQ0F4RCxFQUFBd0QsRUFBQWxNLE1BQUFrTSxFQUFBekwsUUFJQWlJLEVBQUEsV0FBQUEsRUFBQXZCLEtBQUEsSUFBQXVCLEVBQUF0QixNQUFBLElBQUFzQixFQUFBckIsSUFFQWdELFFBQUFDLElBQUE1QixFQUlBLElBQUFpRSxJQUFBLEVBQ0FDLEdBQUEsV0FBQSxhQUFBLFdBQUEsYUFBQSxjQUFBLGFBQUEsY0FBQSxrQkFJQWhNLEdBQUE4RixLQUFBa0csRUFBQSxTQUFBdk0sRUFBQXdNLEdBQ0FqTSxFQUFBLElBQUFpTSxHQUFBQyxZQUFBLGFBR0FsTSxFQUFBOEYsS0FBQWtHLEVBQUEsU0FBQXZNLEVBQUF3TSxHQUNBLElBQUFuRSxFQUFBbUUsS0FFQWpNLEVBQUEsSUFBQWlNLEdBQUFFLFNBQUEsV0FFQUosR0FBQSxLQU1BQSxJQUdBdEgsT0FBQUMsU0FBQSxFQUFBLEdBRUExRSxFQUFBLDJCQUFBeUgsT0FHQSxJQUFBMkUsSUFBQSxDQVdBLE9BVEF0RSxHQUFBRyxZQUFBSCxFQUFBK0IsY0FFQXVDLEdBQUEsRUFDQXBNLEVBQUEsc0JBQUF5SCxPQUNBekgsRUFBQSxlQUFBbU0sU0FBQSxXQUNBbk0sRUFBQSxnQkFBQW1NLFNBQUEsYUFJQUosSUFBQUssSUFJQTNDLFFBQUFDLElBQUEsaUJBRUFrQixHQUFBL0MsU0FBQUMsRUFBQSxTQUFBdEcsR0FDQWtKLEVBQUFHLFFBQUEsMENBS0EsUUFBQWhJLEtBR0E2SCxFQUFBRyxRQUFBLGlDQUdBSCxFQUFBQyxrQkFBQVUsR0F0RkEsR0FBQVQsR0FBQUgsRUFDQUMsRUFBQUYsQ0EyRkEsUUFDQTNILEtBQUFBLElDL0ZBYSx3QkFBQSxTQUFBOEcsRUFBQUMsR0FNQSxRQUFBWSxLQUVBNUIsUUFBQUMsSUFBQSxzQkFHQXZILE1BQUFvRCxpQkFHQXZGLEVBQUEscUNBQUFNLE9BQ0FOLEVBQUEsc0JBQUFNLE1BR0EsSUFBQXdILEtBRUE5SCxHQUFBOEYsS0FBQTlGLEVBQUFsQixNQUFBK0csaUJBQUEsU0FBQXBHLEVBQUE2TCxHQUNBeEQsRUFBQXdELEVBQUFsTSxNQUFBa00sRUFBQXpMLE9BS0EsSUFBQWtNLElBQUEsRUFDQUMsR0FBQSxhQUFBLGNBQUEsY0FBQSxrQkFJQWhNLEdBQUE4RixLQUFBa0csRUFBQSxTQUFBdk0sRUFBQXdNLEdBQ0FqTSxFQUFBLElBQUFpTSxHQUFBQyxZQUFBLGFBR0FsTSxFQUFBOEYsS0FBQWtHLEVBQUEsU0FBQXZNLEVBQUF3TSxHQUNBLElBQUFuRSxFQUFBbUUsS0FFQWpNLEVBQUEsSUFBQWlNLEdBQUFFLFNBQUEsV0FFQUosR0FBQSxLQU1BQSxJQUdBdEgsT0FBQUMsU0FBQSxFQUFBLEdBRUExRSxFQUFBLHdCQUFBeUgsT0FHQSxJQUFBMkUsSUFBQSxDQVdBLE9BVEF0RSxHQUFBRyxZQUFBSCxFQUFBK0IsY0FFQXVDLEdBQUEsRUFDQXBNLEVBQUEsc0JBQUF5SCxPQUNBekgsRUFBQSxlQUFBbU0sU0FBQSxXQUNBbk0sRUFBQSxnQkFBQW1NLFNBQUEsYUFJQUosSUFBQUssSUFJQTNDLFFBQUFDLElBQUEsaUJBRUFrQixHQUFBcEIsY0FBQTFCLEVBQUEsU0FBQXRHLEdBQ0FrSixFQUFBRyxRQUFBLDJDQUtBLFFBQUFoSSxLQUdBNkgsRUFBQUcsUUFBQSwwQ0FFQUgsRUFBQUMsa0JBQUFVLEdBaEZBLEdBQUFULEdBQUFILEVBQ0FDLEVBQUFGLENBb0ZBLFFBQ0EzSCxLQUFBQSxJQ3hGQUMsa0JBQUEsU0FBQTBILEVBQUFDLEdBa0NBLFFBQUE0QixHQUFBN0ssR0FFQWdKLEVBQUFLLFFBQUFySixHQUlBLFFBQUFxQixLQVVBNEgsRUFBQVYsZUFBQXNDLEdBWUEsT0FDQXhKLEtBQUFBLEVBQ0F3SixTQUFBQSxJQ2hFQXhJLG1CQUFBLFNBQUEyRyxFQUFBQyxHQU1BLFFBQUFOLEtBR0FTLEVBQUFULFlBQUFVLEVBQUFySixPQUdBLFFBQUFxSixHQUFBckosR0FFQWtKLEVBQUFHLFFBQUFySixHQUdBLFFBQUFxQixLQUdBNkgsRUFBQUMsa0JBQUFSLEdBQ0FPLEVBQUFLLGtCQUFBSCxFQUFBTCxvQkFuQkEsR0FBQUssR0FBQUgsRUFDQUMsRUFBQUYsQ0FvQkEsUUFDQTNILEtBQUFBLElDeEJBb0IsZ0JBQUEsV0FFQSxRQUFBMEcsR0FBQTJCLEdBRUF0TSxFQUFBVixVQUFBNEYsTUFBQW9ILEdBSUEsUUFBQXpCLEdBQUFySixHQUVBbEMsU0FBQTBGLE1BQUEsbUJBRUFoRixFQUFBLGNBQUFrRyxLQUFBLDBCQUFBLFdBQ0FsRyxFQUFBOEYsS0FBQXRFLEVBQUEsU0FBQStLLEVBQUExTSxHQUVBLEdBQUEyTSxHQUFBeE0sRUFBQSxnQkFBQXlNLE9BR0F6TSxHQUFBd00sR0FBQUUsS0FBQSxvQkFBQXpNLEtBQUFKLEVBQUFxSSxZQUNBbEksRUFBQXdNLEdBQUFFLEtBQUEsb0JBQUFDLEtBQUEsT0FBQSxlQUFBOU0sRUFBQTZHLFNBQ0ExRyxFQUFBd00sR0FBQUUsS0FBQSxvQkFBQXpNLEtBQUFKLEVBQUF1SSxXQUNBcEksRUFBQXdNLEdBQUFFLEtBQUEsbUJBQUF6TSxLQUFBSixFQUFBeUksU0FDQXRJLEVBQUF3TSxHQUFBRSxLQUFBLGdCQUFBek0sS0FBQUosRUFBQXdILE9BQ0FySCxFQUFBd00sR0FBQUUsS0FBQSxzQkFBQXpNLEtBQUFKLEVBQUE2SSxjQUVBMUksRUFBQSxlQUFBNE0sT0FBQUosS0FJQXhNLEVBQUEsZ0JBQUE2TSxRQUFBQyxXQUlBLE9BQ0FuQyxrQkFBQUEsRUFDQUUsUUFBQUEsSUNuQ0F6RyxvQkFBQSxXQUVBLFFBQUF1RyxHQUFBMkIsR0FFQXRNLEVBQUFWLFVBQUE0RixNQUFBb0gsR0FHQSxRQUFBekIsR0FBQWhMLEdBR0FHLEVBQUEsY0FBQWtHLEtBQUEsa0NBQUEsV0FFQWxHLEVBQUEsZUFBQTJNLEtBQUEsVUFBQTlNLEVBQUE2RyxTQUNBMUcsRUFBQSxlQUFBK00sSUFBQWxOLEVBQUFxSSxZQUNBbEksRUFBQSxjQUFBK00sSUFBQWxOLEVBQUF1SSxXQUNBcEksRUFBQSxZQUFBK00sSUFBQWxOLEVBQUF5SSxTQUNBdEksRUFBQSxjQUFBK00sSUFBQWxOLEVBQUFtTixXQUNBaE4sRUFBQSxVQUFBK00sSUFBQWxOLEVBQUF3SCxPQUNBckgsRUFBQSxhQUFBMk0sS0FBQSxjQUFBLG9EQUNBM00sRUFBQSxXQUFBK00sSUFBQWxOLEVBQUEySSxRQUNBeEksRUFBQSxrQkFBQStNLElBQUFsTixFQUFBdUcsZUFDQXBHLEVBQUEsaUJBQUErTSxJQUFBbE4sRUFBQTZJLGNBQ0ExSSxFQUFBLGNBQUErTSxJQUFBbE4sRUFBQW9OLFdBQ0FqTixFQUFBLFlBQUErTSxJQUFBbE4sRUFBQTZHLFFBRUEsSUFBQXdHLEdBQUEsR0FBQTdHLE1BQ0E4RyxFQUFBLEdBQUE5RyxNQUFBeEcsRUFBQXVHLGNBRUEsS0FBQTNHLEVBQUEsRUFBQUEsRUFBQSxHQUFBQSxJQUVBQSxHQUFBME4sRUFBQUMsVUFFQXBOLEVBQUEsUUFBQTRNLE9BQUEsa0JBQUFuTixFQUFBLHlCQUFBQSxFQUFBLGFBR0FPLEVBQUEsUUFBQTRNLE9BQUEsa0JBQUFuTixFQUFBLEtBQUFBLEVBQUEsWUFJQSxLQUFBQSxFQUFBLEtBQUFBLEVBQUF5TixFQUFBRyxjQUFBLEVBQUE1TixJQUVBQSxHQUFBME4sRUFBQUUsY0FFQXJOLEVBQUEsU0FBQTRNLE9BQUEsa0JBQUFuTixFQUFBLHlCQUFBQSxFQUFBLGFBSUFPLEVBQUEsU0FBQTRNLE9BQUEsa0JBQUFuTixFQUFBLEtBQUFBLEVBQUEsWUFJQU8sR0FBQSxVQUFBK00sSUFBQUksRUFBQUcsY0FJQSxRQUFBeEMsR0FBQXdCLEdBRUF0TSxFQUFBVixVQUFBNEMsR0FBQSxTQUFBLFlBQUFvSyxHQUdBLFFBQUF2QixHQUFBdUIsR0FFQXRNLEVBQUEsY0FBQXVOLE1BQUFyTCxHQUFBLFFBQUEsY0FBQSxTQUFBb0QsR0FFQUEsRUFBQUMsaUJBQ0ErRyxFQUFBdE0sRUFBQWxCLE1BQUEwQyxLQUFBLFNBSUEsT0FDQW1KLGtCQUFBQSxFQUNBRSxRQUFBQSxFQUNBQyxnQkFBQUEsRUFDQUMsa0JBQUFBLElDekVBeUMsZUFBQSxXQUdBLFFBQUEzQyxHQUFBUixHQUVBLElBQUFBLEdBRUFBLEVBQUFvRCxRQUFBLFNBQUFDLEVBQUFDLEdBQ0F6TSxFQUFBd00sS0FVQSxRQUFBRSxHQUFBQyxHQUVBQSxFQUFBQyxXQUFBRCxHQUFBQyxXQUFBOU4sRUFBQSx1QkFBQUMsT0FBQThOLE9BQUEsSUFDQS9OLEVBQUEsdUJBQUFDLEtBQUEsSUFBQTZOLFdBQUFELEdBQUFHLFFBQUEsSUFRQSxRQUFBOU0sR0FBQXdNLEdBRUEsR0FBQU8sR0FBQWpPLEVBQUEsU0FBQUMsS0FBQUQsRUFBQSwwQkFBQUMsT0FFQWdPLEdBQUF2QixLQUFBLHNCQUFBek0sS0FBQXlOLEVBQUExSSxPQUNBaUosRUFBQXZCLEtBQUEsc0JBQUF6TSxLQUFBLElBQUF5TixFQUFBMUcsT0FDQWlILEVBQUF2QixLQUFBLDBCQUFBQyxLQUFBLE1BQUFlLEVBQUF6RyxPQUNBZ0gsRUFBQXZCLEtBQUEsZUFBQUMsS0FBQSxVQUFBZSxFQUFBdk0sWUFFQW5CLEVBQUEsU0FBQTRNLE9BQUFxQixFQUdBLElBQUFDLEdBQUFsTyxFQUFBLHVCQUFBQyxNQUNBRCxHQUFBLHVCQUFBQyxLQUFBa08sU0FBQUQsR0FBQSxHQUdBTixFQUFBRixFQUFBMUcsT0FNQSxRQUFBMkQsR0FBQTJCLEdBRUF0TSxFQUFBVixVQUFBNEYsTUFBQW9ILEdBUUEsUUFBQXBCLEdBQUFrRCxHQUVBcE8sRUFBQSxRQUFBa0MsR0FBQSxRQUFBLGFBQUEsU0FBQUMsR0FDQUEsRUFBQW9ELGdCQUVBLElBQUE4SSxHQUFBck8sRUFBQWxCLE1BQUEwQyxLQUFBLEtBQ0E0TSxHQUFBQyxLQVNBLFFBQUFsRCxHQUFBcE0sR0FDQWlCLEVBQUEsUUFBQWtDLEdBQUEsUUFBQSxzQkFBQSxTQUFBQyxHQUNBLEdBQUFtTSxHQUFBdE8sRUFBQWxCLE1BQUEwRyxTQUNBNkksRUFBQXJPLEVBQUFsQixNQUFBMEcsU0FBQWhFLEtBQUEsS0FHQXhCLEdBQUFzTyxHQUFBbkMsU0FBQSx1QkFDQW5NLEVBQUFzTyxHQUFBcE0sR0FBQSwrREFBQSxXQUNBbEMsRUFBQWxCLE1BQUFnTyxVQUlBLElBQUFvQixHQUFBbE8sRUFBQSx1QkFBQUMsTUFDQUQsR0FBQSx1QkFBQUMsS0FBQWtPLFNBQUFELEdBQUEsR0FFQW5QLEVBQUFzUCxHQUNBVCxHQUFBNU4sRUFBQXNPLEdBQUE1QixLQUFBLHNCQUFBek0sT0FBQThOLE9BQUEsTUFLQSxPQUNBbEQsUUFBQUEsRUFDQTNKLFFBQUFBLEVBQ0EwTSxpQkFBQUEsRUFDQWpELGtCQUFBQSxFQUNBTyxzQkFBQUEsRUFDQUMsa0JBQUFBLElDdkdBNUcsZ0JBQUEsV0FHQSxRQUFBc0csS0FFQXZMLFNBQUEwRixNQUFBLGtCQUVBaEYsRUFBQSxjQUFBa0csS0FBQSwyQkFJQSxRQUFBeUUsR0FBQTRELEdBRUF2TyxFQUFBVixVQUFBNEYsTUFBQXFKLEdBSUEsT0FDQTFELFFBQUFBLEVBQ0FGLGtCQUFBQSxJQ25CQXRILGdCQUFBLFdBR0EsUUFBQXdILEtBRUF2TCxTQUFBMEYsTUFBQSxzQkFFQWhGLEVBQUEsY0FBQWtHLEtBQUEsMkJBSUEsUUFBQXlFLEdBQUEyQixHQU1BdE0sRUFBQSxjQUFBa0MsR0FBQSxTQUFBLGFBQUFvSyxHQUlBLE9BQ0F6QixRQUFBQSxFQUNBRixrQkFBQUEsSUN2QkFuSCxpQkFBQSxXQUdBLFFBQUFxSCxLQUVBdkwsU0FBQTBGLE1BQUEsdUJBRUFoRixFQUFBLGNBQUFrRyxLQUFBLDZCQUlBLFFBQUF5RSxHQUFBMkIsR0FFQXRNLEVBQUFWLFVBQUE0RixNQUFBb0gsR0FJQSxPQUNBekIsUUFBQUEsRUFDQUYsa0JBQUFBLElDbkJBYSxlQUFBLFdBR0EsUUFBQVgsR0FBQVIsR0FFQS9LLFNBQUEwRixNQUFBLG9CQUVBaEYsRUFBQSxjQUFBa0csS0FBQSx3QkFBQSxXQUNBLFlBQUFtRSxFQUFBLEdBQUEyQyxXQUVBaE4sRUFBQSxlQUFBNE0sT0FBQSxtREFFQSxTQUFBdkMsRUFBQSxHQUFBMkMsV0FFQWhOLEVBQUEsZUFBQTRNLE9BQUEsMERBTUEsUUFBQWpDLEdBQUE0RCxHQUVBdk8sRUFBQVYsVUFBQTRGLE1BQUFxSixHQUlBLE9BQ0ExRCxRQUFBQSxFQUNBRixrQkFBQUEsSUM1QkFoSSxtQkFBQSxXQUdBLFFBQUFrSSxHQUFBUixHQUVBL0ssU0FBQTBGLE1BQUEsdUJBRUFoRixFQUFBLGNBQUFDLEtBQUEsMkdBRUFELEVBQUEsWUFBQWtHLEtBQUEsZ0NBR0EyRixFQUFBeEIsR0FHQSxRQUFBd0IsR0FBQXhCLEdBRUFySyxFQUFBLGFBQUFrRyxLQUFBLGdDQUFBLFdBQ0FsRyxFQUFBOEYsS0FBQXVFLEVBQUEsU0FBQWtDLEVBQUExTSxHQUVBLEdBQUEyTyxHQUFBeE8sRUFBQSxTQUFBNE0sT0FBQTVNLEVBQUEsd0JBQUF5TSxRQUdBek0sR0FBQXdPLEdBQUE5QixLQUFBLG1CQUFBek0sS0FBQUosRUFBQW1GLE9BQ0FoRixFQUFBd08sR0FBQTlCLEtBQUEsc0JBQUFFLE9BQUEvTSxFQUFBNE8sTUFBQSxXQUFBNU8sRUFBQTZPLFNBQUEsTUFBQWxRLGFBQUFxQixFQUFBOE8sV0FDQTNPLEVBQUF3TyxHQUFBOUIsS0FBQSx5QkFBQXpNLEtBQUEyTyxFQUFBL08sRUFBQWdQLGNBQ0E3TyxFQUFBd08sR0FBQTlCLEtBQUEsbUJBQUFFLE9BQUEsS0FBQS9NLEVBQUFtSCxPQUNBaEgsRUFBQXdPLEdBQUE5QixLQUFBLHNEQUFBQyxLQUFBLE9BQUEsV0FBQTlNLEVBQUFzQixZQUNBbkIsRUFBQXdPLEdBQUE5QixLQUFBLHVCQUFBQyxLQUFBLE1BQUE5TSxFQUFBb0gsT0FDQWpILEVBQUF3TyxHQUFBOUIsS0FBQSxjQUFBQyxLQUFBLFVBQUE5TSxFQUFBc0IsWUFFQW5CLEVBQUEsa0JBQUE0TSxPQUFBNEIsS0FJQXhPLEVBQUEsd0JBQUE2TSxRQUFBQyxXQUtBLFFBQUE4QixHQUFBRSxHQUNBLEdBQUFDLEdBQUEsR0FDQUMsRUFBQUYsRUFBQXRQLE1BQUEsSUFDQSxJQUFBd1AsRUFBQXRQLE9BQUFxUCxFQUFBLENBQ0EsR0FBQUUsR0FBQSxFQUNBLEtBQUF4UCxFQUFBLEVBQUFBLEVBQUFzUCxFQUFBdFAsSUFDQXdQLEdBQUFELEVBQUF2UCxHQUFBLEdBRUEsT0FBQXdQLEdBQUEsTUFFQSxNQUFBSCxHQUtBLFFBQUFuRSxHQUFBMkIsR0FFQXRNLEVBQUFWLFVBQUE0RixNQUFBb0gsR0FHQSxRQUFBUixHQUFBUSxHQUdBdE0sRUFBQSxjQUFBdU4sTUFBQXJMLEdBQUEsU0FBQSx1QkFBQSxTQUFBQyxHQUNBbkMsRUFBQSxtQkFBQWtQLFdBSUFsUCxFQUFBLGNBQUFrQyxHQUFBLGVBQUEsK0NBQUEsU0FBQUMsR0FDQSxNQUFBbkMsRUFBQSxhQUFBK00sTUFDQS9NLEVBQUEsYUFBQStNLElBQUEsR0FJQS9NLEVBQUEsbUJBQUFrUCxXQUlBbFAsRUFBQSxjQUFBa0MsR0FBQSxTQUFBLGtCQUFBb0ssR0FHQSxPQUNBekIsUUFBQUEsRUFDQWdCLGFBQUFBLEVBQ0FsQixrQkFBQUEsRUFDQW1CLGtCQUFBQSxJQ3JGQTVJLG1CQUFBLFdBR0EsUUFBQTJILEdBQUFzRSxHQUVBN1AsU0FBQTBGLE1BQUEseUJBRUFoRixFQUFBLGNBQUFrRyxLQUFBaUosRUFBQSxXQUVBLEdBQUFDLEdBQUEsR0FBQS9JLEtBRUEsS0FBQTVHLEVBQUEsRUFBQUEsRUFBQSxHQUFBQSxJQUVBTyxFQUFBLFFBQUE0TSxPQUFBLGtCQUFBbk4sRUFBQSxLQUFBQSxFQUFBLFlBR0EsS0FBQUEsRUFBQSxLQUFBQSxFQUFBMlAsRUFBQS9CLGNBQUEsRUFBQTVOLElBRUEsS0FBQUEsRUFNQU8sRUFBQSxTQUFBNE0sT0FBQSxrQkFBQW5OLEVBQUEsS0FBQUEsRUFBQSxhQUpBTyxFQUFBLFNBQUE0TSxPQUFBLGtCQUFBbk4sRUFBQSx5QkFBQUEsRUFBQSxlQVVBLFFBQUFrTCxHQUFBMkIsR0FNQXRNLEVBQUEsY0FBQWtDLEdBQUEsU0FBQSxnQkFBQW9LLEdBSUEsT0FDQXpCLFFBQUFBLEVBQ0FGLGtCQUFBQSxJQzFDQWhILHdCQUFBLFdBR0EsUUFBQWtILEdBQUFzRSxHQUVBN1AsU0FBQTBGLE1BQUEsc0JBRUFoRixFQUFBLGNBQUFrRyxLQUFBaUosR0FJQSxRQUFBeEUsR0FBQTRELEdBR0F2TyxFQUFBLGNBQUFrQyxHQUFBLFNBQUEsYUFBQXFNLEdBSUEsT0FDQTFELFFBQUFBLEVBQ0FGLGtCQUFBQSxJQ3BCQTVILGtCQUFBLFdBR0EsUUFBQThILEdBQUEyRCxHQUVBbFAsU0FBQTBGLE1BQUF3SixFQUFBeEosTUFBQSxjQUVBaEYsRUFBQSxjQUFBa0csS0FBQSw0Q0FBQSxXQUNBbEcsRUFBQSw2QkFBQTJNLEtBQUEsTUFBQTZCLEVBQUF2SCxPQUNBakgsRUFBQSx5QkFBQUMsS0FBQXVPLEVBQUF4SixPQUNBaEYsRUFBQSx5QkFBQUMsS0FBQSxLQUFBdU8sRUFBQXhILE9BRUFoSCxFQUFBLHVCQUFBNE0sT0FBQTRCLEVBQUFyTixZQUNBbkIsRUFBQSw0QkFBQTRNLE9BQUFwTyxhQUFBZ1EsRUFBQUcsV0FDQTNPLEVBQUEsNkJBQUE0TSxPQUFBcE8sYUFBQWdRLEVBQUFhLFlBQ0FyUCxFQUFBLHdCQUFBNE0sT0FBQTRCLEVBQUFFLFVBQ0ExTyxFQUFBLHlCQUFBNE0sT0FBQTRCLEVBQUFDLE9BQ0F6TyxFQUFBLHlCQUFBQyxLQUFBdU8sRUFBQUssYUFDQTdPLEVBQUEsY0FBQTJNLEtBQUEsVUFBQTZCLEVBQUFyTixZQUNBbkIsRUFBQSx3QkFBQTJNLEtBQUEsVUFBQSwwQkFBQTZCLEVBQUFyTixXQUFBLEtBRUEsSUFBQW1PLEdBQUEsR0FBQWpKLE1BQUFtSSxFQUFBZSxjQUVBQyxHQUFBLFVBQUEsV0FBQSxRQUFBLFFBQUEsTUFBQSxPQUFBLE9BQUEsV0FBQSxZQUFBLFVBQUEsV0FBQSxXQUVBeFAsR0FBQSwrQkFBQTRNLE9BQUEwQyxFQUFBRyxTQUFBLElBQUFELEVBQUFGLEVBQUFoQyxZQUFBLElBQUFnQyxFQUFBakMsaUJBSUEsUUFBQTFDLEdBQUEyQixHQU1BdE0sRUFBQVYsVUFBQTRGLE1BQUFvSCxHQUlBLE9BQ0F6QixRQUFBQSxFQUNBRixrQkFBQUEsSUN6Q0E3RyxtQkFBQSxXQUdBLFFBQUErRyxHQUFBUixHQUdBL0ssU0FBQTBGLE1BQUEsc0JBQ0FoRixFQUFBLGNBQUFDLEtBQUEsc0VBRUF5UCxFQUFBckYsR0FHQSxRQUFBcUYsR0FBQXJGLEdBR0FySyxFQUFBLGFBQUFrRyxLQUFBLGdDQUFBLFdBRUEsR0FBQXlKLEdBQUEsQ0FNQTNQLEdBQUE4RixLQUFBdUUsRUFBQSxTQUFBa0MsRUFBQTFNLEdBRUEsR0FBQStQLEdBQUE1UCxFQUFBLFNBQUE0TSxPQUFBNU0sRUFBQSxxQkFBQXlNLFFBR0FrRCxJQUFBLEVBQ0EzUCxFQUFBNFAsR0FBQWxELEtBQUEsZUFBQUMsS0FBQSxVQUFBOU0sRUFBQXNCLFlBQ0FuQixFQUFBNFAsR0FBQWxELEtBQUEsbUJBQUFFLE9BQUErQyxHQUNBM1AsRUFBQTRQLEdBQUFsRCxLQUFBLDBCQUFBQyxLQUFBLE1BQUE5TSxFQUFBb0gsT0FDQWpILEVBQUE0UCxHQUFBbEQsS0FBQSxzQkFBQXpNLEtBQUFKLEVBQUFtRixPQUNBaEYsRUFBQTRQLEdBQUFsRCxLQUFBLHNCQUFBRSxPQUFBLEtBQUEvTSxFQUFBbUgsT0FDQWhILEVBQUE0UCxHQUFBbEQsS0FBQSx5QkFBQUUsT0FBQXBPLGFBQUFxQixFQUFBOE8sV0FDQTNPLEVBQUE0UCxHQUFBbEQsS0FBQSw2QkFBQUUsT0FBQWpPLHFCQUFBa0IsRUFBQWdRLFFBQ0E3UCxFQUFBNFAsR0FBQWxELEtBQUEsMkJBQUFFLFNBQ0E1TSxFQUFBOFAsZ0JBRUE5UCxFQUFBLGVBQUE0TSxPQUFBZ0QsS0FJQTVQLEVBQUEscUJBQUE2TSxRQUFBQyxXQUdBLFFBQUFuQyxHQUFBMkIsR0FHQXRNLEVBQUFWLFVBQUE0RixNQUFBb0gsR0FHQSxRQUFBdkIsR0FBQXVCLEdBRUF0TSxFQUFBLDZCQUFBdU4sTUFBQXJMLEdBQUEsUUFBQSxXQUFBb0ssTUFHQSxPQUNBekIsUUFBQUEsRUFDQTZFLGFBQUFBLEVBQ0EvRSxrQkFBQUEsRUFDQUksa0JBQUFBIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vUGxhdGZvcm0gTG9nbydzXG5mdW5jdGlvbiBQbGF0Zm9ybUxvZ28ocGxhdGZvcm1uYWFtKVxue1xuICAgIHBsYXRmb3JtbmFhbSA9IHBsYXRmb3JtbmFhbS50b1VwcGVyQ2FzZSgpO1xuICAgIHN3aXRjaCAocGxhdGZvcm1uYWFtKVxuICAgIHtcbiAgICAgICAgLy9wbGF0Zm9ybXNcbiAgICAgICAgY2FzZSBcIlBTMVwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiPGltZyBzcmM9Jy9yZXNvdXJjZXMvaW1hZ2VzL2ljb25zL3BzMS5wbmcnIC8+XCI7XG4gICAgICAgIGNhc2UgXCJQUzRcIjpcbiAgICAgICAgICAgIHJldHVybiBcIjxpbWcgc3JjPScvcmVzb3VyY2VzL2ltYWdlcy9pY29ucy9wczQucG5nJyAvPlwiO1xuICAgICAgICBjYXNlIFwiUENcIjpcbiAgICAgICAgICAgIHJldHVybiBcIjxpbWcgc3JjPScvcmVzb3VyY2VzL2ltYWdlcy9pY29ucy93aW5kb3dzLnBuZycgLz5cIjtcbiAgICAgICAgY2FzZSBcIlhCT1hcIjpcbiAgICAgICAgICAgIHJldHVybiBcIjxpbWcgc3JjPScvcmVzb3VyY2VzL2ltYWdlcy9pY29ucy94Ym94LnBuZycgLz5cIjtcbiAgICAgICAgY2FzZSBcIk5FU1wiOlxuICAgICAgICAgICAgcmV0dXJuIFwiPGltZyBzcmM9Jy9yZXNvdXJjZXMvaW1hZ2VzL2ljb25zL25lcy5wbmcnIC8+XCI7XG4gICAgICAgIGNhc2UgXCJONjRcIjpcbiAgICAgICAgICAgIHJldHVybiBcIjxpbWcgc3JjPScvcmVzb3VyY2VzL2ltYWdlcy9pY29ucy9uNjQucG5nJyAvPlwiO1xuICAgICAgICBjYXNlIFwiTklOVEVORE8gU1dJVENIXCI6XG4gICAgICAgICAgICByZXR1cm4gXCI8aW1nIHNyYz0nL3Jlc291cmNlcy9pbWFnZXMvaWNvbnMvc3dpdGNoLnBuZycgLz5cIjtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBwbGF0Zm9ybW5hYW07XG5cbiAgICAgICAgLy9wdWJsaXNoZXJzXG4gICAgICAgIGNhc2UgXCJOSU5URU5ET1wiOlxuICAgICAgICAgICAgcmV0dXJuIFwiPGltZyBzcmM9Jy9yZXNvdXJjZXMvaW1hZ2VzL3B1Ymxpc2hlcnMvbmludGVuZG8ucG5nJyAvPlwiO1xuICAgICAgICBjYXNlIFwiVUJJU09GVFwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiPGltZyBzcmM9Jy9yZXNvdXJjZXMvaW1hZ2VzL3B1Ymxpc2hlcnMvdWJpc29mdC5wbmcnIC8+XCI7XG4gICAgICAgIGNhc2UgXCJFTEVDVFJPTklDIEFSVFNcIjpcbiAgICAgICAgICAgIHJldHVybiBcIjxpbWcgc3JjPScvcmVzb3VyY2VzL2ltYWdlcy9wdWJsaXNoZXJzL2VhLnBuZycgLz5cIjtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIEJlc2NoaWtiYWFyaGVpZEtsZXVyKHN0b2NrdmFsdWUpe1xuICAgIFxuICAgICAgICBpZiAoc3RvY2t2YWx1ZTw9MCkge1xuICAgICAgICAgICAgcmV0dXJuIFwiPGltZyBzcmM9Jy9yZXNvdXJjZXMvaW1hZ2VzL2F2YWlsYWJpbGl0eS9idXR0b25yZWQucG5nJyAvPlwiO1xuICAgICAgICB9IGVsc2UgaWYgKHN0b2NrdmFsdWU+PTEpIHtcbiAgICAgICAgICAgIHJldHVybiBcIjxpbWcgc3JjPScvcmVzb3VyY2VzL2ltYWdlcy9hdmFpbGFiaWxpdHkvYnV0dG9uZ3JlZW4ucG5nJyAvPlwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHN0b2NrdmFsdWVcbiAgICAgICAgfVxufVxuXG4vLyBWYW4gV2lzaGxpc3QgcGFnaW5hXG4kKGRvY3VtZW50KS5vbihcImNsaWNrXCIsIFwic3Bhbi5saWtlXCIsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICQodGhpcykudG9nZ2xlQ2xhc3MoXCJsaWtlLS1hY3RpdmVcIik7XG59KTtcblxuLy8gVmFuIFNpbmdsZSBQcm9kdWN0IHBhZ2luYVxuJChkb2N1bWVudCkub24oXCJjbGlja1wiLCBcInNwYW4uc2luZ2xlX2xpa2VcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgJCh0aGlzKS50b2dnbGVDbGFzcyhcInNpbmdsZV9saWtlLS1hY3RpdmVcIik7XG59KTsiLCIvKipcbiAqIEhlbHBlciBmb3IgY2FydCBhY3Rpb25zXG4gKi9cbmZ1bmN0aW9uIENhcnRIZWxwZXIoKVxue1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdmFsdWUgb2YgYSBjb29raWVcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgIFByb2RjdXQgSUQgdG8gcmVtb3ZlIGZvbSB0aGUgY2FyXG4gICAgICogXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqL1xuICAgIHRoaXMucmVtb3ZlUHJvZHVjdCA9IGZ1bmN0aW9uKGlkKVxuICAgIHtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZCBhIG5ldyBwcm9kdWN0IHRvIHRoZSBjYXJ0XG4gICAgICogXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGlkIFByb2R1Y3QgSUQgdG8gYWRkXG4gICAgICovXG4gICAgdGhpcy5hZGRQcm9kdWN0ID0gZnVuY3Rpb24oaWQpXG4gICAge1xuICAgIH1cbn0iLCIvKipcbiAqIEhlbHBlciBmb3IgZmluZGluZywgY3JlYXRpbmcgYW5kIGRlbGV0aW5nIGNvb2tpZXNcbiAqL1xuZnVuY3Rpb24gQ29va2llSGVscGVyKClcbntcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHZhbHVlIG9mIGEgY29va2llXG4gICAgICogXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgIE5hbWUgb2YgdGhlIGNvb2tpZVxuICAgICAqIFxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKi9cbiAgICB0aGlzLmdldENvb2tpZSA9IGZ1bmN0aW9uKG5hbWUpXG4gICAge1xuICAgICAgICB2YXIgY29va2llcyA9IGRvY3VtZW50LmNvb2tpZS5zcGxpdCgnOycpO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29va2llcy5sZW5ndGg7IGkrKylcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIGNvb2tpZSA9IGNvb2tpZXNbaV0uc3BsaXQoXCI9XCIpO1xuXG4gICAgICAgICAgICBpZiAoY29va2llWzBdLnRyaW0oKSA9PSBuYW1lKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb29raWVbMV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBjb29raWVcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSAgIE5hbWUgb2YgdGhlIGNvb2tpZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSAgVmFsdWUgb2YgdGhlIGNvb2tpZVxuICAgICAqIFxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICovXG4gICAgdGhpcy5jcmVhdGVDb29raWUgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSlcbiAgICB7XG4gICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IG5hbWUgKyAnPScgKyB2YWx1ZSArICc7JztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZWxldGUgYSBjb29raWUgYW5kIGl0J3MgdmFsdWVcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSAgTmFtZSBvZiB0aGUgY29va2llXG4gICAgICogXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKi9cbiAgICB0aGlzLmRlbGV0ZUNvb2tpZSA9IGZ1bmN0aW9uKG5hbWUpXG4gICAge1xuICAgICAgICBkb2N1bWVudC5jb29raWUgPSBuYW1lICsgJz07IGV4cGlyZXM9VGh1LCAwMSBKYW4gMTk3MCAwMDowMDowMSBHTVQ7JztcbiAgICB9XG59XG4iLCJ2YXIgUm91dGVyICAgICAgID0gbmV3IFJvdXRlcigpO1xudmFyIENvb2tpZUhlbHBlciA9IG5ldyBDb29raWVIZWxwZXIoKTtcbnZhciBVc2VySGVscGVyICAgPSBuZXcgVXNlckhlbHBlcigpO1xuXG52YXIgV2lzaGxpc3RIZWxwZXIgPSBuZXcgV2lzaGxpc3RIZWxwZXIoKTtcblxuZnVuY3Rpb24gc2hvd0xvYWRTY3JlZW4oKVxue1xuICAgICQoXCIjY29tcG9uZW50XCIpLmh0bWwoJzxkaXYgY2xhc3M9XCJzcGlubmVyXCI+PGRpdiBjbGFzcz1cImJvdW5jZTFcIj48L2Rpdj48ZGl2IGNsYXNzPVwiYm91bmNlMlwiPjwvZGl2PjxkaXYgY2xhc3M9XCJib3VuY2UzXCI+PC9kaXY+IDwvZGl2PicpO1xufVxuXG5mdW5jdGlvbiBvbkxvYWRQYWdlKClcbntcbiAgICBpZiAoVXNlckhlbHBlci5pc0FkbWluKCkpXG4gICAge1xuICAgICAgICAkKFwiLnZpc2libGUtYWRtaW5cIikuY3NzKFwiZGlzcGxheVwiLCBcImlubGluZS1ibG9ja1wiKTtcbiAgICAgICAgJChcIi52aXNpYmxlLWN1c3RvbWVyXCIpLmNzcyhcImRpc3BsYXlcIiwgXCJpbmxpbmUtYmxvY2tcIik7XG4gICAgICAgICQoXCIjaW5sb2dnZW5fdGV4dFwiKS5oaWRlKCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKFVzZXJIZWxwZXIuaXNDdXN0b21lcigpKVxuICAgIHtcbiAgICAgICAgJChcIi52aXNpYmxlLWN1c3RvbWVyXCIpLmNzcyhcImRpc3BsYXlcIiwgXCJpbmxpbmUtYmxvY2tcIik7XG4gICAgICAgICQoXCIjaW5sb2dnZW5fdGV4dFwiKS5oaWRlKCk7XG4gICAgfVxuICAgIGVsc2VcbiAgICB7XG4gICAgICAgICQoXCIudmlzaWJsZS1hZG1pblwiKS5oaWRlKCk7XG4gICAgICAgICQoXCIudmlzaWJsZS1jdXN0b21lclwiKS5oaWRlKCk7XG4gICAgICAgICQoXCIjaW5sb2dnZW5fdGV4dFwiKS5jc3MoXCJkaXNwbGF5XCIsIFwiaW5saW5lLWJsb2NrXCIpO1xuICAgIH1cbn0iLCIvKipcbiAqIEhlbHBlciBmb3IgdXNlciByZWxhdGVkIHN0dWZmXG4gKi9cbmZ1bmN0aW9uIFVzZXJIZWxwZXIoKVxue1xuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIHRoZSB1c2VyIGlzIGEgZ3Vlc3QgKG5vdCBsb2dnZWQgaW4pXG4gICAgICovXG4gICAgdGhpcy5pc0xvZ2VkSW4gPSBmdW5jdGlvbigpXG4gICAge1xuICAgICAgICB2YXIgYWNjZXNzVG9rZW4gPSBDb29raWVIZWxwZXIuZ2V0Q29va2llKFwiYWNjZXNzX3Rva2VuXCIpO1xuICAgICAgICBcbiAgICAgICAgaWYgKGFjY2Vzc1Rva2VuICE9IHVuZGVmaW5lZCAmJiBhY2Nlc3NUb2tlbiAhPSBcIlwiKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiB0aGUgY3VycmVudCB1c2VyIGlzIGEgY3VzdG9tZXJcbiAgICAgKi9cbiAgICB0aGlzLmlzQ3VzdG9tZXIgPSBmdW5jdGlvbigpXG4gICAge1xuICAgICAgICBpZiAoVXNlckhlbHBlci5pc0xvZ2VkSW4oKSlcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIHVzZXJ0eXBlID0gdGhpcy5kZWNvZGVUb2tlbigpLnVzZXJ0eXBlO1xuXG4gICAgICAgICAgICBpZiAodXNlcnR5cGUgPT0gXCJjdXN0b21lclwiIHx8IHVzZXJ0eXBlID09IFwiYWRtaW5cIilcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiB0aGUgY3VycmVudCB1c2VyIGlzIGFkbWluXG4gICAgICovXG4gICAgdGhpcy5pc0FkbWluID0gZnVuY3Rpb24oKVxuICAgIHtcbiAgICAgICAgaWYgKFVzZXJIZWxwZXIuaXNMb2dlZEluKCkpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciB1c2VydHlwZSA9IHRoaXMuZGVjb2RlVG9rZW4oKS51c2VydHlwZTtcblxuICAgICAgICAgICAgaWYgKHVzZXJ0eXBlID09IFwiYWRtaW5cIilcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZWNvZGUgdGhlIEpXVCB0b2tlblxuICAgICAqL1xuICAgIHRoaXMuZGVjb2RlVG9rZW4gPSBmdW5jdGlvbigpXG4gICAge1xuICAgICAgICB2YXIgYWNjZXNzVG9rZW4gPSBDb29raWVIZWxwZXIuZ2V0Q29va2llKFwiYWNjZXNzX3Rva2VuXCIpO1xuXG4gICAgICAgIGlmIChhY2Nlc3NUb2tlbiAhPSB1bmRlZmluZWQgJiYgYWNjZXNzVG9rZW4gICE9IFwiXCIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciBwYXlsb2FkID0gYWNjZXNzVG9rZW4uc3BsaXQoXCIuXCIpWzFdO1xuXG4gICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShhdG9iKHBheWxvYWQpKTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCIvKipcbiAqIEhlbHBlciBmb3IgY2FydCBhY3Rpb25zXG4gKi9cbmZ1bmN0aW9uIFdpc2hsaXN0SGVscGVyKClcbntcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHZhbHVlIG9mIGEgY29va2llXG4gICAgICogXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGlkICBQcm9kY3V0IElEIHRvIHJlbW92ZSBmb20gdGhlIGNhclxuICAgICAqIFxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKi9cbiAgICB0aGlzLmFkZEl0ZW0gPSBmdW5jdGlvbihlYW5fbnVtYmVyKVxuICAgIHtcbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHVybDogXCJodHRwOi8vbG9jYWxob3N0OjgwODEvd2lzaGxpc3QvXCIgKyBDb29raWVIZWxwZXIuZ2V0Q29va2llKFwidXNlcl9pZFwiKSArIFwiL1wiICsgZWFuX251bWJlcixcbiAgICAgICAgICAgIHR5cGU6IFwicG9zdFwiLFxuICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHt9KSxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcIkF1dGhvcml6YXRpb25cIjogXCJCZWFyZXIgXCIgKyBDb29raWVIZWxwZXIuZ2V0Q29va2llKFwiYWNjZXNzX3Rva2VuXCIpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKFwibGlrZS0tYWN0aXZlXCIpO1xuICAgICAgICAgICAgICAgIGFsZXJ0KFwiUHJvZHVjdCBzdWNjZXN2b2wgdG9lZ2V2b2VnZCBhYW4gV2lzaGxpc3QuXCIpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbih4aHIsIHN0YXR1cywgZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBhbGVydChcIlByb2R1Y3QgaXMgYWwgaW4gV2lzaGxpc3QuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59IiwidmFyIFJvdXRlciA9IGZ1bmN0aW9uICgpXG57XG4gICAgYmFzZVVybCA9IFwicHJvamVjdC13ZWJzaG9wL1wiO1xuXG4gICAgZnVuY3Rpb24gcm91dGUodXJsLCBoaXN0b3J5KVxuICAgIHtcbiAgICAgICAgaWYgKGlzSW50ZXJuYWwodXJsKSA9PSBmYWxzZSlcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHBhcnRpY2xlcyA9IGdldFBhcnRpY2xlcyh1cmwpO1xuXG4gICAgICAgIHN3aXRjaChwYXJ0aWNsZXNbMF0pXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNhc2UgXCJcIjpcbiAgICAgICAgICAgIGNhc2UgXCJpbmRleC5odG1sXCI6XG4gICAgICAgICAgICBjYXNlIFwicHJvZHVjdHNcIjpcbiAgICAgICAgICAgICAgICBuZXcgUHJvZHVjdHNDb250cm9sbGVyKG5ldyBQcm9kdWN0c1ZpZXdIZWxwZXIoKSwgbmV3IFByb2R1Y3RzTW9kZWwoKSkubWFpbigpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInByb2R1Y3RcIjpcbiAgICAgICAgICAgICAgICBuZXcgUHJvZHVjdENvbnRyb2xsZXIobmV3IFByb2R1Y3RWaWV3SGVscGVyKCksIG5ldyBQcm9kdWN0TW9kZWwocGFydGljbGVzWzFdKSkubWFpbigpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInJlZ2lzdGVyXCI6XG4gICAgICAgICAgICAgICAgbmV3IFJlZ2lzdGVyQ29udHJvbGxlcihuZXcgUmVnaXN0ZXJWaWV3SGVscGVyKCksIG5ldyBSZWdpc3Rlck1vZGVsKCkpLm1haW4oKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJsb2dpblwiOlxuICAgICAgICAgICAgICAgIG5ldyBMb2dpbkNvbnRyb2xsZXIobmV3IExvZ2luVmlld0hlbHBlcigpLCBuZXcgTG9naW5Nb2RlbCgpKS5tYWluKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwibG9nb3V0XCI6XG4gICAgICAgICAgICAgICAgbmV3IExvZ291dENvbnRyb2xsZXIobmV3IExvZ291dFZpZXdIZWxwZXIoKSwgbmV3IExvZ291dE1vZGVsKCkpLm1haW4oKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJyZWdpc3RlclwiOlxuICAgICAgICAgICAgICAgIG5ldyBSZWdpc3RlckNvbnRyb2xsZXIobmV3IFJlZ2lzdGVyVmlld0hlbHBlcigpLCBuZXcgUmVnaXN0ZXJNb2RlbCgpKS5tYWluKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwicmVzZXRwYXNzd29yZFwiOlxuICAgICAgICAgICAgICAgIG5ldyBSZXNldFBhc3N3b3JkQ29udHJvbGxlcihuZXcgUmVzZXRQYXNzd29yZFZpZXdIZWxwZXIoKSwgbmV3IFJlc2V0UGFzc3dvcmRNb2RlbCgpKS5tYWluKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwid2lzaGxpc3RcIjpcbiAgICAgICAgICAgICAgICBuZXcgV2lzaGxpc3RDb250cm9sbGVyKG5ldyBXaXNobGlzdFZpZXdIZWxwZXIoKSwgbmV3IFdpc2hsaXN0TW9kZWwoKSkubWFpbigpO1xuICAgICAgICAgICAgY2FzZSBcImFkbWluXCI6XG4gICAgICAgICAgICAgICAgbmV3IEFkbWluQ29udHJvbGxlcihuZXcgQWRtaW5WaWV3SGVscGVyKCksIG5ldyBBZG1pbk1vZGVsKCkpLm1haW4oKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJhZG1pbl91c2VyXCI6XG4gICAgICAgICAgICAgICAgbmV3IEFkbWluVXNlckNvbnRyb2xsZXIobmV3IEFkbWluVXNlclZpZXdIZWxwZXIoKSwgbmV3IEFkbWluVXNlck1vZGVsKHBhcnRpY2xlc1sxXSkpLm1haW4oKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgbmV3IEVycm9yQ29udHJvbGxlcihuZXcgRXJyb3JWaWV3SGVscGVyKCkpLm1haW4oKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChoaXN0b3J5ICE9IGZhbHNlKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAodXJsICE9IFwiXCIgJiYgdHlwZW9mIHVybCA9PT0gJ3N0cmluZycpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgd3JpdGVIaXN0b3J5KHt9LCBcIkEtWiBHYW1lc1wiLCB1cmwpO1xuXG4gICAgICAgICAgICAgICAgIC8vIExvYWQgc2NyZWVuXG4gICAgICAgICAgICAgICAgc2hvd0xvYWRTY3JlZW4oKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBTY3JvbGwgdG8gdG9wIG9mIHBhZ2VcbiAgICAgICAgICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc0ludGVybmFsKHVybClcbiAgICB7XG4gICAgICAgIGlmICh1cmwuaW5kZXhPZihcImh0dHBcIikgIT0gLTEgfHwgdXJsLmluZGV4T2YoXCJodHRwc1wiKSAhPSAtMSB8fCB1cmwuaW5kZXhPZihcInd3d1wiKSAhPSAtMSlcbiAgICAgICAge1xuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uID0gdXJsO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRQYXJ0aWNsZXModXJsKVxuICAgIHtcbiAgICAgICAgLy8gUmVtb3ZlIHRoZSBmaXJzdCAvXG4gICAgICAgIGlmICh1cmwuaW5kZXhPZihcIi9cIikgPT0gMClcbiAgICAgICAge1xuICAgICAgICAgICAgdXJsID0gdXJsLnN1YnN0cmluZygxKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIHRoZXJlIGlzIGEgYmFzZSB1cmwgc2V0LCByZW1vdmUgdGhlIGJhc2UgdXJsXG4gICAgICAgIGlmICh0aGlzLmJhc2VVcmwgIT0gbnVsbCAmJiB1cmwuaW5kZXhPZih0aGlzLmJhc2VVcmwpICE9IC0xKVxuICAgICAgICB7XG4gICAgICAgICAgICB1cmwgPSB1cmwuc3Vic3RyaW5nKHVybC5pbmRleE9mKHRoaXMuYmFzZVVybCkgKyB0aGlzLmJhc2VVcmwubGVuZ3RoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB1cmwuc3BsaXQoL1xcLyguKyk/LylcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB3cml0ZUhpc3Rvcnkob2JqZWN0LCB0aXRsZSwgdXJsKVxuICAgIHtcbiAgICAgICAgd2luZG93Lmhpc3RvcnkucHVzaFN0YXRlKG9iamVjdCwgdGl0bGUsIHVybCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcm91dGU6IHJvdXRlXG4gICAgfVxufSIsIiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKClcbntcbiAgICAkKFwiLnNpZGViYXItdG9nZ2xlXCIpLmNsaWNrKGZ1bmN0aW9uIChlKVxuICAgIHtcbiAgICAgICAgLy8gUHJldmVudCBkZWZhdWx0IGNsaWNrIGFjdGlvblxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgLy8gSWQgb2YgdGhlIHNpZGViYXIgdG8gdG9nZ2xlXG4gICAgICAgIHZhciBzaWRlYmFyID0gJCh0aGlzKS5kYXRhKFwic2lkZWJhclwiKTtcblxuICAgICAgICB0b2dnbGVTaWRlYmFyKCQoXCIjXCIgKyBzaWRlYmFyKSk7XG4gICAgfSk7XG5cbiAgICAkKFwiLnNpZGViYXJfX2Nsb3NlXCIpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHRvZ2dsZVNpZGViYXIoJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKSk7XG4gICAgfSlcblxuICAgICQoXCIub3ZlcmxheVwiKS5jbGljayhmdW5jdGlvbiAoZSkge1xuICAgICAgICB0b2dnbGVTaWRlYmFyKCQoXCIuc2lkZWJhclwiKSk7XG4gICAgfSk7XG5cbiAgICBmdW5jdGlvbiB0b2dnbGVTaWRlYmFyKHNpZGViYXIpXG4gICAge1xuICAgICAgICAkKHNpZGViYXIpLnRvZ2dsZUNsYXNzKFwic2lkZWJhci0tb3BlblwiKTtcbiAgICAgICAgJChcIi5vdmVybGF5XCIpLnRvZ2dsZUNsYXNzKFwib3ZlcmxheS0tdmlzaWJsZVwiKTtcbiAgICAgICAgJChcImJvZHlcIikudG9nZ2xlQ2xhc3MoXCJzaWRlYmFyLS1vcGVuXCIpO1xuICAgIH1cbn0pOyIsIiQuZm4uc2VyaWFsaXplT2JqZWN0ID0gZnVuY3Rpb24oKVxue1xuICAgIHZhciBvID0ge307XG4gICAgdmFyIGEgPSB0aGlzLnNlcmlhbGl6ZUFycmF5KCk7XG4gICAgJC5lYWNoKGEsIGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAob1t0aGlzLm5hbWVdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGlmICghb1t0aGlzLm5hbWVdLnB1c2gpIHtcbiAgICAgICAgICAgICAgICBvW3RoaXMubmFtZV0gPSBbb1t0aGlzLm5hbWVdXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlICE9IFwiXCIpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgb1t0aGlzLm5hbWVdLnB1c2godGhpcy52YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAodGhpcy52YWx1ZSAhPSBcIlwiKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG9bdGhpcy5uYW1lXSA9IHRoaXMudmFsdWUgfHwgJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gbztcbn07IiwidmFyIEFkbWluTW9kZWwgPSBmdW5jdGlvbigpXG57XG4gICAgZnVuY3Rpb24gZ2V0UGFnZShjYWxsYmFjaylcbiAgICB7XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6IFwiaHR0cHM6Ly9hcGkuYXotZ2FtZXMubmwvYWRtaW4vdXNlcnNcIiwgLy9cImh0dHBzOi8vYXBpLmF6LWdhbWVzLm5sL1xuICAgICAgICAgICAgdHlwZTogXCJHRVRcIixcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgXCJBdXRob3JpemF0aW9uXCI6IFwiQmVhcmVyIFwiICsgQ29va2llSGVscGVyLmdldENvb2tpZShcImFjY2Vzc190b2tlblwiKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZGF0YSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICh4aHIsIHN0YXR1cywgZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAkKFwiI2NvbXBvbmVudFwiKS5sb2FkKFwiL3ZpZXdzL2Vycm9yL2Vycm9yLmh0bWxcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ2V0UGFnZTogZ2V0UGFnZVxuICAgIH1cblxufTsiLCJ2YXIgQWRtaW5Vc2VyTW9kZWwgPSBmdW5jdGlvbihpZClcbntcbiAgICBmdW5jdGlvbiBnZXRQYWdlKGNhbGxiYWNrKVxuICAgIHtcbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHVybDogXCJodHRwczovL2FwaS5hei1nYW1lcy5ubC9hZG1pbi91c2Vycy9cIiArIGlkLCAvL1wiaHR0cHM6Ly9hcGkuYXotZ2FtZXMubmwvXG4gICAgICAgICAgICB0eXBlOiBcIkdFVFwiLFxuICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcIkF1dGhvcml6YXRpb25cIjogXCJCZWFyZXIgXCIgKyBDb29raWVIZWxwZXIuZ2V0Q29va2llKFwiYWNjZXNzX3Rva2VuXCIpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhkYXRhWzBdKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHhociwgc3RhdHVzLCBlcnJvcikge1xuICAgICAgICAgICAgICAgICQoXCIjY29tcG9uZW50XCIpLmxvYWQoXCIvdmlld3MvZXJyb3IvZXJyb3IuaHRtbFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2F2ZVVzZXJJbmZvKGRhdGEsIGNhbGxiYWNrKVxuICAgIHtcbiAgICAgICAgLy8gTW9kaWZ5IGRhdGEgYmVmb3JlIHNlbmRpbmcgKGFsc28gY29udmVydCB0byBVVEMpXG4gICAgICAgIGRhdGEuZGF0ZV9vZl9iaXJ0aCA9IG5ldyBEYXRlKERhdGUuVVRDKGRhdGEuamFhciwgZGF0YS5tYWFuZCwgZGF0YS5kYWcpKTtcblxuICAgICAgICAvLyBSZW1vdmUgeWVhciwgbW9udGggYW5kIGRheVxuICAgICAgICBkZWxldGUgZGF0YS5qYWFyO1xuICAgICAgICBkZWxldGUgZGF0YS5tYWFuZDtcbiAgICAgICAgZGVsZXRlIGRhdGEuZGFnO1xuXG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6IFwiaHR0cDovL2xvY2FsaG9zdDo4MDgxL2FkbWluL3VzZXJzL1wiICsgZGF0YS51c2VyX2lkLCAvL1wiaHR0cHM6Ly9hcGkuYXotZ2FtZXMubmwvXG4gICAgICAgICAgICB0eXBlOiBcIlBBVENIXCIsXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgY29udGVudFR5cGU6IFwiYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOFwiLFxuICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgXCJBdXRob3JpemF0aW9uXCI6IFwiQmVhcmVyIFwiICsgQ29va2llSGVscGVyLmdldENvb2tpZShcImFjY2Vzc190b2tlblwiKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZGF0YSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICh4aHIsIHN0YXR1cywgZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAkKFwiI2NvbXBvbmVudFwiKS5sb2FkKFwiL3ZpZXdzL2Vycm9yL2Vycm9yLmh0bWxcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRlbGV0ZVVzZXIodXNlcl9pZCwgY2FsbGJhY2spXG4gICAge1xuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgdXJsOiBcImh0dHBzOi8vYXBpLmF6LWdhbWVzLm5sL2FkbWluL3VzZXJzL1wiICsgdXNlcl9pZCwgLy9cImh0dHBzOi8vYXBpLmF6LWdhbWVzLm5sL1xuICAgICAgICAgICAgdHlwZTogXCJERUxFVEVcIixcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgXCJBdXRob3JpemF0aW9uXCI6IFwiQmVhcmVyIFwiICsgQ29va2llSGVscGVyLmdldENvb2tpZShcImFjY2Vzc190b2tlblwiKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHhociwgc3RhdHVzLCBlcnJvcikge1xuICAgICAgICAgICAgICAgICQoXCIjY29tcG9uZW50XCIpLmxvYWQoXCIvdmlld3MvZXJyb3IvZXJyb3IuaHRtbFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHRoZSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgcHJvZ3JhbXMgKHRoZSBjb250cm9sbGVyIGluIHRoaXMgY2FzZSlcbiAgICByZXR1cm4ge1xuICAgICAgICBnZXRQYWdlOiBnZXRQYWdlLFxuICAgICAgICBzYXZlVXNlckluZm86IHNhdmVVc2VySW5mbyxcbiAgICAgICAgZGVsZXRlVXNlcjogZGVsZXRlVXNlclxuICAgIH1cbn0iLCJ2YXIgQ2FydE1vZGVsID0gZnVuY3Rpb24oKVxue1xuICAgIC8qKlxuICAgICAqIEdldCBhbGwgY2FydCBpdGVtc1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldENhcnQoY2FsbGJhY2spXG4gICAge1xuICAgICAgICB2YXIgY2FydCA9IENvb2tpZUhlbHBlci5nZXRDb29raWUoXCJjYXJ0XCIpO1xuXG4gICAgICAgIGlmIChjYXJ0ICE9IHVuZGVmaW5lZClcbiAgICAgICAge1xuICAgICAgICAgICAgY2FsbGJhY2soSlNPTi5wYXJzZShjYXJ0KSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGQgYSBwcm9kdWN0IHRvIHRoZSBjYXJ0IGNvb2tpZSBhbmQgZGF0YWJhc2UgaWYgdGhlIHVzZXIgaXMgcmVnaXN0ZXJlZFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFkZFByb2R1Y3QoaWQsIGNhbGxiYWNrKVxuICAgIHtcbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHVybDogXCJodHRwczovL2FwaS5hei1nYW1lcy5ubC9wcm9kdWN0cy9cIiArIGlkLFxuICAgICAgICAgICAgdHlwZTogXCJnZXRcIixcbiAgICAgICAgICAgIGNvbnRlbnRUeXBlOiBcImpzb25cIixcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgY2FydCA9IHtlYW5fbnVtYmVyOmRhdGFbMF0uZWFuX251bWJlciwgdGl0bGU6ZGF0YVswXS50aXRsZSwgcHJpY2U6ZGF0YVswXS5wcmljZSwgaW1hZ2U6ZGF0YVswXS5pbWFnZX07XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soY2FydCk7XG5cbiAgICAgICAgICAgICAgICAvLyBTYXZlIGNhcnQgaW4gY29va2llc1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50Q2FydCA9IENvb2tpZUhlbHBlci5nZXRDb29raWUoXCJjYXJ0XCIpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRDYXJ0ID09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIENvb2tpZUhlbHBlci5jcmVhdGVDb29raWUoXCJjYXJ0XCIsIEpTT04uc3RyaW5naWZ5KFtjYXJ0XSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50Q2FydCA9IEpTT04ucGFyc2UoY3VycmVudENhcnQpO1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50Q2FydC5wdXNoKGNhcnQpO1xuXG4gICAgICAgICAgICAgICAgICAgIENvb2tpZUhlbHBlci5jcmVhdGVDb29raWUoXCJjYXJ0XCIsIEpTT04uc3RyaW5naWZ5KGN1cnJlbnRDYXJ0KSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICh4aHIsIHN0YXR1cywgZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAkKFwiI2NvbXBvbmVudFwiKS5sb2FkKFwiL3ZpZXdzL2Vycm9yL2Vycm9yLmh0bWxcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhIGl0ZW0gZnJvbSB0aGUgY2FydFxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7aW50fSBpZCBQcm9kdWN0IGlkXG4gICAgICovXG4gICAgZnVuY3Rpb24gcmVtb3ZlUHJvZHVjdChpZClcbiAgICB7XG4gICAgICAgIGNhcnQgPSBKU09OLnBhcnNlKENvb2tpZUhlbHBlci5nZXRDb29raWUoXCJjYXJ0XCIpKTtcblxuICAgICAgICBmb3IoaSA9IDA7IGkgPCBjYXJ0Lmxlbmd0aDsgaSsrKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAoY2FydFtpXS5lYW5fbnVtYmVyID09IGlkKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNhcnQuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBDb29raWVIZWxwZXIuY3JlYXRlQ29va2llKFwiY2FydFwiLCBKU09OLnN0cmluZ2lmeShjYXJ0KSk7XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHRoZSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgcHJvZ3JhbXMgKHRoZSBjb250cm9sbGVyIGluIHRoaXMgY2FzZSlcbiAgICByZXR1cm4ge1xuICAgICAgICBnZXRDYXJ0OiBnZXRDYXJ0LFxuICAgICAgICBhZGRQcm9kdWN0OiBhZGRQcm9kdWN0LFxuICAgICAgICByZW1vdmVQcm9kdWN0OiByZW1vdmVQcm9kdWN0XG4gICAgfVxufTsiLCJ2YXIgTG9naW5Nb2RlbCA9IGZ1bmN0aW9uKClcbntcbiAgICBmdW5jdGlvbiBsb2dpbihlbWFpbCwgcGFzc3dvcmQsIGNhbGxiYWNrKVxuICAgIHtcbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHVybDogXCJodHRwczovL2FwaS5hei1nYW1lcy5ubC91c2VyL2xvZ2luXCIsXG4gICAgICAgICAgICB0eXBlOiBcIkdFVFwiLFxuICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcIkF1dGhvcml6YXRpb25cIjogXCJCYXNpYyBcIiArIGJ0b2EoZW1haWwgKyBcIjpcIiArIHBhc3N3b3JkKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgLy8gcHV0IHRva2VuIGluIGNvb2tpZVxuICAgICAgICAgICAgICAgIENvb2tpZUhlbHBlci5jcmVhdGVDb29raWUoXCJhY2Nlc3NfdG9rZW5cIiwgZGF0YS5hY2Nlc3NfdG9rZW4pO1xuICAgICAgICAgICAgICAgIENvb2tpZUhlbHBlci5jcmVhdGVDb29raWUoXCJ1c2VyX2lkXCIsIGRhdGEudXNlcl9pZCk7XG5cbiAgICAgICAgICAgICAgICAvLyAncmVsb2FkJyBwYWdlXG4gICAgICAgICAgICAgICAgb25Mb2FkUGFnZSgpO1xuXG4gICAgICAgICAgICAgICAgLy8gbGV0IGNvbnRyb2xsZXIgcmVzdW1lIHdpdGggc3R1ZmZcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhkYXRhKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHhociwgc3RhdHVzLCBlcnJvcikge1xuICAgICAgICAgICAgICAgIC8vIHNob3cgJ25vdCBnb29kIGVtYWlsIG9yIHBhc3N3b3JkIHRvIHVzZXInXG4gICAgICAgICAgICAgICAgJChcIiNlcnJvcl9tZXNzYWdlXCIpLnNob3coKTtcblxuICAgICAgICAgICAgICAgIC8vJChcIiNjb21wb25lbnRcIikuaHRtbChcImVycm9yIGZ1bmN0aW9uXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBieSBvdGhlciBwcm9ncmFtcyAodGhlIGNvbnRyb2xsZXIgaW4gdGhpcyBjYXNlKVxuICAgIHJldHVybiB7XG4gICAgICAgIGxvZ2luOiBsb2dpblxuICAgIH1cbn07IiwidmFyIExvZ291dE1vZGVsID0gZnVuY3Rpb24oKVxue1xuICAgIGZ1bmN0aW9uIGxvZ291dChjYWxsYmFjaylcbiAgICB7XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6IFwiaHR0cHM6Ly9hcGkuYXotZ2FtZXMubmwvdXNlci9sb2dvdXRcIiwgLy8/IGh0dHA6Ly84NC44NC4yNDUuMjk6MjQzID0gQVBJLWxvY2F0aWU/XG4gICAgICAgICAgICB0eXBlOiBcInBvc3RcIixcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgdXNlcl9pZDogZ2V0Q29va2llKFwidXNlcl9pZFwiKVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIC8vIGxldCBjb250cm9sbGVyIHJlc3VtZSB3aXRoIHN0dWZmXG4gICAgICAgICAgICAgICAgQ29va2llSGVscGVyLmRlbGV0ZUNvb2tpZShcImFjY2Vzc190b2tlblwiKTtcbiAgICAgICAgICAgICAgICBDb29raWVIZWxwZXIuZGVsZXRlQ29va2llKFwidXNlcl9pZFwiKTtcblxuICAgICAgICAgICAgICAgIC8vICdyZWxvYWQnIHBhZ2VcbiAgICAgICAgICAgICAgICBvbkxvYWRQYWdlKCk7XG5cbiAgICAgICAgICAgICAgICBjYWxsYmFjayhkYXRhKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHhociwgc3RhdHVzLCBlcnJvcikge1xuICAgICAgICAgICAgICAgIC8vIHNob3cgJ25vdCBnb29kIGVtYWlsIG9yIHBhc3N3b3JkIHRvIHVzZXInXG4gICAgICAgICAgICAgICAgJChcIiNlcnJvcl9tZXNzYWdlXCIpLnNob3coKTtcblxuICAgICAgICAgICAgICAgIC8vJChcIiNjb21wb25lbnRcIikuaHRtbChcImVycm9yIGZ1bmN0aW9uXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBmdW5jdGlvbiBnZXRDb29raWUobmFtZSlcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIGNvb2tpZXMgPSBkb2N1bWVudC5jb29raWUuc3BsaXQoJzsnKTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb29raWVzLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHZhciBjb29raWUgPSBjb29raWVzW2ldLnNwbGl0KFwiPVwiKTtcblxuICAgICAgICAgICAgICAgIGlmIChjb29raWVbMF0udHJpbSgpID09IG5hbWUpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29va2llWzFdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXG4gICAgcmV0dXJuIHtcbiAgICAgICAgbG9nb3V0OiBsb2dvdXRcbiAgICB9XG59OyIsInZhciBQYWdlTW9kZWwgPSBmdW5jdGlvbigpXG57XG4gICAgZnVuY3Rpb24gZ2V0UGFnZShjYWxsYmFjaylcbiAgICB7XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6IFwiaHR0cHM6Ly9hcGkuYXotZ2FtZXMubmwvdXNlclwiLFxuICAgICAgICAgICAgdHlwZTogXCJnZXRcIixcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgXCJBdXRob3JpemF0aW9uXCI6IFwiQmVhcmVyIFwiICsgQ29va2llSGVscGVyLmdldENvb2tpZShcImFjY2Vzc190b2tlblwiKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZGF0YSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICh4aHIsIHN0YXR1cywgZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAkKFwiI2NvbXBvbmVudFwiKS5sb2FkKFwiL3ZpZXdzL2Vycm9yL2Vycm9yLmh0bWxcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ2V0UGFnZTogZ2V0UGFnZVxuICAgIH1cbn07IiwidmFyIFByb2R1Y3RzTW9kZWwgPSBmdW5jdGlvbigpXG57XG4gICAgZnVuY3Rpb24gZ2V0UGFnZShmaWx0ZXIsIGNhbGxiYWNrKVxuICAgIHtcbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHVybDogXCJodHRwczovL2FwaS5hei1nYW1lcy5ubC9wcm9kdWN0cz9cIiArIGZpbHRlciwgLy8/IGh0dHA6Ly84NC44NC4yNDUuMjk6MjQzID0gQVBJLWxvY2F0aWU/XG4gICAgICAgICAgICB0eXBlOiBcImdldFwiLFxuICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZGF0YSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICh4aHIsIHN0YXR1cywgZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAkKFwiI2NvbXBvbmVudFwiKS5sb2FkKFwiL3ZpZXdzL2Vycm9yL2Vycm9yLmh0bWxcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ2V0UGFnZTogZ2V0UGFnZVxuICAgIH1cbn07IiwidmFyIFJlZ2lzdGVyTW9kZWwgPSBmdW5jdGlvbigpXG57XG4gICAgZnVuY3Rpb24gcmVnaXN0ZXIoZm9ybURhdGEsIGNhbGxiYWNrKVxuICAgIHtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhmb3JtRGF0YSk7XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6IFwiaHR0cHM6Ly9hcGkuYXotZ2FtZXMubmwvdXNlci9yZWdpc3RlclwiLFxuICAgICAgICAgICAgdHlwZTogXCJwb3N0XCIsXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIGVfbWFpbCA6IGZvcm1EYXRhLmVfbWFpbGFkcmVzLFxuICAgICAgICAgICAgICAgIHBhc3N3b3JkIDogZm9ybURhdGEud2FjaHR3b29yZCxcbiAgICAgICAgICAgICAgICBmaXJzdF9uYW1lIDogZm9ybURhdGEudm9vcm5hYW0sXG4gICAgICAgICAgICAgICAgaW5zZXJ0aW9uIDogZm9ybURhdGEudHVzc2Vudm9lZ3NlbCxcbiAgICAgICAgICAgICAgICBzdXJuYW1lIDogZm9ybURhdGEuYWNodGVybmFhbSxcbiAgICAgICAgICAgICAgICBnZW5kZXIgOiBmb3JtRGF0YS5nZW5kZXIsXG4gICAgICAgICAgICAgICAgZGF0ZV9vZl9iaXJ0aCA6IGZvcm1EYXRhLmJpcnRoX2RhdGUsXG4gICAgICAgICAgICAgICAgcGhvbmVfbnVtYmVyIDogZm9ybURhdGEubW9iaWVsX251bW1lcixcbiAgICAgICAgICAgICAgICBzZWNyZXRfcXVlc3Rpb24gOiBmb3JtRGF0YS5zZWN1cml0eV9xdWVzdGlvbixcbiAgICAgICAgICAgICAgICBzZWNyZXRfcXVlc3Rpb25fYW5zd2VyIDogZm9ybURhdGEuc2VjdXJpdHlfYW5zd2VyLFxuXG4gICAgICAgICAgICAgICAgcG9zdGFsX2NvZGUgOiBmb3JtRGF0YS5wb3N0Y29kZSxcbiAgICAgICAgICAgICAgICBudW1iZXIgOiBmb3JtRGF0YS5odWlzbnVtbWVyLFxuICAgICAgICAgICAgICAgIHN0cmVldF9uYW1lIDogZm9ybURhdGEuc3RyYWF0bmFhbSxcbiAgICAgICAgICAgICAgICBjaXR5IDogZm9ybURhdGEucGxhYXRzXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgICAgICAgICAvLyBsZXQgY29udHJvbGxlciByZXN1bWUgd2l0aCBzdHVmZlxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGRhdGEpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoeGhyLCBzdGF0dXMsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgLy8gc2hvdyAnZW1haWwgYWwgZ2Vib25kZW4gYWFuIGVlbiBhY2NvdW50PydcbiAgICAgICAgICAgICAgICAkKFwiI3JlZ2lfYXBpX2Vycm9yX21lc3NhZ2VcIikuc2hvdygpO1xuICAgICAgICAgICAgICAgIC8vJChcIiNjb21wb25lbnRcIikuaHRtbChcImVycm9yIGZ1bmN0aW9uXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBieSBvdGhlciBwcm9ncmFtcyAodGhlIGNvbnRyb2xsZXIgaW4gdGhpcyBjYXNlKVxuICAgIHJldHVybiB7XG4gICAgICAgIHJlZ2lzdGVyOiByZWdpc3RlclxuICAgIH1cbn07IiwidmFyIFJlc2V0UGFzc3dvcmRNb2RlbCA9IGZ1bmN0aW9uKClcbntcbiAgICBmdW5jdGlvbiByZXNldHBhc3N3b3JkKGZvcm1EYXRhLCBjYWxsYmFjaylcbiAgICB7XG4gICAgICAgIGNvbnNvbGUubG9nKGZvcm1EYXRhKTtcbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHVybDogXCJodHRwczovL2FwaS5hei1nYW1lcy5ubC91c2VyL3Jlc2V0cGFzc3dvcmRcIixcbiAgICAgICAgICAgIHR5cGU6IFwicG9zdFwiLFxuICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBlbWFpbCA6IGZvcm1EYXRhLmVfbWFpbGFkcmVzLFxuICAgICAgICAgICAgICAgIHNlY3JldF9xdWVzdGlvbl9hbnN3ZXIgOiBmb3JtRGF0YS5zZWN1cml0eV9hbnN3ZXIsXG4gICAgICAgICAgICAgICAgc2VjcmV0X3F1ZXN0aW9uIDogZm9ybURhdGEuc2VjdXJpdHlfcXVlc3Rpb24sXG4gICAgICAgICAgICAgICAgbmV3X3Bhc3N3b3JkIDogZm9ybURhdGEud2FjaHR3b29yZCxcbiAgICAgICAgICAgICAgICByZXBlYXRfcGFzc3dvcmQgOiBmb3JtRGF0YS53YWNodHdvb3JkMlxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGRhdGEpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoeGhyLCBzdGF0dXMsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgLy8kKFwiI2NvbXBvbmVudFwiKS5sb2FkKFwidmlld3MvZXJyb3IvZXJyb3IuaHRtbFwiKTtcbiAgICAgICAgICAgICAgICAkKFwiI3Jlc2V0X3Bhc3N3b3JkX2FwaV9lcnJvcl9tZXNzYWdlXCIpLnNob3coKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHRoZSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgcHJvZ3JhbXMgKHRoZSBjb250cm9sbGVyIGluIHRoaXMgY2FzZSlcbiAgICByZXR1cm4ge1xuICAgICAgICByZXNldHBhc3N3b3JkOiByZXNldHBhc3N3b3JkXG4gICAgfVxufTsiLCJ2YXIgUHJvZHVjdE1vZGVsID0gZnVuY3Rpb24oZWFuKVxue1xuICAgIGZ1bmN0aW9uIEdldFByb2R1Y3RJbmZvKGNhbGxiYWNrKVxuICAgIHtcbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHVybDogXCJodHRwczovL2FwaS5hei1nYW1lcy5ubC9wcm9kdWN0cy9cIiArIGVhbixcbiAgICAgICAgICAgIHR5cGU6IFwiZ2V0XCIsXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAvLyBsZXQgY29udHJvbGxlciByZXN1bWUgd2l0aCBzdHVmZlxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGRhdGFbMF0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoeGhyLCBzdGF0dXMsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgJChcIiNjb21wb25lbnRcIikubG9hZChcIi92aWV3cy9lcnJvci9lcnJvci5odG1sXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBieSBvdGhlciBwcm9ncmFtcyAodGhlIGNvbnRyb2xsZXIgaW4gdGhpcyBjYXNlKVxuICAgIHJldHVybiB7XG4gICAgICAgIEdldFByb2R1Y3RJbmZvOiBHZXRQcm9kdWN0SW5mb1xuICAgIH1cbn07IiwidmFyIFVzZXJNb2RlbCA9IGZ1bmN0aW9uKHVzZXJpZClcbntcbiAgICBmdW5jdGlvbiBHZXRVc2VySW5mbyhjYWxsYmFjaylcbiAgICB7XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6IFwiaHR0cHM6Ly9hcGkuYXotZ2FtZXMubmwvdXNlcnMvXCIgKyB1c2VyaWQsXG4gICAgICAgICAgICB0eXBlOiBcImdldFwiLFxuICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgLy8gbGV0IGNvbnRyb2xsZXIgcmVzdW1lIHdpdGggc3R1ZmZcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhkYXRhWzBdKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHhociwgc3RhdHVzLCBlcnJvcikge1xuICAgICAgICAgICAgICAgICQoXCIjY29tcG9uZW50XCIpLmxvYWQoXCIvZXJyb3IuaHRtbFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHRoZSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgcHJvZ3JhbXMgKHRoZSBjb250cm9sbGVyIGluIHRoaXMgY2FzZSlcbiAgICByZXR1cm4ge1xuICAgICAgICBHZXRVc2VySW5mbzogR2V0VXNlckluZm9cbiAgICB9XG59OyIsInZhciBXaXNobGlzdE1vZGVsID0gZnVuY3Rpb24oKVxue1xuICAgIGZ1bmN0aW9uIGdldFdpc2hsaXN0KGNhbGxiYWNrKSAvLyBDb3JyaWdlZXIgdXJsISEhXG4gICAge1xuICAgICAgICAvL2NvbnNvbGUubG9nKFwiV0wgTU9ERUw6IEluc2lkZSBnZXRXaXNoTGlzdFwiKTtcbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHVybDogXCJodHRwOi8vbG9jYWxob3N0OjgwODEvd2lzaGxpc3RcIixcbiAgICAgICAgICAgIHR5cGU6IFwiZ2V0XCIsXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiQXV0aG9yaXphdGlvblwiOiBcIkJlYXJlciBcIiArIENvb2tpZUhlbHBlci5nZXRDb29raWUoXCJhY2Nlc3NfdG9rZW5cIilcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGRhdGEpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoeGhyLCBzdGF0dXMsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgJChcIiNjb21wb25lbnRcIikubG9hZChcIi92aWV3cy9lcnJvci9lcnJvci5odG1sXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhZGRUb1dpc2hsaXN0KHZpZXdEYXRhLCBjYWxsYmFjaylcbiAgICB7XG4gICAgICAgIC8vY29uc29sZS5sb2coXCJXTCBNT0RFTDogSW5zaWRlIGFkZFRvV2lzaExpc3RcIik7XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6IFwiaHR0cDovL2xvY2FsaG9zdDo4MDgxL3dpc2hsaXN0L1wiICsgQ29va2llSGVscGVyLmdldENvb2tpZShcInVzZXJfaWRcIikgLyorIFwiL1wiICsgdmlld0RhdGEuZWFuX251bWJlciovLFxuICAgICAgICAgICAgdHlwZTogXCJwb3N0XCIsXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIHdpc2hsaXN0X2lkIDogdmlld0RhdGEud2lzaGxpc3RfaWQsXG4gICAgICAgICAgICAgICAgLy9lYW5fbnVtYmVyIDogdmlld0RhdGEuZWFuX251bWJlclxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgXCJBdXRob3JpemF0aW9uXCI6IFwiQmVhcmVyIFwiICsgQ29va2llSGVscGVyLmdldENvb2tpZShcImFjY2Vzc190b2tlblwiKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZGF0YSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKHhociwgc3RhdHVzLCBlcnJvcikge1xuICAgICAgICAgICAgICAgICQoXCIjY29tcG9uZW50XCIpLmxvYWQoXCIvdmlld3MvZXJyb3IvZXJyb3IuaHRtbFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGVsZXRlRnJvbVdpc2hsaXN0KClcbiAgICB7XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6IFwiaHR0cDovL2xvY2FsaG9zdDo4MDgxL3dpc2hsaXN0XCIgKyBkYXRhLnVzZXJfaWQsIC8vXCJodHRwczovL2FwaS5hei1nYW1lcy5ubC9cbiAgICAgICAgICAgIHR5cGU6IFwiUEFUQ0hcIixcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICBjb250ZW50VHlwZTogXCJhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04XCIsXG4gICAgICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeShkYXRhKSxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcIkF1dGhvcml6YXRpb25cIjogXCJCZWFyZXIgXCIgKyBDb29raWVIZWxwZXIuZ2V0Q29va2llKFwiYWNjZXNzX3Rva2VuXCIpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhkYXRhKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHhociwgc3RhdHVzLCBlcnJvcikge1xuICAgICAgICAgICAgICAgICQoXCIjY29tcG9uZW50XCIpLmxvYWQoXCIvdmlld3MvZXJyb3IvZXJyb3IuaHRtbFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHRoZSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgcHJvZ3JhbXMgKHRoZSBjb250cm9sbGVyIGluIHRoaXMgY2FzZSlcbiAgICByZXR1cm4ge1xuICAgICAgICBnZXRXaXNobGlzdDogZ2V0V2lzaGxpc3QsXG4gICAgICAgIGFkZFRvV2lzaGxpc3Q6IGFkZFRvV2lzaGxpc3QsXG4gICAgICAgIGRlbGV0ZUZyb21XaXNobGlzdDogZGVsZXRlRnJvbVdpc2hsaXN0XG4gICAgfVxufTsiLCJ2YXIgQWRtaW5Db250cm9sbGVyID0gZnVuY3Rpb24odmlld0hlbHBlciwgbW9kZWwpXG57XG4gICAgdmFyIE1vZGVsICAgICAgPSBtb2RlbDtcbiAgICB2YXIgVmlld0hlbHBlciA9IHZpZXdIZWxwZXI7XG4gICAgXG4gICAgLy8gTWFpbiBmdW5jdGlvbiwgYWxzbyB0aGUgc3RhcnQgc3RhcnRwb2ludCBmb3IgYSBwYWdlXG4gICAgZnVuY3Rpb24gbWFpbigpXG4gICAge1xuICAgICAgICBWaWV3SGVscGVyLnNldEFjdGlvbkxpc3RlbmVyKGdldFBhZ2UpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFBhZ2UoKVxuICAgIHtcbiAgICAgICAgTW9kZWwuZ2V0UGFnZShzZXRWaWV3KTsgLy9cIlwiLCBmdW5jdGlvbiAoZGF0YSkgeyBWaWV3SGVscGVyLnNldFZpZXcoZGF0YSk7IH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBzZXRWaWV3KGRhdGEpIFxuICAgIHtcbiAgICAgICAgVmlld0hlbHBlci5zZXRWaWV3KGRhdGEpO1xuICAgIH1cblxuXG4gICAgLy8gUmV0dXJuIHRoZSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgcHJvZ3JhbXMgKHRoZSBjb250cm9sbGVyIGluIHRoaXMgY2FzZSlcbiAgICByZXR1cm4ge1xuICAgICAgICBtYWluOiBtYWluXG4gICAgfVxufTsiLCJ2YXIgQWRtaW5Vc2VyQ29udHJvbGxlciA9IGZ1bmN0aW9uKHZpZXdIZWxwZXIsIG1vZGVsKVxue1xuICAgIHZhciBNb2RlbCAgICAgID0gbW9kZWw7XG4gICAgdmFyIFZpZXdIZWxwZXIgPSB2aWV3SGVscGVyO1xuICAgIFxuICAgIC8vIE1haW4gZnVuY3Rpb24sIGFsc28gdGhlIHN0YXJ0IHN0YXJ0cG9pbnQgZm9yIGEgcGFnZVxuICAgIGZ1bmN0aW9uIG1haW4oKVxuICAgIHtcbiAgICAgICAgVmlld0hlbHBlci5zZXRBY3Rpb25MaXN0ZW5lcihnZXRQYWdlKTtcbiAgICAgICAgdmlld0hlbHBlci5zZXRTYXZlTGlzdGVuZXIoc2F2ZVVzZXJJbmZvKTtcbiAgICAgICAgdmlld0hlbHBlci5zZXREZWxldGVMaXN0ZW5lcihkZWxldGVVc2VyKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRQYWdlKClcbiAgICB7XG4gICAgICAgIE1vZGVsLmdldFBhZ2Uoc2V0Vmlldyk7XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIHNldFZpZXcoZGF0YSkgXG4gICAge1xuICAgICAgICBWaWV3SGVscGVyLnNldFZpZXcoZGF0YSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2F2ZVVzZXJJbmZvKGV2ZW50KVxuICAgIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgdmFyIGZvcm1EYXRhID0gJCh0aGlzKS5zZXJpYWxpemVPYmplY3QoKTtcblxuICAgICAgICBNb2RlbC5zYXZlVXNlckluZm8oZm9ybURhdGEsIGZ1bmN0aW9uKGZvcm1EYXRhKVxuICAgICAgICB7XG4gICAgICAgICAgICBhbGVydChcIkdlYnJ1aWtlciBzdWNjZXN2b2wgZ2XDvHBkYXRlLlwiKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGVsZXRlVXNlcih1c2VyX2lkKVxuICAgIHtcbiAgICAgICAgTW9kZWwuZGVsZXRlVXNlcih1c2VyX2lkLCBmdW5jdGlvbigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGFsZXJ0KFwiR2VicnVpa2VyIHN1Y2Nlc3ZvbCBnZWRlbGV0ZS5cIik7XG4gICAgICAgICAgICBSb3V0ZXIucm91dGUoXCIvYWRtaW5cIik7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXG4gICAgcmV0dXJuIHtcbiAgICAgICAgbWFpbjogbWFpblxuICAgIH1cbn07IiwidmFyIENhcnRDb250cm9sbGVyID0gZnVuY3Rpb24odmlld0hlbHBlciwgbW9kZWwpXG57XG4gICAgdmFyIE1vZGVsICAgICAgPSBtb2RlbDtcbiAgICB2YXIgVmlld0hlbHBlciA9IHZpZXdIZWxwZXI7XG4gICAgXG4gICAgLyoqXG4gICAgICogR2V0IGFsbCBjYXJ0IGl0ZW1zIGFuZCBwYXNzIHRoZSBpdGVtcyB0byB0aGUgVmlld0hlbHBlclxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldENhcnQoKVxuICAgIHtcbiAgICAgICAgTW9kZWwuZ2V0Q2FydChmdW5jdGlvbiAoZGF0YSkgeyBWaWV3SGVscGVyLnNldFZpZXcoZGF0YSk7IH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZCBhIGl0ZW0gdG8gdGhlIGNhcnQgYW5kIHBhc3MgaXQgdG8gdGhlIHZpZXdIZWxwZXJcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge2ludH0gaWQgIEl0ZW0gaWRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhZGRQcm9kdWN0KGlkKVxuICAgIHtcbiAgICAgICAgTW9kZWwuYWRkUHJvZHVjdChpZCwgZnVuY3Rpb24gKGRhdGEpIHsgVmlld0hlbHBlci5hZGRJdGVtKGRhdGEpOyB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgYSBwcm9kdWN0IGFuZCBjYWxsIHRoZSB2aWV3SGVscGVyXG4gICAgICovXG4gICAgZnVuY3Rpb24gcmVtb3ZlUHJvZHVjdChpZClcbiAgICB7XG4gICAgICAgIE1vZGVsLnJlbW92ZVByb2R1Y3QoaWQsIGZ1bmN0aW9uIChkYXRhKSB7IH0pO1xuICAgIH1cblxuICAgIC8vIE1haW4gZnVuY3Rpb24sIGFsc28gdGhlIHN0YXJ0IHN0YXJ0cG9pbnQgZm9yIGEgcGFnZVxuICAgIGZ1bmN0aW9uIG1haW4oKVxuICAgIHsgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgVmlld0hlbHBlci5zZXRBY3Rpb25MaXN0ZW5lcihnZXRDYXJ0KTtcbiAgICAgICAgVmlld0hlbHBlci5zZXRBZGRQcm9kdWN0TGlzdGVuZXIoYWRkUHJvZHVjdCk7XG4gICAgICAgIFZpZXdIZWxwZXIuc2V0UmVtb3ZlTGlzdGVuZXIocmVtb3ZlUHJvZHVjdCk7XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHRoZSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgcHJvZ3JhbXMgKHRoZSBjb250cm9sbGVyIGluIHRoaXMgY2FzZSlcbiAgICByZXR1cm4ge1xuICAgICAgICBtYWluOiBtYWluXG4gICAgfVxufTsiLCJ2YXIgRGVsZXRlQ29udHJvbGxlciA9IGZ1bmN0aW9uKHZpZXdIZWxwZXIsIG1vZGVsKVxue1xuICAgIHZhciBNb2RlbCAgICAgID0gbW9kZWw7XG4gICAgdmFyIFZpZXdIZWxwZXIgPSB2aWV3SGVscGVyO1xuXG4gICAgZnVuY3Rpb24gbWFpbigpXG4gICAge1xuICAgICAgICBcbiAgICB9XG59IiwidmFyIEVycm9yQ29udHJvbGxlciA9IGZ1bmN0aW9uKHZpZXdIZWxwZXIpXG57XG4gICAgdmFyIFZpZXdIZWxwZXIgPSB2aWV3SGVscGVyO1xuXG4gICAgLy8gTWFpbiBmdW5jdGlvbiwgYWxzbyB0aGUgc3RhcnQgc3RhcnRwb2ludCBmb3IgYSBwYWdlXG4gICAgZnVuY3Rpb24gbWFpbigpXG4gICAge1xuICAgICAgICAvLyBzZXQgdmlldyB0byBsb2dpbiBmb3JtXG4gICAgICAgIFZpZXdIZWxwZXIuc2V0VmlldygpO1xuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXG4gICAgcmV0dXJuIHtcbiAgICAgICAgbWFpbjogbWFpblxuICAgIH1cbn07IiwidmFyIExvZ2luQ29udHJvbGxlciA9IGZ1bmN0aW9uKHZpZXdIZWxwZXIsIG1vZGVsKVxue1xuICAgIHZhciBNb2RlbCAgICAgID0gbW9kZWw7XG4gICAgdmFyIFZpZXdIZWxwZXIgPSB2aWV3SGVscGVyO1xuICAgIFxuICAgIC8vIEZ1bmN0aW9uIHRoYXQgaXMgZXhlY3V0ZWQgb24gYSBhY3Rpb24gbGlzdGVuZXJcbiAgICBmdW5jdGlvbiBhY3Rpb25QZXJmb3JtZWQoZXZlbnQpXG4gICAge1xuICAgICAgICAvLyBQcmV2ZW50IHNlbmRpbmcgdGhlIGZvcm1cbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgLy8gTG9vcCB0cm91Z2ggdGhlIGZvcm0gZGF0YSBhbmQgZ2V0IGFsbCBmaWVsZHNcbiAgICAgICAgdmFyIGZvcm1EYXRhID0ge307XG4gICAgICAgICQuZWFjaCgkKHRoaXMpLnNlcmlhbGl6ZUFycmF5KCksIGZ1bmN0aW9uIChpLCBmaWVsZCkge1xuICAgICAgICAgICAgZm9ybURhdGFbZmllbGQubmFtZV0gPSBmaWVsZC52YWx1ZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gbGV0IG1vZGVsIHNlbmQgZW1haWwgYW5kIHBhc3N3b3JkIHRvIEFQSVxuICAgICAgICBNb2RlbC5sb2dpbihmb3JtRGF0YS5lbWFpbCwgZm9ybURhdGEucGFzc3dvcmQsIGZ1bmN0aW9uIG9uU3VjY2VzcyhkYXRhKSB7XG4gICAgICAgICAgICAvLyBzaG93IHVpdGxvZ2dlbiBidXR0b25cbiAgICAgICAgICAgICQoXCIjaW5sb2dnZW5fdGV4dFwiKS5oaWRlKCk7XG4gICAgICAgICAgICAkKFwiI3VpdGxvZ2dlbl90ZXh0XCIpLnNob3coKTtcblxuICAgICAgICAgICAgLy8gV2VlcmdlZWYgZWVuIGFuZGVyZSBwYWdpbmEgZ2ViYXNzZWVyZCBvcCAnYWRtaW4nIG9mICdyZWdpc3RlcmVkIHVzZXInXG4gICAgICAgICAgICBuZXcgUGFnZUNvbnRyb2xsZXIobmV3IFBhZ2VWaWV3SGVscGVyKCksIG5ldyBQYWdlTW9kZWwoKSkubWFpbigpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBNYWluIGZ1bmN0aW9uLCBhbHNvIHRoZSBzdGFydCBzdGFydHBvaW50IGZvciBhIHBhZ2VcbiAgICBmdW5jdGlvbiBtYWluKClcbiAgICB7XG4gICAgICAgIC8vIHNldCB2aWV3IHRvIGxvZ2luIGZvcm1cbiAgICAgICAgVmlld0hlbHBlci5zZXRWaWV3KCk7XG5cbiAgICAgICAgLy8gdXNlciBmaWxscyBpbiBlbWFpbCBhbmQgcGFzc3dvcmQ7IGNsaWNrcyAnbG9naW4nOiBWSUVXIG5vdGljZXMgdGhpcyBhbmQgcmVhY3RzXG4gICAgICAgIFZpZXdIZWxwZXIuc2V0QWN0aW9uTGlzdGVuZXIoYWN0aW9uUGVyZm9ybWVkKTtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBieSBvdGhlciBwcm9ncmFtcyAodGhlIGNvbnRyb2xsZXIgaW4gdGhpcyBjYXNlKVxuICAgIHJldHVybiB7XG4gICAgICAgIG1haW46IG1haW5cbiAgICB9XG59OyIsInZhciBMb2dvdXRDb250cm9sbGVyID0gZnVuY3Rpb24odmlld0hlbHBlciwgbW9kZWwpXG57XG4gICAgdmFyIE1vZGVsICAgICAgPSBtb2RlbDtcbiAgICB2YXIgVmlld0hlbHBlciA9IHZpZXdIZWxwZXI7XG4gICAgXG4gICAgLy8gRnVuY3Rpb24gdGhhdCBpcyBleGVjdXRlZCBvbiBhIGFjdGlvbiBsaXN0ZW5lclxuICAgIGZ1bmN0aW9uIGFjdGlvblBlcmZvcm1lZChldmVudClcbiAgICB7XG4gICAgICAgIE1vZGVsLmxvZ291dChmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgLy8gc2hvdyB1aXRsb2dnZW4gYnV0dG9uXG4gICAgICAgICAgICAkKFwiI2lubG9nZ2VuX3RleHRcIikuc2hvdygpO1xuICAgICAgICAgICAgJChcIiN1aXRsb2dnZW5fdGV4dFwiKS5oaWRlKCk7XG5cbiAgICAgICAgICAgIC8vIHNldCB2aWV3IHRvIGxvZ2luIGZvcm1cbiAgICAgICAgICAgIFZpZXdIZWxwZXIuc2V0VmlldygpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBNYWluIGZ1bmN0aW9uLCBhbHNvIHRoZSBzdGFydCBzdGFydHBvaW50IGZvciBhIHBhZ2VcbiAgICBmdW5jdGlvbiBtYWluKClcbiAgICB7XG4gICAgICAgIC8vIHVzZXIgZmlsbHMgaW4gZW1haWwgYW5kIHBhc3N3b3JkOyBjbGlja3MgJ2xvZ2luJzogVklFVyBub3RpY2VzIHRoaXMgYW5kIHJlYWN0c1xuICAgICAgICBWaWV3SGVscGVyLnNldEFjdGlvbkxpc3RlbmVyKGFjdGlvblBlcmZvcm1lZCk7XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHRoZSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgcHJvZ3JhbXMgKHRoZSBjb250cm9sbGVyIGluIHRoaXMgY2FzZSlcbiAgICByZXR1cm4ge1xuICAgICAgICBtYWluOiBtYWluXG4gICAgfVxufTsiLCJ2YXIgUGFnZUNvbnRyb2xsZXIgPSBmdW5jdGlvbih2aWV3SGVscGVyLCBtb2RlbClcbntcbiAgICB2YXIgTW9kZWwgPSBtb2RlbDtcbiAgICB2YXIgVmlldyAgPSB2aWV3SGVscGVyO1xuICAgIFxuICAgIC8vIEZ1bmN0aW9uIHRoYXQgaXMgZXhlY3V0ZWQgb24gYSBhY3Rpb24gbGlzdGVuZXJcbiAgICBmdW5jdGlvbiBhY3Rpb25QZXJmb3JtZWQoZXZlbnQpXG4gICAge1xuICAgICAgICBNb2RlbC5nZXRQYWdlKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBWaWV3LnNldFZpZXcoZGF0YSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIE1haW4gZnVuY3Rpb24sIGFsc28gdGhlIHN0YXJ0cG9pbnQgZm9yIGEgcGFnZVxuICAgIGZ1bmN0aW9uIG1haW4oKVxuICAgIHsgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgVmlldy5zZXRBY3Rpb25MaXN0ZW5lcihhY3Rpb25QZXJmb3JtZWQpO1xuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXG4gICAgcmV0dXJuIHtcbiAgICAgICAgbWFpbjogbWFpblxuICAgIH1cbn07IiwidmFyIFByb2R1Y3RzQ29udHJvbGxlciA9IGZ1bmN0aW9uKHZpZXdIZWxwZXIsIG1vZGVsKVxue1xuICAgIHZhciBNb2RlbCAgICAgID0gbW9kZWw7XG4gICAgdmFyIFZpZXdIZWxwZXIgPSB2aWV3SGVscGVyO1xuICAgIFxuICAgIC8vIEZ1bmN0aW9uIHRoYXQgaXMgZXhlY3V0ZWQgb24gYSBhY3Rpb24gbGlzdGVuZXJcbiAgICBmdW5jdGlvbiBnZXRQYWdlKClcbiAgICB7XG4gICAgICAgIE1vZGVsLmdldFBhZ2UoXCJcIiwgZnVuY3Rpb24gKGRhdGEpIHsgVmlld0hlbHBlci5zZXRWaWV3KGRhdGEpOyB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBmaWx0ZXJQcm9kdWN0cyhldmVudClcbiAgICB7XG4gICAgICAgIC8vIFByZXZlbnQgc2VuZGluZyB0aGUgZm9ybSAocGFnZSByZWxvYWQpXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgdmFyIGZpbHRlcnMgPSAkKHRoaXMpLnNlcmlhbGl6ZSgpO1xuICAgICAgICBNb2RlbC5nZXRQYWdlKGZpbHRlcnMsIGZ1bmN0aW9uIChkYXRhKSB7IFZpZXdIZWxwZXIubG9hZFByb2R1Y3RzKGRhdGEpOyB9KTtcbiAgICB9XG5cbiAgICAvLyBNYWluIGZ1bmN0aW9uLCBhbHNvIHRoZSBzdGFydCBzdGFydHBvaW50IGZvciBhIHBhZ2VcbiAgICBmdW5jdGlvbiBtYWluKClcbiAgICB7XG4gICAgICAgIFZpZXdIZWxwZXIuc2V0QWN0aW9uTGlzdGVuZXIoZ2V0UGFnZSk7XG4gICAgICAgIFZpZXdIZWxwZXIuc2V0RmlsdGVyTGlzdGVuZXIoZmlsdGVyUHJvZHVjdHMpO1xuICAgICAgICAvLyBuZXcgYWN0aW9uIHdhbm5lciBlciBvcCBmaWx0ZXIgd29yZHQgZ2VkcnVrdFxuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXG4gICAgcmV0dXJuIHtcbiAgICAgICAgbWFpbjogbWFpblxuICAgIH1cbn07IiwidmFyIFJlZ2lzdGVyQ29udHJvbGxlciA9IGZ1bmN0aW9uKHZpZXdIZWxwZXIsIG1vZGVsKVxue1xuICAgIHZhciBNb2RlbCAgICAgID0gbW9kZWw7XG4gICAgdmFyIFZpZXdIZWxwZXIgPSB2aWV3SGVscGVyO1xuICAgIFxuICAgIC8vIEZ1bmN0aW9uIHRoYXQgaXMgZXhlY3V0ZWQgb24gYSBhY3Rpb24gbGlzdGVuZXJcbiAgICBmdW5jdGlvbiBhY3Rpb25QZXJmb3JtZWQoKVxuICAgIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJpbiBhY3Rpb25QZXJmb3JtZWRcIik7IC8vdGVzdFxuXG4gICAgICAgIC8vIFByZXZlbnQgc2VuZGluZyB0aGUgZm9ybVxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIC8vIHJlc2V0IGVycm9yIG1lc3NhZ2VzXG4gICAgICAgICQoXCIjcmVnaV9hcGlfZXJyb3JfbWVzc2FnZVwiKS5oaWRlKCk7XG4gICAgICAgICQoXCIjd3cyX2Vycm9yX21lc3NhZ2VcIikuaGlkZSgpO1xuXG4gICAgICAgIC8vIHB1dCBmb3JtIGZpZWxkcyBpbiBqYXZhc2NyaXB0IE9iamVjdFxuICAgICAgICB2YXIgZm9ybURhdGEgPSB7fTtcblxuICAgICAgICAkLmVhY2goJCh0aGlzKS5zZXJpYWxpemVBcnJheSgpLCBmdW5jdGlvbiAoaSwgZmllbGQpIHtcbiAgICAgICAgICAgIGZvcm1EYXRhW2ZpZWxkLm5hbWVdID0gZmllbGQudmFsdWU7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGZpeCBkYXRlIG9mIGJpcnRoIChBUEkgZXhwZWN0cyBjZXJ0YWluIGZvcm1hdClcbiAgICAgICAgZm9ybURhdGFbXCJiaXJ0aF9kYXRlXCJdID0gZm9ybURhdGEuamFhciArIFwiLVwiICsgZm9ybURhdGEubWFhbmQgKyBcIi1cIiArIGZvcm1EYXRhLmRhZztcblxuICAgICAgICBjb25zb2xlLmxvZyhmb3JtRGF0YSk7XG5cbiAgICAgICAgLy8gY2hlY2sgd2hldGhlciBhbnkgbWFuZGF0b3J5IGZpZWxkIGlzIGxlZnQgZW1wdHkgYnkgdXNlciBhbmRcbiAgICAgICAgLy8gaWYgc28sIGFib3J0IGZ1bmN0aW9uXG4gICAgICAgIHZhciBtYW5kYXRvcnlGaWVsZE1pc3NlcyA9IGZhbHNlO1xuICAgICAgICB2YXIgbWFuZGF0b3J5RmllbGRzID0gW1widm9vcm5hYW1cIiwgXCJhY2h0ZXJuYWFtXCIsIFwicG9zdGNvZGVcIiwgXCJodWlzbnVtbWVyXCIsIFwiZV9tYWlsYWRyZXNcIiwgXCJ3YWNodHdvb3JkXCIsIFwid2FjaHR3b29yZDJcIiwgXCJzZWN1cml0eV9hbnN3ZXJcIl07IC8vZHJvcGRvd25zIChsaWtlIGdlbmRlcikgYXJlIGFsd2F5cyBmaWxsZWQgaW4sIHNvIGRvbid0IHB1dCBpbiB0aGlzIGxpc3RcblxuICAgICAgICAvLyAocmVzZXQgYWxsIGZpZWxkcyB0byAndmFsaWQnIGJlY2F1c2UgdXNlciBtYXkgaGF2ZSBmaWxsZWQgaW4gZmllbGRzIHNpbmNlXG4gICAgICAgIC8vIHRoZSBwcmV2aW91cyB0aW1lIHRoaXMgZnVuY3Rpb24gd2FzIGNhbGxlZClcbiAgICAgICAgJC5lYWNoKG1hbmRhdG9yeUZpZWxkcywgZnVuY3Rpb24gKGksIG1hbkZpZWxkKSB7XG4gICAgICAgICAgICAkKFwiI1wiICsgbWFuRmllbGQpLnJlbW92ZUNsYXNzKFwiaW52YWxpZFwiKTtcbiAgICAgICAgfSlcblxuICAgICAgICAkLmVhY2gobWFuZGF0b3J5RmllbGRzLCBmdW5jdGlvbiAoaSwgbWFuRmllbGQpIHtcbiAgICAgICAgICAgIGlmIChmb3JtRGF0YVttYW5GaWVsZF0gPT0gXCJcIilcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAkKFwiI1wiICsgbWFuRmllbGQpLmFkZENsYXNzKFwiaW52YWxpZFwiKTtcblxuICAgICAgICAgICAgICAgIG1hbmRhdG9yeUZpZWxkTWlzc2VzID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgICAgICBcbiAgICAgICAgLy8gaWYgYSBtYW5kYXRvcnkgZmllbGQgaXMgZW1wdHksIHNob3cgZXJyb3IgbWVzc2FnZSB0byB1c2VyIGFuZCBhYm9ydCBmdW5jdGlvblxuICAgICAgICBpZiAobWFuZGF0b3J5RmllbGRNaXNzZXMpXG4gICAgICAgIHsgXG4gICAgICAgICAgICAvLyBzY3JvbGwgdG8gdG9wIG9mIHBhZ2Ugc28gdGhhdCB1c2VycyBzZWUgbWVzc2FnZSBcInNvbWV0aGluZyBpcyBub3QgZmlsbGVkIGluXCJcbiAgICAgICAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCAwKTtcbiAgICAgICAgICAgIC8vIHNob3cgbWVzc2FnZSBcInNvbWV0aGluZyBpcyBub3QgZmlsbGVkIGluXCJcbiAgICAgICAgICAgICQoXCIjcmVnaXN0ZXJfZXJyb3JfbWVzc2FnZVwiKS5zaG93KCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIHBhc3N3b3Jkc05vdElkZW50aWNhbCA9IGZhbHNlO1xuXG4gICAgICAgIGlmIChmb3JtRGF0YS53YWNodHdvb3JkICE9IGZvcm1EYXRhLndhY2h0d29vcmQyKSBcbiAgICAgICAge1xuICAgICAgICAgICAgcGFzc3dvcmRzTm90SWRlbnRpY2FsID0gdHJ1ZTtcbiAgICAgICAgICAgICQoXCIjd3cyX2Vycm9yX21lc3NhZ2VcIikuc2hvdygpO1xuICAgICAgICAgICAgJChcIiN3YWNodHdvb3JkXCIpLmFkZENsYXNzKFwiaW52YWxpZFwiKTtcbiAgICAgICAgICAgICQoXCIjd2FjaHR3b29yZDJcIikuYWRkQ2xhc3MoXCJpbnZhbGlkXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gYWJvcnQgZnVuY3Rpb24gaWYgbWFuZGF0b3J5IGZpZWxkIG1pc3NlcyBvciBwYXNzd29yZHMgbm90IGlkZW50aWNhbFxuICAgICAgICBpZiAobWFuZGF0b3J5RmllbGRNaXNzZXMgfHwgcGFzc3dvcmRzTm90SWRlbnRpY2FsKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS5sb2coXCJjb250aW51ZWRcIilcbiAgICAgICAgLy8gbGV0IG1vZGVsIHNlbmQgdXNlciBpbmZvIHRvIEFQSVxuICAgICAgICBNb2RlbC5yZWdpc3Rlcihmb3JtRGF0YSwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIFZpZXdIZWxwZXIuc2V0VmlldygnL3ZpZXdzL3JlZ2lzdGVyL2FmdGVyX3JlZ2lzdGVyLmh0bWwnKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gTWFpbiBmdW5jdGlvbiwgYWxzbyB0aGUgc3RhcnQgc3RhcnRwb2ludCBmb3IgYSBwYWdlXG4gICAgZnVuY3Rpb24gbWFpbigpXG4gICAge1xuICAgICAgICAvLyBzZXQgdmlldyB0byByZWdpc3RlciBmb3JtXG4gICAgICAgIFZpZXdIZWxwZXIuc2V0VmlldygnL3ZpZXdzL3JlZ2lzdGVyL3JlZ2lzdGVyLmh0bWwnKTtcblxuICAgICAgICAvLyB1c2VyIGZpbGxzIGluIHJlZ2lzdGVyIGluZm87IGNsaWNrcyAncmVnaXN0ZXInOiB2aWV3IG5vdGljZXMgdGhpcyBhbmQgcmVhY3RzXG4gICAgICAgIFZpZXdIZWxwZXIuc2V0QWN0aW9uTGlzdGVuZXIoYWN0aW9uUGVyZm9ybWVkKTtcblxuICAgICAgICAvLyBlbWFpbCBhbmQgcGFzc3dvcmQgYXJlIHNlbmQgdG8gQVBJOyBBUEkgY2hlY2tzIGlmIGVtYWlsIGFscmVhZHkgZXhpc3RzIChhbmQgd2hldGhlciBwYXNzd29yZCBpcyBjb3JyZWN0PykgXG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHRoZSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgcHJvZ3JhbXMgKHRoZSBjb250cm9sbGVyIGluIHRoaXMgY2FzZSlcbiAgICByZXR1cm4ge1xuICAgICAgICBtYWluOiBtYWluXG4gICAgfVxufTsiLCJ2YXIgUmVzZXRQYXNzd29yZENvbnRyb2xsZXIgPSBmdW5jdGlvbih2aWV3SGVscGVyLCBtb2RlbClcbntcbiAgICB2YXIgTW9kZWwgICAgICA9IG1vZGVsO1xuICAgIHZhciBWaWV3SGVscGVyID0gdmlld0hlbHBlcjtcbiAgICBcbiAgICAgLy8gRnVuY3Rpb24gdGhhdCBpcyBleGVjdXRlZCBvbiBhIGFjdGlvbiBsaXN0ZW5lclxuICAgIGZ1bmN0aW9uIGFjdGlvblBlcmZvcm1lZCgpXG4gICAge1xuICAgICAgICBjb25zb2xlLmxvZyhcImluIGFjdGlvblBlcmZvcm1lZFwiKTsgLy90ZXN0XG5cbiAgICAgICAgLy8gUHJldmVudCBzZW5kaW5nIHRoZSBmb3JtXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgLy8gcmVzZXQgZXJyb3IgbWVzc2FnZXNcbiAgICAgICAgJChcIiNyZXNldF9wYXNzd29yZF9hcGlfZXJyb3JfbWVzc2FnZVwiKS5oaWRlKCk7XG4gICAgICAgICQoXCIjd3cyX2Vycm9yX21lc3NhZ2VcIikuaGlkZSgpO1xuXG4gICAgICAgIC8vIHB1dCBmb3JtIGZpZWxkcyBpbiBqYXZhc2NyaXB0IE9iamVjdFxuICAgICAgICB2YXIgZm9ybURhdGEgPSB7fTtcblxuICAgICAgICAkLmVhY2goJCh0aGlzKS5zZXJpYWxpemVBcnJheSgpLCBmdW5jdGlvbiAoaSwgZmllbGQpIHtcbiAgICAgICAgICAgIGZvcm1EYXRhW2ZpZWxkLm5hbWVdID0gZmllbGQudmFsdWU7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGNoZWNrIHdoZXRoZXIgYW55IG1hbmRhdG9yeSBmaWVsZCBpcyBsZWZ0IGVtcHR5IGJ5IHVzZXIgYW5kXG4gICAgICAgIC8vIGlmIHNvLCBhYm9ydCBmdW5jdGlvblxuICAgICAgICB2YXIgbWFuZGF0b3J5RmllbGRNaXNzZXMgPSBmYWxzZTtcbiAgICAgICAgdmFyIG1hbmRhdG9yeUZpZWxkcyA9IFtcIndhY2h0d29vcmRcIiwgXCJ3YWNodHdvb3JkMlwiLCBcImVfbWFpbGFkcmVzXCIsXCJzZWN1cml0eV9hbnN3ZXJcIl07IC8vZHJvcGRvd25zIChsaWtlIHNlY3VyaXR5X3F1ZXN0aW9uX2Fuc3dlcikgYXJlIGFsd2F5cyBmaWxsZWQgaW4sIHNvIGRvbid0IHB1dCBpbiB0aGlzIGxpc3RcblxuICAgICAgICAvLyAocmVzZXQgYWxsIGZpZWxkcyB0byAndmFsaWQnIGJlY2F1c2UgdXNlciBtYXkgaGF2ZSBmaWxsZWQgaW4gZmllbGRzIHNpbmNlXG4gICAgICAgIC8vIHRoZSBwcmV2aW91cyB0aW1lIHRoaXMgZnVuY3Rpb24gd2FzIGNhbGxlZClcbiAgICAgICAgJC5lYWNoKG1hbmRhdG9yeUZpZWxkcywgZnVuY3Rpb24gKGksIG1hbkZpZWxkKSB7XG4gICAgICAgICAgICAkKFwiI1wiICsgbWFuRmllbGQpLnJlbW92ZUNsYXNzKFwiaW52YWxpZFwiKTtcbiAgICAgICAgfSlcblxuICAgICAgICAkLmVhY2gobWFuZGF0b3J5RmllbGRzLCBmdW5jdGlvbiAoaSwgbWFuRmllbGQpIHtcbiAgICAgICAgICAgIGlmIChmb3JtRGF0YVttYW5GaWVsZF0gPT0gXCJcIilcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAkKFwiI1wiICsgbWFuRmllbGQpLmFkZENsYXNzKFwiaW52YWxpZFwiKTtcblxuICAgICAgICAgICAgICAgIG1hbmRhdG9yeUZpZWxkTWlzc2VzID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgICAgICBcbiAgICAgICAgLy8gaWYgYSBtYW5kYXRvcnkgZmllbGQgaXMgZW1wdHksIHNob3cgZXJyb3IgbWVzc2FnZSB0byB1c2VyIGFuZCBhYm9ydCBmdW5jdGlvblxuICAgICAgICBpZiAobWFuZGF0b3J5RmllbGRNaXNzZXMpXG4gICAgICAgIHsgXG4gICAgICAgICAgICAvLyBzY3JvbGwgdG8gdG9wIG9mIHBhZ2Ugc28gdGhhdCB1c2VycyBzZWUgbWVzc2FnZSBcInNvbWV0aGluZyBpcyBub3QgZmlsbGVkIGluXCJcbiAgICAgICAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCAwKTtcbiAgICAgICAgICAgIC8vIHNob3cgbWVzc2FnZSBcInNvbWV0aGluZyBpcyBub3QgZmlsbGVkIGluXCJcbiAgICAgICAgICAgICQoXCIjcmVzZXRfZXJyb3JfbWVzc2FnZVwiKS5zaG93KCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIHBhc3N3b3Jkc05vdElkZW50aWNhbCA9IGZhbHNlO1xuXG4gICAgICAgIGlmIChmb3JtRGF0YS53YWNodHdvb3JkICE9IGZvcm1EYXRhLndhY2h0d29vcmQyKSBcbiAgICAgICAge1xuICAgICAgICAgICAgcGFzc3dvcmRzTm90SWRlbnRpY2FsID0gdHJ1ZTtcbiAgICAgICAgICAgICQoXCIjd3cyX2Vycm9yX21lc3NhZ2VcIikuc2hvdygpO1xuICAgICAgICAgICAgJChcIiN3YWNodHdvb3JkXCIpLmFkZENsYXNzKFwiaW52YWxpZFwiKTtcbiAgICAgICAgICAgICQoXCIjd2FjaHR3b29yZDJcIikuYWRkQ2xhc3MoXCJpbnZhbGlkXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gYWJvcnQgZnVuY3Rpb24gaWYgbWFuZGF0b3J5IGZpZWxkIG1pc3NlcyBvciBwYXNzd29yZHMgbm90IGlkZW50aWNhbFxuICAgICAgICBpZiAobWFuZGF0b3J5RmllbGRNaXNzZXMgfHwgcGFzc3dvcmRzTm90SWRlbnRpY2FsKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS5sb2coXCJjb250aW51ZWRcIilcbiAgICAgICAgLy8gbGV0IG1vZGVsIHNlbmQgdXNlciBpbmZvIHRvIEFQSVxuICAgICAgICBNb2RlbC5yZXNldHBhc3N3b3JkKGZvcm1EYXRhLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgVmlld0hlbHBlci5zZXRWaWV3KCd2aWV3cy9yZXNldHBhc3N3b3JkL2FmdGVyX3Jlc2V0Lmh0bWwnKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gTWFpbiBmdW5jdGlvbiwgYWxzbyB0aGUgc3RhcnQgc3RhcnRwb2ludCBmb3IgYSBwYWdlXG4gICAgZnVuY3Rpb24gbWFpbigpXG4gICAgeyAgICAgIFxuICAgICAgICAvLyBzZXQgdmlldyB0byByZXNldCBwYXNzd29yZCBmb3JtXG4gICAgICAgIFZpZXdIZWxwZXIuc2V0Vmlldygndmlld3MvcmVzZXRwYXNzd29yZC9yZXNldHBhc3N3b3JkLmh0bWwnKTtcblxuICAgICAgICBWaWV3SGVscGVyLnNldEFjdGlvbkxpc3RlbmVyKGFjdGlvblBlcmZvcm1lZCk7XG4gICAgICAgIC8vIG5ldyBhY3Rpb24gd2FubmVyIGVyIG9wIGZpbHRlciB3b3JkdCBnZWRydWt0XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHRoZSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgcHJvZ3JhbXMgKHRoZSBjb250cm9sbGVyIGluIHRoaXMgY2FzZSlcbiAgICByZXR1cm4ge1xuICAgICAgICBtYWluOiBtYWluXG4gICAgfVxufTtcblxuXG5cblxuIiwidmFyIFByb2R1Y3RDb250cm9sbGVyID0gZnVuY3Rpb24odmlld0hlbHBlciwgbW9kZWwpXG57XG4gICAgdmFyIE1vZGVsICAgICAgPSBtb2RlbDtcbiAgICB2YXIgVmlld0hlbHBlciA9IHZpZXdIZWxwZXI7XG4gICAgXG4gICAgLy8gRnVuY3Rpb24gdGhhdCBpcyBleGVjdXRlZCBvbiBhIGFjdGlvbiBsaXN0ZW5lclxuICAgIGZ1bmN0aW9uIGFjdGlvblBlcmZvcm1lZChldmVudClcbiAgICB7XG4gICAgICAgIC8vIFByZXZlbnQgc2VuZGluZyB0aGUgZm9ybVxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG5cblxuXG5cblxuICAgICAgICAvLyBMb29wIHRyb3VnaCB0aGUgZm9ybSBkYXRhIGFuZCBnZXQgYWxsIGZpZWxkc1xuICAgICAgICB2YXIgZm9ybURhdGEgPSB7fTtcbiAgICAgICAgJC5lYWNoKCQodGhpcykuc2VyaWFsaXplQXJyYXkoKSwgZnVuY3Rpb24gKGksIGZpZWxkKSB7XG4gICAgICAgICAgICBmb3JtRGF0YVtmaWVsZC5uYW1lXSA9IGZpZWxkLnZhbHVlO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBsZXQgbW9kZWwgc2VuZCBlbWFpbCBhbmQgcGFzc3dvcmQgdG8gQVBJXG4gICAgICAgIE1vZGVsLmxvZ2luKGZvcm1EYXRhLmVtYWlsLCBmb3JtRGF0YS5wYXNzd29yZCwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIC8vIHNob3cgdWl0bG9nZ2VuIGJ1dHRvblxuICAgICAgICAgICAgJChcIiNpbmxvZ2dlbl90ZXh0XCIpLmhpZGUoKTtcbiAgICAgICAgICAgICQoXCIjdWl0bG9nZ2VuX3RleHRcIikuc2hvdygpO1xuXG4gICAgICAgICAgICAvLyBXZWVyZ2VlZiBlZW4gYW5kZXJlIHBhZ2luYSBnZWJhc3NlZXJkIG9wICdhZG1pbicgb2YgJ3JlZ2lzdGVyZWQgdXNlcidcbiAgICAgICAgICAgIG5ldyBQYWdlQ29udHJvbGxlcihuZXcgUGFnZVZpZXdIZWxwZXIoKSwgbmV3IFBhZ2VNb2RlbCgpKS5tYWluKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIGxldCB2aWV3IHNob3cgdmlldyB3aXRoIGRhdGEgZnJvbSBkYXRhYmFzZVxuICAgIGZ1bmN0aW9uIHNob3dWaWV3KGRhdGEpXG4gICAge1xuICAgICAgICB2aWV3SGVscGVyLnNldFZpZXcoZGF0YSk7XG4gICAgfVxuXG4gICAgLy8gTWFpbiBmdW5jdGlvbiwgYWxzbyB0aGUgc3RhcnQgc3RhcnRwb2ludCBmb3IgYSBwYWdlXG4gICAgZnVuY3Rpb24gbWFpbigpXG4gICAge1xuICAgICAgICAvLyB3aGF0IGhhcHBlbnM6XG4gICAgICAgIC8vIDEpIHVzZXIgY2xpY2tzIG9uIGEgcHJvZHVjdCBcbiAgICAgICAgLy8gMikgbW9kZWwgZ2V0cyBpbmZvIG9mIHRoZSBwcm9kdWN0XG4gICAgICAgIC8vIDMpIHN5c3RlbSBwdXRzIGluZm8gaW4gaHRtbFxuICAgICAgICAvLyA0KSB2aWV3IHNob3dzIGluZm9cblxuICAgICAgICAvLyAyKSBtb2RlbCBnZXRzIGluZm8gb2YgdGhlIHByb2R1Y3RcbiAgICAgICAgLy8gMykgc3lzdGVtIHB1dHMgaW5mbyBpbiBodG1sXG4gICAgICAgIG1vZGVsLkdldFByb2R1Y3RJbmZvKHNob3dWaWV3KTtcblxuXG5cbiAgICAgICAgLy8gc2V0IHZpZXcgdG8gbG9naW4gZm9ybVxuICAgICAgICAvL1ZpZXdIZWxwZXIuc2V0VmlldygpO1xuXG4gICAgICAgIC8vIHVzZXIgZmlsbHMgaW4gZW1haWwgYW5kIHBhc3N3b3JkOyBjbGlja3MgJ2xvZ2luJzogVklFVyBub3RpY2VzIHRoaXMgYW5kIHJlYWN0c1xuICAgICAgICAvL1ZpZXdIZWxwZXIuc2V0QWN0aW9uTGlzdGVuZXIoYWN0aW9uUGVyZm9ybWVkKTtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBieSBvdGhlciBwcm9ncmFtcyAodGhlIGNvbnRyb2xsZXIgaW4gdGhpcyBjYXNlKVxuICAgIHJldHVybiB7XG4gICAgICAgIG1haW46IG1haW4sXG4gICAgICAgIHNob3dWaWV3IDogc2hvd1ZpZXdcbiAgICB9XG59OyIsInZhciBXaXNobGlzdENvbnRyb2xsZXIgPSBmdW5jdGlvbih2aWV3SGVscGVyLCBtb2RlbClcbntcbiAgICB2YXIgTW9kZWwgPSBtb2RlbDtcbiAgICB2YXIgVmlld0hlbHBlciA9IHZpZXdIZWxwZXI7XG4gICAgdmFyIHZpZXdEYXRhID0ge307XG5cbiAgICBmdW5jdGlvbiBnZXRXaXNobGlzdCgpXG4gICAge1xuICAgICAgICAvL2NvbnNvbGUubG9nKFwiV0wgQ09OVFJPTExFUjogSW5zaWRlIGdldFdpc2hMaXN0XCIpO1xuICAgICAgICBNb2RlbC5nZXRXaXNobGlzdCggc2V0VmlldyhkYXRhKSApOyAvLyBDb3JyaWdlZXIgc2hpdHpvb2kgaGllciAoaGVlbCB0b2V2YWxsaWcgamEgOnApXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0VmlldyhkYXRhKVxuICAgIHtcbiAgICAgICAgVmlld0hlbHBlci5zZXRWaWV3KGRhdGEpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1haW4oKVxuICAgIHtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhcIldMIENPTlRST0xMRVI6IEluc2lkZSBtYWluXCIpO1xuICAgICAgICBWaWV3SGVscGVyLnNldEFjdGlvbkxpc3RlbmVyKGdldFdpc2hsaXN0KTtcbiAgICAgICAgVmlld0hlbHBlci5zZXREZWxldGVMaXN0ZW5lcihNb2RlbC5kZWxldGVGcm9tV2lzaGxpc3QpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBtYWluOiBtYWluXG4gICAgfVxufTsiLCJ2YXIgQWRtaW5WaWV3SGVscGVyID0gZnVuY3Rpb24gKClcbntcbiAgICBmdW5jdGlvbiBzZXRBY3Rpb25MaXN0ZW5lcihhY3Rpb24pXG4gICAge1xuICAgICAgICAkKGRvY3VtZW50KS5yZWFkeShhY3Rpb24pOyAvLyBpZiAnZG9jdW1lbnQgcmVhZHknIHBlcmZvcm0gXCJhY3Rpb25cIlxuICAgIH1cblxuICAgIC8vIENoYW5nZSB0aGUgdmlldyBvZiB0aGUgcGFnZVxuICAgICBmdW5jdGlvbiBzZXRWaWV3KGRhdGEpXG4gICAge1xuICAgICAgICBkb2N1bWVudC50aXRsZSA9XCJBZG1pbiAtIEFaIEdhbWVzXCI7XG5cbiAgICAgICAgJChcIiNjb21wb25lbnRcIikubG9hZCgnL3ZpZXdzL2FkbWluL2FkbWluLmh0bWwnLCBmdW5jdGlvbiAoKSB7IC8vIHdhYXIgaWQgPSAnY29tcG9uZW50JyBkb2UgLmxvYWQuLi4uLi5cbiAgICAgICAgICAgICQuZWFjaChkYXRhLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgLy8gQ2xvbmUgcHJvZHVjdFxuICAgICAgICAgICAgICAgIHZhciB1c2VyID0gJCgnI3NpbmdsZV91c2VyJykuY2xvbmUoKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBBZGQgcHJvZHVjdCBpbmZvXG4gICAgICAgICAgICAgICAgJCh1c2VyKS5maW5kKFwiLnVzZXJfX2ZpcnN0bmFtZVwiKS5odG1sKHZhbHVlLmZpcnN0X25hbWUpO1xuICAgICAgICAgICAgICAgICQodXNlcikuZmluZChcIi51c2VyX19maXJzdG5hbWVcIikuYXR0cignaHJlZicsICcvYWRtaW5fdXNlci8nICsgdmFsdWUudXNlcl9pZCk7XG4gICAgICAgICAgICAgICAgJCh1c2VyKS5maW5kKFwiLnVzZXJfX2luc2VydGlvblwiKS5odG1sKHZhbHVlLmluc2VydGlvbik7XG4gICAgICAgICAgICAgICAgJCh1c2VyKS5maW5kKFwiLnVzZXJfX2xhc3RuYW1lXCIpLmh0bWwodmFsdWUuc3VybmFtZSk7XG4gICAgICAgICAgICAgICAgJCh1c2VyKS5maW5kKFwiLnVzZXJfX2VtYWlsXCIpLmh0bWwodmFsdWUuZW1haWwpO1xuICAgICAgICAgICAgICAgICQodXNlcikuZmluZChcIi51c2VyX19waG9uZW51bWJlclwiKS5odG1sKHZhbHVlLnBob25lX251bWJlcik7XG5cbiAgICAgICAgICAgICAgICAkKFwiI3VzZXJzX2JvZHlcIikuYXBwZW5kKHVzZXIpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgZmlyc3QgbGlzdCBpdGVtLCBiZWNhdXNlIHRoaXMgaXRlbSBpcyBhbHdheXMgZW1wdHlcbiAgICAgICAgICAgICQoXCIjc2luZ2xlX3VzZXJcIikuZmlyc3QoKS5yZW1vdmUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgc2V0QWN0aW9uTGlzdGVuZXI6IHNldEFjdGlvbkxpc3RlbmVyLFxuICAgICAgICBzZXRWaWV3OiBzZXRWaWV3LFxuICAgIH1cbn1cblxuICAgIC8vZGF0IGhpZXJvbmRlciB6YXQgYWFyZGlnIHdhdCB3ZXJrIGluLi4uIERvbmFsZCB3aWwgbm9nIGZmIGhvdWRlblxuXG4gICAgLy8gZnVuY3Rpb24gc2hvd1VzZXJzKGRhdGEpXG4gICAgLy8ge1xuICAgIC8vICAgICBkb2N1bWVudC50aXRsZSA9XCJBZG1pbiAtIEFaIEdhbWVzXCI7XG5cbiAgICAvLyAgICAgJChcIiNjb21wb25lbnRcIikubG9hZCgnL3ZpZXdzL2FkbWluL2FkbWluLmh0bWwnLCBmdW5jdGlvbiAoKSB7XG4gICAgLy8gICAgICAgICB2YXIgdGFibGUgPSAkKFwiPHRhYmxlIGlkPSd1c2Vyc190YWJsZSc+PC90YWJsZT5cIik7XG5cbiAgICAvLyAgICAgICAgIC8vIHRhYmxlIGhlYWRlclxuICAgIC8vICAgICAgICAgdmFyIHJvdyA9ICQoJzx0cj48L3RyPicpO1xuICAgIC8vICAgICAgICAgcm93LmFwcGVuZCgnPHRkPlZvb3JuYWFtPC90ZD48dGQ+VHVzc2VudjwvdGQ+PHRkPkFjaHRlcm5hYW08L3RkPjx0ZD5HZWJydWlrZXJzbmFhbTwvdGQ+PHRkPmVtYWlsPC90ZD48dGQ+dHlwZTwvdGQ+Jyk7XG5cbiAgICAvLyAgICAgICAgICQuZWFjaChkYXRhLCBmdW5jdGlvbihudW1iZXJyLCB1c2VyKSBcbiAgICAvLyAgICAgICAgIHtcbiAgICAvLyAgICAgICAgICAgICB2YXIgcm93ID0gJCgnPHRyPjwvdHI+Jyk7XG4gICAgLy8gICAgICAgICAgICAgJC5lYWNoKHVzZXIsIGZ1bmN0aW9uKGtleSwgdmFsdWUpXG4gICAgLy8gICAgICAgICAgICAge1xuICAgIC8vICAgICAgICAgICAgICAgICBpZiAodmFsdWUgIT0gdW5kZWZpbmVkKVxuICAgIC8vICAgICAgICAgICAgICAgICB7XG4gICAgLy8gICAgICAgICAgICAgICAgICAgICByb3cuYXBwZW5kKCAkKFwiPHRkIGNsYXNzPSd0ZF91c2VyJz48L3RkPlwiKS5odG1sKFN0cmluZyh2YWx1ZSkpICk7XG4gICAgLy8gICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgLy8gICAgICAgICAgICAgICAgICAgICByb3cuYXBwZW5kKCAkKFwiPHRkIGNsYXNzPSd0ZF91c2VyJz48L3RkPlwiKSApO1xuICAgIC8vICAgICAgICAgICAgICAgICB9XG4gICAgLy8gICAgICAgICAgICAgfSlcbiAgICAvLyAgICAgICAgICAgICB0YWJsZS5hcHBlbmQocm93KTtcbiAgICAvLyAgICAgICAgICAgICAvLyAvL2ZvciBhZGRpdGlvbmFsIHVzZXIgaW5mbyBpZiBjbGlja2VkXG4gICAgLy8gICAgICAgICAgICAgLy8gcm93ID0gJCgnPGRpdiBjbGFzcz1cInRvYmV0YWJsZVwiPjwvZGl2PicpO1xuICAgIC8vICAgICAgICAgICAgIC8vIHRhYmxlLmFwcGVuZChyb3cpO1xuICAgIC8vICAgICAgICAgfSk7XG4gICAgLy8gICAgICAgICAkKCcjdXNlcnMnKS5hcHBlbmQodGFibGUpO1xuICAgIC8vICAgICB9KTtcbiAgICAvLyB9XG5cbiAgICAvLyBmdW5jdGlvbiBwdXRJbmZvSW5IdG1sKGNsaWNrZWQsIGRhdGEpXG4gICAgLy8ge1xuICAgIC8vICAgICBjb25zb2xlLmxvZygnaW4gcHV0SW5mb0luSHRtbCgpJyk7XG4gICAgLy8gICAgIC8vIHNob3cgaW5mbyBvZiB0aGUgcmlnaHQgdXNlciAoaWYgbm90IGFscmVhZHkgc2hvd2luZyBpdClcbiAgICAvLyAgICAgLy8gaW5zZXJ0IHJvdyBhcyB0YWJsZSBoZWFkZXJcbiAgICAvLyAgICAgdmFyIGhlYWRlcnJvdyA9ICQoJzx0cj48L3RyPicpLmFwcGVuZCgnPHRkPnd3PC90ZD48dGQ+Z2VibG9ra2VlcmQ8L3RkPjx0ZD5pZDwvdGQ+PHRkPmdlbmRlcjwvdGQ+PHRkPmdlYm9vcnRlZGF0dW08L3RkPjx0ZD52cmFhZzwvdGQ+PHRkPmFudHdvb3JkPC90ZD4nKTtcblxuICAgIC8vICAgICAvLyBpbnNlcnQgcm93IHdpdGggdGUgdXNlcmluZm9cbiAgICAvLyAgICAgdmFyIGluZm9yb3cgPSAkKCc8dHI+PC90cj4nKTtcblxuICAgIC8vICAgICB2YXIgY291bnQgPSAwO1xuICAgIC8vICAgICAkLmVhY2goZGF0YVswXSwgZnVuY3Rpb24oa2V5LCB2YWx1ZSlcbiAgICAvLyAgICAge1xuICAgIC8vICAgICAgICAgaWYgKGNvdW50ID09IDEpIHsgLy8gZ2VibG9ra2VlcmRcbiAgICAvLyAgICAgICAgICAgICBpZiAodmFsdWUgPT0gMSkge1xuICAgIC8vICAgICAgICAgICAgICAgICB2YWx1ZSA9ICduZWUnO1xuICAgIC8vICAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT0gMCkge1xuICAgIC8vICAgICAgICAgICAgICAgICB2YWx1ZSA9ICdqYSdcbiAgICAvLyAgICAgICAgICAgICB9IGVsc2Uge1xuICAgIC8vICAgICAgICAgICAgICAgICB2YWx1ZSA9ICdkYiBmb3V0PydcbiAgICAvLyAgICAgICAgICAgICB9XG4gICAgLy8gICAgICAgICB9XG5cbiAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKGNvdW50KTtcbiAgICAvLyAgICAgICAgIHZhciB0ZCA9ICQoJzx0ZD48L3RkPicpLmFwcGVuZCh2YWx1ZSk7XG5cbiAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKCdrZXksIHZhbHVlOiAnICsga2V5LCB2YWx1ZSk7XG5cbiAgICAvLyAgICAgICAgIGluZm9yb3cuYXBwZW5kKHRkKTtcblxuICAgIC8vICAgICAgICAgY291bnQgKz0gMTtcbiAgICAvLyAgICAgfSlcblxuICAgIC8vICAgICBpbmZvcm93Lmluc2VydEFmdGVyKCAkKGNsaWNrZWQpLmNsb3Nlc3QoJ3RyJykgKTtcbiAgICAvLyAgICAgaGVhZGVycm93Lmluc2VydEFmdGVyKCQoY2xpY2tlZCkuY2xvc2VzdCgndHInKSk7XG4gICAgLy8gfVxuXG4iLCJ2YXIgQWRtaW5Vc2VyVmlld0hlbHBlciA9IGZ1bmN0aW9uICgpXG57XG4gICAgZnVuY3Rpb24gc2V0QWN0aW9uTGlzdGVuZXIoYWN0aW9uKVxuICAgIHtcbiAgICAgICAgJChkb2N1bWVudCkucmVhZHkoYWN0aW9uKTsgLy8gaWYgJ2RvY3VtZW50IHJlYWR5JyBwZXJmb3JtIFwiYWN0aW9uXCJcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXRWaWV3KHZhbHVlKVxuICAgIHtcbiAgICAgICAgLy9wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAkKFwiI2NvbXBvbmVudFwiKS5sb2FkKCcvdmlld3MvYWRtaW51c2VyL2FkbWludXNlci5odG1sJywgZnVuY3Rpb24gKClcbiAgICAgICAge1xuICAgICAgICAgICAgJChcIiNkZWxldGVfYnRuXCIpLmF0dHIoXCJkYXRhLWlkXCIsIHZhbHVlLnVzZXJfaWQpICAgXG4gICAgICAgICAgICAkKFwiI2ZpcnN0X25hbWVcIikudmFsKHZhbHVlLmZpcnN0X25hbWUpO1xuICAgICAgICAgICAgJChcIiNpbnNlcnRpb25cIikudmFsKHZhbHVlLmluc2VydGlvbik7XG4gICAgICAgICAgICAkKFwiI3N1cm5hbWVcIikudmFsKHZhbHVlLnN1cm5hbWUpO1xuICAgICAgICAgICAgJChcIiN1c2VyX3R5cGVcIikudmFsKHZhbHVlLnVzZXJfdHlwZSk7XG4gICAgICAgICAgICAkKFwiI2VtYWlsXCIpLnZhbCh2YWx1ZS5lbWFpbCk7XG4gICAgICAgICAgICAkKFwiI3Bhc3N3b3JkXCIpLmF0dHIoJ3BsYWNlaG9sZGVyJywgJ1Z1bCBoaWVyIGlldHMgaW4gb20gaGV0IHdhY2h0d29vcmQgdGUgdmVyYW5kZXJlbicpO1xuICAgICAgICAgICAgJChcIiNnZW5kZXJcIikudmFsKHZhbHVlLmdlbmRlcik7XG4gICAgICAgICAgICAkKFwiI2RhdGVfb2ZfYmlydGhcIikudmFsKHZhbHVlLmRhdGVfb2ZfYmlydGgpO1xuICAgICAgICAgICAgJChcIiNwaG9uZV9udW1iZXJcIikudmFsKHZhbHVlLnBob25lX251bWJlcik7XG4gICAgICAgICAgICAkKFwiI2lzX2FjdGl2ZVwiKS52YWwodmFsdWUuaXNfYWN0aXZlKTtcbiAgICAgICAgICAgICQoXCIjdXNlcl9pZFwiKS52YWwodmFsdWUudXNlcl9pZCk7XG5cbiAgICAgICAgICAgIHZhciB0b2RheSAgICAgICA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICB2YXIgZGF0ZU9mQmlydGggPSBuZXcgRGF0ZSh2YWx1ZS5kYXRlX29mX2JpcnRoKTtcblxuICAgICAgICAgICAgZm9yKGkgPSAxOyBpIDwgMzI7IGkrKylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpZiAoaSA9PSBkYXRlT2ZCaXJ0aC5nZXREYXRlKCkpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAkKFwiI2RhZ1wiKS5hcHBlbmQoXCI8b3B0aW9uIHZhbHVlPSdcIiArIGkgKyBcIicgc2VsZWN0ZWQ9J3NlbGVjdGVkJz5cIiArIGkgKyBcIjwvb3B0aW9uPlwiKTtcbiAgICAgICAgICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICQoXCIjZGFnXCIpLmFwcGVuZChcIjxvcHRpb24gdmFsdWU9J1wiICsgaSArIFwiJz5cIiArIGkgKyBcIjwvb3B0aW9uPlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAoaSA9IDE5MDA7IGkgPCB0b2RheS5nZXRGdWxsWWVhcigpICsgMTsgaSsrKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlmIChpID09IGRhdGVPZkJpcnRoLmdldEZ1bGxZZWFyKCkpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAkKFwiI2phYXJcIikuYXBwZW5kKFwiPG9wdGlvbiB2YWx1ZT0nXCIgKyBpICsgXCInIHNlbGVjdGVkPSdzZWxlY3RlZCc+XCIgKyBpICsgXCI8L29wdGlvbj5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICQoXCIjamFhclwiKS5hcHBlbmQoXCI8b3B0aW9uIHZhbHVlPSdcIiArIGkgKyBcIic+XCIgKyBpICsgXCI8L29wdGlvbj5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAkKFwiI21hYW5kXCIpLnZhbChkYXRlT2ZCaXJ0aC5nZXRNb250aCgpKTtcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXRTYXZlTGlzdGVuZXIoYWN0aW9uKVxuICAgIHtcbiAgICAgICAgJChkb2N1bWVudCkub24oJ3N1Ym1pdCcsICcjdXNlcmZvcm0nLCBhY3Rpb24pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldERlbGV0ZUxpc3RlbmVyKGFjdGlvbilcbiAgICB7XG4gICAgICAgICQoXCIjY29tcG9uZW50XCIpLm9mZigpLm9uKFwiY2xpY2tcIiwgJyNkZWxldGVfYnRuJywgZnVuY3Rpb24gKGUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGFjdGlvbigkKHRoaXMpLmRhdGEoXCJpZFwiKSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIHNldEFjdGlvbkxpc3RlbmVyOiBzZXRBY3Rpb25MaXN0ZW5lcixcbiAgICAgICAgc2V0Vmlldzogc2V0VmlldyxcbiAgICAgICAgc2V0U2F2ZUxpc3RlbmVyOiBzZXRTYXZlTGlzdGVuZXIsXG4gICAgICAgIHNldERlbGV0ZUxpc3RlbmVyOiBzZXREZWxldGVMaXN0ZW5lclxuICAgIH1cbn0iLCJ2YXIgQ2FydFZpZXdIZWxwZXIgPSBmdW5jdGlvbigpXG57XG4gICAgLy8gQ2hhbmdlIHRoZSB2aWV3IG9mIHRoZSBwYWdlXG4gICAgZnVuY3Rpb24gc2V0Vmlldyh2aWV3RGF0YSlcbiAgICB7XG4gICAgICAgIGlmICh2aWV3RGF0YSAhPSBcIlwiKVxuICAgICAgICB7XG4gICAgICAgICAgICB2aWV3RGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkge1xuICAgICAgICAgICAgICAgIGFkZEl0ZW0oaXRlbSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB0aGUgdG90YWwgcHJpY2UgIG9mIHRoZSBjYXJ0XG4gICAgICogXG4gICAgICogQHBhcmFtIHtpbnR9IHRvdGFsUHJpY2UgIFRvdGFsIHByaWNlIG9mIHRoZSBjYXJ0XG4gICAgICovXG4gICAgZnVuY3Rpb24gdXBkYXRlVG90YWxQcmljZShuZXdQcmljZSlcbiAgICB7XG4gICAgICAgIG5ld1ByaWNlID0gcGFyc2VGbG9hdChuZXdQcmljZSkgKyBwYXJzZUZsb2F0KCQoXCIuY2FydF9fdG90YWwgLnByaWNlXCIpLmh0bWwoKS5zdWJzdHIoMSkpO1xuICAgICAgICAkKFwiLmNhcnRfX3RvdGFsIC5wcmljZVwiKS5odG1sKFwi4oKsXCIgKyBwYXJzZUZsb2F0KG5ld1ByaWNlKS50b0ZpeGVkKDIpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNYWtlIG5ldyBjYXJ0IGl0ZW0gdmlzaWFibGUgaW4gdGhlIERPTVxuICAgICAqIFxuICAgICAqIEBwYXJhbSAge2FycmF5fSAgaXRlbSAgUHJvZHVjdFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFkZEl0ZW0oaXRlbSlcbiAgICB7XG4gICAgICAgIHZhciBjYXJ0SXRlbSA9ICQoJzxkaXY+JykuaHRtbCgkKCcuc2lkZWJhcl9fY29udGVudF9fdG1wJykuaHRtbCgpKTtcblxuICAgICAgICBjYXJ0SXRlbS5maW5kKFwiLmNhcnRfX2l0ZW1fX3RpdGxlXCIpLmh0bWwoaXRlbS50aXRsZSk7XG4gICAgICAgIGNhcnRJdGVtLmZpbmQoXCIuY2FydF9faXRlbV9fcHJpY2VcIikuaHRtbChcIuKCrFwiICsgaXRlbS5wcmljZSk7XG4gICAgICAgIGNhcnRJdGVtLmZpbmQoXCIuY2FydF9faXRlbV9faW1hZ2UgaW1nXCIpLmF0dHIoXCJzcmNcIiwgaXRlbS5pbWFnZSk7XG4gICAgICAgIGNhcnRJdGVtLmZpbmQoXCIuY2FydF9faXRlbVwiKS5hdHRyKFwiZGF0YS1pZFwiLCBpdGVtLmVhbl9udW1iZXIpXG5cbiAgICAgICAgJChcIi5jYXJ0XCIpLmFwcGVuZChjYXJ0SXRlbSk7XG5cbiAgICAgICAgLy8gQ2hhbmdlIGFtb3VudCBvZiBpdGVtc1xuICAgICAgICB2YXIgYW1vdW50ID0gJChcIi5jYXJ0X2J1dHRvbiAuY291bnRcIikuaHRtbCgpO1xuICAgICAgICAkKFwiLmNhcnRfYnV0dG9uIC5jb3VudFwiKS5odG1sKHBhcnNlSW50KGFtb3VudCkgKyAxKTtcblxuICAgICAgICAvLyBVcGRhdGUgdGhlIHRvdGFsIHByaWNlXG4gICAgICAgIHVwZGF0ZVRvdGFsUHJpY2UoaXRlbS5wcmljZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTG9hZCB0aGUgY2FydCB3aGVuIHRoZSBwYWdlIGlzICByZWFzZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHNldEFjdGlvbkxpc3RlbmVyKGFjdGlvbilcbiAgICB7XG4gICAgICAgICQoZG9jdW1lbnQpLnJlYWR5KGFjdGlvbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTGlzdGVuZXIgZm9yIHRoZSBBZGQgdG8gY2FydCBidXR0b25cbiAgICAgKiBcbiAgICAgKiBAcGFyYW0gIHtmdW5jdGlvbn0gYWRkdG9DYXJ0ICBNb2RlbCBjYWxsYmFja1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIHNldEFkZFByb2R1Y3RMaXN0ZW5lcihhZGRUb0NhcnQpXG4gICAge1xuICAgICAgICAkKFwiYm9keVwiKS5vbihcImNsaWNrXCIsIFwiLmFkZHRvY2FydFwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIHZhciBwcm9kdWN0X2lkID0gJCh0aGlzKS5kYXRhKFwiaWRcIik7XG4gICAgICAgICAgICBhZGRUb0NhcnQocHJvZHVjdF9pZCk7XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTGlzdGVuZXIgZm9yIHJlbW92ZSBhIHByb2R1Y3QgZnJvbSB0aGUgRE9NIGNhcnRcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSByZW1vdmVQcm9kdWN0IENhbGxiYWNrIGZ1bmN0aW9uIHRvIHJlbW92ZSB0aGUgcHJvZGN1dCBmcm9tIHRoZSBtZW1vcnlcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBzZXRSZW1vdmVMaXN0ZW5lcihyZW1vdmVQcm9kdWN0KSB7XG4gICAgICAgICQoXCJib2R5XCIpLm9uKFwiY2xpY2tcIiwgXCIuY2FydF9faXRlbV9fcmVtb3ZlXCIsIGZ1bmN0aW9uIChldmVudCl7XG4gICAgICAgICAgICB2YXIgY2FydGl0ZW0gICA9ICQodGhpcykucGFyZW50KCk7XG4gICAgICAgICAgICB2YXIgcHJvZHVjdF9pZCA9ICQodGhpcykucGFyZW50KCkuZGF0YShcImlkXCIpO1xuXG4gICAgICAgICAgICAvLyBSZW1vdmUgcHJvZHVjdCBmcm9tIERPTSBjYXJ0XG4gICAgICAgICAgICAkKGNhcnRpdGVtKS5hZGRDbGFzcyhcImNhcnRfX2l0ZW0tLXJlbW92ZWRcIik7XG4gICAgICAgICAgICAkKGNhcnRpdGVtKS5vbihcImFuaW1hdGlvbmVuZCB3ZWJraXRBbmltYXRpb25FbmQgb0FuaW1hdGlvbkVuZCBNU0FuaW1hdGlvbkVuZFwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZSgpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIERlY3Jlc2UgY291bnRcbiAgICAgICAgICAgIHZhciBhbW91bnQgPSAkKFwiLmNhcnRfYnV0dG9uIC5jb3VudFwiKS5odG1sKCk7XG4gICAgICAgICAgICAkKFwiLmNhcnRfYnV0dG9uIC5jb3VudFwiKS5odG1sKHBhcnNlSW50KGFtb3VudCkgLSAxKTtcblxuICAgICAgICAgICAgcmVtb3ZlUHJvZHVjdChwcm9kdWN0X2lkKVxuICAgICAgICAgICAgdXBkYXRlVG90YWxQcmljZSgtJChjYXJ0aXRlbSkuZmluZChcIi5jYXJ0X19pdGVtX19wcmljZVwiKS5odG1sKCkuc3Vic3RyKDEpKVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgLy8gUmV0dXJuIHRoZSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgcHJvZ3JhbXMgKHRoZSBjb250cm9sbGVyIGluIHRoaXMgY2FzZSlcbiAgICByZXR1cm4ge1xuICAgICAgICBzZXRWaWV3OiBzZXRWaWV3LFxuICAgICAgICBhZGRJdGVtOiBhZGRJdGVtLFxuICAgICAgICB1cGRhdGVUb3RhbFByaWNlOiB1cGRhdGVUb3RhbFByaWNlLFxuICAgICAgICBzZXRBY3Rpb25MaXN0ZW5lcjogc2V0QWN0aW9uTGlzdGVuZXIsXG4gICAgICAgIHNldEFkZFByb2R1Y3RMaXN0ZW5lcjogc2V0QWRkUHJvZHVjdExpc3RlbmVyLFxuICAgICAgICBzZXRSZW1vdmVMaXN0ZW5lcjogc2V0UmVtb3ZlTGlzdGVuZXJcbiAgICB9XG59OyIsInZhciBFcnJvclZpZXdIZWxwZXIgPSBmdW5jdGlvbigpXG57XG4gICAgLy8gQ2hhbmdlIHRoZSB2aWV3IG9mIHRoZSBwYWdlXG4gICAgZnVuY3Rpb24gc2V0VmlldygpXG4gICAge1xuICAgICAgICBkb2N1bWVudC50aXRsZSA9IFwiT2VwcyAtIEFaIEdhbWVzXCI7XG5cbiAgICAgICAgJChcIiNjb21wb25lbnRcIikubG9hZCgnL3ZpZXdzL2Vycm9yL2Vycm9yLmh0bWwnKTtcbiAgICB9XG5cbiAgICAvLyBBY3Rpb25MaXN0ZW5lciB0aGF0IGV4ZWN1dGVzIGFjdGlvbnMgb24gc3BlY2lmaWMgZXZlbnRzXG4gICAgZnVuY3Rpb24gc2V0QWN0aW9uTGlzdGVuZXIoZXZlbnRIYW5kbGVyKVxuICAgIHtcbiAgICAgICAgJChkb2N1bWVudCkucmVhZHkoZXZlbnRIYW5kbGVyKTtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBieSBvdGhlciBwcm9ncmFtcyAodGhlIGNvbnRyb2xsZXIgaW4gdGhpcyBjYXNlKVxuICAgIHJldHVybiB7XG4gICAgICAgIHNldFZpZXc6IHNldFZpZXcsXG4gICAgICAgIHNldEFjdGlvbkxpc3RlbmVyOiBzZXRBY3Rpb25MaXN0ZW5lclxuICAgIH1cbn07IiwidmFyIExvZ2luVmlld0hlbHBlciA9IGZ1bmN0aW9uKClcbntcbiAgICAvLyBDaGFuZ2UgdGhlIHZpZXcgb2YgdGhlIHBhZ2VcbiAgICBmdW5jdGlvbiBzZXRWaWV3KClcbiAgICB7XG4gICAgICAgIGRvY3VtZW50LnRpdGxlID1cIklubG9nZ2VuIC0gQVogR2FtZXNcIjtcblxuICAgICAgICAkKFwiI2NvbXBvbmVudFwiKS5sb2FkKCcvdmlld3MvbG9naW4vbG9naW4uaHRtbCcpO1xuICAgIH1cblxuICAgIC8vIEV4ZWN1dGUgdGhlIGV2ZW50IHdoZW4gJ3NvbWV0aGluZycgaGFwcGVucyAod2hlbiBhIGJ1dHRvbiBpcyBjbGlja2VkIGZvciBleGFtcGxlKVxuICAgIGZ1bmN0aW9uIHNldEFjdGlvbkxpc3RlbmVyKGFjdGlvbilcbiAgICB7XG4gICAgICAgIC8vIHVzZXIgZmlsbHMgaW4gbG9naW4gZm9ybVxuICAgICAgICAvLyB1c2VyIHByZXNzZXMgJ2xvZ2luJ1xuXG4gICAgICAgIC8vIGlmIHVzZXIgcHJlc3NlcyAnbG9naW4nLCBwZXJmb3JtIGFjdGlvbiAobWFrZSBjb250cm9sbGVyIHNlbmQgZW1haWwgYW5kIHBhc3N3b3JkIHRvIEFQSSlcbiAgICAgICAgJChcIiNjb21wb25lbnRcIikub24oXCJzdWJtaXRcIiwgXCIjbG9naW5mb3JtXCIsIGFjdGlvbik7XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHRoZSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgcHJvZ3JhbXMgKHRoZSBjb250cm9sbGVyIGluIHRoaXMgY2FzZSlcbiAgICByZXR1cm4ge1xuICAgICAgICBzZXRWaWV3OiBzZXRWaWV3LFxuICAgICAgICBzZXRBY3Rpb25MaXN0ZW5lcjogc2V0QWN0aW9uTGlzdGVuZXJcbiAgICB9XG59OyIsInZhciBMb2dvdXRWaWV3SGVscGVyID0gZnVuY3Rpb24oKVxue1xuICAgIC8vIENoYW5nZSB0aGUgdmlldyBvZiB0aGUgcGFnZVxuICAgIGZ1bmN0aW9uIHNldFZpZXcoKVxuICAgIHtcbiAgICAgICAgZG9jdW1lbnQudGl0bGUgPSBcIlVpdGxvZ2dlbiAtIEFaIEdhbWVzXCI7XG5cbiAgICAgICAgJChcIiNjb21wb25lbnRcIikubG9hZCgnL3ZpZXdzL2xvZ291dC9sb2dvdXQuaHRtbCcpO1xuICAgIH1cblxuICAgIC8vIEV4ZWN1dGUgdGhlIGV2ZW50IHdoZW4gJ3NvbWV0aGluZycgaGFwcGVucyAod2hlbiBhIGJ1dHRvbiBpcyBjbGlja2VkIGZvciBleGFtcGxlKVxuICAgIGZ1bmN0aW9uIHNldEFjdGlvbkxpc3RlbmVyKGFjdGlvbilcbiAgICB7XG4gICAgICAgICQoZG9jdW1lbnQpLnJlYWR5KGFjdGlvbik7XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHRoZSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgcHJvZ3JhbXMgKHRoZSBjb250cm9sbGVyIGluIHRoaXMgY2FzZSlcbiAgICByZXR1cm4ge1xuICAgICAgICBzZXRWaWV3OiBzZXRWaWV3LFxuICAgICAgICBzZXRBY3Rpb25MaXN0ZW5lcjogc2V0QWN0aW9uTGlzdGVuZXJcbiAgICB9XG59OyIsInZhciBQYWdlVmlld0hlbHBlciA9IGZ1bmN0aW9uKClcbntcbiAgICAvLyBDaGFuZ2UgdGhlIHZpZXcgb2YgdGhlIHBhZ2VcbiAgICBmdW5jdGlvbiBzZXRWaWV3KHZpZXdEYXRhKVxuICAgIHtcbiAgICAgICAgZG9jdW1lbnQudGl0bGUgPSBcIldlbGtvbSAtIEFaIEdhbWVzXCI7XG5cbiAgICAgICAgJChcIiNjb21wb25lbnRcIikubG9hZCgnL3ZpZXdzL3BhZ2UvcGFnZS5odG1sJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHZpZXdEYXRhWzBdLnVzZXJfdHlwZSA9PSBcImN1c3RvbWVyXCIpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgJChcIiN1c2VyLWJsb2NrXCIpLmFwcGVuZChcIjxoMT5KZSBsZWVzIGRpdCBhbGxlZW4gYWxzIGplIGVlbiBjdXN0b21lcjwvaDE+XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHZpZXdEYXRhWzBdLnVzZXJfdHlwZSA9PSBcImFkbWluXCIpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgJChcIiN1c2VyLWJsb2NrXCIpLmFwcGVuZChcIjxoMT5KZSBsZWVzIGRpdCBhbGxlZW4gYWxzIGplIGVlbiBhZG1pbmlzdHJhdG9yPC9oMT5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIEFjdGlvbkxpc3RlbmVyIHRoYXQgZXhlY3V0ZXMgYWN0aW9ucyBvbiBzcGVjaWZpYyBldmVudHNcbiAgICBmdW5jdGlvbiBzZXRBY3Rpb25MaXN0ZW5lcihldmVudEhhbmRsZXIpXG4gICAge1xuICAgICAgICAkKGRvY3VtZW50KS5yZWFkeShldmVudEhhbmRsZXIpO1xuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXG4gICAgcmV0dXJuIHtcbiAgICAgICAgc2V0Vmlldzogc2V0VmlldyxcbiAgICAgICAgc2V0QWN0aW9uTGlzdGVuZXI6IHNldEFjdGlvbkxpc3RlbmVyXG4gICAgfVxufTsiLCJ2YXIgUHJvZHVjdHNWaWV3SGVscGVyID0gZnVuY3Rpb24oKVxue1xuICAgIC8vIENoYW5nZSB0aGUgdmlldyBvZiB0aGUgcGFnZVxuICAgIGZ1bmN0aW9uIHNldFZpZXcodmlld0RhdGEpXG4gICAge1xuICAgICAgICBkb2N1bWVudC50aXRsZSA9IFwiUHJvZHVjdGVuIC0gQVogR2FtZXNcIjtcblxuICAgICAgICAkKFwiI2NvbXBvbmVudFwiKS5odG1sKCc8ZGl2IGNsYXNzPVwiY29sLTEyXCI+PGRpdiBjbGFzcz1cImNvbC0zXCIgaWQ9XCJmaWx0ZXJzXCI+PC9kaXY+PGRpdiBjbGFzcz1cImNvbC05XCIgaWQ9XCJwcm9kdWN0c1wiPjwvZGl2PjwvZGl2PicpO1xuICAgICAgICAvLyBsb2FkIGZpbHRlcnNcbiAgICAgICAgJChcIiNmaWx0ZXJzXCIpLmxvYWQoJy92aWV3cy9wcm9kdWN0cy9maWx0ZXJzLmh0bWwnKTtcblxuICAgICAgICAvLyBsb2FkIHByb2R1Y3RzXG4gICAgICAgIGxvYWRQcm9kdWN0cyh2aWV3RGF0YSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbG9hZFByb2R1Y3RzKHZpZXdEYXRhKVxuICAgIHtcbiAgICAgICAgJChcIiNwcm9kdWN0c1wiKS5sb2FkKCcvdmlld3MvcHJvZHVjdHMvcHJvZHVjdHMuaHRtbCcsIGZ1bmN0aW9uICgpIHsgLy8gd2FhciBpZCA9ICdjb21wb25lbnQnIGRvZSAubG9hZC4uLi4uLlxuICAgICAgICAgICAgJC5lYWNoKHZpZXdEYXRhLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgLy8gQ2xvbmUgcHJvZHVjdFxuICAgICAgICAgICAgICAgIHZhciBwcm9kdWN0ID0gJCgnPGRpdj4nKS5hcHBlbmQoJCgnI3Byb2R1Y3RfX2xpc3RfX2l0ZW0nKS5jbG9uZSgpKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBBZGQgcHJvZHVjdCBpbmZvXG4gICAgICAgICAgICAgICAgJChwcm9kdWN0KS5maW5kKFwiLnByb2R1Y3RfX3RpdGxlXCIpLmh0bWwodmFsdWUudGl0bGUpO1xuICAgICAgICAgICAgICAgICQocHJvZHVjdCkuZmluZChcIi5wcm9kdWN0X19zdWJ0aXRsZVwiKS5hcHBlbmQodmFsdWUuZ2VucmUgKyhcIiB8IFBFR0kgXCIpICsgdmFsdWUucGVnaV9hZ2UgKyhcIiB8IFwiKSsgUGxhdGZvcm1Mb2dvKHZhbHVlLnBsYXRmb3JtKSk7XG4gICAgICAgICAgICAgICAgJChwcm9kdWN0KS5maW5kKFwiLnByb2R1Y3RfX2Rlc2NyaXB0aW9uXCIpLmh0bWwoQ3V0U3RyaW5nKHZhbHVlLmRlc2NyaXB0aW9uKSk7XG4gICAgICAgICAgICAgICAgJChwcm9kdWN0KS5maW5kKFwiLnByb2R1Y3RfX3ByaWNlXCIpLmFwcGVuZCgoXCLigqwgXCIpK3ZhbHVlLnByaWNlKTtcbiAgICAgICAgICAgICAgICAkKHByb2R1Y3QpLmZpbmQoXCIjYnV0dG9uc19faW5mbywgLnByb2R1Y3RfX2ltYWdlIGEsIC5wcm9kdWN0X190aXRsZVwiKS5hdHRyKFwiaHJlZlwiLCBcInByb2R1Y3QvXCIgKyB2YWx1ZS5lYW5fbnVtYmVyKTtcbiAgICAgICAgICAgICAgICAkKHByb2R1Y3QpLmZpbmQoXCIucHJvZHVjdF9faW1hZ2UgaW1nXCIpLmF0dHIoXCJzcmNcIiwgdmFsdWUuaW1hZ2UpO1xuICAgICAgICAgICAgICAgICQocHJvZHVjdCkuZmluZChcIi5hZGR0b2NhcnRcIikuYXR0cihcImRhdGEtaWRcIiwgdmFsdWUuZWFuX251bWJlcik7XG5cbiAgICAgICAgICAgICAgICAkKFwiI3Byb2R1Y3RfX2xpc3RcIikuYXBwZW5kKHByb2R1Y3QpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgZmlyc3QgbGlzdCBpdGVtLCBiZWNhdXNlIHRoaXMgaXRlbSBpcyBhbHdheXMgZW1wdHlcbiAgICAgICAgICAgICQoXCIjcHJvZHVjdF9fbGlzdF9faXRlbVwiKS5maXJzdCgpLnJlbW92ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvL1Nob3cgbW9yZS9sZXNzXG4gICAgZnVuY3Rpb24gQ3V0U3RyaW5nKHRleHQpe1xuICAgICAgICB2YXIgU2hvd0Ftb3VudCA9IDUwO1xuICAgICAgICB2YXIgV29yZHNBcnJheSA9IHRleHQuc3BsaXQoXCIgXCIpO1xuICAgICAgICBpZihXb3Jkc0FycmF5Lmxlbmd0aD5TaG93QW1vdW50KXtcbiAgICAgICAgICAgIHZhciBTaG9ydFN0cmluZyA9IFwiXCI7XG4gICAgICAgICAgICBmb3IoaT0wOyBpPFNob3dBbW91bnQ7IGkrKyl7XG4gICAgICAgICAgICAgICAgU2hvcnRTdHJpbmcgKz0gV29yZHNBcnJheVtpXSArIFwiIFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFNob3J0U3RyaW5nK1wiLi4uXCI7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgcmV0dXJuIHRleHQ7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gRXhlY3V0ZSB0aGUgZXZlbnQgd2hlbiAnc29tZXRoaW5nJyBoYXBwZW5zICh3aGVuIGEgYnV0dG9uIGlzIGNsaWNrZWQgZm9yIGV4YW1wbGUpXG4gICAgZnVuY3Rpb24gc2V0QWN0aW9uTGlzdGVuZXIoYWN0aW9uKVxuICAgIHtcbiAgICAgICAgJChkb2N1bWVudCkucmVhZHkoYWN0aW9uKTsgLy8gaWYgJ2RvY3VtZW50IHJlYWR5JyBwZXJmb3JtIFwiYWN0aW9uXCJcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXRGaWx0ZXJMaXN0ZW5lcihhY3Rpb24pXG4gICAge1xuICAgICAgICAgLy8gSGllciBoZXQgZm9ybXVsaWVyIHZlcnN0dXJlbiBhbHMgd2Ugb3AgZWVuIGNoZWNrYm94IGRydWtrZW5cbiAgICAgICAgJChcIiNjb21wb25lbnRcIikub2ZmKCkub24oXCJjaGFuZ2VcIiwgXCJpbnB1dFt0eXBlPWNoZWNrYm94XVwiLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgJChcIiNwcm9kdWN0X2ZpbHRlclwiKS5zdWJtaXQoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gVXBkYXRlIGRlIHByb2R1Y3RlbmxpanN0IGFscyBlZW4gd2FhcmRlIGluIGRlIHNsaWRlciB2ZXJhbmRlcmQoYWxsZSBtYW5pZXJlbilcbiAgICAgICAgJChcIiNjb21wb25lbnRcIikub24oXCJjaGFuZ2Uga2V5dXBcIiwgXCJpbnB1dFtuYW1lPXByaWNlLW1heF0sIGlucHV0W25hbWU9cHJpY2UtbWluXVwiLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgaWYoJChcIiNwcmljZW1pblwiKS52YWwoKSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgJChcIiNwcmljZW1pblwiKS52YWwoMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgJChcIiNwcm9kdWN0X2ZpbHRlclwiKS5zdWJtaXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgJChcIiNjb21wb25lbnRcIikub24oXCJzdWJtaXRcIiwgXCIjcHJvZHVjdF9maWx0ZXJcIiwgYWN0aW9uKTtcbiAgICB9XG4gICAgLy8gUmV0dXJuIHRoZSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgcHJvZ3JhbXMgKHRoZSBjb250cm9sbGVyIGluIHRoaXMgY2FzZSlcbiAgICByZXR1cm4ge1xuICAgICAgICBzZXRWaWV3OiBzZXRWaWV3LFxuICAgICAgICBsb2FkUHJvZHVjdHM6IGxvYWRQcm9kdWN0cyxcbiAgICAgICAgc2V0QWN0aW9uTGlzdGVuZXI6IHNldEFjdGlvbkxpc3RlbmVyLFxuICAgICAgICBzZXRGaWx0ZXJMaXN0ZW5lcjogc2V0RmlsdGVyTGlzdGVuZXJcbiAgICB9XG59OyIsInZhciBSZWdpc3RlclZpZXdIZWxwZXIgPSBmdW5jdGlvbigpXG57XG4gICAgLy8gQ2hhbmdlIHRoZSB2aWV3IG9mIHRoZSBwYWdlXG4gICAgZnVuY3Rpb24gc2V0Vmlldyh2aWV3VG9TaG93KVxuICAgIHtcbiAgICAgICAgZG9jdW1lbnQudGl0bGUgPSBcIlJlZ2lzdHJlcmVuIC0gQVogR2FtZXNcIjtcbiAgICAgICAgXG4gICAgICAgICQoXCIjY29tcG9uZW50XCIpLmxvYWQodmlld1RvU2hvdywgZnVuY3Rpb24oKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XG5cbiAgICAgICAgICAgIGZvcihpID0gMTsgaSA8IDMyOyBpKyspXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgJChcIiNkYWdcIikuYXBwZW5kKFwiPG9wdGlvbiB2YWx1ZT0nXCIgKyBpICsgXCInPlwiICsgaSArIFwiPC9vcHRpb24+XCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IgKGkgPSAxOTAwOyBpIDwgZGF0ZS5nZXRGdWxsWWVhcigpICsgMTsgaSsrKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlmIChpID09IDIwMDApXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAkKFwiI2phYXJcIikuYXBwZW5kKFwiPG9wdGlvbiB2YWx1ZT0nXCIgKyBpICsgXCInIHNlbGVjdGVkPSdzZWxlY3RlZCc+XCIgKyBpICsgXCI8L29wdGlvbj5cIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICQoXCIjamFhclwiKS5hcHBlbmQoXCI8b3B0aW9uIHZhbHVlPSdcIiArIGkgKyBcIic+XCIgKyBpICsgXCI8L29wdGlvbj5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIEV4ZWN1dGUgdGhlIGV2ZW50IHdoZW4gJ3NvbWV0aGluZycgaGFwcGVucyAod2hlbiBhIGJ1dHRvbiBpcyBjbGlja2VkIGZvciBleGFtcGxlKVxuICAgIGZ1bmN0aW9uIHNldEFjdGlvbkxpc3RlbmVyKGFjdGlvbilcbiAgICB7XG4gICAgICAgIC8vIHVzZXIgZmlsbHMgaW4gcmVnaXN0ZXIgZm9ybVxuICAgICAgICAvLyB1c2VyIHByZXNzZXMgJ3JlZ2lzdGVyJ1xuXG4gICAgICAgIC8vIGlmIHVzZXIgcHJlc3NlcyAncmVnaXN0ZXInLCBwZXJmb3JtIGFjdGlvblxuICAgICAgICAkKFwiI2NvbXBvbmVudFwiKS5vbihcInN1Ym1pdFwiLCBcIiNyZWdpc3RlcmZvcm1cIiwgYWN0aW9uKTtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBieSBvdGhlciBwcm9ncmFtcyAodGhlIGNvbnRyb2xsZXIgaW4gdGhpcyBjYXNlKVxuICAgIHJldHVybiB7XG4gICAgICAgIHNldFZpZXc6IHNldFZpZXcsXG4gICAgICAgIHNldEFjdGlvbkxpc3RlbmVyOiBzZXRBY3Rpb25MaXN0ZW5lclxuICAgIH1cbn07IiwidmFyIFJlc2V0UGFzc3dvcmRWaWV3SGVscGVyID0gZnVuY3Rpb24oKVxue1xuICAgIC8vIENoYW5nZSB0aGUgdmlldyBvZiB0aGUgcGFnZVxuICAgIGZ1bmN0aW9uIHNldFZpZXcodmlld1RvU2hvdylcbiAgICB7XG4gICAgICAgIGRvY3VtZW50LnRpdGxlID0gXCJJbmxvZ2dlbiAtIEFaIEdhbWVzXCI7XG5cbiAgICAgICAgJChcIiNjb21wb25lbnRcIikubG9hZCh2aWV3VG9TaG93KTtcbiAgICB9XG5cbiAgICAvLyBBY3Rpb25MaXN0ZW5lciB0aGF0IGV4ZWN1dGVzIGFjdGlvbnMgb24gc3BlY2lmaWMgZXZlbnRzXG4gICAgZnVuY3Rpb24gc2V0QWN0aW9uTGlzdGVuZXIoZXZlbnRIYW5kbGVyKVxuICAgIHtcbiAgICAgICAgLy8kKGRvY3VtZW50KS5yZWFkeShldmVudEhhbmRsZXIpO1xuICAgICAgICAkKFwiI2NvbXBvbmVudFwiKS5vbihcInN1Ym1pdFwiLCBcIiNyZXNldGZvcm1cIiwgZXZlbnRIYW5kbGVyKTtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBieSBvdGhlciBwcm9ncmFtcyAodGhlIGNvbnRyb2xsZXIgaW4gdGhpcyBjYXNlKVxuICAgIHJldHVybiB7XG4gICAgICAgIHNldFZpZXc6IHNldFZpZXcsXG4gICAgICAgIHNldEFjdGlvbkxpc3RlbmVyOiBzZXRBY3Rpb25MaXN0ZW5lclxuICAgIH1cbn07XG5cbi8qXG52YXIgUmVzZXRQYXNzd29yZFZpZXdIZWxwZXIgPSBmdW5jdGlvbigpXG57XG4gICAgLy8gQ2hhbmdlIHRoZSB2aWV3IG9mIHRoZSBwYWdlXG4gICAgZnVuY3Rpb24gc2V0Vmlldyh2aWV3RGF0YSlcbiAgICB7XG4gICAgICAgICQoXCIjY29tcG9uZW50XCIpLmxvYWQoJ3ZpZXdzL3Jlc2V0cGFzc3dvcmQvcmVzZXRwYXNzd29yZC5odG1sJyk7XG4gICAgfVxuXG4gICAgLy8gQWN0aW9uTGlzdGVuZXIgdGhhdCBleGVjdXRlcyBhY3Rpb25zIG9uIHNwZWNpZmljIGV2ZW50c1xuICAgIGZ1bmN0aW9uIHNldEFjdGlvbkxpc3RlbmVyKGV2ZW50SGFuZGxlcilcbiAgICB7XG4gICAgICAgIC8vJChkb2N1bWVudCkucmVhZHkoZXZlbnRIYW5kbGVyKTtcbiAgICAgICAgJChcIiNjb21wb25lbnRcIikub24oXCJzdWJtaXRcIiwgXCIjcmVzZXRmb3JtXCIsIGV2ZW50SGFuZGxlcik7XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHRoZSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgcHJvZ3JhbXMgKHRoZSBjb250cm9sbGVyIGluIHRoaXMgY2FzZSlcbiAgICByZXR1cm4ge1xuICAgICAgICBzZXRWaWV3OiBzZXRWaWV3LFxuICAgICAgICBzZXRBY3Rpb25MaXN0ZW5lcjogc2V0QWN0aW9uTGlzdGVuZXJcbiAgICB9XG59O1xuKi8iLCJ2YXIgUHJvZHVjdFZpZXdIZWxwZXIgPSBmdW5jdGlvbigpXG57XG4gICAgLy8gQ2hhbmdlIHRoZSB2aWV3IG9mIHRoZSBwYWdlXG4gICAgZnVuY3Rpb24gc2V0Vmlldyhwcm9kdWN0KVxuICAgIHtcbiAgICAgICAgZG9jdW1lbnQudGl0bGUgPSBwcm9kdWN0LnRpdGxlICsgXCIgLSBBWiBHYW1lc1wiO1xuXG4gICAgICAgICAkKFwiI2NvbXBvbmVudFwiKS5sb2FkKCcvdmlld3Mvc2luZ2xlX3Byb2R1Y3Qvc2luZ2xlX3Byb2R1Y3QuaHRtbCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAkKFwiLnNpbmdsZXByb2R1Y3RfX2ltYWdlIGltZ1wiKS5hdHRyKFwic3JjXCIsIHByb2R1Y3QuaW1hZ2UpO1xuICAgICAgICAgICAgICAgICQoXCIuc2luZ2xlcHJvZHVjdF9fdGl0bGVcIikuaHRtbChwcm9kdWN0LnRpdGxlKTtcbiAgICAgICAgICAgICAgICAkKFwiLnNpbmdsZXByb2R1Y3RfX3ByaWNlXCIpLmh0bWwoXCLigqwgXCIgKyBwcm9kdWN0LnByaWNlKTtcblxuICAgICAgICAgICAgICAgICQoXCIuc2luZ2xlcHJvZHVjdF9fZWFuXCIpLmFwcGVuZChwcm9kdWN0LmVhbl9udW1iZXIpO1xuICAgICAgICAgICAgICAgICQoXCIuc2luZ2xlcHJvZHVjdF9fcGxhdGZvcm1cIikuYXBwZW5kKFBsYXRmb3JtTG9nbyhwcm9kdWN0LnBsYXRmb3JtKSk7IC8vIGZ1bmN0aWUgdm9vciBsb2dvXG4gICAgICAgICAgICAgICAgJChcIi5zaW5nbGVwcm9kdWN0X19wdWJsaXNoZXJcIikuYXBwZW5kKFBsYXRmb3JtTG9nbyhwcm9kdWN0LnB1Ymxpc2hlcikpOyAvLyBmdW5jdGllIHZvb3IgbG9nb1xuICAgICAgICAgICAgICAgICQoXCIuc2luZ2xlcHJvZHVjdF9fcGVnaVwiKS5hcHBlbmQocHJvZHVjdC5wZWdpX2FnZSk7XG4gICAgICAgICAgICAgICAgJChcIi5zaW5nbGVwcm9kdWN0X19nZW5yZVwiKS5hcHBlbmQocHJvZHVjdC5nZW5yZSk7XG4gICAgICAgICAgICAgICAgJChcIi5zaW5nbGVwcm9kdWN0X19kZXNjclwiKS5odG1sKHByb2R1Y3QuZGVzY3JpcHRpb24pXG4gICAgICAgICAgICAgICAgJChcIi5hZGR0b2NhcnRcIikuYXR0cihcImRhdGEtaWRcIiwgcHJvZHVjdC5lYW5fbnVtYmVyKTtcbiAgICAgICAgICAgICAgICAkKFwiLmFkZFRvV2lzaGxpc3RCdXR0b25cIikuYXR0cihcIm9uY2xpY2tcIiwgXCJXaXNobGlzdEhlbHBlci5hZGRJdGVtKFwiICsgcHJvZHVjdC5lYW5fbnVtYmVyICsgXCIpO1wiKTtcblxuICAgICAgICAgICAgICAgIHZhciBkID0gbmV3IERhdGUocHJvZHVjdC5yZWxlYXNlX2RhdGUpO1xuXG4gICAgICAgICAgICAgICAgdmFyIG1vbnRocyA9IFtcImphbnVhcmlcIiwgXCJmZWJydWFyaVwiLCBcIm1hYXJ0XCIsIFwiYXByaWxcIiwgXCJtZWlcIiwgXCJqdW5pXCIsIFwianVsaVwiLCBcImF1Z3VzdHVzXCIsIFwic2VwdGVtYmVyXCIsIFwib2t0b2JlclwiLCBcIm5vdmVtYmVyXCIsIFwiZGVjZW1iZXJcIl07XG5cbiAgICAgICAgICAgICAgICAkKFwiLnNpbmdsZXByb2R1Y3RfX3JlbGVhc2VkYXRlXCIpLmFwcGVuZChkLmdldERheSgpICsgXCIgXCIgKyBtb250aHNbZC5nZXRNb250aCgpXSArIFwiIFwiICsgZC5nZXRGdWxsWWVhcigpKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0QWN0aW9uTGlzdGVuZXIoYWN0aW9uKVxuICAgIHtcbiAgICAgICAgLy8gdXNlciBmaWxscyBpbiByZWdpc3RlciBmb3JtXG4gICAgICAgIC8vIHVzZXIgcHJlc3NlcyAncmVnaXN0ZXInXG5cbiAgICAgICAgLy8gaWYgdXNlciBwcmVzc2VzICdyZWdpc3RlcicsIHBlcmZvcm0gYWN0aW9uXG4gICAgICAgICQoZG9jdW1lbnQpLnJlYWR5KGFjdGlvbik7XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHRoZSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgcHJvZ3JhbXMgKHRoZSBjb250cm9sbGVyIGluIHRoaXMgY2FzZSlcbiAgICByZXR1cm4ge1xuICAgICAgICBzZXRWaWV3OiBzZXRWaWV3LFxuICAgICAgICBzZXRBY3Rpb25MaXN0ZW5lcjogc2V0QWN0aW9uTGlzdGVuZXJcbiAgICB9XG59OyIsInZhciBXaXNobGlzdFZpZXdIZWxwZXIgPSBmdW5jdGlvbigpXG57XG4gICAgLy9jaGFuZ2UgdmlldyBvZiBwYWdlXG4gICAgZnVuY3Rpb24gc2V0Vmlldyh2aWV3RGF0YSlcbiAgICB7XG4gICAgICAgIC8vY29uc29sZS5sb2coXCJXTCBWSUVXOiBJbnNpZGUgc2V0Vmlld1wiKTtcbiAgICAgICAgZG9jdW1lbnQudGl0bGUgPSBcIldpc2hsaXN0IC0gQVogR2FtZXNcIjtcbiAgICAgICAgJChcIiNjb21wb25lbnRcIikuaHRtbCgnPGRpdiBjbGFzcz1cImNvbC0xMlwiPjxkaXYgY2xhc3M9XCJjb2wtMTJcIiBpZD1cIndpc2hsaXN0XCI+PC9kaXY+PC9kaXY+Jyk7XG5cbiAgICAgICAgbG9hZFdpc2hsaXN0KHZpZXdEYXRhKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsb2FkV2lzaGxpc3Qodmlld0RhdGEpXG4gICAge1xuICAgICAgICAvL2NvbnNvbGUubG9nKFwiV0wgVklFVzogSW5zaWRlIGxvYWRXaXNoTGlzdFwiKTtcbiAgICAgICAgJChcIiN3aXNobGlzdFwiKS5sb2FkKCcvdmlld3Mvd2lzaGxpc3Qvd2lzaGxpc3QuaHRtbCcsIGZ1bmN0aW9uICgpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnQgPSAwXG5cbiAgICAgICAgICAgICAgICAvLyBVU0VSIEZJUlNUIE5BTUVcbiAgICAgICAgICAgICAgICAvLyQod2lzaF9fbGlzdF9faGVhZHRpdGxlKS5maW5kKFwid2lzaF9fbGlzdF9faGVhZHRpdGxlXCIpLmFwcGVuZCh1c2VyX2lkKTtcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHZpZXdEYXRhLmZpcnN0X25hbWUpO1xuXG4gICAgICAgICAgICAgICAgJC5lYWNoKHZpZXdEYXRhLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIENsb25lIHByb2R1Y3RcbiAgICAgICAgICAgICAgICAgICAgdmFyIHdpc2hfX2xpc3RfX2l0ZW0gPSAkKCc8ZGl2PicpLmFwcGVuZCgkKCcjd2lzaF9fbGlzdF9faXRlbScpLmNsb25lKCkpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIEFkZCBwcm9kdWN0IGluZm9cbiAgICAgICAgICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQgKzFcbiAgICAgICAgICAgICAgICAgICAgJCh3aXNoX19saXN0X19pdGVtKS5maW5kKFwiI2RlbGV0ZV9idG5cIikuYXR0cihcImRhdGEtaWRcIiwgdmFsdWUuZWFuX251bWJlcik7XG4gICAgICAgICAgICAgICAgICAgICQod2lzaF9fbGlzdF9faXRlbSkuZmluZChcIi53aXNoX19saXN0X19pZFwiKS5hcHBlbmQoY3VycmVudCk7XG4gICAgICAgICAgICAgICAgICAgICQod2lzaF9fbGlzdF9faXRlbSkuZmluZChcIi53aXNoX19saXN0X19pbWFnZSBpbWdcIikuYXR0cihcInNyY1wiLCB2YWx1ZS5pbWFnZSk7XG4gICAgICAgICAgICAgICAgICAgICQod2lzaF9fbGlzdF9faXRlbSkuZmluZChcIi53aXNoX19saXN0X190aXRsZVwiKS5odG1sKHZhbHVlLnRpdGxlKTtcbiAgICAgICAgICAgICAgICAgICAgJCh3aXNoX19saXN0X19pdGVtKS5maW5kKFwiLndpc2hfX2xpc3RfX3ByaWNlXCIpLmFwcGVuZCgoXCLigqwgXCIpK3ZhbHVlLnByaWNlKTtcbiAgICAgICAgICAgICAgICAgICAgJCh3aXNoX19saXN0X19pdGVtKS5maW5kKFwiLndpc2hfX2xpc3RfX3BsYXRmb3JtXCIpLmFwcGVuZChQbGF0Zm9ybUxvZ28odmFsdWUucGxhdGZvcm0pKTtcbiAgICAgICAgICAgICAgICAgICAgJCh3aXNoX19saXN0X19pdGVtKS5maW5kKFwiLndpc2hfX2xpc3RfX2F2YWlsYWJpbGl0eVwiKS5hcHBlbmQoQmVzY2hpa2JhYXJoZWlkS2xldXIodmFsdWUuc3RvY2spKTtcbiAgICAgICAgICAgICAgICAgICAgJCh3aXNoX19saXN0X19pdGVtKS5maW5kKFwiLndpc2hfX2xpc3RfX2xpa2VidXR0b25cIikuYXBwZW5kKCk7XG4gICAgICAgICAgICAgICAgICAgICQod2lzaF9saXN0X2l0ZW0pXG5cbiAgICAgICAgICAgICAgICAgICAgJChcIiN3aXNoX19saXN0XCIpLmFwcGVuZCh3aXNoX19saXN0X19pdGVtKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBSZW1vdmUgdGhlIGZpcnN0IGxpc3QgaXRlbSwgYmVjYXVzZSB0aGlzIGl0ZW0gaXMgYWx3YXlzIGVtcHR5XG4gICAgICAgICAgICAkKFwiI3dpc2hfX2xpc3RfX2l0ZW1cIikuZmlyc3QoKS5yZW1vdmUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNldEFjdGlvbkxpc3RlbmVyKGFjdGlvbilcbiAgICB7XG4gICAgICAgIC8vY29uc29sZS5sb2coXCJXTCBWSUVXOiBJbnNpZGUgc2V0QWN0aW9uTGlzdGVuZXJcIik7XG4gICAgICAgICQoZG9jdW1lbnQpLnJlYWR5KGFjdGlvbik7IC8vIGlmICdkb2N1bWVudCByZWFkeScgcGVyZm9ybSBcImFjdGlvblwiICAgICAgIFxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldERlbGV0ZUxpc3RlbmVyKGFjdGlvbilcbiAgICB7XG4gICAgICAgICQoXCIud2lzaF9fbGlzdF9fZGVsZXRlYnV0dG9uXCIpLm9mZigpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7IGFjdGlvbigpOyB9ICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgc2V0Vmlldzogc2V0VmlldyxcbiAgICAgICAgbG9hZFdpc2hsaXN0OiBsb2FkV2lzaGxpc3QsXG4gICAgICAgIHNldEFjdGlvbkxpc3RlbmVyOiBzZXRBY3Rpb25MaXN0ZW5lcixcbiAgICAgICAgc2V0RGVsZXRlTGlzdGVuZXI6IHNldERlbGV0ZUxpc3RlbmVyXG4gICAgfVxufSJdfQ==

function PlatformLogo(e){switch(e=e.toUpperCase()){case"PS1":return"<img src='/resources/images/icons/ps1.png' />";case"PS4":return"<img src='/resources/images/icons/ps4.png' />";case"PC":return"<img src='/resources/images/icons/windows.png' />";case"XBOX":return"<img src='/resources/images/icons/xbox.png' />";case"NES":return"<img src='/resources/images/icons/nes.png' />";case"N64":return"<img src='/resources/images/icons/n64.png' />";case"NINTENDO SWITCH":return"<img src='/resources/images/icons/switch.png' />";default:return e;case"NINTENDO":return"<img src='/resources/images/publishers/nintendo.png' />";case"UBISOFT":return"<img src='/resources/images/publishers/ubisoft.png' />";case"ELECTRONIC ARTS":return"<img src='/resources/images/publishers/ea.png' />"}}function BeschikbaarheidKleur(e){return e<=0?"<img src='/resources/images/availability/buttonred.png' />":e>=1?"<img src='/resources/images/availability/buttongreen.png' />":e}function CartHelper(){this.removeProduct=function(e){},this.addProduct=function(e){}}function CookieHelper(){this.getCookie=function(e){for(var t=document.cookie.split(";"),n=0;n<t.length;n++){var i=t[n].split("=");if(i[0].trim()==e)return i[1]}},this.createCookie=function(e,t){document.cookie=e+"="+t+";"},this.deleteCookie=function(e){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;"}}function showLoadScreen(){$("#component").html('<div class="spinner"><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div> </div>')}function onLoadPage(){UserHelper.isAdmin()?($(".visible-admin").css("display","inline-block"),$(".visible-customer").css("display","inline-block"),$("#inloggen_text").hide()):UserHelper.isCustomer()?($(".visible-customer").css("display","inline-block"),$("#inloggen_text").hide()):($(".visible-admin").hide(),$(".visible-customer").hide(),$("#inloggen_text").css("display","inline-block"))}function UserHelper(){this.isLogedIn=function(){var e=CookieHelper.getCookie("access_token");return void 0!=e&&""!=e},this.isCustomer=function(){if(UserHelper.isLogedIn()){var e=this.decodeToken().usertype;if("customer"==e||"admin"==e)return!0}return!1},this.isAdmin=function(){if(UserHelper.isLogedIn()){var e=this.decodeToken().usertype;if("admin"==e)return!0}return!1},this.decodeToken=function(){var e=CookieHelper.getCookie("access_token");if(void 0!=e&&""!=e){var t=e.split(".")[1];return JSON.parse(atob(t))}}}function WishlistHelper(){this.addItem=function(e){$.ajax({url:"http://localhost:8081/wishlist/"+CookieHelper.getCookie("user_id")+"/"+e,type:"post",dataType:"json",data:JSON.stringify({}),headers:{Authorization:"Bearer "+CookieHelper.getCookie("access_token")},success:function(e){$(this).toggleClass("like--active"),alert("Product succesvol toegevoegd aan Wishlist.")},error:function(e,t,n){alert("Product is al in Wishlist.")}})}}$(document).on("click","span.like",function(e){$(this).toggleClass("like--active")}),$(document).on("click","span.single_like",function(e){$(this).toggleClass("single_like--active")});var Router=function(){function e(e,r){if(0!=t(e)){var o=n(e);switch(o[0]){case"":case"index.html":case"products":new ProductsController(new ProductsViewHelper,new ProductsModel).main();break;case"product":new ProductController(new ProductViewHelper,new ProductModel(o[1])).main();break;case"register":new RegisterController(new RegisterViewHelper,new RegisterModel).main();break;case"login":new LoginController(new LoginViewHelper,new LoginModel).main();break;case"logout":new LogoutController(new LogoutViewHelper,new LogoutModel).main();break;case"register":new RegisterController(new RegisterViewHelper,new RegisterModel).main();break;case"resetpassword":new ResetPasswordController(new ResetPasswordViewHelper,new ResetPasswordModel).main();break;case"wishlist":new WishlistController(new WishlistViewHelper,new WishlistModel).main();break;case"admin":new AdminController(new AdminViewHelper,new AdminModel).main();break;case"admin_user":new AdminUserController(new AdminUserViewHelper,new AdminUserModel(o[1])).main();break;default:new ErrorController(new ErrorViewHelper).main()}0!=r&&""!=e&&"string"==typeof e&&(i({},"A-Z Games",e),showLoadScreen(),window.scrollTo(0,0))}}function t(e){return e.indexOf("http")==-1&&e.indexOf("https")==-1&&e.indexOf("www")==-1||(window.location=e,!1)}function n(e){return 0==e.indexOf("/")&&(e=e.substring(1)),null!=this.baseUrl&&e.indexOf(this.baseUrl)!=-1&&(e=e.substring(e.indexOf(this.baseUrl)+this.baseUrl.length)),e.split(/\/(.+)?/)}function i(e,t,n){window.history.pushState(e,t,n)}return baseUrl="project-webshop/",{route:e}};$(document).ready(function(){function e(e){$(e).toggleClass("sidebar--open"),$(".overlay").toggleClass("overlay--visible"),$("body").toggleClass("sidebar--open")}$(".sidebar-toggle").click(function(t){t.preventDefault();var n=$(this).data("sidebar");e($("#"+n))}),$(".sidebar__close").click(function(t){e($(this).parent().parent())}),$(".overlay").click(function(t){e($(".sidebar"))})});var Router=new Router,CookieHelper=new CookieHelper,UserHelper=new UserHelper,WishlistHelper=new WishlistHelper;$.fn.serializeObject=function(){var e={},t=this.serializeArray();return $.each(t,function(){void 0!==e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),""!=this.value&&e[this.name].push(this.value)):""!=this.value&&(e[this.name]=this.value||"")}),e};var AdminUserModel=function(e){function t(t){$.ajax({url:"https://api.az-games.nl/admin/users/"+e,type:"GET",dataType:"json",headers:{Authorization:"Bearer "+CookieHelper.getCookie("access_token")},success:function(e){t(e)},error:function(e,t,n){$("#component").load("/views/error/error.html")}})}function n(e,t){$.ajax({url:"https://api.az-games.nl/admin/users/"+e.user_id,type:"PATCH",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify(e),headers:{Authorization:"Bearer "+CookieHelper.getCookie("access_token")},success:function(e){t(e)},error:function(e,t,n){$("#component").load("/views/error/error.html")}})}function i(e,t){$.ajax({url:"https://api.az-games.nl/admin/users/"+e,type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+CookieHelper.getCookie("access_token")},success:function(e){t()},error:function(e,t,n){$("#component").load("/views/error/error.html")}})}return{getPage:t,saveUserInfo:n,deleteUser:i}},AdminModel=function(){function e(e){$.ajax({url:"https://api.az-games.nl/admin/users",type:"GET",dataType:"json",headers:{Authorization:"Bearer "+CookieHelper.getCookie("access_token")},success:function(t){e(t)},error:function(e,t,n){$("#component").load("/views/error/error.html")}})}return{getPage:e}},CartModel=function(){function e(e){var t=CookieHelper.getCookie("cart");void 0!=t&&e(JSON.parse(t))}function t(e,t){$.ajax({url:"https://api.az-games.nl/products/"+e,type:"get",contentType:"json",success:function(e){cart={ean_number:e[0].ean_number,title:e[0].title,price:e[0].price,image:e[0].image},t(cart);var n=CookieHelper.getCookie("cart");void 0==n?CookieHelper.createCookie("cart",JSON.stringify([cart])):(n=JSON.parse(n),n.push(cart),CookieHelper.createCookie("cart",JSON.stringify(n)))},error:function(e,t,n){$("#component").load("/views/error/error.html")}})}function n(e){for(cart=JSON.parse(CookieHelper.getCookie("cart")),i=0;i<cart.length;i++)if(cart[i].ean_number==e){cart.splice(i,1);break}CookieHelper.createCookie("cart",JSON.stringify(cart))}return{getCart:e,addProduct:t,removeProduct:n}},LoginModel=function(){function e(e,t,n){$.ajax({url:"https://api.az-games.nl/user/login",type:"GET",dataType:"json",headers:{Authorization:"Basic "+btoa(e+":"+t)},success:function(e){CookieHelper.createCookie("access_token",e.access_token),CookieHelper.createCookie("user_id",e.user_id),onLoadPage(),n(e)},error:function(e,t,n){$("#error_message").show()}})}return{login:e}},LogoutModel=function(){function e(e){function t(e){for(var t=document.cookie.split(";"),n=0;n<t.length;n++){var i=t[n].split("=");if(i[0].trim()==e)return i[1]}}$.ajax({url:"https://api.az-games.nl/user/logout",type:"post",dataType:"json",data:JSON.stringify({user_id:t("user_id")}),success:function(t){CookieHelper.deleteCookie("access_token"),CookieHelper.deleteCookie("user_id"),onLoadPage(),e(t)},error:function(e,t,n){$("#error_message").show()}})}return{logout:e}},PageModel=function(){function e(e){$.ajax({url:"https://api.az-games.nl/user",type:"get",dataType:"json",headers:{Authorization:"Bearer "+CookieHelper.getCookie("access_token")},success:function(t){e(t)},error:function(e,t,n){$("#component").load("/views/error/error.html")}})}return{getPage:e}},ProductsModel=function(){function e(e,t){$.ajax({url:"https://api.az-games.nl/products?"+e,type:"get",dataType:"json",success:function(e){t(e)},error:function(e,t,n){$("#component").load("/views/error/error.html")}})}return{getPage:e}},RegisterModel=function(){function e(e,t){$.ajax({url:"https://api.az-games.nl/user/register",type:"post",dataType:"json",data:JSON.stringify({e_mail:e.e_mailadres,password:e.wachtwoord,first_name:e.voornaam,insertion:e.tussenvoegsel,surname:e.achternaam,gender:e.gender,date_of_birth:e.birth_date,phone_number:e.mobiel_nummer,secret_question:e.security_question,secret_question_answer:e.security_answer,postal_code:e.postcode,number:e.huisnummer,street_name:e.straatnaam,city:e.plaats}),success:function(e){t(e)},error:function(e,t,n){$("#regi_api_error_message").show()}})}return{register:e}},ResetPasswordModel=function(){function e(e,t){console.log(e),$.ajax({url:"https://api.az-games.nl/user/resetpassword",type:"post",dataType:"json",data:JSON.stringify({email:e.e_mailadres,secret_question_answer:e.security_answer,secret_question:e.security_question,new_password:e.wachtwoord,repeat_password:e.wachtwoord2}),success:function(e){t(e)},error:function(e,t,n){$("#reset_password_api_error_message").show()}})}return{resetpassword:e}},ProductModel=function(e){function t(t){$.ajax({url:"https://api.az-games.nl/products/"+e,type:"get",dataType:"json",success:function(e){t(e[0])},error:function(e,t,n){$("#component").load("/views/error/error.html")}})}return{GetProductInfo:t}},UserModel=function(e){function t(t){$.ajax({url:"https://api.az-games.nl/users/"+e,type:"get",dataType:"json",success:function(e){t(e[0])},error:function(e,t,n){$("#component").load("/error.html")}})}return{GetUserInfo:t}},WishlistModel=function(){function e(e){$.ajax({url:"http://localhost:8081/wishlist",type:"get",dataType:"json",headers:{Authorization:"Bearer "+CookieHelper.getCookie("access_token")},success:function(t){e(t)},error:function(e,t,n){$("#component").load("/views/error/error.html")}})}function t(e,t){$.ajax({url:"http://localhost:8081/wishlist/"+CookieHelper.getCookie("user_id"),type:"post",dataType:"json",data:JSON.stringify({wishlist_id:e.wishlist_id}),headers:{Authorization:"Bearer "+CookieHelper.getCookie("access_token")},success:function(e){t(e)},error:function(e,t,n){$("#component").load("/views/error/error.html")}})}function n(e,t){$.ajax({url:"http://localhost:8081/wishlist/"+CookieHelper.getCookie("user_id")+"/"+String(e),type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+CookieHelper.getCookie("access_token")},success:function(e){t(e)},error:function(e,t,n){$("#component").load("/views/error/error.html")}})}return{getWishlist:e,addToWishlist:t,deleteFromWishlist:n}},AdminUserController=function(e,t){function n(){c.setActionListener(i),e.setSaveListener(o),e.setDeleteListener(s)}function i(){a.getPage(r)}function r(e){c.setView(e)}function o(e){e.preventDefault(),e.stopImmediatePropagation();var t=$(this).serializeObject();a.saveUserInfo(t,function(e){alert("Gebruiker succesvol geüpdate.")})}function s(e){a.deleteUser(e,function(){alert("Gebruiker succesvol gedelete."),Router.route("/admin")})}var a=t,c=e;return{main:n}},AdminController=function(e,t){function n(){s.setActionListener(i)}function i(){o.getPage(r)}function r(e){s.setView(e)}var o=t,s=e;return{main:n}},CartController=function(e,t){function n(){s.getCart(function(e){a.setView(e)})}function i(e){s.addProduct(e,function(e){a.addItem(e)})}function r(e){s.removeProduct(e,function(e){})}function o(){a.setActionListener(n),a.setAddProductListener(i),a.setRemoveListener(r)}var s=t,a=e;return{main:o}},DeleteController=function(e,t){},ErrorController=function(e){function t(){n.setView()}var n=e;return{main:t}},LoginController=function(e,t){function n(e){e.preventDefault(),e.stopImmediatePropagation();var t={};$.each($(this).serializeArray(),function(e,n){t[n.name]=n.value}),r.login(t.email,t.password,function(e){$("#inloggen_text").hide(),$("#uitloggen_text").show(),new PageController(new PageViewHelper,new PageModel).main()})}function i(){o.setView(),o.setActionListener(n)}var r=t,o=e;return{main:i}},LogoutController=function(e,t){function n(e){r.logout(function(e){$("#inloggen_text").show(),$("#uitloggen_text").hide(),o.setView()})}function i(){o.setActionListener(n)}var r=t,o=e;return{main:i}},PageController=function(e,t){function n(e){r.getPage(function(e){o.setView(e)})}function i(){o.setActionListener(n)}var r=t,o=e;return{main:i}},ProductsController=function(e,t){function n(){o.getPage("",function(e){s.setView(e)})}function i(e){e.preventDefault();var t=$(this).serialize();o.getPage(t,function(e){s.loadProducts(e)})}function r(){s.setActionListener(n),s.setFilterListener(i)}var o=t,s=e;return{main:r}},RegisterController=function(e,t){function n(){console.log("in actionPerformed"),event.preventDefault(),$("#regi_api_error_message").hide(),$("#ww2_error_message").hide();var e={};$.each($(this).serializeArray(),function(t,n){e[n.name]=n.value}),e.birth_date=e.jaar+"-"+e.maand+"-"+e.dag,console.log(e);var t=!1,n=["voornaam","achternaam","postcode","huisnummer","e_mailadres","wachtwoord","wachtwoord2","security_answer"];$.each(n,function(e,t){$("#"+t).removeClass("invalid")}),$.each(n,function(n,i){""==e[i]&&($("#"+i).addClass("invalid"),t=!0)}),t&&(window.scrollTo(0,0),$("#register_error_message").show());var i=!1;return e.wachtwoord!=e.wachtwoord2&&(i=!0,$("#ww2_error_message").show(),$("#wachtwoord").addClass("invalid"),$("#wachtwoord2").addClass("invalid")),!t&&!i&&(console.log("continued"),void r.register(e,function(e){o.setView("/views/register/after_register.html")}))}function i(){o.setView("/views/register/register.html"),o.setActionListener(n)}var r=t,o=e;return{main:i}},ResetPasswordController=function(e,t){function n(){console.log("in actionPerformed"),event.preventDefault(),$("#reset_password_api_error_message").hide(),$("#ww2_error_message").hide();var e={};$.each($(this).serializeArray(),function(t,n){e[n.name]=n.value});var t=!1,n=["wachtwoord","wachtwoord2","e_mailadres","security_answer"];$.each(n,function(e,t){$("#"+t).removeClass("invalid")}),$.each(n,function(n,i){""==e[i]&&($("#"+i).addClass("invalid"),t=!0)}),t&&(window.scrollTo(0,0),$("#reset_error_message").show());var i=!1;return e.wachtwoord!=e.wachtwoord2&&(i=!0,$("#ww2_error_message").show(),$("#wachtwoord").addClass("invalid"),$("#wachtwoord2").addClass("invalid")),!t&&!i&&(console.log("continued"),void r.resetpassword(e,function(e){o.setView("views/resetpassword/after_reset.html")}))}function i(){o.setView("views/resetpassword/resetpassword.html"),o.setActionListener(n)}var r=t,o=e;return{main:i}},ProductController=function(e,t){function n(t){e.setView(t)}function i(){t.GetProductInfo(n)}return{main:i,showView:n}},WishlistController=function(e,t){function n(){s.getWishlist(i)}function i(e){a.setView(e)}function r(){a.setActionListener(n),a.setDeleteListener(o)}function o(e,t){s.deleteFromWishlist(e,function(){t.fadeTo(200,0).slideUp(200)})}var s=t,a=e;return{main:r}},AdminViewHelper=function(){function e(e){$(document).ready(e)}function t(e){document.title="Admin - AZ Games",$("#component").load("/views/admin/admin.html",function(){$.each(e,function(e,t){var n=$("#single_user").clone();$(n).find(".user__firstname").html(t.first_name),$(n).find(".user__firstname").attr("href","/admin_user/"+t.user_id),$(n).find(".user__insertion").html(t.insertion),$(n).find(".user__lastname").html(t.surname),$(n).find(".user__email").html(t.email),$(n).find(".user__phonenumber").html(t.phone_number),$("#users_body").append(n)}),$("#single_user").first().remove()})}return{setActionListener:e,setView:t}},AdminUserViewHelper=function(){function e(e){$(document).ready(e)}function t(e){$("#component").load("/views/adminuser/adminuser.html",function(){$.each(e,function(e,t){$("#delete_btn").attr("data-id",t.user_id),$("#first_name").val(t.first_name),$("#insertion").val(t.insertion),$("#surname").val(t.surname),$("#user_type").val(t.user_type),$("#email").val(t.email),$("#password").attr("placeholder","Vul hier iets in om het wachtwoord te veranderen"),$("#gender").val(t.gender),$("#date_of_birth").val(t.date_of_birth),$("#phone_number").val(t.phone_number),$("#is_active").val(t.is_active),$("#user_id").val(t.user_id)})})}function n(e){$(document).on("submit","#userform",e)}function i(e){$("#component").off().on("click","#delete_btn",function(t){t.preventDefault(),e($(this).data("id"))})}return{setActionListener:e,setView:t,setSaveListener:n,setDeleteListener:i}},CartViewHelper=function(){function e(e){""!=e&&e.forEach(function(e,t){n(e)})}function t(e){e=parseFloat(e)+parseFloat($(".cart__total .price").html().substr(1)),$(".cart__total .price").html("€"+parseFloat(e).toFixed(2))}function n(e){var n=$("<div>").html($(".sidebar__content__tmp").html());n.find(".cart__item__title").html(e.title),n.find(".cart__item__price").html("€"+e.price),n.find(".cart__item__image img").attr("src",e.image),n.find(".cart__item").attr("data-id",e.ean_number),$(".cart").append(n);var i=$(".cart_button .count").html();$(".cart_button .count").html(parseInt(i)+1),t(e.price)}function i(e){$(document).ready(e)}function r(e){$("body").on("click",".addtocart",function(t){t.preventDefault();var n=$(this).data("id");e(n)})}function o(e){$("body").on("click",".cart__item__remove",function(n){var i=$(this).parent(),r=$(this).parent().data("id");$(i).addClass("cart__item--removed"),$(i).on("animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",function(){$(this).remove()});var o=$(".cart_button .count").html();$(".cart_button .count").html(parseInt(o)-1),e(r),t(-$(i).find(".cart__item__price").html().substr(1))})}return{setView:e,addItem:n,updateTotalPrice:t,setActionListener:i,setAddProductListener:r,setRemoveListener:o}},ErrorViewHelper=function(){function e(){document.title="Oeps - AZ Games",$("#component").load("/views/error/error.html")}function t(e){$(document).ready(e)}return{setView:e,setActionListener:t}},LoginViewHelper=function(){function e(){document.title="Inloggen - AZ Games",$("#component").load("/views/login/login.html")}function t(e){$("#component").on("submit","#loginform",e)}return{setView:e,setActionListener:t}},LogoutViewHelper=function(){function e(){document.title="Uitloggen - AZ Games",$("#component").load("/views/logout/logout.html")}function t(e){$(document).ready(e)}return{setView:e,setActionListener:t}},PageViewHelper=function(){function e(e){document.title="Welkom - AZ Games",$("#component").load("/views/page/page.html",function(){"customer"==e[0].user_type&&$("#user-block").append("<h1>Je lees dit alleen als je een customer</h1>"),"admin"==e[0].user_type&&$("#user-block").append("<h1>Je lees dit alleen als je een administrator</h1>")})}function t(e){$(document).ready(e)}return{setView:e,setActionListener:t}},ProductsViewHelper=function(){function e(e){document.title="Producten - AZ Games",$("#component").html('<div class="col-12"><div class="col-3" id="filters"></div><div class="col-9" id="products"></div></div>'),$("#filters").load("/views/products/filters.html"),t(e)}function t(e){$("#products").load("/views/products/products.html",function(){$.each(e,function(e,t){var i=$("<div>").append($("#product__list__item").clone());$(i).find(".product__title").html(t.title),$(i).find(".product__subtitle").append(t.genre+" | PEGI "+t.pegi_age+" | "+PlatformLogo(t.platform)),$(i).find(".product__description").html(n(t.description)),$(i).find(".product__price").append("€ "+t.price),$(i).find("#buttons__info, .product__image a, .product__title").attr("href","product/"+t.ean_number),$(i).find(".product__image img").attr("src",t.image),$(i).find(".addtocart").attr("data-id",t.ean_number),$("#product__list").append(i)}),$("#product__list__item").first().remove()})}function n(e){var t=50,n=e.split(" ");if(n.length>t){var r="";for(i=0;i<t;i++)r+=n[i]+" ";return r+"..."}return e}function r(e){$(document).ready(e)}function o(e){$("#component").off().on("change","input[type=checkbox]",function(e){$("#product_filter").submit()}),$("#component").on("change keyup","input[name=price-max], input[name=price-min]",function(e){null==$("#pricemin").val()?$("#pricemin").val(0):$("#product_filter").submit()}),$("#component").on("submit","#product_filter",e)}return{setView:e,loadProducts:t,setActionListener:r,setFilterListener:o}},RegisterViewHelper=function(){function e(e){document.title="Registreren - AZ Games",$("#component").load(e)}function t(e){$("#component").on("submit","#registerform",e)}return{setView:e,setActionListener:t}},ResetPasswordViewHelper=function(){function e(e){document.title="Inloggen - AZ Games",$("#component").load(e)}function t(e){$("#component").on("submit","#resetform",e)}return{setView:e,setActionListener:t}},ProductViewHelper=function(){function e(e){document.title=e.title+" - AZ Games",$("#component").load("/views/single_product/single_product.html",function(){$(".singleproduct__image img").attr("src",e.image),$(".singleproduct__title").html(e.title),$(".singleproduct__price").html("€ "+e.price),$(".singleproduct__ean").append(e.ean_number),$(".singleproduct__platform").append(PlatformLogo(e.platform)),$(".singleproduct__publisher").append(PlatformLogo(e.publisher)),$(".singleproduct__pegi").append(e.pegi_age),$(".singleproduct__genre").append(e.genre),$(".singleproduct__descr").html(e.description),$(".addtocart").attr("data-id",e.ean_number),$(".addToWishlistButton").attr("onclick","WishlistHelper.addItem("+e.ean_number+");");var t=new Date(e.release_date),n=["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"];$(".singleproduct__releasedate").append(t.getDay()+" "+n[t.getMonth()]+" "+t.getFullYear())})}function t(e){$(document).ready(e)}return{setView:e,setActionListener:t}},WishlistViewHelper=function(){function e(e){document.title="Wishlist - AZ Games",$("#component").html('<div class="col-12"><div class="col-12" id="wishlist"></div></div>'),t(e)}function t(e){$("#wishlist").load("/views/wishlist/wishlist.html",function(){var t=0;$.each(e,function(e,n){var i=$("<div>").append($("#wish__list__item").clone());t+=1,$(i).find("#delete_btn").attr("data-id",n.ean_number),$(i).find(".wish__list__id").append(t),$(i).find(".wish__list__image img").attr("src",n.image),$(i).find(".wish__list__title").html(n.title),$(i).find(".wish__list__price").append("€ "+n.price),$(i).find(".wish__list__platform").append(PlatformLogo(n.platform)),$(i).find(".wish__list__availability").append(BeschikbaarheidKleur(n.stock)),$(i).find(".wish__list__likebutton").append(),$("#wish__list").append(i)}),$("#wish__list__item").first().remove()})}function n(e){$(document).ready(e)}function i(e){$("#component").off().on("click","#delete_btn",function(t){t.preventDefault();var n=$(this).data("id"),i=$(this).closest(".row");e(n,i)})}return{setView:e,loadWishlist:t,setActionListener:n,setDeleteListener:i}};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1pbm9ydG9vbHMuanMiLCJoZWxwZXJzL2NhcnQuanMiLCJoZWxwZXJzL2Nvb2tpZS5qcyIsImhlbHBlcnMvZ2xvYmFsLmpzIiwiaGVscGVycy91c2VyLmpzIiwiaGVscGVycy93aXNobGlzdC5qcyIsInJvdXRlci5qcyIsInNpZGViYXIuanMiLCJoZWxwZXJzL3NlcmlhbGl6ZW9iamVjdC5qcyIsImFkbWludXNlcl9tb2RlbC5qcyIsImFkbWluX21vZGVsLmpzIiwiY2FydF9tb2RlbC5qcyIsImxvZ2luX21vZGVsLmpzIiwibG9nb3V0X21vZGVsLmpzIiwicGFnZV9tb2RlbC5qcyIsInByb2R1Y3RzX21vZGVsLmpzIiwicmVnaXN0ZXJfbW9kZWwuanMiLCJyZXNldHBhc3N3b3JkX21vZGVsLmpzIiwic2luZ2xlX3Byb2R1Y3RfbW9kZWwuanMiLCJ1c2VyX21vZGVsLmpzIiwid2lzaGxpc3RfbW9kZWwuanMiLCJhZG1pbnVzZXJfY29udHJvbGxlci5qcyIsImFkbWluX2NvbnRyb2xsZXIuanMiLCJjYXJ0X2NvbnRyb2xsZXIuanMiLCJkZWxldGVfY29udHJvbGxlci5qcyIsImVycm9yX2NvbnRyb2xsZXIuanMiLCJsb2dpbl9jb250cm9sbGVyLmpzIiwibG9nb3V0X2NvbnRyb2xsZXIuanMiLCJwYWdlX2NvbnRyb2xsZXIuanMiLCJwcm9kdWN0c19jb250cm9sbGVyLmpzIiwicmVnaXN0ZXJfY29udHJvbGxlci5qcyIsInJlc2V0cGFzc3dvcmRfY29udHJvbGxlci5qcyIsInNpbmdsZV9wcm9kdWN0X2NvbnRyb2xsZXIuanMiLCJ3aXNobGlzdF9jb250cm9sbGVyLmpzIiwiYWRtaW4vYWRtaW5fdmlldy5qcyIsImFkbWludXNlci9hZG1pbnVzZXJfdmlldy5qcyIsImNhcnQvY2FydF92aWV3LmpzIiwiZXJyb3IvZXJyb3Jfdmlldy5qcyIsImxvZ2luL2xvZ2luX3ZpZXcuanMiLCJsb2dvdXQvbG9nb3V0X3ZpZXcuanMiLCJwYWdlL3BhZ2Vfdmlldy5qcyIsInByb2R1Y3RzL3Byb2R1Y3RzX3ZpZXcuanMiLCJyZWdpc3Rlci9yZWdpc3Rlcl92aWV3LmpzIiwicmVzZXRwYXNzd29yZC9yZXNldHBhc3N3b3JkX3ZpZXcuanMiLCJzaW5nbGVfcHJvZHVjdC9zaW5nbGVfcHJvZHVjdF92aWV3LmpzIiwid2lzaGxpc3Qvd2lzaGxpc3Rfdmlldy5qcyJdLCJuYW1lcyI6WyJQbGF0Zm9ybUxvZ28iLCJwbGF0Zm9ybW5hYW0iLCJ0b1VwcGVyQ2FzZSIsIkJlc2NoaWtiYWFyaGVpZEtsZXVyIiwic3RvY2t2YWx1ZSIsIkNhcnRIZWxwZXIiLCJ0aGlzIiwicmVtb3ZlUHJvZHVjdCIsImlkIiwiYWRkUHJvZHVjdCIsIkNvb2tpZUhlbHBlciIsImdldENvb2tpZSIsIm5hbWUiLCJjb29raWVzIiwiZG9jdW1lbnQiLCJjb29raWUiLCJzcGxpdCIsImkiLCJsZW5ndGgiLCJ0cmltIiwiY3JlYXRlQ29va2llIiwidmFsdWUiLCJkZWxldGVDb29raWUiLCJzaG93TG9hZFNjcmVlbiIsIiQiLCJodG1sIiwib25Mb2FkUGFnZSIsIlVzZXJIZWxwZXIiLCJpc0FkbWluIiwiY3NzIiwiaGlkZSIsImlzQ3VzdG9tZXIiLCJpc0xvZ2VkSW4iLCJhY2Nlc3NUb2tlbiIsInVuZGVmaW5lZCIsInVzZXJ0eXBlIiwiZGVjb2RlVG9rZW4iLCJwYXlsb2FkIiwiSlNPTiIsInBhcnNlIiwiYXRvYiIsIldpc2hsaXN0SGVscGVyIiwiYWRkSXRlbSIsImVhbl9udW1iZXIiLCJhamF4IiwidXJsIiwidHlwZSIsImRhdGFUeXBlIiwiZGF0YSIsInN0cmluZ2lmeSIsImhlYWRlcnMiLCJBdXRob3JpemF0aW9uIiwic3VjY2VzcyIsInRvZ2dsZUNsYXNzIiwiYWxlcnQiLCJlcnJvciIsInhociIsInN0YXR1cyIsIm9uIiwiZXZlbnQiLCJSb3V0ZXIiLCJyb3V0ZSIsImhpc3RvcnkiLCJpc0ludGVybmFsIiwicGFydGljbGVzIiwiZ2V0UGFydGljbGVzIiwiUHJvZHVjdHNDb250cm9sbGVyIiwiUHJvZHVjdHNWaWV3SGVscGVyIiwiUHJvZHVjdHNNb2RlbCIsIm1haW4iLCJQcm9kdWN0Q29udHJvbGxlciIsIlByb2R1Y3RWaWV3SGVscGVyIiwiUHJvZHVjdE1vZGVsIiwiUmVnaXN0ZXJDb250cm9sbGVyIiwiUmVnaXN0ZXJWaWV3SGVscGVyIiwiUmVnaXN0ZXJNb2RlbCIsIkxvZ2luQ29udHJvbGxlciIsIkxvZ2luVmlld0hlbHBlciIsIkxvZ2luTW9kZWwiLCJMb2dvdXRDb250cm9sbGVyIiwiTG9nb3V0Vmlld0hlbHBlciIsIkxvZ291dE1vZGVsIiwiUmVzZXRQYXNzd29yZENvbnRyb2xsZXIiLCJSZXNldFBhc3N3b3JkVmlld0hlbHBlciIsIlJlc2V0UGFzc3dvcmRNb2RlbCIsIldpc2hsaXN0Q29udHJvbGxlciIsIldpc2hsaXN0Vmlld0hlbHBlciIsIldpc2hsaXN0TW9kZWwiLCJBZG1pbkNvbnRyb2xsZXIiLCJBZG1pblZpZXdIZWxwZXIiLCJBZG1pbk1vZGVsIiwiQWRtaW5Vc2VyQ29udHJvbGxlciIsIkFkbWluVXNlclZpZXdIZWxwZXIiLCJBZG1pblVzZXJNb2RlbCIsIkVycm9yQ29udHJvbGxlciIsIkVycm9yVmlld0hlbHBlciIsIndyaXRlSGlzdG9yeSIsIndpbmRvdyIsInNjcm9sbFRvIiwiaW5kZXhPZiIsImxvY2F0aW9uIiwic3Vic3RyaW5nIiwiYmFzZVVybCIsIm9iamVjdCIsInRpdGxlIiwicHVzaFN0YXRlIiwicmVhZHkiLCJ0b2dnbGVTaWRlYmFyIiwic2lkZWJhciIsImNsaWNrIiwiZSIsInByZXZlbnREZWZhdWx0IiwicGFyZW50IiwiZm4iLCJzZXJpYWxpemVPYmplY3QiLCJvIiwiYSIsInNlcmlhbGl6ZUFycmF5IiwiZWFjaCIsInB1c2giLCJnZXRQYWdlIiwiY2FsbGJhY2siLCJsb2FkIiwic2F2ZVVzZXJJbmZvIiwidXNlcl9pZCIsImNvbnRlbnRUeXBlIiwiZGVsZXRlVXNlciIsIkNhcnRNb2RlbCIsImdldENhcnQiLCJjYXJ0IiwicHJpY2UiLCJpbWFnZSIsImN1cnJlbnRDYXJ0Iiwic3BsaWNlIiwibG9naW4iLCJlbWFpbCIsInBhc3N3b3JkIiwiYnRvYSIsImFjY2Vzc190b2tlbiIsInNob3ciLCJsb2dvdXQiLCJQYWdlTW9kZWwiLCJmaWx0ZXIiLCJyZWdpc3RlciIsImZvcm1EYXRhIiwiZV9tYWlsIiwiZV9tYWlsYWRyZXMiLCJ3YWNodHdvb3JkIiwiZmlyc3RfbmFtZSIsInZvb3JuYWFtIiwiaW5zZXJ0aW9uIiwidHVzc2Vudm9lZ3NlbCIsInN1cm5hbWUiLCJhY2h0ZXJuYWFtIiwiZ2VuZGVyIiwiZGF0ZV9vZl9iaXJ0aCIsImJpcnRoX2RhdGUiLCJwaG9uZV9udW1iZXIiLCJtb2JpZWxfbnVtbWVyIiwic2VjcmV0X3F1ZXN0aW9uIiwic2VjdXJpdHlfcXVlc3Rpb24iLCJzZWNyZXRfcXVlc3Rpb25fYW5zd2VyIiwic2VjdXJpdHlfYW5zd2VyIiwicG9zdGFsX2NvZGUiLCJwb3N0Y29kZSIsIm51bWJlciIsImh1aXNudW1tZXIiLCJzdHJlZXRfbmFtZSIsInN0cmFhdG5hYW0iLCJjaXR5IiwicGxhYXRzIiwicmVzZXRwYXNzd29yZCIsImNvbnNvbGUiLCJsb2ciLCJuZXdfcGFzc3dvcmQiLCJyZXBlYXRfcGFzc3dvcmQiLCJ3YWNodHdvb3JkMiIsImVhbiIsIkdldFByb2R1Y3RJbmZvIiwiVXNlck1vZGVsIiwidXNlcmlkIiwiR2V0VXNlckluZm8iLCJnZXRXaXNobGlzdCIsImFkZFRvV2lzaGxpc3QiLCJ2aWV3RGF0YSIsIndpc2hsaXN0X2lkIiwiZGVsZXRlRnJvbVdpc2hsaXN0IiwiU3RyaW5nIiwidmlld0hlbHBlciIsIm1vZGVsIiwiVmlld0hlbHBlciIsInNldEFjdGlvbkxpc3RlbmVyIiwic2V0U2F2ZUxpc3RlbmVyIiwic2V0RGVsZXRlTGlzdGVuZXIiLCJNb2RlbCIsInNldFZpZXciLCJzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24iLCJDYXJ0Q29udHJvbGxlciIsInNldEFkZFByb2R1Y3RMaXN0ZW5lciIsInNldFJlbW92ZUxpc3RlbmVyIiwiRGVsZXRlQ29udHJvbGxlciIsImFjdGlvblBlcmZvcm1lZCIsImZpZWxkIiwiUGFnZUNvbnRyb2xsZXIiLCJQYWdlVmlld0hlbHBlciIsIlZpZXciLCJmaWx0ZXJQcm9kdWN0cyIsImZpbHRlcnMiLCJzZXJpYWxpemUiLCJsb2FkUHJvZHVjdHMiLCJzZXRGaWx0ZXJMaXN0ZW5lciIsImphYXIiLCJtYWFuZCIsImRhZyIsIm1hbmRhdG9yeUZpZWxkTWlzc2VzIiwibWFuZGF0b3J5RmllbGRzIiwibWFuRmllbGQiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwicGFzc3dvcmRzTm90SWRlbnRpY2FsIiwic2hvd1ZpZXciLCJkaXZfdG9faGlkZSIsImZhZGVUbyIsInNsaWRlVXAiLCJhY3Rpb24iLCJrZXkiLCJ1c2VyIiwiY2xvbmUiLCJmaW5kIiwiYXR0ciIsImFwcGVuZCIsImZpcnN0IiwicmVtb3ZlIiwidmFsIiwidXNlcl90eXBlIiwiaXNfYWN0aXZlIiwib2ZmIiwiQ2FydFZpZXdIZWxwZXIiLCJmb3JFYWNoIiwiaXRlbSIsImluZGV4IiwidXBkYXRlVG90YWxQcmljZSIsIm5ld1ByaWNlIiwicGFyc2VGbG9hdCIsInN1YnN0ciIsInRvRml4ZWQiLCJjYXJ0SXRlbSIsImFtb3VudCIsInBhcnNlSW50IiwiYWRkVG9DYXJ0IiwicHJvZHVjdF9pZCIsImNhcnRpdGVtIiwiZXZlbnRIYW5kbGVyIiwicHJvZHVjdCIsImdlbnJlIiwicGVnaV9hZ2UiLCJwbGF0Zm9ybSIsIkN1dFN0cmluZyIsImRlc2NyaXB0aW9uIiwidGV4dCIsIlNob3dBbW91bnQiLCJXb3Jkc0FycmF5IiwiU2hvcnRTdHJpbmciLCJzdWJtaXQiLCJ2aWV3VG9TaG93IiwicHVibGlzaGVyIiwiZCIsIkRhdGUiLCJyZWxlYXNlX2RhdGUiLCJtb250aHMiLCJnZXREYXkiLCJnZXRNb250aCIsImdldEZ1bGxZZWFyIiwibG9hZFdpc2hsaXN0IiwiY3VycmVudCIsIndpc2hfX2xpc3RfX2l0ZW0iLCJzdG9jayIsImNsb3Nlc3QiXSwibWFwcGlu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V0FDQXhPLEVBQUEyUCxHQUFBL0MsS0FBQSw2QkFBQUUsT0FBQW5PLHFCQUFBa0IsRUFBQStQLFFBQ0E1UCxFQUFBMlAsR0FBQS9DLEtBQUEsMkJBQUFFLFNBRUE5TSxFQUFBLGVBQUE4TSxPQUFBNkMsS0FJQTNQLEVBQUEscUJBQUErTSxRQUFBQyxXQUdBLFFBQUF6QyxHQUFBaUMsR0FFQXhNLEVBQUFWLFVBQUE0RixNQUFBc0gsR0FHQSxRQUFBL0IsR0FBQStCLEdBRUF4TSxFQUFBLGNBQUFvTixNQUFBbEwsR0FBQSxRQUFBLGNBQUEsU0FBQW9ELEdBRUFBLEVBQUFDLGdCQUNBLElBQUFrRSxHQUFBekosRUFBQWxCLE1BQUEwQyxLQUFBLE1BQ0E2SyxFQUFBck0sRUFBQWxCLE1BQUErUSxRQUFBLE9BQ0FyRCxHQUFBL0MsRUFBQTRDLEtBSUEsT0FDQTFCLFFBQUFBLEVBQ0E4RSxhQUFBQSxFQUNBbEYsa0JBQUFBLEVBQ0FFLGtCQUFBQSIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvL1BsYXRmb3JtIExvZ28nc1xyXG5mdW5jdGlvbiBQbGF0Zm9ybUxvZ28ocGxhdGZvcm1uYWFtKVxyXG57XHJcbiAgICBwbGF0Zm9ybW5hYW0gPSBwbGF0Zm9ybW5hYW0udG9VcHBlckNhc2UoKTtcclxuICAgIHN3aXRjaCAocGxhdGZvcm1uYWFtKVxyXG4gICAge1xyXG4gICAgICAgIC8vcGxhdGZvcm1zXHJcbiAgICAgICAgY2FzZSBcIlBTMVwiOlxyXG4gICAgICAgICAgICByZXR1cm4gXCI8aW1nIHNyYz0nL3Jlc291cmNlcy9pbWFnZXMvaWNvbnMvcHMxLnBuZycgLz5cIjtcclxuICAgICAgICBjYXNlIFwiUFM0XCI6XHJcbiAgICAgICAgICAgIHJldHVybiBcIjxpbWcgc3JjPScvcmVzb3VyY2VzL2ltYWdlcy9pY29ucy9wczQucG5nJyAvPlwiO1xyXG4gICAgICAgIGNhc2UgXCJQQ1wiOlxyXG4gICAgICAgICAgICByZXR1cm4gXCI8aW1nIHNyYz0nL3Jlc291cmNlcy9pbWFnZXMvaWNvbnMvd2luZG93cy5wbmcnIC8+XCI7XHJcbiAgICAgICAgY2FzZSBcIlhCT1hcIjpcclxuICAgICAgICAgICAgcmV0dXJuIFwiPGltZyBzcmM9Jy9yZXNvdXJjZXMvaW1hZ2VzL2ljb25zL3hib3gucG5nJyAvPlwiO1xyXG4gICAgICAgIGNhc2UgXCJORVNcIjpcclxuICAgICAgICAgICAgcmV0dXJuIFwiPGltZyBzcmM9Jy9yZXNvdXJjZXMvaW1hZ2VzL2ljb25zL25lcy5wbmcnIC8+XCI7XHJcbiAgICAgICAgY2FzZSBcIk42NFwiOlxyXG4gICAgICAgICAgICByZXR1cm4gXCI8aW1nIHNyYz0nL3Jlc291cmNlcy9pbWFnZXMvaWNvbnMvbjY0LnBuZycgLz5cIjtcclxuICAgICAgICBjYXNlIFwiTklOVEVORE8gU1dJVENIXCI6XHJcbiAgICAgICAgICAgIHJldHVybiBcIjxpbWcgc3JjPScvcmVzb3VyY2VzL2ltYWdlcy9pY29ucy9zd2l0Y2gucG5nJyAvPlwiO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHJldHVybiBwbGF0Zm9ybW5hYW07XHJcblxyXG4gICAgICAgIC8vcHVibGlzaGVyc1xyXG4gICAgICAgIGNhc2UgXCJOSU5URU5ET1wiOlxyXG4gICAgICAgICAgICByZXR1cm4gXCI8aW1nIHNyYz0nL3Jlc291cmNlcy9pbWFnZXMvcHVibGlzaGVycy9uaW50ZW5kby5wbmcnIC8+XCI7XHJcbiAgICAgICAgY2FzZSBcIlVCSVNPRlRcIjpcclxuICAgICAgICAgICAgcmV0dXJuIFwiPGltZyBzcmM9Jy9yZXNvdXJjZXMvaW1hZ2VzL3B1Ymxpc2hlcnMvdWJpc29mdC5wbmcnIC8+XCI7XHJcbiAgICAgICAgY2FzZSBcIkVMRUNUUk9OSUMgQVJUU1wiOlxyXG4gICAgICAgICAgICByZXR1cm4gXCI8aW1nIHNyYz0nL3Jlc291cmNlcy9pbWFnZXMvcHVibGlzaGVycy9lYS5wbmcnIC8+XCI7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEJlc2NoaWtiYWFyaGVpZEtsZXVyKHN0b2NrdmFsdWUpe1xyXG4gICAgXHJcbiAgICAgICAgaWYgKHN0b2NrdmFsdWU8PTApIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiPGltZyBzcmM9Jy9yZXNvdXJjZXMvaW1hZ2VzL2F2YWlsYWJpbGl0eS9idXR0b25yZWQucG5nJyAvPlwiO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoc3RvY2t2YWx1ZT49MSkge1xyXG4gICAgICAgICAgICByZXR1cm4gXCI8aW1nIHNyYz0nL3Jlc291cmNlcy9pbWFnZXMvYXZhaWxhYmlsaXR5L2J1dHRvbmdyZWVuLnBuZycgLz5cIjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gc3RvY2t2YWx1ZVxyXG4gICAgICAgIH1cclxufVxyXG5cclxuLy8gVmFuIFdpc2hsaXN0IHBhZ2luYVxyXG4kKGRvY3VtZW50KS5vbihcImNsaWNrXCIsIFwic3Bhbi5saWtlXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgJCh0aGlzKS50b2dnbGVDbGFzcyhcImxpa2UtLWFjdGl2ZVwiKTtcclxufSk7XHJcblxyXG4vLyBWYW4gU2luZ2xlIFByb2R1Y3QgcGFnaW5hXHJcbiQoZG9jdW1lbnQpLm9uKFwiY2xpY2tcIiwgXCJzcGFuLnNpbmdsZV9saWtlXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgJCh0aGlzKS50b2dnbGVDbGFzcyhcInNpbmdsZV9saWtlLS1hY3RpdmVcIik7XHJcbn0pOyIsIi8qKlxyXG4gKiBIZWxwZXIgZm9yIGNhcnQgYWN0aW9uc1xyXG4gKi9cclxuZnVuY3Rpb24gQ2FydEhlbHBlcigpXHJcbntcclxuICAgIC8qKlxyXG4gICAgICogR2V0IHRoZSB2YWx1ZSBvZiBhIGNvb2tpZVxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgIFByb2RjdXQgSUQgdG8gcmVtb3ZlIGZvbSB0aGUgY2FyXHJcbiAgICAgKiBcclxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cclxuICAgICAqL1xyXG4gICAgdGhpcy5yZW1vdmVQcm9kdWN0ID0gZnVuY3Rpb24oaWQpXHJcbiAgICB7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRkIGEgbmV3IHByb2R1Y3QgdG8gdGhlIGNhcnRcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGlkIFByb2R1Y3QgSUQgdG8gYWRkXHJcbiAgICAgKi9cclxuICAgIHRoaXMuYWRkUHJvZHVjdCA9IGZ1bmN0aW9uKGlkKVxyXG4gICAge1xyXG4gICAgfVxyXG59IiwiLyoqXHJcbiAqIEhlbHBlciBmb3IgZmluZGluZywgY3JlYXRpbmcgYW5kIGRlbGV0aW5nIGNvb2tpZXNcclxuICovXHJcbmZ1bmN0aW9uIENvb2tpZUhlbHBlcigpXHJcbntcclxuICAgIC8qKlxyXG4gICAgICogR2V0IHRoZSB2YWx1ZSBvZiBhIGNvb2tpZVxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSAgTmFtZSBvZiB0aGUgY29va2llXHJcbiAgICAgKiBcclxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cclxuICAgICAqL1xyXG4gICAgdGhpcy5nZXRDb29raWUgPSBmdW5jdGlvbihuYW1lKVxyXG4gICAge1xyXG4gICAgICAgIHZhciBjb29raWVzID0gZG9jdW1lbnQuY29va2llLnNwbGl0KCc7Jyk7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29va2llcy5sZW5ndGg7IGkrKylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjb29raWUgPSBjb29raWVzW2ldLnNwbGl0KFwiPVwiKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChjb29raWVbMF0udHJpbSgpID09IG5hbWUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb29raWVbMV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGUgYSBjb29raWVcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgICBOYW1lIG9mIHRoZSBjb29raWVcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSAgVmFsdWUgb2YgdGhlIGNvb2tpZVxyXG4gICAgICogXHJcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxyXG4gICAgICovXHJcbiAgICB0aGlzLmNyZWF0ZUNvb2tpZSA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKVxyXG4gICAge1xyXG4gICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IG5hbWUgKyAnPScgKyB2YWx1ZSArICc7JztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERlbGV0ZSBhIGNvb2tpZSBhbmQgaXQncyB2YWx1ZVxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSAgTmFtZSBvZiB0aGUgY29va2llXHJcbiAgICAgKiBcclxuICAgICAqIEByZXR1cm4ge3ZvaWR9XHJcbiAgICAgKi9cclxuICAgIHRoaXMuZGVsZXRlQ29va2llID0gZnVuY3Rpb24obmFtZSlcclxuICAgIHtcclxuICAgICAgICBkb2N1bWVudC5jb29raWUgPSBuYW1lICsgJz07IGV4cGlyZXM9VGh1LCAwMSBKYW4gMTk3MCAwMDowMDowMSBHTVQ7JztcclxuICAgIH1cclxufVxyXG4iLCJ2YXIgUm91dGVyICAgICAgID0gbmV3IFJvdXRlcigpO1xyXG52YXIgQ29va2llSGVscGVyID0gbmV3IENvb2tpZUhlbHBlcigpO1xyXG52YXIgVXNlckhlbHBlciAgID0gbmV3IFVzZXJIZWxwZXIoKTtcclxuXHJcbnZhciBXaXNobGlzdEhlbHBlciA9IG5ldyBXaXNobGlzdEhlbHBlcigpO1xyXG5cclxuZnVuY3Rpb24gc2hvd0xvYWRTY3JlZW4oKVxyXG57XHJcbiAgICAkKFwiI2NvbXBvbmVudFwiKS5odG1sKCc8ZGl2IGNsYXNzPVwic3Bpbm5lclwiPjxkaXYgY2xhc3M9XCJib3VuY2UxXCI+PC9kaXY+PGRpdiBjbGFzcz1cImJvdW5jZTJcIj48L2Rpdj48ZGl2IGNsYXNzPVwiYm91bmNlM1wiPjwvZGl2PiA8L2Rpdj4nKTtcclxufVxyXG5cclxuZnVuY3Rpb24gb25Mb2FkUGFnZSgpXHJcbntcclxuICAgIGlmIChVc2VySGVscGVyLmlzQWRtaW4oKSlcclxuICAgIHtcclxuICAgICAgICAkKFwiLnZpc2libGUtYWRtaW5cIikuY3NzKFwiZGlzcGxheVwiLCBcImlubGluZS1ibG9ja1wiKTtcclxuICAgICAgICAkKFwiLnZpc2libGUtY3VzdG9tZXJcIikuY3NzKFwiZGlzcGxheVwiLCBcImlubGluZS1ibG9ja1wiKTtcclxuICAgICAgICAkKFwiI2lubG9nZ2VuX3RleHRcIikuaGlkZSgpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoVXNlckhlbHBlci5pc0N1c3RvbWVyKCkpXHJcbiAgICB7XHJcbiAgICAgICAgJChcIi52aXNpYmxlLWN1c3RvbWVyXCIpLmNzcyhcImRpc3BsYXlcIiwgXCJpbmxpbmUtYmxvY2tcIik7XHJcbiAgICAgICAgJChcIiNpbmxvZ2dlbl90ZXh0XCIpLmhpZGUoKTtcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgICAkKFwiLnZpc2libGUtYWRtaW5cIikuaGlkZSgpO1xyXG4gICAgICAgICQoXCIudmlzaWJsZS1jdXN0b21lclwiKS5oaWRlKCk7XHJcbiAgICAgICAgJChcIiNpbmxvZ2dlbl90ZXh0XCIpLmNzcyhcImRpc3BsYXlcIiwgXCJpbmxpbmUtYmxvY2tcIik7XHJcbiAgICB9XHJcbn0iLCIvKipcclxuICogSGVscGVyIGZvciB1c2VyIHJlbGF0ZWQgc3R1ZmZcclxuICovXHJcbmZ1bmN0aW9uIFVzZXJIZWxwZXIoKVxyXG57XHJcbiAgICAvKipcclxuICAgICAqIENoZWNrIGlmIHRoZSB1c2VyIGlzIGEgZ3Vlc3QgKG5vdCBsb2dnZWQgaW4pXHJcbiAgICAgKi9cclxuICAgIHRoaXMuaXNMb2dlZEluID0gZnVuY3Rpb24oKVxyXG4gICAge1xyXG4gICAgICAgIHZhciBhY2Nlc3NUb2tlbiA9IENvb2tpZUhlbHBlci5nZXRDb29raWUoXCJhY2Nlc3NfdG9rZW5cIik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGFjY2Vzc1Rva2VuICE9IHVuZGVmaW5lZCAmJiBhY2Nlc3NUb2tlbiAhPSBcIlwiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVjayBpZiB0aGUgY3VycmVudCB1c2VyIGlzIGEgY3VzdG9tZXJcclxuICAgICAqL1xyXG4gICAgdGhpcy5pc0N1c3RvbWVyID0gZnVuY3Rpb24oKVxyXG4gICAge1xyXG4gICAgICAgIGlmIChVc2VySGVscGVyLmlzTG9nZWRJbigpKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHVzZXJ0eXBlID0gdGhpcy5kZWNvZGVUb2tlbigpLnVzZXJ0eXBlO1xyXG5cclxuICAgICAgICAgICAgaWYgKHVzZXJ0eXBlID09IFwiY3VzdG9tZXJcIiB8fCB1c2VydHlwZSA9PSBcImFkbWluXCIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVjayBpZiB0aGUgY3VycmVudCB1c2VyIGlzIGFkbWluXHJcbiAgICAgKi9cclxuICAgIHRoaXMuaXNBZG1pbiA9IGZ1bmN0aW9uKClcclxuICAgIHtcclxuICAgICAgICBpZiAoVXNlckhlbHBlci5pc0xvZ2VkSW4oKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB1c2VydHlwZSA9IHRoaXMuZGVjb2RlVG9rZW4oKS51c2VydHlwZTtcclxuXHJcbiAgICAgICAgICAgIGlmICh1c2VydHlwZSA9PSBcImFkbWluXCIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEZWNvZGUgdGhlIEpXVCB0b2tlblxyXG4gICAgICovXHJcbiAgICB0aGlzLmRlY29kZVRva2VuID0gZnVuY3Rpb24oKVxyXG4gICAge1xyXG4gICAgICAgIHZhciBhY2Nlc3NUb2tlbiA9IENvb2tpZUhlbHBlci5nZXRDb29raWUoXCJhY2Nlc3NfdG9rZW5cIik7XHJcblxyXG4gICAgICAgIGlmIChhY2Nlc3NUb2tlbiAhPSB1bmRlZmluZWQgJiYgYWNjZXNzVG9rZW4gICE9IFwiXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgcGF5bG9hZCA9IGFjY2Vzc1Rva2VuLnNwbGl0KFwiLlwiKVsxXTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKGF0b2IocGF5bG9hZCkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsIi8qKlxyXG4gKiBIZWxwZXIgZm9yIGNhcnQgYWN0aW9uc1xyXG4gKi9cclxuZnVuY3Rpb24gV2lzaGxpc3RIZWxwZXIoKVxyXG57XHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgdmFsdWUgb2YgYSBjb29raWVcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGlkICBQcm9kY3V0IElEIHRvIHJlbW92ZSBmb20gdGhlIGNhclxyXG4gICAgICogXHJcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XHJcbiAgICAgKi9cclxuICAgIHRoaXMuYWRkSXRlbSA9IGZ1bmN0aW9uKGVhbl9udW1iZXIpXHJcbiAgICB7XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiBcImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MS93aXNobGlzdC9cIiArIENvb2tpZUhlbHBlci5nZXRDb29raWUoXCJ1c2VyX2lkXCIpICsgXCIvXCIgKyBlYW5fbnVtYmVyLFxyXG4gICAgICAgICAgICB0eXBlOiBcInBvc3RcIixcclxuICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoe30pLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICBcIkF1dGhvcml6YXRpb25cIjogXCJCZWFyZXIgXCIgKyBDb29raWVIZWxwZXIuZ2V0Q29va2llKFwiYWNjZXNzX3Rva2VuXCIpXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKFwibGlrZS0tYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoXCJQcm9kdWN0IHN1Y2Nlc3ZvbCB0b2VnZXZvZWdkIGFhbiBXaXNobGlzdC5cIik7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbih4aHIsIHN0YXR1cywgZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGFsZXJ0KFwiUHJvZHVjdCBpcyBhbCBpbiBXaXNobGlzdC5cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSIsInZhciBSb3V0ZXIgPSBmdW5jdGlvbiAoKVxyXG57XHJcbiAgICBiYXNlVXJsID0gXCJwcm9qZWN0LXdlYnNob3AvXCI7XHJcblxyXG4gICAgZnVuY3Rpb24gcm91dGUodXJsLCBoaXN0b3J5KVxyXG4gICAge1xyXG4gICAgICAgIGlmIChpc0ludGVybmFsKHVybCkgPT0gZmFsc2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgcGFydGljbGVzID0gZ2V0UGFydGljbGVzKHVybCk7XHJcblxyXG4gICAgICAgIHN3aXRjaChwYXJ0aWNsZXNbMF0pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjYXNlIFwiXCI6XHJcbiAgICAgICAgICAgIGNhc2UgXCJpbmRleC5odG1sXCI6XHJcbiAgICAgICAgICAgIGNhc2UgXCJwcm9kdWN0c1wiOlxyXG4gICAgICAgICAgICAgICAgbmV3IFByb2R1Y3RzQ29udHJvbGxlcihuZXcgUHJvZHVjdHNWaWV3SGVscGVyKCksIG5ldyBQcm9kdWN0c01vZGVsKCkpLm1haW4oKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwicHJvZHVjdFwiOlxyXG4gICAgICAgICAgICAgICAgbmV3IFByb2R1Y3RDb250cm9sbGVyKG5ldyBQcm9kdWN0Vmlld0hlbHBlcigpLCBuZXcgUHJvZHVjdE1vZGVsKHBhcnRpY2xlc1sxXSkpLm1haW4oKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwicmVnaXN0ZXJcIjpcclxuICAgICAgICAgICAgICAgIG5ldyBSZWdpc3RlckNvbnRyb2xsZXIobmV3IFJlZ2lzdGVyVmlld0hlbHBlcigpLCBuZXcgUmVnaXN0ZXJNb2RlbCgpKS5tYWluKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcImxvZ2luXCI6XHJcbiAgICAgICAgICAgICAgICBuZXcgTG9naW5Db250cm9sbGVyKG5ldyBMb2dpblZpZXdIZWxwZXIoKSwgbmV3IExvZ2luTW9kZWwoKSkubWFpbigpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJsb2dvdXRcIjpcclxuICAgICAgICAgICAgICAgIG5ldyBMb2dvdXRDb250cm9sbGVyKG5ldyBMb2dvdXRWaWV3SGVscGVyKCksIG5ldyBMb2dvdXRNb2RlbCgpKS5tYWluKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcInJlZ2lzdGVyXCI6XHJcbiAgICAgICAgICAgICAgICBuZXcgUmVnaXN0ZXJDb250cm9sbGVyKG5ldyBSZWdpc3RlclZpZXdIZWxwZXIoKSwgbmV3IFJlZ2lzdGVyTW9kZWwoKSkubWFpbigpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJyZXNldHBhc3N3b3JkXCI6XHJcbiAgICAgICAgICAgICAgICBuZXcgUmVzZXRQYXNzd29yZENvbnRyb2xsZXIobmV3IFJlc2V0UGFzc3dvcmRWaWV3SGVscGVyKCksIG5ldyBSZXNldFBhc3N3b3JkTW9kZWwoKSkubWFpbigpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJ3aXNobGlzdFwiOlxyXG4gICAgICAgICAgICAgICAgbmV3IFdpc2hsaXN0Q29udHJvbGxlcihuZXcgV2lzaGxpc3RWaWV3SGVscGVyKCksIG5ldyBXaXNobGlzdE1vZGVsKCkpLm1haW4oKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiYWRtaW5cIjpcclxuICAgICAgICAgICAgICAgIG5ldyBBZG1pbkNvbnRyb2xsZXIobmV3IEFkbWluVmlld0hlbHBlcigpLCBuZXcgQWRtaW5Nb2RlbCgpKS5tYWluKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcImFkbWluX3VzZXJcIjpcclxuICAgICAgICAgICAgICAgIG5ldyBBZG1pblVzZXJDb250cm9sbGVyKG5ldyBBZG1pblVzZXJWaWV3SGVscGVyKCksIG5ldyBBZG1pblVzZXJNb2RlbChwYXJ0aWNsZXNbMV0pKS5tYWluKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIG5ldyBFcnJvckNvbnRyb2xsZXIobmV3IEVycm9yVmlld0hlbHBlcigpKS5tYWluKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChoaXN0b3J5ICE9IGZhbHNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHVybCAhPSBcIlwiICYmIHR5cGVvZiB1cmwgPT09ICdzdHJpbmcnKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3cml0ZUhpc3Rvcnkoe30sIFwiQS1aIEdhbWVzXCIsIHVybCk7XHJcblxyXG4gICAgICAgICAgICAgICAgIC8vIExvYWQgc2NyZWVuXHJcbiAgICAgICAgICAgICAgICBzaG93TG9hZFNjcmVlbigpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBTY3JvbGwgdG8gdG9wIG9mIHBhZ2VcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBpc0ludGVybmFsKHVybClcclxuICAgIHtcclxuICAgICAgICBpZiAodXJsLmluZGV4T2YoXCJodHRwXCIpICE9IC0xIHx8IHVybC5pbmRleE9mKFwiaHR0cHNcIikgIT0gLTEgfHwgdXJsLmluZGV4T2YoXCJ3d3dcIikgIT0gLTEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24gPSB1cmw7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRQYXJ0aWNsZXModXJsKVxyXG4gICAge1xyXG4gICAgICAgIC8vIFJlbW92ZSB0aGUgZmlyc3QgL1xyXG4gICAgICAgIGlmICh1cmwuaW5kZXhPZihcIi9cIikgPT0gMClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHVybCA9IHVybC5zdWJzdHJpbmcoMSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBJZiB0aGVyZSBpcyBhIGJhc2UgdXJsIHNldCwgcmVtb3ZlIHRoZSBiYXNlIHVybFxyXG4gICAgICAgIGlmICh0aGlzLmJhc2VVcmwgIT0gbnVsbCAmJiB1cmwuaW5kZXhPZih0aGlzLmJhc2VVcmwpICE9IC0xKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdXJsID0gdXJsLnN1YnN0cmluZyh1cmwuaW5kZXhPZih0aGlzLmJhc2VVcmwpICsgdGhpcy5iYXNlVXJsLmxlbmd0aCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdXJsLnNwbGl0KC9cXC8oLispPy8pXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gd3JpdGVIaXN0b3J5KG9iamVjdCwgdGl0bGUsIHVybClcclxuICAgIHtcclxuICAgICAgICB3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUob2JqZWN0LCB0aXRsZSwgdXJsKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHJvdXRlOiByb3V0ZVxyXG4gICAgfVxyXG59IiwiJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKVxyXG57XHJcbiAgICAkKFwiLnNpZGViYXItdG9nZ2xlXCIpLmNsaWNrKGZ1bmN0aW9uIChlKVxyXG4gICAge1xyXG4gICAgICAgIC8vIFByZXZlbnQgZGVmYXVsdCBjbGljayBhY3Rpb25cclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgIC8vIElkIG9mIHRoZSBzaWRlYmFyIHRvIHRvZ2dsZVxyXG4gICAgICAgIHZhciBzaWRlYmFyID0gJCh0aGlzKS5kYXRhKFwic2lkZWJhclwiKTtcclxuXHJcbiAgICAgICAgdG9nZ2xlU2lkZWJhcigkKFwiI1wiICsgc2lkZWJhcikpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJChcIi5zaWRlYmFyX19jbG9zZVwiKS5jbGljayhmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIHRvZ2dsZVNpZGViYXIoJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKSk7XHJcbiAgICB9KVxyXG5cclxuICAgICQoXCIub3ZlcmxheVwiKS5jbGljayhmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIHRvZ2dsZVNpZGViYXIoJChcIi5zaWRlYmFyXCIpKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGZ1bmN0aW9uIHRvZ2dsZVNpZGViYXIoc2lkZWJhcilcclxuICAgIHtcclxuICAgICAgICAkKHNpZGViYXIpLnRvZ2dsZUNsYXNzKFwic2lkZWJhci0tb3BlblwiKTtcclxuICAgICAgICAkKFwiLm92ZXJsYXlcIikudG9nZ2xlQ2xhc3MoXCJvdmVybGF5LS12aXNpYmxlXCIpO1xyXG4gICAgICAgICQoXCJib2R5XCIpLnRvZ2dsZUNsYXNzKFwic2lkZWJhci0tb3BlblwiKTtcclxuICAgIH1cclxufSk7IiwiJC5mbi5zZXJpYWxpemVPYmplY3QgPSBmdW5jdGlvbigpXHJcbntcclxuICAgIHZhciBvID0ge307XHJcbiAgICB2YXIgYSA9IHRoaXMuc2VyaWFsaXplQXJyYXkoKTtcclxuICAgICQuZWFjaChhLCBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAob1t0aGlzLm5hbWVdICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaWYgKCFvW3RoaXMubmFtZV0ucHVzaCkge1xyXG4gICAgICAgICAgICAgICAgb1t0aGlzLm5hbWVdID0gW29bdGhpcy5uYW1lXV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMudmFsdWUgIT0gXCJcIilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgb1t0aGlzLm5hbWVdLnB1c2godGhpcy52YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy52YWx1ZSAhPSBcIlwiKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBvW3RoaXMubmFtZV0gPSB0aGlzLnZhbHVlIHx8ICcnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gbztcclxufTsiLCJ2YXIgQWRtaW5Vc2VyTW9kZWwgPSBmdW5jdGlvbihpZClcclxue1xyXG4gICAgZnVuY3Rpb24gZ2V0UGFnZShjYWxsYmFjaylcclxuICAgIHtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6IFwiaHR0cHM6Ly9hcGkuYXotZ2FtZXMubmwvYWRtaW4vdXNlcnMvXCIgKyBpZCwgLy9cImh0dHBzOi8vYXBpLmF6LWdhbWVzLm5sL1xyXG4gICAgICAgICAgICB0eXBlOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICBcIkF1dGhvcml6YXRpb25cIjogXCJCZWFyZXIgXCIgKyBDb29raWVIZWxwZXIuZ2V0Q29va2llKFwiYWNjZXNzX3Rva2VuXCIpXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhkYXRhKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICh4aHIsIHN0YXR1cywgZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICQoXCIjY29tcG9uZW50XCIpLmxvYWQoXCIvdmlld3MvZXJyb3IvZXJyb3IuaHRtbFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHNhdmVVc2VySW5mbyhkYXRhLCBjYWxsYmFjaylcclxuICAgIHtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6IFwiaHR0cHM6Ly9hcGkuYXotZ2FtZXMubmwvYWRtaW4vdXNlcnMvXCIgKyBkYXRhLnVzZXJfaWQsIC8vXCJodHRwczovL2FwaS5hei1nYW1lcy5ubC9cclxuICAgICAgICAgICAgdHlwZTogXCJQQVRDSFwiLFxyXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxyXG4gICAgICAgICAgICBjb250ZW50VHlwZTogXCJhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04XCIsXHJcbiAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICBcIkF1dGhvcml6YXRpb25cIjogXCJCZWFyZXIgXCIgKyBDb29raWVIZWxwZXIuZ2V0Q29va2llKFwiYWNjZXNzX3Rva2VuXCIpXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhkYXRhKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICh4aHIsIHN0YXR1cywgZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICQoXCIjY29tcG9uZW50XCIpLmxvYWQoXCIvdmlld3MvZXJyb3IvZXJyb3IuaHRtbFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGRlbGV0ZVVzZXIodXNlcl9pZCwgY2FsbGJhY2spXHJcbiAgICB7XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiBcImh0dHBzOi8vYXBpLmF6LWdhbWVzLm5sL2FkbWluL3VzZXJzL1wiICsgdXNlcl9pZCwgLy9cImh0dHBzOi8vYXBpLmF6LWdhbWVzLm5sL1xyXG4gICAgICAgICAgICB0eXBlOiBcIkRFTEVURVwiLFxyXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxyXG4gICAgICAgICAgICAvL2NvbnRlbnRUeXBlOiBcImFwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLThcIixcclxuICAgICAgICAgICAgLy9kYXRhOiBKU09OLnN0cmluZ2lmeShkYXRhKSxcclxuICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgXCJBdXRob3JpemF0aW9uXCI6IFwiQmVhcmVyIFwiICsgQ29va2llSGVscGVyLmdldENvb2tpZShcImFjY2Vzc190b2tlblwiKVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICh4aHIsIHN0YXR1cywgZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICQoXCIjY29tcG9uZW50XCIpLmxvYWQoXCIvdmlld3MvZXJyb3IvZXJyb3IuaHRtbFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGdldFBhZ2U6IGdldFBhZ2UsXHJcbiAgICAgICAgc2F2ZVVzZXJJbmZvOiBzYXZlVXNlckluZm8sXHJcbiAgICAgICAgZGVsZXRlVXNlcjogZGVsZXRlVXNlclxyXG4gICAgfVxyXG59IiwidmFyIEFkbWluTW9kZWwgPSBmdW5jdGlvbigpXHJcbntcclxuICAgIGZ1bmN0aW9uIGdldFBhZ2UoY2FsbGJhY2spXHJcbiAgICB7XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiBcImh0dHBzOi8vYXBpLmF6LWdhbWVzLm5sL2FkbWluL3VzZXJzXCIsIC8vXCJodHRwczovL2FwaS5hei1nYW1lcy5ubC9cclxuICAgICAgICAgICAgdHlwZTogXCJHRVRcIixcclxuICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgXCJBdXRob3JpemF0aW9uXCI6IFwiQmVhcmVyIFwiICsgQ29va2llSGVscGVyLmdldENvb2tpZShcImFjY2Vzc190b2tlblwiKVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZGF0YSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoeGhyLCBzdGF0dXMsIGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAkKFwiI2NvbXBvbmVudFwiKS5sb2FkKFwiL3ZpZXdzL2Vycm9yL2Vycm9yLmh0bWxcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBSZXR1cm4gdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBieSBvdGhlciBwcm9ncmFtcyAodGhlIGNvbnRyb2xsZXIgaW4gdGhpcyBjYXNlKVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBnZXRQYWdlOiBnZXRQYWdlXHJcbiAgICB9XHJcblxyXG59OyIsInZhciBDYXJ0TW9kZWwgPSBmdW5jdGlvbigpXHJcbntcclxuICAgIC8qKlxyXG4gICAgICogR2V0IGFsbCBjYXJ0IGl0ZW1zXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGdldENhcnQoY2FsbGJhY2spXHJcbiAgICB7XHJcbiAgICAgICAgdmFyIGNhcnQgPSBDb29raWVIZWxwZXIuZ2V0Q29va2llKFwiY2FydFwiKTtcclxuXHJcbiAgICAgICAgaWYgKGNhcnQgIT0gdW5kZWZpbmVkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY2FsbGJhY2soSlNPTi5wYXJzZShjYXJ0KSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRkIGEgcHJvZHVjdCB0byB0aGUgY2FydCBjb29raWUgYW5kIGRhdGFiYXNlIGlmIHRoZSB1c2VyIGlzIHJlZ2lzdGVyZWRcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gYWRkUHJvZHVjdChpZCwgY2FsbGJhY2spXHJcbiAgICB7XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiBcImh0dHBzOi8vYXBpLmF6LWdhbWVzLm5sL3Byb2R1Y3RzL1wiICsgaWQsXHJcbiAgICAgICAgICAgIHR5cGU6IFwiZ2V0XCIsXHJcbiAgICAgICAgICAgIGNvbnRlbnRUeXBlOiBcImpzb25cIixcclxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGNhcnQgPSB7ZWFuX251bWJlcjpkYXRhWzBdLmVhbl9udW1iZXIsIHRpdGxlOmRhdGFbMF0udGl0bGUsIHByaWNlOmRhdGFbMF0ucHJpY2UsIGltYWdlOmRhdGFbMF0uaW1hZ2V9O1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soY2FydCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gU2F2ZSBjYXJ0IGluIGNvb2tpZXNcclxuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50Q2FydCA9IENvb2tpZUhlbHBlci5nZXRDb29raWUoXCJjYXJ0XCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Q2FydCA9PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgQ29va2llSGVscGVyLmNyZWF0ZUNvb2tpZShcImNhcnRcIiwgSlNPTi5zdHJpbmdpZnkoW2NhcnRdKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudENhcnQgPSBKU09OLnBhcnNlKGN1cnJlbnRDYXJ0KTtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50Q2FydC5wdXNoKGNhcnQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBDb29raWVIZWxwZXIuY3JlYXRlQ29va2llKFwiY2FydFwiLCBKU09OLnN0cmluZ2lmeShjdXJyZW50Q2FydCkpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoeGhyLCBzdGF0dXMsIGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAkKFwiI2NvbXBvbmVudFwiKS5sb2FkKFwiL3ZpZXdzL2Vycm9yL2Vycm9yLmh0bWxcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZSBhIGl0ZW0gZnJvbSB0aGUgY2FydFxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge2ludH0gaWQgUHJvZHVjdCBpZFxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiByZW1vdmVQcm9kdWN0KGlkKVxyXG4gICAge1xyXG4gICAgICAgIGNhcnQgPSBKU09OLnBhcnNlKENvb2tpZUhlbHBlci5nZXRDb29raWUoXCJjYXJ0XCIpKTtcclxuXHJcbiAgICAgICAgZm9yKGkgPSAwOyBpIDwgY2FydC5sZW5ndGg7IGkrKylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChjYXJ0W2ldLmVhbl9udW1iZXIgPT0gaWQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNhcnQuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgQ29va2llSGVscGVyLmNyZWF0ZUNvb2tpZShcImNhcnRcIiwgSlNPTi5zdHJpbmdpZnkoY2FydCkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGdldENhcnQ6IGdldENhcnQsXHJcbiAgICAgICAgYWRkUHJvZHVjdDogYWRkUHJvZHVjdCxcclxuICAgICAgICByZW1vdmVQcm9kdWN0OiByZW1vdmVQcm9kdWN0XHJcbiAgICB9XHJcbn07IiwidmFyIExvZ2luTW9kZWwgPSBmdW5jdGlvbigpXHJcbntcclxuICAgIGZ1bmN0aW9uIGxvZ2luKGVtYWlsLCBwYXNzd29yZCwgY2FsbGJhY2spXHJcbiAgICB7XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiBcImh0dHBzOi8vYXBpLmF6LWdhbWVzLm5sL3VzZXIvbG9naW5cIixcclxuICAgICAgICAgICAgdHlwZTogXCJHRVRcIixcclxuICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgXCJBdXRob3JpemF0aW9uXCI6IFwiQmFzaWMgXCIgKyBidG9hKGVtYWlsICsgXCI6XCIgKyBwYXNzd29yZClcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIC8vIHB1dCB0b2tlbiBpbiBjb29raWVcclxuICAgICAgICAgICAgICAgIENvb2tpZUhlbHBlci5jcmVhdGVDb29raWUoXCJhY2Nlc3NfdG9rZW5cIiwgZGF0YS5hY2Nlc3NfdG9rZW4pO1xyXG4gICAgICAgICAgICAgICAgQ29va2llSGVscGVyLmNyZWF0ZUNvb2tpZShcInVzZXJfaWRcIiwgZGF0YS51c2VyX2lkKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyAncmVsb2FkJyBwYWdlXHJcbiAgICAgICAgICAgICAgICBvbkxvYWRQYWdlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gbGV0IGNvbnRyb2xsZXIgcmVzdW1lIHdpdGggc3R1ZmZcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGRhdGEpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHhociwgc3RhdHVzLCBlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgLy8gc2hvdyAnbm90IGdvb2QgZW1haWwgb3IgcGFzc3dvcmQgdG8gdXNlcidcclxuICAgICAgICAgICAgICAgICQoXCIjZXJyb3JfbWVzc2FnZVwiKS5zaG93KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8kKFwiI2NvbXBvbmVudFwiKS5odG1sKFwiZXJyb3IgZnVuY3Rpb25cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBSZXR1cm4gdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBieSBvdGhlciBwcm9ncmFtcyAodGhlIGNvbnRyb2xsZXIgaW4gdGhpcyBjYXNlKVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBsb2dpbjogbG9naW5cclxuICAgIH1cclxufTsiLCJ2YXIgTG9nb3V0TW9kZWwgPSBmdW5jdGlvbigpXHJcbntcclxuICAgIGZ1bmN0aW9uIGxvZ291dChjYWxsYmFjaylcclxuICAgIHtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6IFwiaHR0cHM6Ly9hcGkuYXotZ2FtZXMubmwvdXNlci9sb2dvdXRcIiwgLy8/IGh0dHA6Ly84NC44NC4yNDUuMjk6MjQzID0gQVBJLWxvY2F0aWU/XHJcbiAgICAgICAgICAgIHR5cGU6IFwicG9zdFwiLFxyXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxyXG4gICAgICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICB1c2VyX2lkOiBnZXRDb29raWUoXCJ1c2VyX2lkXCIpXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgLy8gbGV0IGNvbnRyb2xsZXIgcmVzdW1lIHdpdGggc3R1ZmZcclxuICAgICAgICAgICAgICAgIENvb2tpZUhlbHBlci5kZWxldGVDb29raWUoXCJhY2Nlc3NfdG9rZW5cIik7XHJcbiAgICAgICAgICAgICAgICBDb29raWVIZWxwZXIuZGVsZXRlQ29va2llKFwidXNlcl9pZFwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyAncmVsb2FkJyBwYWdlXHJcbiAgICAgICAgICAgICAgICBvbkxvYWRQYWdlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZGF0YSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoeGhyLCBzdGF0dXMsIGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBzaG93ICdub3QgZ29vZCBlbWFpbCBvciBwYXNzd29yZCB0byB1c2VyJ1xyXG4gICAgICAgICAgICAgICAgJChcIiNlcnJvcl9tZXNzYWdlXCIpLnNob3coKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyQoXCIjY29tcG9uZW50XCIpLmh0bWwoXCJlcnJvciBmdW5jdGlvblwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBnZXRDb29raWUobmFtZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjb29raWVzID0gZG9jdW1lbnQuY29va2llLnNwbGl0KCc7Jyk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvb2tpZXMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBjb29raWUgPSBjb29raWVzW2ldLnNwbGl0KFwiPVwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoY29va2llWzBdLnRyaW0oKSA9PSBuYW1lKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb29raWVbMV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmV0dXJuIHRoZSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgcHJvZ3JhbXMgKHRoZSBjb250cm9sbGVyIGluIHRoaXMgY2FzZSlcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgbG9nb3V0OiBsb2dvdXRcclxuICAgIH1cclxufTsiLCJ2YXIgUGFnZU1vZGVsID0gZnVuY3Rpb24oKVxyXG57XHJcbiAgICBmdW5jdGlvbiBnZXRQYWdlKGNhbGxiYWNrKVxyXG4gICAge1xyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogXCJodHRwczovL2FwaS5hei1nYW1lcy5ubC91c2VyXCIsXHJcbiAgICAgICAgICAgIHR5cGU6IFwiZ2V0XCIsXHJcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgIFwiQXV0aG9yaXphdGlvblwiOiBcIkJlYXJlciBcIiArIENvb2tpZUhlbHBlci5nZXRDb29raWUoXCJhY2Nlc3NfdG9rZW5cIilcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGRhdGEpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHhociwgc3RhdHVzLCBlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgJChcIiNjb21wb25lbnRcIikubG9hZChcIi92aWV3cy9lcnJvci9lcnJvci5odG1sXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmV0dXJuIHRoZSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgcHJvZ3JhbXMgKHRoZSBjb250cm9sbGVyIGluIHRoaXMgY2FzZSlcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZ2V0UGFnZTogZ2V0UGFnZVxyXG4gICAgfVxyXG59OyIsInZhciBQcm9kdWN0c01vZGVsID0gZnVuY3Rpb24oKVxyXG57XHJcbiAgICBmdW5jdGlvbiBnZXRQYWdlKGZpbHRlciwgY2FsbGJhY2spXHJcbiAgICB7XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiBcImh0dHBzOi8vYXBpLmF6LWdhbWVzLm5sL3Byb2R1Y3RzP1wiICsgZmlsdGVyLCAvLz8gaHR0cDovLzg0Ljg0LjI0NS4yOToyNDMgPSBBUEktbG9jYXRpZT9cclxuICAgICAgICAgICAgdHlwZTogXCJnZXRcIixcclxuICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGRhdGEpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHhociwgc3RhdHVzLCBlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgJChcIiNjb21wb25lbnRcIikubG9hZChcIi92aWV3cy9lcnJvci9lcnJvci5odG1sXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmV0dXJuIHRoZSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgcHJvZ3JhbXMgKHRoZSBjb250cm9sbGVyIGluIHRoaXMgY2FzZSlcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZ2V0UGFnZTogZ2V0UGFnZVxyXG4gICAgfVxyXG59OyIsInZhciBSZWdpc3Rlck1vZGVsID0gZnVuY3Rpb24oKVxyXG57XHJcbiAgICBmdW5jdGlvbiByZWdpc3Rlcihmb3JtRGF0YSwgY2FsbGJhY2spXHJcbiAgICB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyhmb3JtRGF0YSk7XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiBcImh0dHBzOi8vYXBpLmF6LWdhbWVzLm5sL3VzZXIvcmVnaXN0ZXJcIixcclxuICAgICAgICAgICAgdHlwZTogXCJwb3N0XCIsXHJcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICAgIGVfbWFpbCA6IGZvcm1EYXRhLmVfbWFpbGFkcmVzLFxyXG4gICAgICAgICAgICAgICAgcGFzc3dvcmQgOiBmb3JtRGF0YS53YWNodHdvb3JkLFxyXG4gICAgICAgICAgICAgICAgZmlyc3RfbmFtZSA6IGZvcm1EYXRhLnZvb3JuYWFtLFxyXG4gICAgICAgICAgICAgICAgaW5zZXJ0aW9uIDogZm9ybURhdGEudHVzc2Vudm9lZ3NlbCxcclxuICAgICAgICAgICAgICAgIHN1cm5hbWUgOiBmb3JtRGF0YS5hY2h0ZXJuYWFtLFxyXG4gICAgICAgICAgICAgICAgZ2VuZGVyIDogZm9ybURhdGEuZ2VuZGVyLFxyXG4gICAgICAgICAgICAgICAgZGF0ZV9vZl9iaXJ0aCA6IGZvcm1EYXRhLmJpcnRoX2RhdGUsXHJcbiAgICAgICAgICAgICAgICBwaG9uZV9udW1iZXIgOiBmb3JtRGF0YS5tb2JpZWxfbnVtbWVyLFxyXG4gICAgICAgICAgICAgICAgc2VjcmV0X3F1ZXN0aW9uIDogZm9ybURhdGEuc2VjdXJpdHlfcXVlc3Rpb24sXHJcbiAgICAgICAgICAgICAgICBzZWNyZXRfcXVlc3Rpb25fYW5zd2VyIDogZm9ybURhdGEuc2VjdXJpdHlfYW5zd2VyLFxyXG5cclxuICAgICAgICAgICAgICAgIHBvc3RhbF9jb2RlIDogZm9ybURhdGEucG9zdGNvZGUsXHJcbiAgICAgICAgICAgICAgICBudW1iZXIgOiBmb3JtRGF0YS5odWlzbnVtbWVyLFxyXG4gICAgICAgICAgICAgICAgc3RyZWV0X25hbWUgOiBmb3JtRGF0YS5zdHJhYXRuYWFtLFxyXG4gICAgICAgICAgICAgICAgY2l0eSA6IGZvcm1EYXRhLnBsYWF0c1xyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAvLyBsZXQgY29udHJvbGxlciByZXN1bWUgd2l0aCBzdHVmZlxyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZGF0YSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoeGhyLCBzdGF0dXMsIGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBzaG93ICdlbWFpbCBhbCBnZWJvbmRlbiBhYW4gZWVuIGFjY291bnQ/J1xyXG4gICAgICAgICAgICAgICAgJChcIiNyZWdpX2FwaV9lcnJvcl9tZXNzYWdlXCIpLnNob3coKTtcclxuICAgICAgICAgICAgICAgIC8vJChcIiNjb21wb25lbnRcIikuaHRtbChcImVycm9yIGZ1bmN0aW9uXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmV0dXJuIHRoZSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgcHJvZ3JhbXMgKHRoZSBjb250cm9sbGVyIGluIHRoaXMgY2FzZSlcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgcmVnaXN0ZXI6IHJlZ2lzdGVyXHJcbiAgICB9XHJcbn07IiwidmFyIFJlc2V0UGFzc3dvcmRNb2RlbCA9IGZ1bmN0aW9uKClcclxue1xyXG4gICAgZnVuY3Rpb24gcmVzZXRwYXNzd29yZChmb3JtRGF0YSwgY2FsbGJhY2spXHJcbiAgICB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZm9ybURhdGEpO1xyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogXCJodHRwczovL2FwaS5hei1nYW1lcy5ubC91c2VyL3Jlc2V0cGFzc3dvcmRcIixcclxuICAgICAgICAgICAgdHlwZTogXCJwb3N0XCIsXHJcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICAgIGVtYWlsIDogZm9ybURhdGEuZV9tYWlsYWRyZXMsXHJcbiAgICAgICAgICAgICAgICBzZWNyZXRfcXVlc3Rpb25fYW5zd2VyIDogZm9ybURhdGEuc2VjdXJpdHlfYW5zd2VyLFxyXG4gICAgICAgICAgICAgICAgc2VjcmV0X3F1ZXN0aW9uIDogZm9ybURhdGEuc2VjdXJpdHlfcXVlc3Rpb24sXHJcbiAgICAgICAgICAgICAgICBuZXdfcGFzc3dvcmQgOiBmb3JtRGF0YS53YWNodHdvb3JkLFxyXG4gICAgICAgICAgICAgICAgcmVwZWF0X3Bhc3N3b3JkIDogZm9ybURhdGEud2FjaHR3b29yZDJcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhkYXRhKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICh4aHIsIHN0YXR1cywgZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIC8vJChcIiNjb21wb25lbnRcIikubG9hZChcInZpZXdzL2Vycm9yL2Vycm9yLmh0bWxcIik7XHJcbiAgICAgICAgICAgICAgICAkKFwiI3Jlc2V0X3Bhc3N3b3JkX2FwaV9lcnJvcl9tZXNzYWdlXCIpLnNob3coKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHJlc2V0cGFzc3dvcmQ6IHJlc2V0cGFzc3dvcmRcclxuICAgIH1cclxufTsiLCJ2YXIgUHJvZHVjdE1vZGVsID0gZnVuY3Rpb24oZWFuKVxyXG57XHJcbiAgICBmdW5jdGlvbiBHZXRQcm9kdWN0SW5mbyhjYWxsYmFjaylcclxuICAgIHtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6IFwiaHR0cHM6Ly9hcGkuYXotZ2FtZXMubmwvcHJvZHVjdHMvXCIgKyBlYW4sXHJcbiAgICAgICAgICAgIHR5cGU6IFwiZ2V0XCIsXHJcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBsZXQgY29udHJvbGxlciByZXN1bWUgd2l0aCBzdHVmZlxyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZGF0YVswXSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoeGhyLCBzdGF0dXMsIGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAkKFwiI2NvbXBvbmVudFwiKS5sb2FkKFwiL3ZpZXdzL2Vycm9yL2Vycm9yLmh0bWxcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBSZXR1cm4gdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBieSBvdGhlciBwcm9ncmFtcyAodGhlIGNvbnRyb2xsZXIgaW4gdGhpcyBjYXNlKVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBHZXRQcm9kdWN0SW5mbzogR2V0UHJvZHVjdEluZm9cclxuICAgIH1cclxufTsiLCJ2YXIgVXNlck1vZGVsID0gZnVuY3Rpb24odXNlcmlkKVxyXG57XHJcbiAgICBmdW5jdGlvbiBHZXRVc2VySW5mbyhjYWxsYmFjaylcclxuICAgIHtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6IFwiaHR0cHM6Ly9hcGkuYXotZ2FtZXMubmwvdXNlcnMvXCIgKyB1c2VyaWQsXHJcbiAgICAgICAgICAgIHR5cGU6IFwiZ2V0XCIsXHJcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBsZXQgY29udHJvbGxlciByZXN1bWUgd2l0aCBzdHVmZlxyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZGF0YVswXSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoeGhyLCBzdGF0dXMsIGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAkKFwiI2NvbXBvbmVudFwiKS5sb2FkKFwiL2Vycm9yLmh0bWxcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBSZXR1cm4gdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBieSBvdGhlciBwcm9ncmFtcyAodGhlIGNvbnRyb2xsZXIgaW4gdGhpcyBjYXNlKVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBHZXRVc2VySW5mbzogR2V0VXNlckluZm9cclxuICAgIH1cclxufTsiLCJ2YXIgV2lzaGxpc3RNb2RlbCA9IGZ1bmN0aW9uKClcclxue1xyXG4gICAgZnVuY3Rpb24gZ2V0V2lzaGxpc3QoY2FsbGJhY2spXHJcbiAgICB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyhcIldMIE1PREVMOiBJbnNpZGUgZ2V0V2lzaExpc3RcIik7XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiBcImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MS93aXNobGlzdFwiLFxyXG4gICAgICAgICAgICB0eXBlOiBcImdldFwiLFxyXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICBcIkF1dGhvcml6YXRpb25cIjogXCJCZWFyZXIgXCIgKyBDb29raWVIZWxwZXIuZ2V0Q29va2llKFwiYWNjZXNzX3Rva2VuXCIpXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhkYXRhKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICh4aHIsIHN0YXR1cywgZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICQoXCIjY29tcG9uZW50XCIpLmxvYWQoXCIvdmlld3MvZXJyb3IvZXJyb3IuaHRtbFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGFkZFRvV2lzaGxpc3Qodmlld0RhdGEsIGNhbGxiYWNrKVxyXG4gICAge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coXCJXTCBNT0RFTDogSW5zaWRlIGFkZFRvV2lzaExpc3RcIik7XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiBcImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MS93aXNobGlzdC9cIiArIENvb2tpZUhlbHBlci5nZXRDb29raWUoXCJ1c2VyX2lkXCIpIC8qKyBcIi9cIiArIHZpZXdEYXRhLmVhbl9udW1iZXIqLyxcclxuICAgICAgICAgICAgdHlwZTogXCJwb3N0XCIsXHJcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICAgIHdpc2hsaXN0X2lkIDogdmlld0RhdGEud2lzaGxpc3RfaWQsXHJcbiAgICAgICAgICAgICAgICAvL2Vhbl9udW1iZXIgOiB2aWV3RGF0YS5lYW5fbnVtYmVyXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICBcIkF1dGhvcml6YXRpb25cIjogXCJCZWFyZXIgXCIgKyBDb29raWVIZWxwZXIuZ2V0Q29va2llKFwiYWNjZXNzX3Rva2VuXCIpXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhkYXRhKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKHhociwgc3RhdHVzLCBlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgJChcIiNjb21wb25lbnRcIikubG9hZChcIi92aWV3cy9lcnJvci9lcnJvci5odG1sXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZGVsZXRlRnJvbVdpc2hsaXN0KGVhbiwgY2FsbGJhY2spXHJcbiAgICB7XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiBcImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MS93aXNobGlzdC9cIiArIENvb2tpZUhlbHBlci5nZXRDb29raWUoXCJ1c2VyX2lkXCIpICsgXCIvXCIgKyBTdHJpbmcoZWFuKSwgLy9cImh0dHBzOi8vYXBpLmF6LWdhbWVzLm5sL1xyXG4gICAgICAgICAgICB0eXBlOiBcIkRFTEVURVwiLFxyXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxyXG4gICAgICAgICAgICAvLyBjb250ZW50VHlwZTogXCJhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04XCIsXHJcbiAgICAgICAgICAgIC8vIGRhdGE6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICBcIkF1dGhvcml6YXRpb25cIjogXCJCZWFyZXIgXCIgKyBDb29raWVIZWxwZXIuZ2V0Q29va2llKFwiYWNjZXNzX3Rva2VuXCIpXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhkYXRhKTsgLy9tb2V0IGRhdGEgcGVyIHNlIG1lZWdldmVuIGFhbiBjYWxsYmFjaz9cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICh4aHIsIHN0YXR1cywgZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICQoXCIjY29tcG9uZW50XCIpLmxvYWQoXCIvdmlld3MvZXJyb3IvZXJyb3IuaHRtbFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGdldFdpc2hsaXN0OiBnZXRXaXNobGlzdCxcclxuICAgICAgICBhZGRUb1dpc2hsaXN0OiBhZGRUb1dpc2hsaXN0LFxyXG4gICAgICAgIGRlbGV0ZUZyb21XaXNobGlzdDogZGVsZXRlRnJvbVdpc2hsaXN0XHJcbiAgICB9XHJcbn07IiwidmFyIEFkbWluVXNlckNvbnRyb2xsZXIgPSBmdW5jdGlvbih2aWV3SGVscGVyLCBtb2RlbClcclxue1xyXG4gICAgdmFyIE1vZGVsICAgICAgPSBtb2RlbDtcclxuICAgIHZhciBWaWV3SGVscGVyID0gdmlld0hlbHBlcjtcclxuICAgIFxyXG4gICAgLy8gTWFpbiBmdW5jdGlvbiwgYWxzbyB0aGUgc3RhcnQgc3RhcnRwb2ludCBmb3IgYSBwYWdlXHJcbiAgICBmdW5jdGlvbiBtYWluKClcclxuICAgIHtcclxuICAgICAgICBWaWV3SGVscGVyLnNldEFjdGlvbkxpc3RlbmVyKGdldFBhZ2UpO1xyXG4gICAgICAgIHZpZXdIZWxwZXIuc2V0U2F2ZUxpc3RlbmVyKHNhdmVVc2VySW5mbyk7XHJcbiAgICAgICAgdmlld0hlbHBlci5zZXREZWxldGVMaXN0ZW5lcihkZWxldGVVc2VyKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRQYWdlKClcclxuICAgIHtcclxuICAgICAgICBNb2RlbC5nZXRQYWdlKHNldFZpZXcpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBmdW5jdGlvbiBzZXRWaWV3KGRhdGEpIFxyXG4gICAge1xyXG4gICAgICAgIFZpZXdIZWxwZXIuc2V0VmlldyhkYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzYXZlVXNlckluZm8oZXZlbnQpXHJcbiAgICB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHJcbiAgICAgICAgdmFyIGZvcm1EYXRhID0gJCh0aGlzKS5zZXJpYWxpemVPYmplY3QoKTtcclxuXHJcbiAgICAgICAgTW9kZWwuc2F2ZVVzZXJJbmZvKGZvcm1EYXRhLCBmdW5jdGlvbihmb3JtRGF0YSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGFsZXJ0KFwiR2VicnVpa2VyIHN1Y2Nlc3ZvbCBnZcO8cGRhdGUuXCIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGRlbGV0ZVVzZXIodXNlcl9pZClcclxuICAgIHtcclxuICAgICAgICBNb2RlbC5kZWxldGVVc2VyKHVzZXJfaWQsIGZ1bmN0aW9uKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGFsZXJ0KFwiR2VicnVpa2VyIHN1Y2Nlc3ZvbCBnZWRlbGV0ZS5cIik7XHJcbiAgICAgICAgICAgIFJvdXRlci5yb3V0ZShcIi9hZG1pblwiKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBSZXR1cm4gdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBieSBvdGhlciBwcm9ncmFtcyAodGhlIGNvbnRyb2xsZXIgaW4gdGhpcyBjYXNlKVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBtYWluOiBtYWluXHJcbiAgICB9XHJcbn07IiwidmFyIEFkbWluQ29udHJvbGxlciA9IGZ1bmN0aW9uKHZpZXdIZWxwZXIsIG1vZGVsKVxyXG57XHJcbiAgICB2YXIgTW9kZWwgICAgICA9IG1vZGVsO1xyXG4gICAgdmFyIFZpZXdIZWxwZXIgPSB2aWV3SGVscGVyO1xyXG4gICAgXHJcbiAgICAvLyBNYWluIGZ1bmN0aW9uLCBhbHNvIHRoZSBzdGFydCBzdGFydHBvaW50IGZvciBhIHBhZ2VcclxuICAgIGZ1bmN0aW9uIG1haW4oKVxyXG4gICAge1xyXG4gICAgICAgIFZpZXdIZWxwZXIuc2V0QWN0aW9uTGlzdGVuZXIoZ2V0UGFnZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0UGFnZSgpXHJcbiAgICB7XHJcbiAgICAgICAgTW9kZWwuZ2V0UGFnZShzZXRWaWV3KTsgLy9cIlwiLCBmdW5jdGlvbiAoZGF0YSkgeyBWaWV3SGVscGVyLnNldFZpZXcoZGF0YSk7IH0pO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gc2V0VmlldyhkYXRhKSBcclxuICAgIHtcclxuICAgICAgICBWaWV3SGVscGVyLnNldFZpZXcoZGF0YSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIG1haW46IG1haW5cclxuICAgIH1cclxufTsiLCJ2YXIgQ2FydENvbnRyb2xsZXIgPSBmdW5jdGlvbih2aWV3SGVscGVyLCBtb2RlbClcclxue1xyXG4gICAgdmFyIE1vZGVsICAgICAgPSBtb2RlbDtcclxuICAgIHZhciBWaWV3SGVscGVyID0gdmlld0hlbHBlcjtcclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgYWxsIGNhcnQgaXRlbXMgYW5kIHBhc3MgdGhlIGl0ZW1zIHRvIHRoZSBWaWV3SGVscGVyXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGdldENhcnQoKVxyXG4gICAge1xyXG4gICAgICAgIE1vZGVsLmdldENhcnQoZnVuY3Rpb24gKGRhdGEpIHsgVmlld0hlbHBlci5zZXRWaWV3KGRhdGEpOyB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFkZCBhIGl0ZW0gdG8gdGhlIGNhcnQgYW5kIHBhc3MgaXQgdG8gdGhlIHZpZXdIZWxwZXJcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtpbnR9IGlkICBJdGVtIGlkXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGFkZFByb2R1Y3QoaWQpXHJcbiAgICB7XHJcbiAgICAgICAgTW9kZWwuYWRkUHJvZHVjdChpZCwgZnVuY3Rpb24gKGRhdGEpIHsgVmlld0hlbHBlci5hZGRJdGVtKGRhdGEpOyB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZSBhIHByb2R1Y3QgYW5kIGNhbGwgdGhlIHZpZXdIZWxwZXJcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gcmVtb3ZlUHJvZHVjdChpZClcclxuICAgIHtcclxuICAgICAgICBNb2RlbC5yZW1vdmVQcm9kdWN0KGlkLCBmdW5jdGlvbiAoZGF0YSkgeyB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBNYWluIGZ1bmN0aW9uLCBhbHNvIHRoZSBzdGFydCBzdGFydHBvaW50IGZvciBhIHBhZ2VcclxuICAgIGZ1bmN0aW9uIG1haW4oKVxyXG4gICAgeyAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgIFZpZXdIZWxwZXIuc2V0QWN0aW9uTGlzdGVuZXIoZ2V0Q2FydCk7XHJcbiAgICAgICAgVmlld0hlbHBlci5zZXRBZGRQcm9kdWN0TGlzdGVuZXIoYWRkUHJvZHVjdCk7XHJcbiAgICAgICAgVmlld0hlbHBlci5zZXRSZW1vdmVMaXN0ZW5lcihyZW1vdmVQcm9kdWN0KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBSZXR1cm4gdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBieSBvdGhlciBwcm9ncmFtcyAodGhlIGNvbnRyb2xsZXIgaW4gdGhpcyBjYXNlKVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBtYWluOiBtYWluXHJcbiAgICB9XHJcbn07IiwidmFyIERlbGV0ZUNvbnRyb2xsZXIgPSBmdW5jdGlvbih2aWV3SGVscGVyLCBtb2RlbClcclxue1xyXG4gICAgdmFyIE1vZGVsICAgICAgPSBtb2RlbDtcclxuICAgIHZhciBWaWV3SGVscGVyID0gdmlld0hlbHBlcjtcclxuXHJcbiAgICBmdW5jdGlvbiBtYWluKClcclxuICAgIHtcclxuICAgICAgICBcclxuICAgIH1cclxufSIsInZhciBFcnJvckNvbnRyb2xsZXIgPSBmdW5jdGlvbih2aWV3SGVscGVyKVxyXG57XHJcbiAgICB2YXIgVmlld0hlbHBlciA9IHZpZXdIZWxwZXI7XHJcblxyXG4gICAgLy8gTWFpbiBmdW5jdGlvbiwgYWxzbyB0aGUgc3RhcnQgc3RhcnRwb2ludCBmb3IgYSBwYWdlXHJcbiAgICBmdW5jdGlvbiBtYWluKClcclxuICAgIHtcclxuICAgICAgICAvLyBzZXQgdmlldyB0byBsb2dpbiBmb3JtXHJcbiAgICAgICAgVmlld0hlbHBlci5zZXRWaWV3KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmV0dXJuIHRoZSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgcHJvZ3JhbXMgKHRoZSBjb250cm9sbGVyIGluIHRoaXMgY2FzZSlcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgbWFpbjogbWFpblxyXG4gICAgfVxyXG59OyIsInZhciBMb2dpbkNvbnRyb2xsZXIgPSBmdW5jdGlvbih2aWV3SGVscGVyLCBtb2RlbClcclxue1xyXG4gICAgdmFyIE1vZGVsICAgICAgPSBtb2RlbDtcclxuICAgIHZhciBWaWV3SGVscGVyID0gdmlld0hlbHBlcjtcclxuICAgIFxyXG4gICAgLy8gRnVuY3Rpb24gdGhhdCBpcyBleGVjdXRlZCBvbiBhIGFjdGlvbiBsaXN0ZW5lclxyXG4gICAgZnVuY3Rpb24gYWN0aW9uUGVyZm9ybWVkKGV2ZW50KVxyXG4gICAge1xyXG4gICAgICAgIC8vIFByZXZlbnQgc2VuZGluZyB0aGUgZm9ybVxyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcblxyXG4gICAgICAgIC8vIExvb3AgdHJvdWdoIHRoZSBmb3JtIGRhdGEgYW5kIGdldCBhbGwgZmllbGRzXHJcbiAgICAgICAgdmFyIGZvcm1EYXRhID0ge307XHJcbiAgICAgICAgJC5lYWNoKCQodGhpcykuc2VyaWFsaXplQXJyYXkoKSwgZnVuY3Rpb24gKGksIGZpZWxkKSB7XHJcbiAgICAgICAgICAgIGZvcm1EYXRhW2ZpZWxkLm5hbWVdID0gZmllbGQudmFsdWU7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIGxldCBtb2RlbCBzZW5kIGVtYWlsIGFuZCBwYXNzd29yZCB0byBBUElcclxuICAgICAgICBNb2RlbC5sb2dpbihmb3JtRGF0YS5lbWFpbCwgZm9ybURhdGEucGFzc3dvcmQsIGZ1bmN0aW9uIG9uU3VjY2VzcyhkYXRhKSB7XHJcbiAgICAgICAgICAgIC8vIHNob3cgdWl0bG9nZ2VuIGJ1dHRvblxyXG4gICAgICAgICAgICAkKFwiI2lubG9nZ2VuX3RleHRcIikuaGlkZSgpO1xyXG4gICAgICAgICAgICAkKFwiI3VpdGxvZ2dlbl90ZXh0XCIpLnNob3coKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFdlZXJnZWVmIGVlbiBhbmRlcmUgcGFnaW5hIGdlYmFzc2VlcmQgb3AgJ2FkbWluJyBvZiAncmVnaXN0ZXJlZCB1c2VyJ1xyXG4gICAgICAgICAgICBuZXcgUGFnZUNvbnRyb2xsZXIobmV3IFBhZ2VWaWV3SGVscGVyKCksIG5ldyBQYWdlTW9kZWwoKSkubWFpbigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIE1haW4gZnVuY3Rpb24sIGFsc28gdGhlIHN0YXJ0IHN0YXJ0cG9pbnQgZm9yIGEgcGFnZVxyXG4gICAgZnVuY3Rpb24gbWFpbigpXHJcbiAgICB7XHJcbiAgICAgICAgLy8gc2V0IHZpZXcgdG8gbG9naW4gZm9ybVxyXG4gICAgICAgIFZpZXdIZWxwZXIuc2V0VmlldygpO1xyXG5cclxuICAgICAgICAvLyB1c2VyIGZpbGxzIGluIGVtYWlsIGFuZCBwYXNzd29yZDsgY2xpY2tzICdsb2dpbic6IFZJRVcgbm90aWNlcyB0aGlzIGFuZCByZWFjdHNcclxuICAgICAgICBWaWV3SGVscGVyLnNldEFjdGlvbkxpc3RlbmVyKGFjdGlvblBlcmZvcm1lZCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmV0dXJuIHRoZSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgcHJvZ3JhbXMgKHRoZSBjb250cm9sbGVyIGluIHRoaXMgY2FzZSlcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgbWFpbjogbWFpblxyXG4gICAgfVxyXG59OyIsInZhciBMb2dvdXRDb250cm9sbGVyID0gZnVuY3Rpb24odmlld0hlbHBlciwgbW9kZWwpXHJcbntcclxuICAgIHZhciBNb2RlbCAgICAgID0gbW9kZWw7XHJcbiAgICB2YXIgVmlld0hlbHBlciA9IHZpZXdIZWxwZXI7XHJcbiAgICBcclxuICAgIC8vIEZ1bmN0aW9uIHRoYXQgaXMgZXhlY3V0ZWQgb24gYSBhY3Rpb24gbGlzdGVuZXJcclxuICAgIGZ1bmN0aW9uIGFjdGlvblBlcmZvcm1lZChldmVudClcclxuICAgIHtcclxuICAgICAgICBNb2RlbC5sb2dvdXQoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgLy8gc2hvdyB1aXRsb2dnZW4gYnV0dG9uXHJcbiAgICAgICAgICAgICQoXCIjaW5sb2dnZW5fdGV4dFwiKS5zaG93KCk7XHJcbiAgICAgICAgICAgICQoXCIjdWl0bG9nZ2VuX3RleHRcIikuaGlkZSgpO1xyXG5cclxuICAgICAgICAgICAgLy8gc2V0IHZpZXcgdG8gbG9naW4gZm9ybVxyXG4gICAgICAgICAgICBWaWV3SGVscGVyLnNldFZpZXcoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBNYWluIGZ1bmN0aW9uLCBhbHNvIHRoZSBzdGFydCBzdGFydHBvaW50IGZvciBhIHBhZ2VcclxuICAgIGZ1bmN0aW9uIG1haW4oKVxyXG4gICAge1xyXG4gICAgICAgIC8vIHVzZXIgZmlsbHMgaW4gZW1haWwgYW5kIHBhc3N3b3JkOyBjbGlja3MgJ2xvZ2luJzogVklFVyBub3RpY2VzIHRoaXMgYW5kIHJlYWN0c1xyXG4gICAgICAgIFZpZXdIZWxwZXIuc2V0QWN0aW9uTGlzdGVuZXIoYWN0aW9uUGVyZm9ybWVkKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBSZXR1cm4gdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBieSBvdGhlciBwcm9ncmFtcyAodGhlIGNvbnRyb2xsZXIgaW4gdGhpcyBjYXNlKVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBtYWluOiBtYWluXHJcbiAgICB9XHJcbn07IiwidmFyIFBhZ2VDb250cm9sbGVyID0gZnVuY3Rpb24odmlld0hlbHBlciwgbW9kZWwpXHJcbntcclxuICAgIHZhciBNb2RlbCA9IG1vZGVsO1xyXG4gICAgdmFyIFZpZXcgID0gdmlld0hlbHBlcjtcclxuICAgIFxyXG4gICAgLy8gRnVuY3Rpb24gdGhhdCBpcyBleGVjdXRlZCBvbiBhIGFjdGlvbiBsaXN0ZW5lclxyXG4gICAgZnVuY3Rpb24gYWN0aW9uUGVyZm9ybWVkKGV2ZW50KVxyXG4gICAge1xyXG4gICAgICAgIE1vZGVsLmdldFBhZ2UoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgVmlldy5zZXRWaWV3KGRhdGEpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIE1haW4gZnVuY3Rpb24sIGFsc28gdGhlIHN0YXJ0cG9pbnQgZm9yIGEgcGFnZVxyXG4gICAgZnVuY3Rpb24gbWFpbigpXHJcbiAgICB7ICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgVmlldy5zZXRBY3Rpb25MaXN0ZW5lcihhY3Rpb25QZXJmb3JtZWQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIG1haW46IG1haW5cclxuICAgIH1cclxufTsiLCJ2YXIgUHJvZHVjdHNDb250cm9sbGVyID0gZnVuY3Rpb24odmlld0hlbHBlciwgbW9kZWwpXHJcbntcclxuICAgIHZhciBNb2RlbCAgICAgID0gbW9kZWw7XHJcbiAgICB2YXIgVmlld0hlbHBlciA9IHZpZXdIZWxwZXI7XHJcbiAgICBcclxuICAgIC8vIEZ1bmN0aW9uIHRoYXQgaXMgZXhlY3V0ZWQgb24gYSBhY3Rpb24gbGlzdGVuZXJcclxuICAgIGZ1bmN0aW9uIGdldFBhZ2UoKVxyXG4gICAge1xyXG4gICAgICAgIE1vZGVsLmdldFBhZ2UoXCJcIiwgZnVuY3Rpb24gKGRhdGEpIHsgVmlld0hlbHBlci5zZXRWaWV3KGRhdGEpOyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBmaWx0ZXJQcm9kdWN0cyhldmVudClcclxuICAgIHtcclxuICAgICAgICAvLyBQcmV2ZW50IHNlbmRpbmcgdGhlIGZvcm0gKHBhZ2UgcmVsb2FkKVxyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgIHZhciBmaWx0ZXJzID0gJCh0aGlzKS5zZXJpYWxpemUoKTtcclxuICAgICAgICBNb2RlbC5nZXRQYWdlKGZpbHRlcnMsIGZ1bmN0aW9uIChkYXRhKSB7IFZpZXdIZWxwZXIubG9hZFByb2R1Y3RzKGRhdGEpOyB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBNYWluIGZ1bmN0aW9uLCBhbHNvIHRoZSBzdGFydCBzdGFydHBvaW50IGZvciBhIHBhZ2VcclxuICAgIGZ1bmN0aW9uIG1haW4oKVxyXG4gICAge1xyXG4gICAgICAgIFZpZXdIZWxwZXIuc2V0QWN0aW9uTGlzdGVuZXIoZ2V0UGFnZSk7XHJcbiAgICAgICAgVmlld0hlbHBlci5zZXRGaWx0ZXJMaXN0ZW5lcihmaWx0ZXJQcm9kdWN0cyk7XHJcbiAgICAgICAgLy8gbmV3IGFjdGlvbiB3YW5uZXIgZXIgb3AgZmlsdGVyIHdvcmR0IGdlZHJ1a3RcclxuICAgIH1cclxuXHJcbiAgICAvLyBSZXR1cm4gdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBieSBvdGhlciBwcm9ncmFtcyAodGhlIGNvbnRyb2xsZXIgaW4gdGhpcyBjYXNlKVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBtYWluOiBtYWluXHJcbiAgICB9XHJcbn07IiwidmFyIFJlZ2lzdGVyQ29udHJvbGxlciA9IGZ1bmN0aW9uKHZpZXdIZWxwZXIsIG1vZGVsKVxyXG57XHJcbiAgICB2YXIgTW9kZWwgICAgICA9IG1vZGVsO1xyXG4gICAgdmFyIFZpZXdIZWxwZXIgPSB2aWV3SGVscGVyO1xyXG4gICAgXHJcbiAgICAvLyBGdW5jdGlvbiB0aGF0IGlzIGV4ZWN1dGVkIG9uIGEgYWN0aW9uIGxpc3RlbmVyXHJcbiAgICBmdW5jdGlvbiBhY3Rpb25QZXJmb3JtZWQoKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiaW4gYWN0aW9uUGVyZm9ybWVkXCIpOyAvL3Rlc3RcclxuXHJcbiAgICAgICAgLy8gUHJldmVudCBzZW5kaW5nIHRoZSBmb3JtXHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgLy8gcmVzZXQgZXJyb3IgbWVzc2FnZXNcclxuICAgICAgICAkKFwiI3JlZ2lfYXBpX2Vycm9yX21lc3NhZ2VcIikuaGlkZSgpO1xyXG4gICAgICAgICQoXCIjd3cyX2Vycm9yX21lc3NhZ2VcIikuaGlkZSgpO1xyXG5cclxuICAgICAgICAvLyBwdXQgZm9ybSBmaWVsZHMgaW4gamF2YXNjcmlwdCBPYmplY3RcclxuICAgICAgICB2YXIgZm9ybURhdGEgPSB7fTtcclxuXHJcbiAgICAgICAgJC5lYWNoKCQodGhpcykuc2VyaWFsaXplQXJyYXkoKSwgZnVuY3Rpb24gKGksIGZpZWxkKSB7XHJcbiAgICAgICAgICAgIGZvcm1EYXRhW2ZpZWxkLm5hbWVdID0gZmllbGQudmFsdWU7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIGZpeCBkYXRlIG9mIGJpcnRoIChBUEkgZXhwZWN0cyBjZXJ0YWluIGZvcm1hdClcclxuICAgICAgICBmb3JtRGF0YVtcImJpcnRoX2RhdGVcIl0gPSBmb3JtRGF0YS5qYWFyICsgXCItXCIgKyBmb3JtRGF0YS5tYWFuZCArIFwiLVwiICsgZm9ybURhdGEuZGFnO1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZyhmb3JtRGF0YSk7XHJcblxyXG4gICAgICAgIC8vIGNoZWNrIHdoZXRoZXIgYW55IG1hbmRhdG9yeSBmaWVsZCBpcyBsZWZ0IGVtcHR5IGJ5IHVzZXIgYW5kXHJcbiAgICAgICAgLy8gaWYgc28sIGFib3J0IGZ1bmN0aW9uXHJcbiAgICAgICAgdmFyIG1hbmRhdG9yeUZpZWxkTWlzc2VzID0gZmFsc2U7XHJcbiAgICAgICAgdmFyIG1hbmRhdG9yeUZpZWxkcyA9IFtcInZvb3JuYWFtXCIsIFwiYWNodGVybmFhbVwiLCBcInBvc3Rjb2RlXCIsIFwiaHVpc251bW1lclwiLCBcImVfbWFpbGFkcmVzXCIsIFwid2FjaHR3b29yZFwiLCBcIndhY2h0d29vcmQyXCIsIFwic2VjdXJpdHlfYW5zd2VyXCJdOyAvL2Ryb3Bkb3ducyAobGlrZSBnZW5kZXIpIGFyZSBhbHdheXMgZmlsbGVkIGluLCBzbyBkb24ndCBwdXQgaW4gdGhpcyBsaXN0XHJcblxyXG4gICAgICAgIC8vIChyZXNldCBhbGwgZmllbGRzIHRvICd2YWxpZCcgYmVjYXVzZSB1c2VyIG1heSBoYXZlIGZpbGxlZCBpbiBmaWVsZHMgc2luY2VcclxuICAgICAgICAvLyB0aGUgcHJldmlvdXMgdGltZSB0aGlzIGZ1bmN0aW9uIHdhcyBjYWxsZWQpXHJcbiAgICAgICAgJC5lYWNoKG1hbmRhdG9yeUZpZWxkcywgZnVuY3Rpb24gKGksIG1hbkZpZWxkKSB7XHJcbiAgICAgICAgICAgICQoXCIjXCIgKyBtYW5GaWVsZCkucmVtb3ZlQ2xhc3MoXCJpbnZhbGlkXCIpO1xyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgICQuZWFjaChtYW5kYXRvcnlGaWVsZHMsIGZ1bmN0aW9uIChpLCBtYW5GaWVsZCkge1xyXG4gICAgICAgICAgICBpZiAoZm9ybURhdGFbbWFuRmllbGRdID09IFwiXCIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICQoXCIjXCIgKyBtYW5GaWVsZCkuYWRkQ2xhc3MoXCJpbnZhbGlkXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIG1hbmRhdG9yeUZpZWxkTWlzc2VzID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIGlmIGEgbWFuZGF0b3J5IGZpZWxkIGlzIGVtcHR5LCBzaG93IGVycm9yIG1lc3NhZ2UgdG8gdXNlciBhbmQgYWJvcnQgZnVuY3Rpb25cclxuICAgICAgICBpZiAobWFuZGF0b3J5RmllbGRNaXNzZXMpXHJcbiAgICAgICAgeyBcclxuICAgICAgICAgICAgLy8gc2Nyb2xsIHRvIHRvcCBvZiBwYWdlIHNvIHRoYXQgdXNlcnMgc2VlIG1lc3NhZ2UgXCJzb21ldGhpbmcgaXMgbm90IGZpbGxlZCBpblwiXHJcbiAgICAgICAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCAwKTtcclxuICAgICAgICAgICAgLy8gc2hvdyBtZXNzYWdlIFwic29tZXRoaW5nIGlzIG5vdCBmaWxsZWQgaW5cIlxyXG4gICAgICAgICAgICAkKFwiI3JlZ2lzdGVyX2Vycm9yX21lc3NhZ2VcIikuc2hvdygpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBwYXNzd29yZHNOb3RJZGVudGljYWwgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgaWYgKGZvcm1EYXRhLndhY2h0d29vcmQgIT0gZm9ybURhdGEud2FjaHR3b29yZDIpIFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcGFzc3dvcmRzTm90SWRlbnRpY2FsID0gdHJ1ZTtcclxuICAgICAgICAgICAgJChcIiN3dzJfZXJyb3JfbWVzc2FnZVwiKS5zaG93KCk7XHJcbiAgICAgICAgICAgICQoXCIjd2FjaHR3b29yZFwiKS5hZGRDbGFzcyhcImludmFsaWRcIik7XHJcbiAgICAgICAgICAgICQoXCIjd2FjaHR3b29yZDJcIikuYWRkQ2xhc3MoXCJpbnZhbGlkXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gYWJvcnQgZnVuY3Rpb24gaWYgbWFuZGF0b3J5IGZpZWxkIG1pc3NlcyBvciBwYXNzd29yZHMgbm90IGlkZW50aWNhbFxyXG4gICAgICAgIGlmIChtYW5kYXRvcnlGaWVsZE1pc3NlcyB8fCBwYXNzd29yZHNOb3RJZGVudGljYWwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiY29udGludWVkXCIpXHJcbiAgICAgICAgLy8gbGV0IG1vZGVsIHNlbmQgdXNlciBpbmZvIHRvIEFQSVxyXG4gICAgICAgIE1vZGVsLnJlZ2lzdGVyKGZvcm1EYXRhLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICBWaWV3SGVscGVyLnNldFZpZXcoJy92aWV3cy9yZWdpc3Rlci9hZnRlcl9yZWdpc3Rlci5odG1sJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTWFpbiBmdW5jdGlvbiwgYWxzbyB0aGUgc3RhcnQgc3RhcnRwb2ludCBmb3IgYSBwYWdlXHJcbiAgICBmdW5jdGlvbiBtYWluKClcclxuICAgIHtcclxuICAgICAgICAvLyBzZXQgdmlldyB0byByZWdpc3RlciBmb3JtXHJcbiAgICAgICAgVmlld0hlbHBlci5zZXRWaWV3KCcvdmlld3MvcmVnaXN0ZXIvcmVnaXN0ZXIuaHRtbCcpO1xyXG5cclxuICAgICAgICAvLyB1c2VyIGZpbGxzIGluIHJlZ2lzdGVyIGluZm87IGNsaWNrcyAncmVnaXN0ZXInOiB2aWV3IG5vdGljZXMgdGhpcyBhbmQgcmVhY3RzXHJcbiAgICAgICAgVmlld0hlbHBlci5zZXRBY3Rpb25MaXN0ZW5lcihhY3Rpb25QZXJmb3JtZWQpO1xyXG5cclxuICAgICAgICAvLyBlbWFpbCBhbmQgcGFzc3dvcmQgYXJlIHNlbmQgdG8gQVBJOyBBUEkgY2hlY2tzIGlmIGVtYWlsIGFscmVhZHkgZXhpc3RzIChhbmQgd2hldGhlciBwYXNzd29yZCBpcyBjb3JyZWN0PykgXHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmV0dXJuIHRoZSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgcHJvZ3JhbXMgKHRoZSBjb250cm9sbGVyIGluIHRoaXMgY2FzZSlcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgbWFpbjogbWFpblxyXG4gICAgfVxyXG59OyIsInZhciBSZXNldFBhc3N3b3JkQ29udHJvbGxlciA9IGZ1bmN0aW9uKHZpZXdIZWxwZXIsIG1vZGVsKVxyXG57XHJcbiAgICB2YXIgTW9kZWwgICAgICA9IG1vZGVsO1xyXG4gICAgdmFyIFZpZXdIZWxwZXIgPSB2aWV3SGVscGVyO1xyXG4gICAgXHJcbiAgICAgLy8gRnVuY3Rpb24gdGhhdCBpcyBleGVjdXRlZCBvbiBhIGFjdGlvbiBsaXN0ZW5lclxyXG4gICAgZnVuY3Rpb24gYWN0aW9uUGVyZm9ybWVkKClcclxuICAgIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcImluIGFjdGlvblBlcmZvcm1lZFwiKTsgLy90ZXN0XHJcblxyXG4gICAgICAgIC8vIFByZXZlbnQgc2VuZGluZyB0aGUgZm9ybVxyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgIC8vIHJlc2V0IGVycm9yIG1lc3NhZ2VzXHJcbiAgICAgICAgJChcIiNyZXNldF9wYXNzd29yZF9hcGlfZXJyb3JfbWVzc2FnZVwiKS5oaWRlKCk7XHJcbiAgICAgICAgJChcIiN3dzJfZXJyb3JfbWVzc2FnZVwiKS5oaWRlKCk7XHJcblxyXG4gICAgICAgIC8vIHB1dCBmb3JtIGZpZWxkcyBpbiBqYXZhc2NyaXB0IE9iamVjdFxyXG4gICAgICAgIHZhciBmb3JtRGF0YSA9IHt9O1xyXG5cclxuICAgICAgICAkLmVhY2goJCh0aGlzKS5zZXJpYWxpemVBcnJheSgpLCBmdW5jdGlvbiAoaSwgZmllbGQpIHtcclxuICAgICAgICAgICAgZm9ybURhdGFbZmllbGQubmFtZV0gPSBmaWVsZC52YWx1ZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gY2hlY2sgd2hldGhlciBhbnkgbWFuZGF0b3J5IGZpZWxkIGlzIGxlZnQgZW1wdHkgYnkgdXNlciBhbmRcclxuICAgICAgICAvLyBpZiBzbywgYWJvcnQgZnVuY3Rpb25cclxuICAgICAgICB2YXIgbWFuZGF0b3J5RmllbGRNaXNzZXMgPSBmYWxzZTtcclxuICAgICAgICB2YXIgbWFuZGF0b3J5RmllbGRzID0gW1wid2FjaHR3b29yZFwiLCBcIndhY2h0d29vcmQyXCIsIFwiZV9tYWlsYWRyZXNcIixcInNlY3VyaXR5X2Fuc3dlclwiXTsgLy9kcm9wZG93bnMgKGxpa2Ugc2VjdXJpdHlfcXVlc3Rpb25fYW5zd2VyKSBhcmUgYWx3YXlzIGZpbGxlZCBpbiwgc28gZG9uJ3QgcHV0IGluIHRoaXMgbGlzdFxyXG5cclxuICAgICAgICAvLyAocmVzZXQgYWxsIGZpZWxkcyB0byAndmFsaWQnIGJlY2F1c2UgdXNlciBtYXkgaGF2ZSBmaWxsZWQgaW4gZmllbGRzIHNpbmNlXHJcbiAgICAgICAgLy8gdGhlIHByZXZpb3VzIHRpbWUgdGhpcyBmdW5jdGlvbiB3YXMgY2FsbGVkKVxyXG4gICAgICAgICQuZWFjaChtYW5kYXRvcnlGaWVsZHMsIGZ1bmN0aW9uIChpLCBtYW5GaWVsZCkge1xyXG4gICAgICAgICAgICAkKFwiI1wiICsgbWFuRmllbGQpLnJlbW92ZUNsYXNzKFwiaW52YWxpZFwiKTtcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICAkLmVhY2gobWFuZGF0b3J5RmllbGRzLCBmdW5jdGlvbiAoaSwgbWFuRmllbGQpIHtcclxuICAgICAgICAgICAgaWYgKGZvcm1EYXRhW21hbkZpZWxkXSA9PSBcIlwiKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAkKFwiI1wiICsgbWFuRmllbGQpLmFkZENsYXNzKFwiaW52YWxpZFwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICBtYW5kYXRvcnlGaWVsZE1pc3NlcyA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBcclxuICAgICAgICAvLyBpZiBhIG1hbmRhdG9yeSBmaWVsZCBpcyBlbXB0eSwgc2hvdyBlcnJvciBtZXNzYWdlIHRvIHVzZXIgYW5kIGFib3J0IGZ1bmN0aW9uXHJcbiAgICAgICAgaWYgKG1hbmRhdG9yeUZpZWxkTWlzc2VzKVxyXG4gICAgICAgIHsgXHJcbiAgICAgICAgICAgIC8vIHNjcm9sbCB0byB0b3Agb2YgcGFnZSBzbyB0aGF0IHVzZXJzIHNlZSBtZXNzYWdlIFwic29tZXRoaW5nIGlzIG5vdCBmaWxsZWQgaW5cIlxyXG4gICAgICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7XHJcbiAgICAgICAgICAgIC8vIHNob3cgbWVzc2FnZSBcInNvbWV0aGluZyBpcyBub3QgZmlsbGVkIGluXCJcclxuICAgICAgICAgICAgJChcIiNyZXNldF9lcnJvcl9tZXNzYWdlXCIpLnNob3coKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgcGFzc3dvcmRzTm90SWRlbnRpY2FsID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGlmIChmb3JtRGF0YS53YWNodHdvb3JkICE9IGZvcm1EYXRhLndhY2h0d29vcmQyKSBcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHBhc3N3b3Jkc05vdElkZW50aWNhbCA9IHRydWU7XHJcbiAgICAgICAgICAgICQoXCIjd3cyX2Vycm9yX21lc3NhZ2VcIikuc2hvdygpO1xyXG4gICAgICAgICAgICAkKFwiI3dhY2h0d29vcmRcIikuYWRkQ2xhc3MoXCJpbnZhbGlkXCIpO1xyXG4gICAgICAgICAgICAkKFwiI3dhY2h0d29vcmQyXCIpLmFkZENsYXNzKFwiaW52YWxpZFwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGFib3J0IGZ1bmN0aW9uIGlmIG1hbmRhdG9yeSBmaWVsZCBtaXNzZXMgb3IgcGFzc3dvcmRzIG5vdCBpZGVudGljYWxcclxuICAgICAgICBpZiAobWFuZGF0b3J5RmllbGRNaXNzZXMgfHwgcGFzc3dvcmRzTm90SWRlbnRpY2FsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zb2xlLmxvZyhcImNvbnRpbnVlZFwiKVxyXG4gICAgICAgIC8vIGxldCBtb2RlbCBzZW5kIHVzZXIgaW5mbyB0byBBUElcclxuICAgICAgICBNb2RlbC5yZXNldHBhc3N3b3JkKGZvcm1EYXRhLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICBWaWV3SGVscGVyLnNldFZpZXcoJ3ZpZXdzL3Jlc2V0cGFzc3dvcmQvYWZ0ZXJfcmVzZXQuaHRtbCcpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIE1haW4gZnVuY3Rpb24sIGFsc28gdGhlIHN0YXJ0IHN0YXJ0cG9pbnQgZm9yIGEgcGFnZVxyXG4gICAgZnVuY3Rpb24gbWFpbigpXHJcbiAgICB7ICAgICAgXHJcbiAgICAgICAgLy8gc2V0IHZpZXcgdG8gcmVzZXQgcGFzc3dvcmQgZm9ybVxyXG4gICAgICAgIFZpZXdIZWxwZXIuc2V0Vmlldygndmlld3MvcmVzZXRwYXNzd29yZC9yZXNldHBhc3N3b3JkLmh0bWwnKTtcclxuXHJcbiAgICAgICAgVmlld0hlbHBlci5zZXRBY3Rpb25MaXN0ZW5lcihhY3Rpb25QZXJmb3JtZWQpO1xyXG4gICAgICAgIC8vIG5ldyBhY3Rpb24gd2FubmVyIGVyIG9wIGZpbHRlciB3b3JkdCBnZWRydWt0XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmV0dXJuIHRoZSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgcHJvZ3JhbXMgKHRoZSBjb250cm9sbGVyIGluIHRoaXMgY2FzZSlcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgbWFpbjogbWFpblxyXG4gICAgfVxyXG59O1xyXG5cclxuXHJcblxyXG5cclxuIiwidmFyIFByb2R1Y3RDb250cm9sbGVyID0gZnVuY3Rpb24odmlld0hlbHBlciwgbW9kZWwpXHJcbntcclxuICAgIHZhciBNb2RlbCAgICAgID0gbW9kZWw7XHJcbiAgICB2YXIgVmlld0hlbHBlciA9IHZpZXdIZWxwZXI7XHJcbiAgICBcclxuICAgIC8vIEZ1bmN0aW9uIHRoYXQgaXMgZXhlY3V0ZWQgb24gYSBhY3Rpb24gbGlzdGVuZXJcclxuICAgIGZ1bmN0aW9uIGFjdGlvblBlcmZvcm1lZChldmVudClcclxuICAgIHtcclxuICAgICAgICAvLyBQcmV2ZW50IHNlbmRpbmcgdGhlIGZvcm1cclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4gICAgICAgIC8vIExvb3AgdHJvdWdoIHRoZSBmb3JtIGRhdGEgYW5kIGdldCBhbGwgZmllbGRzXHJcbiAgICAgICAgdmFyIGZvcm1EYXRhID0ge307XHJcbiAgICAgICAgJC5lYWNoKCQodGhpcykuc2VyaWFsaXplQXJyYXkoKSwgZnVuY3Rpb24gKGksIGZpZWxkKSB7XHJcbiAgICAgICAgICAgIGZvcm1EYXRhW2ZpZWxkLm5hbWVdID0gZmllbGQudmFsdWU7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIGxldCBtb2RlbCBzZW5kIGVtYWlsIGFuZCBwYXNzd29yZCB0byBBUElcclxuICAgICAgICBNb2RlbC5sb2dpbihmb3JtRGF0YS5lbWFpbCwgZm9ybURhdGEucGFzc3dvcmQsIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIC8vIHNob3cgdWl0bG9nZ2VuIGJ1dHRvblxyXG4gICAgICAgICAgICAkKFwiI2lubG9nZ2VuX3RleHRcIikuaGlkZSgpO1xyXG4gICAgICAgICAgICAkKFwiI3VpdGxvZ2dlbl90ZXh0XCIpLnNob3coKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFdlZXJnZWVmIGVlbiBhbmRlcmUgcGFnaW5hIGdlYmFzc2VlcmQgb3AgJ2FkbWluJyBvZiAncmVnaXN0ZXJlZCB1c2VyJ1xyXG4gICAgICAgICAgICBuZXcgUGFnZUNvbnRyb2xsZXIobmV3IFBhZ2VWaWV3SGVscGVyKCksIG5ldyBQYWdlTW9kZWwoKSkubWFpbigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGxldCB2aWV3IHNob3cgdmlldyB3aXRoIGRhdGEgZnJvbSBkYXRhYmFzZVxyXG4gICAgZnVuY3Rpb24gc2hvd1ZpZXcoZGF0YSlcclxuICAgIHtcclxuICAgICAgICB2aWV3SGVscGVyLnNldFZpZXcoZGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTWFpbiBmdW5jdGlvbiwgYWxzbyB0aGUgc3RhcnQgc3RhcnRwb2ludCBmb3IgYSBwYWdlXHJcbiAgICBmdW5jdGlvbiBtYWluKClcclxuICAgIHtcclxuICAgICAgICAvLyB3aGF0IGhhcHBlbnM6XHJcbiAgICAgICAgLy8gMSkgdXNlciBjbGlja3Mgb24gYSBwcm9kdWN0IFxyXG4gICAgICAgIC8vIDIpIG1vZGVsIGdldHMgaW5mbyBvZiB0aGUgcHJvZHVjdFxyXG4gICAgICAgIC8vIDMpIHN5c3RlbSBwdXRzIGluZm8gaW4gaHRtbFxyXG4gICAgICAgIC8vIDQpIHZpZXcgc2hvd3MgaW5mb1xyXG5cclxuICAgICAgICAvLyAyKSBtb2RlbCBnZXRzIGluZm8gb2YgdGhlIHByb2R1Y3RcclxuICAgICAgICAvLyAzKSBzeXN0ZW0gcHV0cyBpbmZvIGluIGh0bWxcclxuICAgICAgICBtb2RlbC5HZXRQcm9kdWN0SW5mbyhzaG93Vmlldyk7XHJcblxyXG5cclxuXHJcbiAgICAgICAgLy8gc2V0IHZpZXcgdG8gbG9naW4gZm9ybVxyXG4gICAgICAgIC8vVmlld0hlbHBlci5zZXRWaWV3KCk7XHJcblxyXG4gICAgICAgIC8vIHVzZXIgZmlsbHMgaW4gZW1haWwgYW5kIHBhc3N3b3JkOyBjbGlja3MgJ2xvZ2luJzogVklFVyBub3RpY2VzIHRoaXMgYW5kIHJlYWN0c1xyXG4gICAgICAgIC8vVmlld0hlbHBlci5zZXRBY3Rpb25MaXN0ZW5lcihhY3Rpb25QZXJmb3JtZWQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIG1haW46IG1haW4sXHJcbiAgICAgICAgc2hvd1ZpZXcgOiBzaG93Vmlld1xyXG4gICAgfVxyXG59OyIsInZhciBXaXNobGlzdENvbnRyb2xsZXIgPSBmdW5jdGlvbih2aWV3SGVscGVyLCBtb2RlbClcclxue1xyXG4gICAgdmFyIE1vZGVsID0gbW9kZWw7XHJcbiAgICB2YXIgVmlld0hlbHBlciA9IHZpZXdIZWxwZXI7XHJcbiAgICB2YXIgdmlld0RhdGEgPSB7fTtcclxuXHJcbiAgICBmdW5jdGlvbiBnZXRXaXNobGlzdCgpXHJcbiAgICB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyhcIldMIENPTlRST0xMRVI6IEluc2lkZSBnZXRXaXNoTGlzdFwiKTtcclxuICAgICAgICBNb2RlbC5nZXRXaXNobGlzdChzZXRWaWV3KTsgLy8gQ29ycmlnZWVyIHNoaXR6b29pIGhpZXIgKGhlZWwgdG9ldmFsbGlnIGphIDpwKVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHNldFZpZXcoZGF0YSlcclxuICAgIHtcclxuICAgICAgICBWaWV3SGVscGVyLnNldFZpZXcoZGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gbWFpbigpXHJcbiAgICB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyhcIldMIENPTlRST0xMRVI6IEluc2lkZSBtYWluXCIpO1xyXG4gICAgICAgIFZpZXdIZWxwZXIuc2V0QWN0aW9uTGlzdGVuZXIoZ2V0V2lzaGxpc3QpO1xyXG4gICAgICAgIFZpZXdIZWxwZXIuc2V0RGVsZXRlTGlzdGVuZXIoZGVsZXRlRnJvbVdpc2hsaXN0KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBkZWxldGVGcm9tV2lzaGxpc3QoZWFuLCBkaXZfdG9faGlkZSlcclxuICAgIHtcclxuICAgICAgICBNb2RlbC5kZWxldGVGcm9tV2lzaGxpc3QoZWFuLCBmdW5jdGlvbigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBkaXZfdG9faGlkZS5mYWRlVG8oMjAwLCAwKS5zbGlkZVVwKDIwMCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBtYWluOiBtYWluXHJcbiAgICB9XHJcbn07IiwidmFyIEFkbWluVmlld0hlbHBlciA9IGZ1bmN0aW9uICgpXHJcbntcclxuICAgIGZ1bmN0aW9uIHNldEFjdGlvbkxpc3RlbmVyKGFjdGlvbilcclxuICAgIHtcclxuICAgICAgICAkKGRvY3VtZW50KS5yZWFkeShhY3Rpb24pOyAvLyBpZiAnZG9jdW1lbnQgcmVhZHknIHBlcmZvcm0gXCJhY3Rpb25cIlxyXG4gICAgfVxyXG5cclxuICAgIC8vIENoYW5nZSB0aGUgdmlldyBvZiB0aGUgcGFnZVxyXG4gICAgIGZ1bmN0aW9uIHNldFZpZXcoZGF0YSlcclxuICAgIHtcclxuICAgICAgICBkb2N1bWVudC50aXRsZSA9XCJBZG1pbiAtIEFaIEdhbWVzXCI7XHJcblxyXG4gICAgICAgICQoXCIjY29tcG9uZW50XCIpLmxvYWQoJy92aWV3cy9hZG1pbi9hZG1pbi5odG1sJywgZnVuY3Rpb24gKCkgeyAvLyB3YWFyIGlkID0gJ2NvbXBvbmVudCcgZG9lIC5sb2FkLi4uLi4uXHJcbiAgICAgICAgICAgICQuZWFjaChkYXRhLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBDbG9uZSBwcm9kdWN0XHJcbiAgICAgICAgICAgICAgICB2YXIgdXNlciA9ICQoJyNzaW5nbGVfdXNlcicpLmNsb25lKCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIEFkZCBwcm9kdWN0IGluZm9cclxuICAgICAgICAgICAgICAgICQodXNlcikuZmluZChcIi51c2VyX19maXJzdG5hbWVcIikuaHRtbCh2YWx1ZS5maXJzdF9uYW1lKTtcclxuICAgICAgICAgICAgICAgICQodXNlcikuZmluZChcIi51c2VyX19maXJzdG5hbWVcIikuYXR0cignaHJlZicsICcvYWRtaW5fdXNlci8nICsgdmFsdWUudXNlcl9pZCk7XHJcbiAgICAgICAgICAgICAgICAkKHVzZXIpLmZpbmQoXCIudXNlcl9faW5zZXJ0aW9uXCIpLmh0bWwodmFsdWUuaW5zZXJ0aW9uKTtcclxuICAgICAgICAgICAgICAgICQodXNlcikuZmluZChcIi51c2VyX19sYXN0bmFtZVwiKS5odG1sKHZhbHVlLnN1cm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgJCh1c2VyKS5maW5kKFwiLnVzZXJfX2VtYWlsXCIpLmh0bWwodmFsdWUuZW1haWwpO1xyXG4gICAgICAgICAgICAgICAgJCh1c2VyKS5maW5kKFwiLnVzZXJfX3Bob25lbnVtYmVyXCIpLmh0bWwodmFsdWUucGhvbmVfbnVtYmVyKTtcclxuXHJcbiAgICAgICAgICAgICAgICAkKFwiI3VzZXJzX2JvZHlcIikuYXBwZW5kKHVzZXIpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgZmlyc3QgbGlzdCBpdGVtLCBiZWNhdXNlIHRoaXMgaXRlbSBpcyBhbHdheXMgZW1wdHlcclxuICAgICAgICAgICAgJChcIiNzaW5nbGVfdXNlclwiKS5maXJzdCgpLnJlbW92ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgc2V0QWN0aW9uTGlzdGVuZXI6IHNldEFjdGlvbkxpc3RlbmVyLFxyXG4gICAgICAgIHNldFZpZXc6IHNldFZpZXcsXHJcbiAgICB9XHJcbn1cclxuXHJcbiAgICAvL2RhdCBoaWVyb25kZXIgemF0IGFhcmRpZyB3YXQgd2VyayBpbi4uLiBEb25hbGQgd2lsIG5vZyBmZiBob3VkZW5cclxuXHJcbiAgICAvLyBmdW5jdGlvbiBzaG93VXNlcnMoZGF0YSlcclxuICAgIC8vIHtcclxuICAgIC8vICAgICBkb2N1bWVudC50aXRsZSA9XCJBZG1pbiAtIEFaIEdhbWVzXCI7XHJcblxyXG4gICAgLy8gICAgICQoXCIjY29tcG9uZW50XCIpLmxvYWQoJy92aWV3cy9hZG1pbi9hZG1pbi5odG1sJywgZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gICAgICAgICB2YXIgdGFibGUgPSAkKFwiPHRhYmxlIGlkPSd1c2Vyc190YWJsZSc+PC90YWJsZT5cIik7XHJcblxyXG4gICAgLy8gICAgICAgICAvLyB0YWJsZSBoZWFkZXJcclxuICAgIC8vICAgICAgICAgdmFyIHJvdyA9ICQoJzx0cj48L3RyPicpO1xyXG4gICAgLy8gICAgICAgICByb3cuYXBwZW5kKCc8dGQ+Vm9vcm5hYW08L3RkPjx0ZD5UdXNzZW52PC90ZD48dGQ+QWNodGVybmFhbTwvdGQ+PHRkPkdlYnJ1aWtlcnNuYWFtPC90ZD48dGQ+ZW1haWw8L3RkPjx0ZD50eXBlPC90ZD4nKTtcclxuXHJcbiAgICAvLyAgICAgICAgICQuZWFjaChkYXRhLCBmdW5jdGlvbihudW1iZXJyLCB1c2VyKSBcclxuICAgIC8vICAgICAgICAge1xyXG4gICAgLy8gICAgICAgICAgICAgdmFyIHJvdyA9ICQoJzx0cj48L3RyPicpO1xyXG4gICAgLy8gICAgICAgICAgICAgJC5lYWNoKHVzZXIsIGZ1bmN0aW9uKGtleSwgdmFsdWUpXHJcbiAgICAvLyAgICAgICAgICAgICB7XHJcbiAgICAvLyAgICAgICAgICAgICAgICAgaWYgKHZhbHVlICE9IHVuZGVmaW5lZClcclxuICAgIC8vICAgICAgICAgICAgICAgICB7XHJcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgIHJvdy5hcHBlbmQoICQoXCI8dGQgY2xhc3M9J3RkX3VzZXInPjwvdGQ+XCIpLmh0bWwoU3RyaW5nKHZhbHVlKSkgKTtcclxuICAgIC8vICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgLy8gICAgICAgICAgICAgICAgICAgICByb3cuYXBwZW5kKCAkKFwiPHRkIGNsYXNzPSd0ZF91c2VyJz48L3RkPlwiKSApO1xyXG4gICAgLy8gICAgICAgICAgICAgICAgIH1cclxuICAgIC8vICAgICAgICAgICAgIH0pXHJcbiAgICAvLyAgICAgICAgICAgICB0YWJsZS5hcHBlbmQocm93KTtcclxuICAgIC8vICAgICAgICAgICAgIC8vIC8vZm9yIGFkZGl0aW9uYWwgdXNlciBpbmZvIGlmIGNsaWNrZWRcclxuICAgIC8vICAgICAgICAgICAgIC8vIHJvdyA9ICQoJzxkaXYgY2xhc3M9XCJ0b2JldGFibGVcIj48L2Rpdj4nKTtcclxuICAgIC8vICAgICAgICAgICAgIC8vIHRhYmxlLmFwcGVuZChyb3cpO1xyXG4gICAgLy8gICAgICAgICB9KTtcclxuICAgIC8vICAgICAgICAgJCgnI3VzZXJzJykuYXBwZW5kKHRhYmxlKTtcclxuICAgIC8vICAgICB9KTtcclxuICAgIC8vIH1cclxuXHJcbiAgICAvLyBmdW5jdGlvbiBwdXRJbmZvSW5IdG1sKGNsaWNrZWQsIGRhdGEpXHJcbiAgICAvLyB7XHJcbiAgICAvLyAgICAgY29uc29sZS5sb2coJ2luIHB1dEluZm9Jbkh0bWwoKScpO1xyXG4gICAgLy8gICAgIC8vIHNob3cgaW5mbyBvZiB0aGUgcmlnaHQgdXNlciAoaWYgbm90IGFscmVhZHkgc2hvd2luZyBpdClcclxuICAgIC8vICAgICAvLyBpbnNlcnQgcm93IGFzIHRhYmxlIGhlYWRlclxyXG4gICAgLy8gICAgIHZhciBoZWFkZXJyb3cgPSAkKCc8dHI+PC90cj4nKS5hcHBlbmQoJzx0ZD53dzwvdGQ+PHRkPmdlYmxva2tlZXJkPC90ZD48dGQ+aWQ8L3RkPjx0ZD5nZW5kZXI8L3RkPjx0ZD5nZWJvb3J0ZWRhdHVtPC90ZD48dGQ+dnJhYWc8L3RkPjx0ZD5hbnR3b29yZDwvdGQ+Jyk7XHJcblxyXG4gICAgLy8gICAgIC8vIGluc2VydCByb3cgd2l0aCB0ZSB1c2VyaW5mb1xyXG4gICAgLy8gICAgIHZhciBpbmZvcm93ID0gJCgnPHRyPjwvdHI+Jyk7XHJcblxyXG4gICAgLy8gICAgIHZhciBjb3VudCA9IDA7XHJcbiAgICAvLyAgICAgJC5lYWNoKGRhdGFbMF0sIGZ1bmN0aW9uKGtleSwgdmFsdWUpXHJcbiAgICAvLyAgICAge1xyXG4gICAgLy8gICAgICAgICBpZiAoY291bnQgPT0gMSkgeyAvLyBnZWJsb2trZWVyZFxyXG4gICAgLy8gICAgICAgICAgICAgaWYgKHZhbHVlID09IDEpIHtcclxuICAgIC8vICAgICAgICAgICAgICAgICB2YWx1ZSA9ICduZWUnO1xyXG4gICAgLy8gICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PSAwKSB7XHJcbiAgICAvLyAgICAgICAgICAgICAgICAgdmFsdWUgPSAnamEnXHJcbiAgICAvLyAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgLy8gICAgICAgICAgICAgICAgIHZhbHVlID0gJ2RiIGZvdXQ/J1xyXG4gICAgLy8gICAgICAgICAgICAgfVxyXG4gICAgLy8gICAgICAgICB9XHJcblxyXG4gICAgLy8gICAgICAgICBjb25zb2xlLmxvZyhjb3VudCk7XHJcbiAgICAvLyAgICAgICAgIHZhciB0ZCA9ICQoJzx0ZD48L3RkPicpLmFwcGVuZCh2YWx1ZSk7XHJcblxyXG4gICAgLy8gICAgICAgICBjb25zb2xlLmxvZygna2V5LCB2YWx1ZTogJyArIGtleSwgdmFsdWUpO1xyXG5cclxuICAgIC8vICAgICAgICAgaW5mb3Jvdy5hcHBlbmQodGQpO1xyXG5cclxuICAgIC8vICAgICAgICAgY291bnQgKz0gMTtcclxuICAgIC8vICAgICB9KVxyXG5cclxuICAgIC8vICAgICBpbmZvcm93Lmluc2VydEFmdGVyKCAkKGNsaWNrZWQpLmNsb3Nlc3QoJ3RyJykgKTtcclxuICAgIC8vICAgICBoZWFkZXJyb3cuaW5zZXJ0QWZ0ZXIoJChjbGlja2VkKS5jbG9zZXN0KCd0cicpKTtcclxuICAgIC8vIH1cclxuXHJcbiIsInZhciBBZG1pblVzZXJWaWV3SGVscGVyID0gZnVuY3Rpb24gKClcclxue1xyXG4gICAgZnVuY3Rpb24gc2V0QWN0aW9uTGlzdGVuZXIoYWN0aW9uKVxyXG4gICAge1xyXG4gICAgICAgICQoZG9jdW1lbnQpLnJlYWR5KGFjdGlvbik7IC8vIGlmICdkb2N1bWVudCByZWFkeScgcGVyZm9ybSBcImFjdGlvblwiXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2V0VmlldyhkYXRhKVxyXG4gICAge1xyXG4gICAgICAgIC8vcHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKFwiI2NvbXBvbmVudFwiKS5sb2FkKCcvdmlld3MvYWRtaW51c2VyL2FkbWludXNlci5odG1sJywgZnVuY3Rpb24gKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgICQuZWFjaChkYXRhLCBmdW5jdGlvbihrZXksIHZhbHVlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAkKFwiI2RlbGV0ZV9idG5cIikuYXR0cihcImRhdGEtaWRcIiwgdmFsdWUudXNlcl9pZCkgICBcclxuICAgICAgICAgICAgICAgICQoXCIjZmlyc3RfbmFtZVwiKS52YWwodmFsdWUuZmlyc3RfbmFtZSk7XHJcbiAgICAgICAgICAgICAgICAkKFwiI2luc2VydGlvblwiKS52YWwodmFsdWUuaW5zZXJ0aW9uKTtcclxuICAgICAgICAgICAgICAgICQoXCIjc3VybmFtZVwiKS52YWwodmFsdWUuc3VybmFtZSk7XHJcbiAgICAgICAgICAgICAgICAkKFwiI3VzZXJfdHlwZVwiKS52YWwodmFsdWUudXNlcl90eXBlKTtcclxuICAgICAgICAgICAgICAgICQoXCIjZW1haWxcIikudmFsKHZhbHVlLmVtYWlsKTtcclxuICAgICAgICAgICAgICAgICQoXCIjcGFzc3dvcmRcIikuYXR0cigncGxhY2Vob2xkZXInLCAnVnVsIGhpZXIgaWV0cyBpbiBvbSBoZXQgd2FjaHR3b29yZCB0ZSB2ZXJhbmRlcmVuJyk7XHJcbiAgICAgICAgICAgICAgICAkKFwiI2dlbmRlclwiKS52YWwodmFsdWUuZ2VuZGVyKTtcclxuICAgICAgICAgICAgICAgICQoXCIjZGF0ZV9vZl9iaXJ0aFwiKS52YWwodmFsdWUuZGF0ZV9vZl9iaXJ0aCk7XHJcbiAgICAgICAgICAgICAgICAkKFwiI3Bob25lX251bWJlclwiKS52YWwodmFsdWUucGhvbmVfbnVtYmVyKTtcclxuICAgICAgICAgICAgICAgICQoXCIjaXNfYWN0aXZlXCIpLnZhbCh2YWx1ZS5pc19hY3RpdmUpO1xyXG4gICAgICAgICAgICAgICAgJChcIiN1c2VyX2lkXCIpLnZhbCh2YWx1ZS51c2VyX2lkKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHNldFNhdmVMaXN0ZW5lcihhY3Rpb24pXHJcbiAgICB7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ3N1Ym1pdCcsICcjdXNlcmZvcm0nLCBhY3Rpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHNldERlbGV0ZUxpc3RlbmVyKGFjdGlvbilcclxuICAgIHtcclxuICAgICAgICAkKFwiI2NvbXBvbmVudFwiKS5vZmYoKS5vbihcImNsaWNrXCIsICcjZGVsZXRlX2J0bicsIGZ1bmN0aW9uIChlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBhY3Rpb24oJCh0aGlzKS5kYXRhKFwiaWRcIikpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgc2V0QWN0aW9uTGlzdGVuZXI6IHNldEFjdGlvbkxpc3RlbmVyLFxyXG4gICAgICAgIHNldFZpZXc6IHNldFZpZXcsXHJcbiAgICAgICAgc2V0U2F2ZUxpc3RlbmVyOiBzZXRTYXZlTGlzdGVuZXIsXHJcbiAgICAgICAgc2V0RGVsZXRlTGlzdGVuZXI6IHNldERlbGV0ZUxpc3RlbmVyXHJcbiAgICB9XHJcbn0iLCJ2YXIgQ2FydFZpZXdIZWxwZXIgPSBmdW5jdGlvbigpXHJcbntcclxuICAgIC8vIENoYW5nZSB0aGUgdmlldyBvZiB0aGUgcGFnZVxyXG4gICAgZnVuY3Rpb24gc2V0Vmlldyh2aWV3RGF0YSlcclxuICAgIHtcclxuICAgICAgICBpZiAodmlld0RhdGEgIT0gXCJcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZpZXdEYXRhLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICBhZGRJdGVtKGl0ZW0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGUgdGhlIHRvdGFsIHByaWNlICBvZiB0aGUgY2FydFxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge2ludH0gdG90YWxQcmljZSAgVG90YWwgcHJpY2Ugb2YgdGhlIGNhcnRcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gdXBkYXRlVG90YWxQcmljZShuZXdQcmljZSlcclxuICAgIHtcclxuICAgICAgICBuZXdQcmljZSA9IHBhcnNlRmxvYXQobmV3UHJpY2UpICsgcGFyc2VGbG9hdCgkKFwiLmNhcnRfX3RvdGFsIC5wcmljZVwiKS5odG1sKCkuc3Vic3RyKDEpKTtcclxuICAgICAgICAkKFwiLmNhcnRfX3RvdGFsIC5wcmljZVwiKS5odG1sKFwi4oKsXCIgKyBwYXJzZUZsb2F0KG5ld1ByaWNlKS50b0ZpeGVkKDIpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE1ha2UgbmV3IGNhcnQgaXRlbSB2aXNpYWJsZSBpbiB0aGUgRE9NXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSAge2FycmF5fSAgaXRlbSAgUHJvZHVjdFxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBhZGRJdGVtKGl0ZW0pXHJcbiAgICB7XHJcbiAgICAgICAgdmFyIGNhcnRJdGVtID0gJCgnPGRpdj4nKS5odG1sKCQoJy5zaWRlYmFyX19jb250ZW50X190bXAnKS5odG1sKCkpO1xyXG5cclxuICAgICAgICBjYXJ0SXRlbS5maW5kKFwiLmNhcnRfX2l0ZW1fX3RpdGxlXCIpLmh0bWwoaXRlbS50aXRsZSk7XHJcbiAgICAgICAgY2FydEl0ZW0uZmluZChcIi5jYXJ0X19pdGVtX19wcmljZVwiKS5odG1sKFwi4oKsXCIgKyBpdGVtLnByaWNlKTtcclxuICAgICAgICBjYXJ0SXRlbS5maW5kKFwiLmNhcnRfX2l0ZW1fX2ltYWdlIGltZ1wiKS5hdHRyKFwic3JjXCIsIGl0ZW0uaW1hZ2UpO1xyXG4gICAgICAgIGNhcnRJdGVtLmZpbmQoXCIuY2FydF9faXRlbVwiKS5hdHRyKFwiZGF0YS1pZFwiLCBpdGVtLmVhbl9udW1iZXIpXHJcblxyXG4gICAgICAgICQoXCIuY2FydFwiKS5hcHBlbmQoY2FydEl0ZW0pO1xyXG5cclxuICAgICAgICAvLyBDaGFuZ2UgYW1vdW50IG9mIGl0ZW1zXHJcbiAgICAgICAgdmFyIGFtb3VudCA9ICQoXCIuY2FydF9idXR0b24gLmNvdW50XCIpLmh0bWwoKTtcclxuICAgICAgICAkKFwiLmNhcnRfYnV0dG9uIC5jb3VudFwiKS5odG1sKHBhcnNlSW50KGFtb3VudCkgKyAxKTtcclxuXHJcbiAgICAgICAgLy8gVXBkYXRlIHRoZSB0b3RhbCBwcmljZVxyXG4gICAgICAgIHVwZGF0ZVRvdGFsUHJpY2UoaXRlbS5wcmljZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBMb2FkIHRoZSBjYXJ0IHdoZW4gdGhlIHBhZ2UgaXMgIHJlYXNlXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIHNldEFjdGlvbkxpc3RlbmVyKGFjdGlvbilcclxuICAgIHtcclxuICAgICAgICAkKGRvY3VtZW50KS5yZWFkeShhY3Rpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTGlzdGVuZXIgZm9yIHRoZSBBZGQgdG8gY2FydCBidXR0b25cclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtICB7ZnVuY3Rpb259IGFkZHRvQ2FydCAgTW9kZWwgY2FsbGJhY2tcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gc2V0QWRkUHJvZHVjdExpc3RlbmVyKGFkZFRvQ2FydClcclxuICAgIHtcclxuICAgICAgICAkKFwiYm9keVwiKS5vbihcImNsaWNrXCIsIFwiLmFkZHRvY2FydFwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBwcm9kdWN0X2lkID0gJCh0aGlzKS5kYXRhKFwiaWRcIik7XHJcbiAgICAgICAgICAgIGFkZFRvQ2FydChwcm9kdWN0X2lkKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTGlzdGVuZXIgZm9yIHJlbW92ZSBhIHByb2R1Y3QgZnJvbSB0aGUgRE9NIGNhcnRcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gcmVtb3ZlUHJvZHVjdCBDYWxsYmFjayBmdW5jdGlvbiB0byByZW1vdmUgdGhlIHByb2RjdXQgZnJvbSB0aGUgbWVtb3J5XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIHNldFJlbW92ZUxpc3RlbmVyKHJlbW92ZVByb2R1Y3QpIHtcclxuICAgICAgICAkKFwiYm9keVwiKS5vbihcImNsaWNrXCIsIFwiLmNhcnRfX2l0ZW1fX3JlbW92ZVwiLCBmdW5jdGlvbiAoZXZlbnQpe1xyXG4gICAgICAgICAgICB2YXIgY2FydGl0ZW0gICA9ICQodGhpcykucGFyZW50KCk7XHJcbiAgICAgICAgICAgIHZhciBwcm9kdWN0X2lkID0gJCh0aGlzKS5wYXJlbnQoKS5kYXRhKFwiaWRcIik7XHJcblxyXG4gICAgICAgICAgICAvLyBSZW1vdmUgcHJvZHVjdCBmcm9tIERPTSBjYXJ0XHJcbiAgICAgICAgICAgICQoY2FydGl0ZW0pLmFkZENsYXNzKFwiY2FydF9faXRlbS0tcmVtb3ZlZFwiKTtcclxuICAgICAgICAgICAgJChjYXJ0aXRlbSkub24oXCJhbmltYXRpb25lbmQgd2Via2l0QW5pbWF0aW9uRW5kIG9BbmltYXRpb25FbmQgTVNBbmltYXRpb25FbmRcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIERlY3Jlc2UgY291bnRcclxuICAgICAgICAgICAgdmFyIGFtb3VudCA9ICQoXCIuY2FydF9idXR0b24gLmNvdW50XCIpLmh0bWwoKTtcclxuICAgICAgICAgICAgJChcIi5jYXJ0X2J1dHRvbiAuY291bnRcIikuaHRtbChwYXJzZUludChhbW91bnQpIC0gMSk7XHJcblxyXG4gICAgICAgICAgICByZW1vdmVQcm9kdWN0KHByb2R1Y3RfaWQpXHJcbiAgICAgICAgICAgIHVwZGF0ZVRvdGFsUHJpY2UoLSQoY2FydGl0ZW0pLmZpbmQoXCIuY2FydF9faXRlbV9fcHJpY2VcIikuaHRtbCgpLnN1YnN0cigxKSlcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gUmV0dXJuIHRoZSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgcHJvZ3JhbXMgKHRoZSBjb250cm9sbGVyIGluIHRoaXMgY2FzZSlcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgc2V0Vmlldzogc2V0VmlldyxcclxuICAgICAgICBhZGRJdGVtOiBhZGRJdGVtLFxyXG4gICAgICAgIHVwZGF0ZVRvdGFsUHJpY2U6IHVwZGF0ZVRvdGFsUHJpY2UsXHJcbiAgICAgICAgc2V0QWN0aW9uTGlzdGVuZXI6IHNldEFjdGlvbkxpc3RlbmVyLFxyXG4gICAgICAgIHNldEFkZFByb2R1Y3RMaXN0ZW5lcjogc2V0QWRkUHJvZHVjdExpc3RlbmVyLFxyXG4gICAgICAgIHNldFJlbW92ZUxpc3RlbmVyOiBzZXRSZW1vdmVMaXN0ZW5lclxyXG4gICAgfVxyXG59OyIsInZhciBFcnJvclZpZXdIZWxwZXIgPSBmdW5jdGlvbigpXHJcbntcclxuICAgIC8vIENoYW5nZSB0aGUgdmlldyBvZiB0aGUgcGFnZVxyXG4gICAgZnVuY3Rpb24gc2V0VmlldygpXHJcbiAgICB7XHJcbiAgICAgICAgZG9jdW1lbnQudGl0bGUgPSBcIk9lcHMgLSBBWiBHYW1lc1wiO1xyXG5cclxuICAgICAgICAkKFwiI2NvbXBvbmVudFwiKS5sb2FkKCcvdmlld3MvZXJyb3IvZXJyb3IuaHRtbCcpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEFjdGlvbkxpc3RlbmVyIHRoYXQgZXhlY3V0ZXMgYWN0aW9ucyBvbiBzcGVjaWZpYyBldmVudHNcclxuICAgIGZ1bmN0aW9uIHNldEFjdGlvbkxpc3RlbmVyKGV2ZW50SGFuZGxlcilcclxuICAgIHtcclxuICAgICAgICAkKGRvY3VtZW50KS5yZWFkeShldmVudEhhbmRsZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHNldFZpZXc6IHNldFZpZXcsXHJcbiAgICAgICAgc2V0QWN0aW9uTGlzdGVuZXI6IHNldEFjdGlvbkxpc3RlbmVyXHJcbiAgICB9XHJcbn07IiwidmFyIExvZ2luVmlld0hlbHBlciA9IGZ1bmN0aW9uKClcclxue1xyXG4gICAgLy8gQ2hhbmdlIHRoZSB2aWV3IG9mIHRoZSBwYWdlXHJcbiAgICBmdW5jdGlvbiBzZXRWaWV3KClcclxuICAgIHtcclxuICAgICAgICBkb2N1bWVudC50aXRsZSA9XCJJbmxvZ2dlbiAtIEFaIEdhbWVzXCI7XHJcblxyXG4gICAgICAgICQoXCIjY29tcG9uZW50XCIpLmxvYWQoJy92aWV3cy9sb2dpbi9sb2dpbi5odG1sJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRXhlY3V0ZSB0aGUgZXZlbnQgd2hlbiAnc29tZXRoaW5nJyBoYXBwZW5zICh3aGVuIGEgYnV0dG9uIGlzIGNsaWNrZWQgZm9yIGV4YW1wbGUpXHJcbiAgICBmdW5jdGlvbiBzZXRBY3Rpb25MaXN0ZW5lcihhY3Rpb24pXHJcbiAgICB7XHJcbiAgICAgICAgLy8gdXNlciBmaWxscyBpbiBsb2dpbiBmb3JtXHJcbiAgICAgICAgLy8gdXNlciBwcmVzc2VzICdsb2dpbidcclxuXHJcbiAgICAgICAgLy8gaWYgdXNlciBwcmVzc2VzICdsb2dpbicsIHBlcmZvcm0gYWN0aW9uIChtYWtlIGNvbnRyb2xsZXIgc2VuZCBlbWFpbCBhbmQgcGFzc3dvcmQgdG8gQVBJKVxyXG4gICAgICAgICQoXCIjY29tcG9uZW50XCIpLm9uKFwic3VibWl0XCIsIFwiI2xvZ2luZm9ybVwiLCBhY3Rpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHNldFZpZXc6IHNldFZpZXcsXHJcbiAgICAgICAgc2V0QWN0aW9uTGlzdGVuZXI6IHNldEFjdGlvbkxpc3RlbmVyXHJcbiAgICB9XHJcbn07IiwidmFyIExvZ291dFZpZXdIZWxwZXIgPSBmdW5jdGlvbigpXHJcbntcclxuICAgIC8vIENoYW5nZSB0aGUgdmlldyBvZiB0aGUgcGFnZVxyXG4gICAgZnVuY3Rpb24gc2V0VmlldygpXHJcbiAgICB7XHJcbiAgICAgICAgZG9jdW1lbnQudGl0bGUgPSBcIlVpdGxvZ2dlbiAtIEFaIEdhbWVzXCI7XHJcblxyXG4gICAgICAgICQoXCIjY29tcG9uZW50XCIpLmxvYWQoJy92aWV3cy9sb2dvdXQvbG9nb3V0Lmh0bWwnKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBFeGVjdXRlIHRoZSBldmVudCB3aGVuICdzb21ldGhpbmcnIGhhcHBlbnMgKHdoZW4gYSBidXR0b24gaXMgY2xpY2tlZCBmb3IgZXhhbXBsZSlcclxuICAgIGZ1bmN0aW9uIHNldEFjdGlvbkxpc3RlbmVyKGFjdGlvbilcclxuICAgIHtcclxuICAgICAgICAkKGRvY3VtZW50KS5yZWFkeShhY3Rpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHNldFZpZXc6IHNldFZpZXcsXHJcbiAgICAgICAgc2V0QWN0aW9uTGlzdGVuZXI6IHNldEFjdGlvbkxpc3RlbmVyXHJcbiAgICB9XHJcbn07IiwidmFyIFBhZ2VWaWV3SGVscGVyID0gZnVuY3Rpb24oKVxyXG57XHJcbiAgICAvLyBDaGFuZ2UgdGhlIHZpZXcgb2YgdGhlIHBhZ2VcclxuICAgIGZ1bmN0aW9uIHNldFZpZXcodmlld0RhdGEpXHJcbiAgICB7XHJcbiAgICAgICAgZG9jdW1lbnQudGl0bGUgPSBcIldlbGtvbSAtIEFaIEdhbWVzXCI7XHJcblxyXG4gICAgICAgICQoXCIjY29tcG9uZW50XCIpLmxvYWQoJy92aWV3cy9wYWdlL3BhZ2UuaHRtbCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKHZpZXdEYXRhWzBdLnVzZXJfdHlwZSA9PSBcImN1c3RvbWVyXCIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICQoXCIjdXNlci1ibG9ja1wiKS5hcHBlbmQoXCI8aDE+SmUgbGVlcyBkaXQgYWxsZWVuIGFscyBqZSBlZW4gY3VzdG9tZXI8L2gxPlwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodmlld0RhdGFbMF0udXNlcl90eXBlID09IFwiYWRtaW5cIilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgJChcIiN1c2VyLWJsb2NrXCIpLmFwcGVuZChcIjxoMT5KZSBsZWVzIGRpdCBhbGxlZW4gYWxzIGplIGVlbiBhZG1pbmlzdHJhdG9yPC9oMT5cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBBY3Rpb25MaXN0ZW5lciB0aGF0IGV4ZWN1dGVzIGFjdGlvbnMgb24gc3BlY2lmaWMgZXZlbnRzXHJcbiAgICBmdW5jdGlvbiBzZXRBY3Rpb25MaXN0ZW5lcihldmVudEhhbmRsZXIpXHJcbiAgICB7XHJcbiAgICAgICAgJChkb2N1bWVudCkucmVhZHkoZXZlbnRIYW5kbGVyKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBSZXR1cm4gdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBieSBvdGhlciBwcm9ncmFtcyAodGhlIGNvbnRyb2xsZXIgaW4gdGhpcyBjYXNlKVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBzZXRWaWV3OiBzZXRWaWV3LFxyXG4gICAgICAgIHNldEFjdGlvbkxpc3RlbmVyOiBzZXRBY3Rpb25MaXN0ZW5lclxyXG4gICAgfVxyXG59OyIsInZhciBQcm9kdWN0c1ZpZXdIZWxwZXIgPSBmdW5jdGlvbigpXHJcbntcclxuICAgIC8vIENoYW5nZSB0aGUgdmlldyBvZiB0aGUgcGFnZVxyXG4gICAgZnVuY3Rpb24gc2V0Vmlldyh2aWV3RGF0YSlcclxuICAgIHtcclxuICAgICAgICBkb2N1bWVudC50aXRsZSA9IFwiUHJvZHVjdGVuIC0gQVogR2FtZXNcIjtcclxuXHJcbiAgICAgICAgJChcIiNjb21wb25lbnRcIikuaHRtbCgnPGRpdiBjbGFzcz1cImNvbC0xMlwiPjxkaXYgY2xhc3M9XCJjb2wtM1wiIGlkPVwiZmlsdGVyc1wiPjwvZGl2PjxkaXYgY2xhc3M9XCJjb2wtOVwiIGlkPVwicHJvZHVjdHNcIj48L2Rpdj48L2Rpdj4nKTtcclxuICAgICAgICAvLyBsb2FkIGZpbHRlcnNcclxuICAgICAgICAkKFwiI2ZpbHRlcnNcIikubG9hZCgnL3ZpZXdzL3Byb2R1Y3RzL2ZpbHRlcnMuaHRtbCcpO1xyXG5cclxuICAgICAgICAvLyBsb2FkIHByb2R1Y3RzXHJcbiAgICAgICAgbG9hZFByb2R1Y3RzKHZpZXdEYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBsb2FkUHJvZHVjdHModmlld0RhdGEpXHJcbiAgICB7XHJcbiAgICAgICAgJChcIiNwcm9kdWN0c1wiKS5sb2FkKCcvdmlld3MvcHJvZHVjdHMvcHJvZHVjdHMuaHRtbCcsIGZ1bmN0aW9uICgpIHsgLy8gd2FhciBpZCA9ICdjb21wb25lbnQnIGRvZSAubG9hZC4uLi4uLlxyXG4gICAgICAgICAgICAkLmVhY2godmlld0RhdGEsIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIC8vIENsb25lIHByb2R1Y3RcclxuICAgICAgICAgICAgICAgIHZhciBwcm9kdWN0ID0gJCgnPGRpdj4nKS5hcHBlbmQoJCgnI3Byb2R1Y3RfX2xpc3RfX2l0ZW0nKS5jbG9uZSgpKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gQWRkIHByb2R1Y3QgaW5mb1xyXG4gICAgICAgICAgICAgICAgJChwcm9kdWN0KS5maW5kKFwiLnByb2R1Y3RfX3RpdGxlXCIpLmh0bWwodmFsdWUudGl0bGUpO1xyXG4gICAgICAgICAgICAgICAgJChwcm9kdWN0KS5maW5kKFwiLnByb2R1Y3RfX3N1YnRpdGxlXCIpLmFwcGVuZCh2YWx1ZS5nZW5yZSArKFwiIHwgUEVHSSBcIikgKyB2YWx1ZS5wZWdpX2FnZSArKFwiIHwgXCIpKyBQbGF0Zm9ybUxvZ28odmFsdWUucGxhdGZvcm0pKTtcclxuICAgICAgICAgICAgICAgICQocHJvZHVjdCkuZmluZChcIi5wcm9kdWN0X19kZXNjcmlwdGlvblwiKS5odG1sKEN1dFN0cmluZyh2YWx1ZS5kZXNjcmlwdGlvbikpO1xyXG4gICAgICAgICAgICAgICAgJChwcm9kdWN0KS5maW5kKFwiLnByb2R1Y3RfX3ByaWNlXCIpLmFwcGVuZCgoXCLigqwgXCIpK3ZhbHVlLnByaWNlKTtcclxuICAgICAgICAgICAgICAgICQocHJvZHVjdCkuZmluZChcIiNidXR0b25zX19pbmZvLCAucHJvZHVjdF9faW1hZ2UgYSwgLnByb2R1Y3RfX3RpdGxlXCIpLmF0dHIoXCJocmVmXCIsIFwicHJvZHVjdC9cIiArIHZhbHVlLmVhbl9udW1iZXIpO1xyXG4gICAgICAgICAgICAgICAgJChwcm9kdWN0KS5maW5kKFwiLnByb2R1Y3RfX2ltYWdlIGltZ1wiKS5hdHRyKFwic3JjXCIsIHZhbHVlLmltYWdlKTtcclxuICAgICAgICAgICAgICAgICQocHJvZHVjdCkuZmluZChcIi5hZGR0b2NhcnRcIikuYXR0cihcImRhdGEtaWRcIiwgdmFsdWUuZWFuX251bWJlcik7XHJcblxyXG4gICAgICAgICAgICAgICAgJChcIiNwcm9kdWN0X19saXN0XCIpLmFwcGVuZChwcm9kdWN0KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBSZW1vdmUgdGhlIGZpcnN0IGxpc3QgaXRlbSwgYmVjYXVzZSB0aGlzIGl0ZW0gaXMgYWx3YXlzIGVtcHR5XHJcbiAgICAgICAgICAgICQoXCIjcHJvZHVjdF9fbGlzdF9faXRlbVwiKS5maXJzdCgpLnJlbW92ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vU2hvdyBtb3JlL2xlc3NcclxuICAgIGZ1bmN0aW9uIEN1dFN0cmluZyh0ZXh0KXtcclxuICAgICAgICB2YXIgU2hvd0Ftb3VudCA9IDUwO1xyXG4gICAgICAgIHZhciBXb3Jkc0FycmF5ID0gdGV4dC5zcGxpdChcIiBcIik7XHJcbiAgICAgICAgaWYoV29yZHNBcnJheS5sZW5ndGg+U2hvd0Ftb3VudCl7XHJcbiAgICAgICAgICAgIHZhciBTaG9ydFN0cmluZyA9IFwiXCI7XHJcbiAgICAgICAgICAgIGZvcihpPTA7IGk8U2hvd0Ftb3VudDsgaSsrKXtcclxuICAgICAgICAgICAgICAgIFNob3J0U3RyaW5nICs9IFdvcmRzQXJyYXlbaV0gKyBcIiBcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gU2hvcnRTdHJpbmcrXCIuLi5cIjtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgcmV0dXJuIHRleHQ7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBFeGVjdXRlIHRoZSBldmVudCB3aGVuICdzb21ldGhpbmcnIGhhcHBlbnMgKHdoZW4gYSBidXR0b24gaXMgY2xpY2tlZCBmb3IgZXhhbXBsZSlcclxuICAgIGZ1bmN0aW9uIHNldEFjdGlvbkxpc3RlbmVyKGFjdGlvbilcclxuICAgIHtcclxuICAgICAgICAkKGRvY3VtZW50KS5yZWFkeShhY3Rpb24pOyAvLyBpZiAnZG9jdW1lbnQgcmVhZHknIHBlcmZvcm0gXCJhY3Rpb25cIlxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHNldEZpbHRlckxpc3RlbmVyKGFjdGlvbilcclxuICAgIHtcclxuICAgICAgICAgLy8gSGllciBoZXQgZm9ybXVsaWVyIHZlcnN0dXJlbiBhbHMgd2Ugb3AgZWVuIGNoZWNrYm94IGRydWtrZW5cclxuICAgICAgICAkKFwiI2NvbXBvbmVudFwiKS5vZmYoKS5vbihcImNoYW5nZVwiLCBcImlucHV0W3R5cGU9Y2hlY2tib3hdXCIsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICQoXCIjcHJvZHVjdF9maWx0ZXJcIikuc3VibWl0KCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFVwZGF0ZSBkZSBwcm9kdWN0ZW5saWpzdCBhbHMgZWVuIHdhYXJkZSBpbiBkZSBzbGlkZXIgdmVyYW5kZXJkKGFsbGUgbWFuaWVyZW4pXHJcbiAgICAgICAgJChcIiNjb21wb25lbnRcIikub24oXCJjaGFuZ2Uga2V5dXBcIiwgXCJpbnB1dFtuYW1lPXByaWNlLW1heF0sIGlucHV0W25hbWU9cHJpY2UtbWluXVwiLCBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAgICAgICBpZigkKFwiI3ByaWNlbWluXCIpLnZhbCgpID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICQoXCIjcHJpY2VtaW5cIikudmFsKDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgJChcIiNwcm9kdWN0X2ZpbHRlclwiKS5zdWJtaXQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKFwiI2NvbXBvbmVudFwiKS5vbihcInN1Ym1pdFwiLCBcIiNwcm9kdWN0X2ZpbHRlclwiLCBhY3Rpb24pO1xyXG4gICAgfVxyXG4gICAgLy8gUmV0dXJuIHRoZSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgcHJvZ3JhbXMgKHRoZSBjb250cm9sbGVyIGluIHRoaXMgY2FzZSlcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgc2V0Vmlldzogc2V0VmlldyxcclxuICAgICAgICBsb2FkUHJvZHVjdHM6IGxvYWRQcm9kdWN0cyxcclxuICAgICAgICBzZXRBY3Rpb25MaXN0ZW5lcjogc2V0QWN0aW9uTGlzdGVuZXIsXHJcbiAgICAgICAgc2V0RmlsdGVyTGlzdGVuZXI6IHNldEZpbHRlckxpc3RlbmVyXHJcbiAgICB9XHJcbn07IiwidmFyIFJlZ2lzdGVyVmlld0hlbHBlciA9IGZ1bmN0aW9uKClcclxue1xyXG4gICAgLy8gQ2hhbmdlIHRoZSB2aWV3IG9mIHRoZSBwYWdlXHJcbiAgICBmdW5jdGlvbiBzZXRWaWV3KHZpZXdUb1Nob3cpXHJcbiAgICB7XHJcbiAgICAgICAgZG9jdW1lbnQudGl0bGUgPSBcIlJlZ2lzdHJlcmVuIC0gQVogR2FtZXNcIjtcclxuICAgICAgICBcclxuICAgICAgICAkKFwiI2NvbXBvbmVudFwiKS5sb2FkKHZpZXdUb1Nob3cpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEV4ZWN1dGUgdGhlIGV2ZW50IHdoZW4gJ3NvbWV0aGluZycgaGFwcGVucyAod2hlbiBhIGJ1dHRvbiBpcyBjbGlja2VkIGZvciBleGFtcGxlKVxyXG4gICAgZnVuY3Rpb24gc2V0QWN0aW9uTGlzdGVuZXIoYWN0aW9uKVxyXG4gICAge1xyXG4gICAgICAgIC8vIHVzZXIgZmlsbHMgaW4gcmVnaXN0ZXIgZm9ybVxyXG4gICAgICAgIC8vIHVzZXIgcHJlc3NlcyAncmVnaXN0ZXInXHJcblxyXG4gICAgICAgIC8vIGlmIHVzZXIgcHJlc3NlcyAncmVnaXN0ZXInLCBwZXJmb3JtIGFjdGlvblxyXG4gICAgICAgICQoXCIjY29tcG9uZW50XCIpLm9uKFwic3VibWl0XCIsIFwiI3JlZ2lzdGVyZm9ybVwiLCBhY3Rpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJldHVybiB0aGUgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIGJ5IG90aGVyIHByb2dyYW1zICh0aGUgY29udHJvbGxlciBpbiB0aGlzIGNhc2UpXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHNldFZpZXc6IHNldFZpZXcsXHJcbiAgICAgICAgc2V0QWN0aW9uTGlzdGVuZXI6IHNldEFjdGlvbkxpc3RlbmVyXHJcbiAgICB9XHJcbn07IiwidmFyIFJlc2V0UGFzc3dvcmRWaWV3SGVscGVyID0gZnVuY3Rpb24oKVxyXG57XHJcbiAgICAvLyBDaGFuZ2UgdGhlIHZpZXcgb2YgdGhlIHBhZ2VcclxuICAgIGZ1bmN0aW9uIHNldFZpZXcodmlld1RvU2hvdylcclxuICAgIHtcclxuICAgICAgICBkb2N1bWVudC50aXRsZSA9IFwiSW5sb2dnZW4gLSBBWiBHYW1lc1wiO1xyXG5cclxuICAgICAgICAkKFwiI2NvbXBvbmVudFwiKS5sb2FkKHZpZXdUb1Nob3cpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEFjdGlvbkxpc3RlbmVyIHRoYXQgZXhlY3V0ZXMgYWN0aW9ucyBvbiBzcGVjaWZpYyBldmVudHNcclxuICAgIGZ1bmN0aW9uIHNldEFjdGlvbkxpc3RlbmVyKGV2ZW50SGFuZGxlcilcclxuICAgIHtcclxuICAgICAgICAvLyQoZG9jdW1lbnQpLnJlYWR5KGV2ZW50SGFuZGxlcik7XHJcbiAgICAgICAgJChcIiNjb21wb25lbnRcIikub24oXCJzdWJtaXRcIiwgXCIjcmVzZXRmb3JtXCIsIGV2ZW50SGFuZGxlcik7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmV0dXJuIHRoZSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgcHJvZ3JhbXMgKHRoZSBjb250cm9sbGVyIGluIHRoaXMgY2FzZSlcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgc2V0Vmlldzogc2V0VmlldyxcclxuICAgICAgICBzZXRBY3Rpb25MaXN0ZW5lcjogc2V0QWN0aW9uTGlzdGVuZXJcclxuICAgIH1cclxufTtcclxuXHJcbi8qXHJcbnZhciBSZXNldFBhc3N3b3JkVmlld0hlbHBlciA9IGZ1bmN0aW9uKClcclxue1xyXG4gICAgLy8gQ2hhbmdlIHRoZSB2aWV3IG9mIHRoZSBwYWdlXHJcbiAgICBmdW5jdGlvbiBzZXRWaWV3KHZpZXdEYXRhKVxyXG4gICAge1xyXG4gICAgICAgICQoXCIjY29tcG9uZW50XCIpLmxvYWQoJ3ZpZXdzL3Jlc2V0cGFzc3dvcmQvcmVzZXRwYXNzd29yZC5odG1sJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQWN0aW9uTGlzdGVuZXIgdGhhdCBleGVjdXRlcyBhY3Rpb25zIG9uIHNwZWNpZmljIGV2ZW50c1xyXG4gICAgZnVuY3Rpb24gc2V0QWN0aW9uTGlzdGVuZXIoZXZlbnRIYW5kbGVyKVxyXG4gICAge1xyXG4gICAgICAgIC8vJChkb2N1bWVudCkucmVhZHkoZXZlbnRIYW5kbGVyKTtcclxuICAgICAgICAkKFwiI2NvbXBvbmVudFwiKS5vbihcInN1Ym1pdFwiLCBcIiNyZXNldGZvcm1cIiwgZXZlbnRIYW5kbGVyKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBSZXR1cm4gdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgdXNlZCBieSBvdGhlciBwcm9ncmFtcyAodGhlIGNvbnRyb2xsZXIgaW4gdGhpcyBjYXNlKVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBzZXRWaWV3OiBzZXRWaWV3LFxyXG4gICAgICAgIHNldEFjdGlvbkxpc3RlbmVyOiBzZXRBY3Rpb25MaXN0ZW5lclxyXG4gICAgfVxyXG59O1xyXG4qLyIsInZhciBQcm9kdWN0Vmlld0hlbHBlciA9IGZ1bmN0aW9uKClcclxue1xyXG4gICAgLy8gQ2hhbmdlIHRoZSB2aWV3IG9mIHRoZSBwYWdlXHJcbiAgICBmdW5jdGlvbiBzZXRWaWV3KHByb2R1Y3QpXHJcbiAgICB7XHJcbiAgICAgICAgZG9jdW1lbnQudGl0bGUgPSBwcm9kdWN0LnRpdGxlICsgXCIgLSBBWiBHYW1lc1wiO1xyXG5cclxuICAgICAgICAgJChcIiNjb21wb25lbnRcIikubG9hZCgnL3ZpZXdzL3NpbmdsZV9wcm9kdWN0L3NpbmdsZV9wcm9kdWN0Lmh0bWwnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkKFwiLnNpbmdsZXByb2R1Y3RfX2ltYWdlIGltZ1wiKS5hdHRyKFwic3JjXCIsIHByb2R1Y3QuaW1hZ2UpO1xyXG4gICAgICAgICAgICAgICAgJChcIi5zaW5nbGVwcm9kdWN0X190aXRsZVwiKS5odG1sKHByb2R1Y3QudGl0bGUpO1xyXG4gICAgICAgICAgICAgICAgJChcIi5zaW5nbGVwcm9kdWN0X19wcmljZVwiKS5odG1sKFwi4oKsIFwiICsgcHJvZHVjdC5wcmljZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgJChcIi5zaW5nbGVwcm9kdWN0X19lYW5cIikuYXBwZW5kKHByb2R1Y3QuZWFuX251bWJlcik7XHJcbiAgICAgICAgICAgICAgICAkKFwiLnNpbmdsZXByb2R1Y3RfX3BsYXRmb3JtXCIpLmFwcGVuZChQbGF0Zm9ybUxvZ28ocHJvZHVjdC5wbGF0Zm9ybSkpOyAvLyBmdW5jdGllIHZvb3IgbG9nb1xyXG4gICAgICAgICAgICAgICAgJChcIi5zaW5nbGVwcm9kdWN0X19wdWJsaXNoZXJcIikuYXBwZW5kKFBsYXRmb3JtTG9nbyhwcm9kdWN0LnB1Ymxpc2hlcikpOyAvLyBmdW5jdGllIHZvb3IgbG9nb1xyXG4gICAgICAgICAgICAgICAgJChcIi5zaW5nbGVwcm9kdWN0X19wZWdpXCIpLmFwcGVuZChwcm9kdWN0LnBlZ2lfYWdlKTtcclxuICAgICAgICAgICAgICAgICQoXCIuc2luZ2xlcHJvZHVjdF9fZ2VucmVcIikuYXBwZW5kKHByb2R1Y3QuZ2VucmUpO1xyXG4gICAgICAgICAgICAgICAgJChcIi5zaW5nbGVwcm9kdWN0X19kZXNjclwiKS5odG1sKHByb2R1Y3QuZGVzY3JpcHRpb24pXHJcbiAgICAgICAgICAgICAgICAkKFwiLmFkZHRvY2FydFwiKS5hdHRyKFwiZGF0YS1pZFwiLCBwcm9kdWN0LmVhbl9udW1iZXIpO1xyXG4gICAgICAgICAgICAgICAgJChcIi5hZGRUb1dpc2hsaXN0QnV0dG9uXCIpLmF0dHIoXCJvbmNsaWNrXCIsIFwiV2lzaGxpc3RIZWxwZXIuYWRkSXRlbShcIiArIHByb2R1Y3QuZWFuX251bWJlciArIFwiKTtcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGQgPSBuZXcgRGF0ZShwcm9kdWN0LnJlbGVhc2VfZGF0ZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIG1vbnRocyA9IFtcImphbnVhcmlcIiwgXCJmZWJydWFyaVwiLCBcIm1hYXJ0XCIsIFwiYXByaWxcIiwgXCJtZWlcIiwgXCJqdW5pXCIsIFwianVsaVwiLCBcImF1Z3VzdHVzXCIsIFwic2VwdGVtYmVyXCIsIFwib2t0b2JlclwiLCBcIm5vdmVtYmVyXCIsIFwiZGVjZW1iZXJcIl07XHJcblxyXG4gICAgICAgICAgICAgICAgJChcIi5zaW5nbGVwcm9kdWN0X19yZWxlYXNlZGF0ZVwiKS5hcHBlbmQoZC5nZXREYXkoKSArIFwiIFwiICsgbW9udGhzW2QuZ2V0TW9udGgoKV0gKyBcIiBcIiArIGQuZ2V0RnVsbFllYXIoKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2V0QWN0aW9uTGlzdGVuZXIoYWN0aW9uKVxyXG4gICAge1xyXG4gICAgICAgIC8vIHVzZXIgZmlsbHMgaW4gcmVnaXN0ZXIgZm9ybVxyXG4gICAgICAgIC8vIHVzZXIgcHJlc3NlcyAncmVnaXN0ZXInXHJcblxyXG4gICAgICAgIC8vIGlmIHVzZXIgcHJlc3NlcyAncmVnaXN0ZXInLCBwZXJmb3JtIGFjdGlvblxyXG4gICAgICAgICQoZG9jdW1lbnQpLnJlYWR5KGFjdGlvbik7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmV0dXJuIHRoZSBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgcHJvZ3JhbXMgKHRoZSBjb250cm9sbGVyIGluIHRoaXMgY2FzZSlcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgc2V0Vmlldzogc2V0VmlldyxcclxuICAgICAgICBzZXRBY3Rpb25MaXN0ZW5lcjogc2V0QWN0aW9uTGlzdGVuZXJcclxuICAgIH1cclxufTsiLCJ2YXIgV2lzaGxpc3RWaWV3SGVscGVyID0gZnVuY3Rpb24oKVxyXG57XHJcbiAgICAvL2NoYW5nZSB2aWV3IG9mIHBhZ2VcclxuICAgIGZ1bmN0aW9uIHNldFZpZXcodmlld0RhdGEpXHJcbiAgICB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyhcIldMIFZJRVc6IEluc2lkZSBzZXRWaWV3XCIpO1xyXG4gICAgICAgIGRvY3VtZW50LnRpdGxlID0gXCJXaXNobGlzdCAtIEFaIEdhbWVzXCI7XHJcbiAgICAgICAgJChcIiNjb21wb25lbnRcIikuaHRtbCgnPGRpdiBjbGFzcz1cImNvbC0xMlwiPjxkaXYgY2xhc3M9XCJjb2wtMTJcIiBpZD1cIndpc2hsaXN0XCI+PC9kaXY+PC9kaXY+Jyk7XHJcblxyXG4gICAgICAgIGxvYWRXaXNobGlzdCh2aWV3RGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gbG9hZFdpc2hsaXN0KHZpZXdEYXRhKVxyXG4gICAge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coXCJXTCBWSUVXOiBJbnNpZGUgbG9hZFdpc2hMaXN0XCIpO1xyXG4gICAgICAgICQoXCIjd2lzaGxpc3RcIikubG9hZCgnL3ZpZXdzL3dpc2hsaXN0L3dpc2hsaXN0Lmh0bWwnLCBmdW5jdGlvbiAoKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudCA9IDBcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBVU0VSIEZJUlNUIE5BTUVcclxuICAgICAgICAgICAgICAgIC8vJCh3aXNoX19saXN0X19oZWFkdGl0bGUpLmZpbmQoXCJ3aXNoX19saXN0X19oZWFkdGl0bGVcIikuYXBwZW5kKHVzZXJfaWQpO1xyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyh2aWV3RGF0YS5maXJzdF9uYW1lKTtcclxuXHJcbiAgICAgICAgICAgICAgICAkLmVhY2godmlld0RhdGEsIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBDbG9uZSBwcm9kdWN0XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHdpc2hfX2xpc3RfX2l0ZW0gPSAkKCc8ZGl2PicpLmFwcGVuZCgkKCcjd2lzaF9fbGlzdF9faXRlbScpLmNsb25lKCkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBBZGQgcHJvZHVjdCBpbmZvXHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQgKzFcclxuICAgICAgICAgICAgICAgICAgICAkKHdpc2hfX2xpc3RfX2l0ZW0pLmZpbmQoXCIjZGVsZXRlX2J0blwiKS5hdHRyKFwiZGF0YS1pZFwiLCB2YWx1ZS5lYW5fbnVtYmVyKTtcclxuICAgICAgICAgICAgICAgICAgICAkKHdpc2hfX2xpc3RfX2l0ZW0pLmZpbmQoXCIud2lzaF9fbGlzdF9faWRcIikuYXBwZW5kKGN1cnJlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICQod2lzaF9fbGlzdF9faXRlbSkuZmluZChcIi53aXNoX19saXN0X19pbWFnZSBpbWdcIikuYXR0cihcInNyY1wiLCB2YWx1ZS5pbWFnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh3aXNoX19saXN0X19pdGVtKS5maW5kKFwiLndpc2hfX2xpc3RfX3RpdGxlXCIpLmh0bWwodmFsdWUudGl0bGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICQod2lzaF9fbGlzdF9faXRlbSkuZmluZChcIi53aXNoX19saXN0X19wcmljZVwiKS5hcHBlbmQoKFwi4oKsIFwiKSt2YWx1ZS5wcmljZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh3aXNoX19saXN0X19pdGVtKS5maW5kKFwiLndpc2hfX2xpc3RfX3BsYXRmb3JtXCIpLmFwcGVuZChQbGF0Zm9ybUxvZ28odmFsdWUucGxhdGZvcm0pKTtcclxuICAgICAgICAgICAgICAgICAgICAkKHdpc2hfX2xpc3RfX2l0ZW0pLmZpbmQoXCIud2lzaF9fbGlzdF9fYXZhaWxhYmlsaXR5XCIpLmFwcGVuZChCZXNjaGlrYmFhcmhlaWRLbGV1cih2YWx1ZS5zdG9jaykpO1xyXG4gICAgICAgICAgICAgICAgICAgICQod2lzaF9fbGlzdF9faXRlbSkuZmluZChcIi53aXNoX19saXN0X19saWtlYnV0dG9uXCIpLmFwcGVuZCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAkKFwiI3dpc2hfX2xpc3RcIikuYXBwZW5kKHdpc2hfX2xpc3RfX2l0ZW0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgZmlyc3QgbGlzdCBpdGVtLCBiZWNhdXNlIHRoaXMgaXRlbSBpcyBhbHdheXMgZW1wdHlcclxuICAgICAgICAgICAgJChcIiN3aXNoX19saXN0X19pdGVtXCIpLmZpcnN0KCkucmVtb3ZlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBzZXRBY3Rpb25MaXN0ZW5lcihhY3Rpb24pXHJcbiAgICB7XHJcbiAgICAgICAgJChkb2N1bWVudCkucmVhZHkoYWN0aW9uKTsgLy8gaWYgJ2RvY3VtZW50IHJlYWR5JyBwZXJmb3JtIFwiYWN0aW9uXCIgICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2V0RGVsZXRlTGlzdGVuZXIoYWN0aW9uKVxyXG4gICAge1xyXG4gICAgICAgICQoXCIjY29tcG9uZW50XCIpLm9mZigpLm9uKFwiY2xpY2tcIiwgXCIjZGVsZXRlX2J0blwiLCBmdW5jdGlvbihlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB2YXIgZWFuID0gJCh0aGlzKS5kYXRhKFwiaWRcIik7XHJcbiAgICAgICAgICAgIHZhciBkaXZfdG9faGlkZSA9ICQodGhpcykuY2xvc2VzdChcIi5yb3dcIik7XHJcbiAgICAgICAgICAgIGFjdGlvbihlYW4sIGRpdl90b19oaWRlKTtcclxuICAgICAgICB9ICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBzZXRWaWV3OiBzZXRWaWV3LFxyXG4gICAgICAgIGxvYWRXaXNobGlzdDogbG9hZFdpc2hsaXN0LFxyXG4gICAgICAgIHNldEFjdGlvbkxpc3RlbmVyOiBzZXRBY3Rpb25MaXN0ZW5lcixcclxuICAgICAgICBzZXREZWxldGVMaXN0ZW5lcjogc2V0RGVsZXRlTGlzdGVuZXJcclxuICAgIH1cclxufSJdfQ==
